{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/series_data_source.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar seriesModule = require(\"../series/base_series\");\n\nvar seriesFamilyModule = require(\"../core/series_family\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar inArray = require(\"../../core/utils/array\").inArray;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar rangeModule = require(\"../translators/range\");\n\nvar dataValidatorModule = require(\"../components/data_validator\");\n\nvar ChartThemeManager = require(\"../components/chart_theme_manager\").ThemeManager;\n\nvar SeriesDataSource;\n\nvar createThemeManager = function createThemeManager(chartOptions) {\n  return new ChartThemeManager({\n    options: chartOptions,\n    themeSection: \"rangeSelector.chart\",\n    fontFields: [\"commonSeriesSettings.label.font\"]\n  });\n};\n\nvar processSeriesFamilies = function processSeriesFamilies(series, equalBarWidth, minBubbleSize, maxBubbleSize, barOptions, negativesAsZeroes) {\n  var families = [];\n  var types = [];\n  each(series, function (i, item) {\n    if (inArray(item.type, types) === -1) {\n      types.push(item.type);\n    }\n  });\n  each(types, function (_, type) {\n    var family = new seriesFamilyModule.SeriesFamily({\n      type: type,\n      equalBarWidth: equalBarWidth,\n      minBubbleSize: minBubbleSize,\n      maxBubbleSize: maxBubbleSize,\n      barWidth: barOptions.barWidth,\n      barGroupPadding: barOptions.barGroupPadding,\n      barGroupWidth: barOptions.barGroupWidth,\n      negativesAsZeroes: negativesAsZeroes\n    });\n    family.add(series);\n    family.adjustSeriesValues();\n    families.push(family);\n  });\n  return families;\n};\n\nSeriesDataSource = function SeriesDataSource(options) {\n  var that = this;\n  var themeManager = that._themeManager = createThemeManager(options.chart);\n  var topIndent;\n  var bottomIndent;\n  themeManager.setTheme(options.chart.theme);\n  topIndent = themeManager.getOptions(\"topIndent\");\n  bottomIndent = themeManager.getOptions(\"bottomIndent\");\n  that._indent = {\n    top: topIndent >= 0 && topIndent < 1 ? topIndent : 0,\n    bottom: bottomIndent >= 0 && bottomIndent < 1 ? bottomIndent : 0\n  };\n  that._valueAxis = themeManager.getOptions(\"valueAxisRangeSelector\") || {};\n  that._hideChart = false;\n  that._series = that._calculateSeries(options);\n  that._seriesFamilies = [];\n};\n\nSeriesDataSource.prototype = {\n  constructor: SeriesDataSource,\n  _calculateSeries: function _calculateSeries(options) {\n    var that = this;\n    var series = [];\n    var particularSeriesOptions;\n    var seriesTheme;\n    var data = options.dataSource || [];\n    var parsedData;\n    var chartThemeManager = that._themeManager;\n    var seriesTemplate = chartThemeManager.getOptions(\"seriesTemplate\");\n    var allSeriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data) : options.chart.series;\n    var dataSourceField;\n    var valueAxis = that._valueAxis;\n    var i;\n    var newSeries;\n    var groupsData;\n\n    if (options.dataSource && !allSeriesOptions) {\n      dataSourceField = options.dataSourceField || \"arg\";\n      allSeriesOptions = {\n        argumentField: dataSourceField,\n        valueField: dataSourceField\n      };\n      that._hideChart = true;\n    }\n\n    allSeriesOptions = Array.isArray(allSeriesOptions) ? allSeriesOptions : allSeriesOptions ? [allSeriesOptions] : [];\n\n    for (i = 0; i < allSeriesOptions.length; i++) {\n      particularSeriesOptions = extend(true, {}, allSeriesOptions[i]);\n      particularSeriesOptions.rotated = false;\n      seriesTheme = chartThemeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\n      seriesTheme.argumentField = seriesTheme.argumentField || options.dataSourceField;\n\n      if (!seriesTheme.name) {\n        seriesTheme.name = \"Series \" + (i + 1).toString();\n      }\n\n      if (data && data.length > 0) {\n        newSeries = new seriesModule.Series({\n          renderer: options.renderer,\n          argumentAxis: options.argumentAxis,\n          valueAxis: options.valueAxis,\n          incidentOccurred: options.incidentOccurred\n        }, seriesTheme);\n        series.push(newSeries);\n      }\n    }\n\n    if (series.length) {\n      groupsData = {\n        groups: [{\n          series: series,\n          valueAxis: options.valueAxis,\n          valueOptions: {\n            type: valueAxis.type,\n            valueType: dataSourceField ? options.valueType : valueAxis.valueType\n          }\n        }],\n        argumentOptions: {\n          categories: options.categories,\n          argumentType: options.valueType,\n          type: options.axisType\n        }\n      };\n      parsedData = dataValidatorModule.validateData(data, groupsData, options.incidentOccurred, chartThemeManager.getOptions(\"dataPrepareSettings\"));\n      that.argCategories = groupsData.categories;\n\n      for (i = 0; i < series.length; i++) {\n        series[i].updateData(parsedData[series[i].getArgumentField()]);\n      }\n    }\n\n    return series;\n  },\n  createPoints: function createPoints() {\n    if (0 === this._series.length) {\n      return;\n    }\n\n    var series = this._series;\n    var viewport = new rangeModule.Range();\n    var axis = series[0].getArgumentAxis();\n    var themeManager = this._themeManager;\n    var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\n    var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\n    series.forEach(function (s) {\n      viewport.addRange(s.getArgumentRange());\n    });\n    axis.getTranslator().updateBusinessRange(viewport);\n    series.forEach(function (s) {\n      s.createPoints();\n    });\n    this._seriesFamilies = processSeriesFamilies(series, themeManager.getOptions(\"equalBarWidth\"), themeManager.getOptions(\"minBubbleSize\"), themeManager.getOptions(\"maxBubbleSize\"), {\n      barWidth: themeManager.getOptions(\"barWidth\"),\n      barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\n      barGroupWidth: themeManager.getOptions(\"barGroupWidth\")\n    }, typeUtils.isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros);\n  },\n  adjustSeriesDimensions: function adjustSeriesDimensions() {\n    each(this._seriesFamilies, function (_, family) {\n      family.adjustSeriesDimensions();\n    });\n  },\n  getBoundRange: function getBoundRange() {\n    var that = this;\n    var rangeData;\n    var valueAxis = that._valueAxis;\n    var valRange = new rangeModule.Range({\n      min: valueAxis.min,\n      minVisible: valueAxis.min,\n      max: valueAxis.max,\n      maxVisible: valueAxis.max,\n      axisType: valueAxis.type,\n      base: valueAxis.logarithmBase\n    });\n    var argRange = new rangeModule.Range({});\n    var rangeYSize;\n    var rangeVisibleSizeY;\n    var minIndent;\n    var maxIndent;\n    each(that._series, function (_, series) {\n      rangeData = series.getRangeData();\n      valRange.addRange(rangeData.val);\n      argRange.addRange(rangeData.arg);\n    });\n\n    if (!valRange.isEmpty() && !argRange.isEmpty()) {\n      minIndent = valueAxis.inverted ? that._indent.top : that._indent.bottom;\n      maxIndent = valueAxis.inverted ? that._indent.bottom : that._indent.top;\n      rangeYSize = valRange.max - valRange.min;\n      rangeVisibleSizeY = (typeUtils.isNumeric(valRange.maxVisible) ? valRange.maxVisible : valRange.max) - (typeUtils.isNumeric(valRange.minVisible) ? valRange.minVisible : valRange.min);\n\n      if (typeUtils.isDate(valRange.min)) {\n        valRange.min = new Date(valRange.min.valueOf() - rangeYSize * minIndent);\n      } else {\n        valRange.min -= rangeYSize * minIndent;\n      }\n\n      if (typeUtils.isDate(valRange.max)) {\n        valRange.max = new Date(valRange.max.valueOf() + rangeYSize * maxIndent);\n      } else {\n        valRange.max += rangeYSize * maxIndent;\n      }\n\n      if (typeUtils.isNumeric(rangeVisibleSizeY)) {\n        valRange.maxVisible = valRange.maxVisible ? valRange.maxVisible + rangeVisibleSizeY * maxIndent : void 0;\n        valRange.minVisible = valRange.minVisible ? valRange.minVisible - rangeVisibleSizeY * minIndent : void 0;\n      }\n\n      valRange.invert = valueAxis.inverted;\n    }\n\n    return {\n      arg: argRange,\n      val: valRange\n    };\n  },\n  getMarginOptions: function getMarginOptions(canvas) {\n    var bubbleSize = Math.min(canvas.width, canvas.height) * this._themeManager.getOptions(\"maxBubbleSize\");\n\n    return this._series.reduce(function (marginOptions, series) {\n      var seriesOptions = series.getMarginOptions();\n\n      if (true === seriesOptions.processBubbleSize) {\n        seriesOptions.size = bubbleSize;\n      }\n\n      return vizUtils.mergeMarginOptions(marginOptions, seriesOptions);\n    }, {});\n  },\n  getSeries: function getSeries() {\n    return this._series;\n  },\n  isEmpty: function isEmpty() {\n    return 0 === this.getSeries().length;\n  },\n  isShowChart: function isShowChart() {\n    return !this._hideChart;\n  },\n  getCalculatedValueType: function getCalculatedValueType() {\n    var series = this._series[0];\n    return series && series.argumentType;\n  },\n  getThemeManager: function getThemeManager() {\n    return this._themeManager;\n  }\n};\nexports.SeriesDataSource = SeriesDataSource;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/viz/range_selector/series_data_source.js"],"names":["seriesModule","require","seriesFamilyModule","typeUtils","extend","inArray","each","vizUtils","rangeModule","dataValidatorModule","ChartThemeManager","ThemeManager","SeriesDataSource","createThemeManager","chartOptions","options","themeSection","fontFields","processSeriesFamilies","series","equalBarWidth","minBubbleSize","maxBubbleSize","barOptions","negativesAsZeroes","families","types","i","item","type","push","_","family","SeriesFamily","barWidth","barGroupPadding","barGroupWidth","add","adjustSeriesValues","that","themeManager","_themeManager","chart","topIndent","bottomIndent","setTheme","theme","getOptions","_indent","top","bottom","_valueAxis","_hideChart","_series","_calculateSeries","_seriesFamilies","prototype","constructor","particularSeriesOptions","seriesTheme","data","dataSource","parsedData","chartThemeManager","seriesTemplate","allSeriesOptions","processSeriesTemplate","dataSourceField","valueAxis","newSeries","groupsData","argumentField","valueField","Array","isArray","length","rotated","name","toString","Series","renderer","argumentAxis","incidentOccurred","groups","valueOptions","valueType","argumentOptions","categories","argumentType","axisType","validateData","argCategories","updateData","getArgumentField","createPoints","viewport","Range","axis","getArgumentAxis","negativesAsZeros","forEach","s","addRange","getArgumentRange","getTranslator","updateBusinessRange","isDefined","adjustSeriesDimensions","getBoundRange","rangeData","valRange","min","minVisible","max","maxVisible","base","logarithmBase","argRange","rangeYSize","rangeVisibleSizeY","minIndent","maxIndent","getRangeData","val","arg","isEmpty","inverted","isNumeric","isDate","Date","valueOf","invert","getMarginOptions","canvas","bubbleSize","Math","width","height","reduce","marginOptions","seriesOptions","processBubbleSize","size","mergeMarginOptions","getSeries","isShowChart","getCalculatedValueType","getThemeManager","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/series_data_source.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar seriesModule = require(\"../series/base_series\");\r\nvar seriesFamilyModule = require(\"../core/series_family\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar inArray = require(\"../../core/utils/array\").inArray;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar rangeModule = require(\"../translators/range\");\r\nvar dataValidatorModule = require(\"../components/data_validator\");\r\nvar ChartThemeManager = require(\"../components/chart_theme_manager\").ThemeManager;\r\nvar SeriesDataSource;\r\nvar createThemeManager = function(chartOptions) {\r\n    return new ChartThemeManager({\r\n        options: chartOptions,\r\n        themeSection: \"rangeSelector.chart\",\r\n        fontFields: [\"commonSeriesSettings.label.font\"]\r\n    })\r\n};\r\nvar processSeriesFamilies = function(series, equalBarWidth, minBubbleSize, maxBubbleSize, barOptions, negativesAsZeroes) {\r\n    var families = [];\r\n    var types = [];\r\n    each(series, function(i, item) {\r\n        if (inArray(item.type, types) === -1) {\r\n            types.push(item.type)\r\n        }\r\n    });\r\n    each(types, function(_, type) {\r\n        var family = new seriesFamilyModule.SeriesFamily({\r\n            type: type,\r\n            equalBarWidth: equalBarWidth,\r\n            minBubbleSize: minBubbleSize,\r\n            maxBubbleSize: maxBubbleSize,\r\n            barWidth: barOptions.barWidth,\r\n            barGroupPadding: barOptions.barGroupPadding,\r\n            barGroupWidth: barOptions.barGroupWidth,\r\n            negativesAsZeroes: negativesAsZeroes\r\n        });\r\n        family.add(series);\r\n        family.adjustSeriesValues();\r\n        families.push(family)\r\n    });\r\n    return families\r\n};\r\nSeriesDataSource = function(options) {\r\n    var that = this;\r\n    var themeManager = that._themeManager = createThemeManager(options.chart);\r\n    var topIndent;\r\n    var bottomIndent;\r\n    themeManager.setTheme(options.chart.theme);\r\n    topIndent = themeManager.getOptions(\"topIndent\");\r\n    bottomIndent = themeManager.getOptions(\"bottomIndent\");\r\n    that._indent = {\r\n        top: topIndent >= 0 && topIndent < 1 ? topIndent : 0,\r\n        bottom: bottomIndent >= 0 && bottomIndent < 1 ? bottomIndent : 0\r\n    };\r\n    that._valueAxis = themeManager.getOptions(\"valueAxisRangeSelector\") || {};\r\n    that._hideChart = false;\r\n    that._series = that._calculateSeries(options);\r\n    that._seriesFamilies = []\r\n};\r\nSeriesDataSource.prototype = {\r\n    constructor: SeriesDataSource,\r\n    _calculateSeries: function(options) {\r\n        var that = this;\r\n        var series = [];\r\n        var particularSeriesOptions;\r\n        var seriesTheme;\r\n        var data = options.dataSource || [];\r\n        var parsedData;\r\n        var chartThemeManager = that._themeManager;\r\n        var seriesTemplate = chartThemeManager.getOptions(\"seriesTemplate\");\r\n        var allSeriesOptions = seriesTemplate ? vizUtils.processSeriesTemplate(seriesTemplate, data) : options.chart.series;\r\n        var dataSourceField;\r\n        var valueAxis = that._valueAxis;\r\n        var i;\r\n        var newSeries;\r\n        var groupsData;\r\n        if (options.dataSource && !allSeriesOptions) {\r\n            dataSourceField = options.dataSourceField || \"arg\";\r\n            allSeriesOptions = {\r\n                argumentField: dataSourceField,\r\n                valueField: dataSourceField\r\n            };\r\n            that._hideChart = true\r\n        }\r\n        allSeriesOptions = Array.isArray(allSeriesOptions) ? allSeriesOptions : allSeriesOptions ? [allSeriesOptions] : [];\r\n        for (i = 0; i < allSeriesOptions.length; i++) {\r\n            particularSeriesOptions = extend(true, {}, allSeriesOptions[i]);\r\n            particularSeriesOptions.rotated = false;\r\n            seriesTheme = chartThemeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\r\n            seriesTheme.argumentField = seriesTheme.argumentField || options.dataSourceField;\r\n            if (!seriesTheme.name) {\r\n                seriesTheme.name = \"Series \" + (i + 1).toString()\r\n            }\r\n            if (data && data.length > 0) {\r\n                newSeries = new seriesModule.Series({\r\n                    renderer: options.renderer,\r\n                    argumentAxis: options.argumentAxis,\r\n                    valueAxis: options.valueAxis,\r\n                    incidentOccurred: options.incidentOccurred\r\n                }, seriesTheme);\r\n                series.push(newSeries)\r\n            }\r\n        }\r\n        if (series.length) {\r\n            groupsData = {\r\n                groups: [{\r\n                    series: series,\r\n                    valueAxis: options.valueAxis,\r\n                    valueOptions: {\r\n                        type: valueAxis.type,\r\n                        valueType: dataSourceField ? options.valueType : valueAxis.valueType\r\n                    }\r\n                }],\r\n                argumentOptions: {\r\n                    categories: options.categories,\r\n                    argumentType: options.valueType,\r\n                    type: options.axisType\r\n                }\r\n            };\r\n            parsedData = dataValidatorModule.validateData(data, groupsData, options.incidentOccurred, chartThemeManager.getOptions(\"dataPrepareSettings\"));\r\n            that.argCategories = groupsData.categories;\r\n            for (i = 0; i < series.length; i++) {\r\n                series[i].updateData(parsedData[series[i].getArgumentField()])\r\n            }\r\n        }\r\n        return series\r\n    },\r\n    createPoints: function() {\r\n        if (0 === this._series.length) {\r\n            return\r\n        }\r\n        var series = this._series;\r\n        var viewport = new rangeModule.Range;\r\n        var axis = series[0].getArgumentAxis();\r\n        var themeManager = this._themeManager;\r\n        var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\r\n        var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\r\n        series.forEach(function(s) {\r\n            viewport.addRange(s.getArgumentRange())\r\n        });\r\n        axis.getTranslator().updateBusinessRange(viewport);\r\n        series.forEach(function(s) {\r\n            s.createPoints()\r\n        });\r\n        this._seriesFamilies = processSeriesFamilies(series, themeManager.getOptions(\"equalBarWidth\"), themeManager.getOptions(\"minBubbleSize\"), themeManager.getOptions(\"maxBubbleSize\"), {\r\n            barWidth: themeManager.getOptions(\"barWidth\"),\r\n            barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\r\n            barGroupWidth: themeManager.getOptions(\"barGroupWidth\")\r\n        }, typeUtils.isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros)\r\n    },\r\n    adjustSeriesDimensions: function() {\r\n        each(this._seriesFamilies, function(_, family) {\r\n            family.adjustSeriesDimensions()\r\n        })\r\n    },\r\n    getBoundRange: function() {\r\n        var that = this;\r\n        var rangeData;\r\n        var valueAxis = that._valueAxis;\r\n        var valRange = new rangeModule.Range({\r\n            min: valueAxis.min,\r\n            minVisible: valueAxis.min,\r\n            max: valueAxis.max,\r\n            maxVisible: valueAxis.max,\r\n            axisType: valueAxis.type,\r\n            base: valueAxis.logarithmBase\r\n        });\r\n        var argRange = new rangeModule.Range({});\r\n        var rangeYSize;\r\n        var rangeVisibleSizeY;\r\n        var minIndent;\r\n        var maxIndent;\r\n        each(that._series, function(_, series) {\r\n            rangeData = series.getRangeData();\r\n            valRange.addRange(rangeData.val);\r\n            argRange.addRange(rangeData.arg)\r\n        });\r\n        if (!valRange.isEmpty() && !argRange.isEmpty()) {\r\n            minIndent = valueAxis.inverted ? that._indent.top : that._indent.bottom;\r\n            maxIndent = valueAxis.inverted ? that._indent.bottom : that._indent.top;\r\n            rangeYSize = valRange.max - valRange.min;\r\n            rangeVisibleSizeY = (typeUtils.isNumeric(valRange.maxVisible) ? valRange.maxVisible : valRange.max) - (typeUtils.isNumeric(valRange.minVisible) ? valRange.minVisible : valRange.min);\r\n            if (typeUtils.isDate(valRange.min)) {\r\n                valRange.min = new Date(valRange.min.valueOf() - rangeYSize * minIndent)\r\n            } else {\r\n                valRange.min -= rangeYSize * minIndent\r\n            }\r\n            if (typeUtils.isDate(valRange.max)) {\r\n                valRange.max = new Date(valRange.max.valueOf() + rangeYSize * maxIndent)\r\n            } else {\r\n                valRange.max += rangeYSize * maxIndent\r\n            }\r\n            if (typeUtils.isNumeric(rangeVisibleSizeY)) {\r\n                valRange.maxVisible = valRange.maxVisible ? valRange.maxVisible + rangeVisibleSizeY * maxIndent : void 0;\r\n                valRange.minVisible = valRange.minVisible ? valRange.minVisible - rangeVisibleSizeY * minIndent : void 0\r\n            }\r\n            valRange.invert = valueAxis.inverted\r\n        }\r\n        return {\r\n            arg: argRange,\r\n            val: valRange\r\n        }\r\n    },\r\n    getMarginOptions: function(canvas) {\r\n        var bubbleSize = Math.min(canvas.width, canvas.height) * this._themeManager.getOptions(\"maxBubbleSize\");\r\n        return this._series.reduce(function(marginOptions, series) {\r\n            var seriesOptions = series.getMarginOptions();\r\n            if (true === seriesOptions.processBubbleSize) {\r\n                seriesOptions.size = bubbleSize\r\n            }\r\n            return vizUtils.mergeMarginOptions(marginOptions, seriesOptions)\r\n        }, {})\r\n    },\r\n    getSeries: function() {\r\n        return this._series\r\n    },\r\n    isEmpty: function() {\r\n        return 0 === this.getSeries().length\r\n    },\r\n    isShowChart: function() {\r\n        return !this._hideChart\r\n    },\r\n    getCalculatedValueType: function() {\r\n        var series = this._series[0];\r\n        return series && series.argumentType\r\n    },\r\n    getThemeManager: function() {\r\n        return this._themeManager\r\n    }\r\n};\r\nexports.SeriesDataSource = SeriesDataSource;\r\n"]},"metadata":{},"sourceType":"script"}