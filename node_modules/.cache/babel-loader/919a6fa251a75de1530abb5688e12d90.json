{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/range_selector.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _type2 = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _utils = require(\"../core/utils\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _range = require(\"../translators/range\");\n\nvar _range2 = _interopRequireDefault(_range);\n\nvar _base_axis = require(\"../axes/base_axis\");\n\nvar _base_axis2 = _interopRequireDefault(_base_axis);\n\nvar _parse_utils = require(\"../components/parse_utils\");\n\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _common = require(\"./common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _sliders_controller = require(\"./sliders_controller\");\n\nvar _sliders_controller2 = _interopRequireDefault(_sliders_controller);\n\nvar _tracker = require(\"./tracker\");\n\nvar _range_view = require(\"./range_view\");\n\nvar _range_view2 = _interopRequireDefault(_range_view);\n\nvar _series_data_source = require(\"./series_data_source\");\n\nvar _series_data_source2 = _interopRequireDefault(_series_data_source);\n\nvar _tick_generator = require(\"../axes/tick_generator\");\n\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\n\nvar _base_widget = require(\"../core/base_widget\");\n\nvar _base_widget2 = _interopRequireDefault(_base_widget);\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nvar _data_source = require(\"../core/data_source\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _max = Math.max;\nvar _ceil = Math.ceil;\nvar _floor = Math.floor;\nvar START_VALUE = \"startValue\";\nvar END_VALUE = \"endValue\";\nvar DATETIME = \"datetime\";\nvar VALUE = \"value\";\nvar DISCRETE = \"discrete\";\nvar SEMIDISCRETE = \"semidiscrete\";\nvar STRING = \"string\";\nvar VALUE_CHANGED = VALUE + \"Changed\";\nvar CONTAINER_BACKGROUND_COLOR = \"containerBackgroundColor\";\nvar SLIDER_MARKER = \"sliderMarker\";\nvar OPTION_BACKGROUND = \"background\";\nvar LOGARITHMIC = \"logarithmic\";\nvar KEEP = \"keep\";\nvar SHIFT = \"shift\";\nvar RESET = \"reset\";\nvar INVISIBLE_POS = -1e3;\nvar SEMIDISCRETE_GRID_SPACING_FACTOR = 50;\nvar DEFAULT_AXIS_DIVISION_FACTOR = 30;\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\nvar logarithmBase = 10;\n\nfunction calculateMarkerHeight(renderer, value, sliderMarkerOptions) {\n  var formattedText = void 0 === value ? _common2.default.consts.emptySliderMarkerText : _common2.default.formatValue(value, sliderMarkerOptions);\n  var textBBox = getTextBBox(renderer, formattedText, sliderMarkerOptions.font);\n  return _ceil(textBBox.height) + 2 * sliderMarkerOptions.paddingTopBottom + _common2.default.consts.pointerSize;\n}\n\nfunction calculateScaleLabelHalfWidth(renderer, value, scaleOptions, tickIntervalsInfo) {\n  var formattedText = _common2.default.formatValue(value, scaleOptions.label, tickIntervalsInfo, scaleOptions.valueType, scaleOptions.type, scaleOptions.logarithmBase);\n\n  var textBBox = getTextBBox(renderer, formattedText, scaleOptions.label.font);\n  return _ceil(textBBox.width / 2);\n}\n\nfunction calculateIndents(renderer, scale, sliderMarkerOptions, indentOptions, tickIntervalsInfo) {\n  var leftMarkerHeight;\n  var leftScaleLabelWidth = 0;\n  var rightScaleLabelWidth = 0;\n  var rightMarkerHeight;\n  var placeholderWidthLeft;\n  var placeholderWidthRight;\n  var placeholderHeight;\n  var ticks = \"semidiscrete\" === scale.type ? scale.customTicks : tickIntervalsInfo.ticks;\n  var startTickValue;\n  var endTickValue;\n  indentOptions = indentOptions || {};\n  placeholderWidthLeft = indentOptions.left;\n  placeholderWidthRight = indentOptions.right;\n  placeholderHeight = sliderMarkerOptions.placeholderHeight;\n\n  if (sliderMarkerOptions.visible) {\n    leftMarkerHeight = calculateMarkerHeight(renderer, scale.startValue, sliderMarkerOptions);\n    rightMarkerHeight = calculateMarkerHeight(renderer, scale.endValue, sliderMarkerOptions);\n\n    if (void 0 === placeholderHeight) {\n      placeholderHeight = _max(leftMarkerHeight, rightMarkerHeight);\n    }\n  }\n\n  if (scale.label.visible) {\n    startTickValue = (0, _type2.isDefined)(scale.startValue) ? ticks[0] : void 0;\n    endTickValue = (0, _type2.isDefined)(scale.endValue) ? ticks[ticks.length - 1] : void 0;\n    leftScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, startTickValue, scale, tickIntervalsInfo);\n    rightScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, endTickValue, scale, tickIntervalsInfo);\n  }\n\n  placeholderWidthLeft = void 0 !== placeholderWidthLeft ? placeholderWidthLeft : leftScaleLabelWidth;\n  placeholderWidthRight = (void 0 !== placeholderWidthRight ? placeholderWidthRight : rightScaleLabelWidth) || 1;\n  return {\n    left: placeholderWidthLeft,\n    right: placeholderWidthRight,\n    top: placeholderHeight || 0,\n    bottom: 0\n  };\n}\n\nfunction calculateValueType(firstValue, secondValue) {\n  var typeFirstValue = (0, _type2.type)(firstValue);\n  var typeSecondValue = (0, _type2.type)(secondValue);\n\n  var validType = function validType(type) {\n    return typeFirstValue === type || typeSecondValue === type;\n  };\n\n  return validType(\"date\") ? DATETIME : validType(\"number\") ? \"numeric\" : validType(STRING) ? STRING : \"\";\n}\n\nfunction showScaleMarkers(scaleOptions) {\n  return scaleOptions.valueType === DATETIME && scaleOptions.marker.visible;\n}\n\nfunction updateTranslatorRangeInterval(translatorRange, scaleOptions) {\n  var intervalX = scaleOptions.minorTickInterval || scaleOptions.tickInterval;\n\n  if (\"datetime\" === scaleOptions.valueType) {\n    intervalX = (0, _date.dateToMilliseconds)(intervalX);\n  }\n\n  translatorRange.addRange({\n    interval: intervalX\n  });\n}\n\nfunction checkLogarithmicOptions(options, defaultLogarithmBase, incidentOccurred) {\n  if (!options) {\n    return;\n  }\n\n  var logarithmBase = options.logarithmBase;\n\n  if (options.type === LOGARITHMIC && logarithmBase <= 0 || logarithmBase && !(0, _type2.isNumeric)(logarithmBase)) {\n    options.logarithmBase = defaultLogarithmBase;\n    incidentOccurred(\"E2104\");\n  } else {\n    if (options.type !== LOGARITHMIC) {\n      options.logarithmBase = void 0;\n    }\n  }\n}\n\nfunction calculateScaleAreaHeight(renderer, scaleOptions, visibleMarkers, tickIntervalsInfo) {\n  var labelScaleOptions = scaleOptions.label;\n  var markerScaleOptions = scaleOptions.marker;\n  var placeholderHeight = scaleOptions.placeholderHeight;\n  var ticks = \"semidiscrete\" === scaleOptions.type ? scaleOptions.customTicks : tickIntervalsInfo.ticks;\n\n  var text = _common2.default.formatValue(ticks[0], labelScaleOptions);\n\n  if (placeholderHeight) {\n    return placeholderHeight;\n  } else {\n    return (labelScaleOptions.visible ? labelScaleOptions.topIndent + getTextBBox(renderer, text, labelScaleOptions.font).height : 0) + (visibleMarkers ? markerScaleOptions.topIndent + markerScaleOptions.separatorHeight : 0);\n  }\n}\n\nfunction getMinorTickIntervalUnit(tickInterval, minorTickInterval, withCorrection) {\n  var interval = (0, _date.getDateUnitInterval)(minorTickInterval);\n  var majorUnit = (0, _date.getDateUnitInterval)(tickInterval);\n\n  var idx = _date.dateUnitIntervals.indexOf(interval);\n\n  if (withCorrection && interval === majorUnit && idx > 0) {\n    interval = _date.dateUnitIntervals[idx - 1];\n  }\n\n  return interval;\n}\n\nfunction getNextTickInterval(tickInterval, minorTickInterval, isDateType) {\n  if (!tickInterval) {\n    tickInterval = minorTickInterval;\n  } else {\n    if (isDateType) {\n      tickInterval = (0, _date.getNextDateUnit)(tickInterval);\n    } else {\n      tickInterval += minorTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta) {\n  var minorTickInterval = scaleOptions.minorTickInterval;\n  var tickInterval = scaleOptions.tickInterval;\n  var interval;\n  var isDateType = \"datetime\" === scaleOptions.valueType;\n  var gridSpacingFactor = scaleOptions.axisDivisionFactor || {};\n  var tickCountByInterval;\n  var tickCountByScreen;\n\n  if (!tickInterval) {\n    do {\n      interval = getNextTickInterval(tickInterval, minorTickInterval, isDateType);\n\n      if (tickInterval !== interval) {\n        tickInterval = interval;\n      } else {\n        break;\n      }\n\n      if (isDateType) {\n        interval = (0, _date.dateToMilliseconds)(tickInterval);\n      }\n\n      tickCountByInterval = _ceil((max - min) / interval);\n      tickCountByScreen = _floor(screenDelta / (gridSpacingFactor[tickInterval] || SEMIDISCRETE_GRID_SPACING_FACTOR)) || 1;\n    } while (interval && tickCountByInterval > tickCountByScreen);\n  }\n\n  return {\n    tickInterval: tickInterval,\n    minorTickInterval: minorTickInterval,\n    bounds: {\n      minVisible: min,\n      maxVisible: max\n    },\n    ticks: []\n  };\n}\n\nfunction updateTickIntervals(scaleOptions, screenDelta, incidentOccurred, range) {\n  var result;\n  var min = (0, _type2.isDefined)(range.minVisible) ? range.minVisible : range.min;\n  var max = (0, _type2.isDefined)(range.maxVisible) ? range.maxVisible : range.max;\n  var categoriesInfo = scaleOptions._categoriesInfo;\n  var ticksInfo;\n  var length;\n  var bounds = {};\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    result = calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta);\n  } else {\n    ticksInfo = _tick_generator2.default.tickGenerator({\n      axisType: scaleOptions.type,\n      dataType: scaleOptions.valueType,\n      logBase: scaleOptions.logarithmBase,\n      allowNegatives: true,\n      linearThreshold: Math.abs(scaleOptions.linearThreshold || 0),\n      axisDivisionFactor: scaleOptions.axisDivisionFactor,\n      minorAxisDivisionFactor: scaleOptions.minorAxisDivisionFactor,\n      calculateMinors: true,\n      allowDecimals: scaleOptions.allowDecimals,\n      endOnTick: scaleOptions.endOnTick,\n      incidentOccurred: incidentOccurred,\n      rangeIsEmpty: range.isEmpty()\n    })({\n      min: min,\n      max: max,\n      categories: (0, _type2.isDefined)(categoriesInfo) ? categoriesInfo.categories : []\n    }, screenDelta, scaleOptions.tickInterval, scaleOptions.forceUserTickInterval, void 0, scaleOptions.minorTickInterval, scaleOptions.minorTickCount);\n    length = ticksInfo.ticks.length;\n    bounds.minVisible = ticksInfo.ticks[0] < min ? ticksInfo.ticks[0] : min;\n    bounds.maxVisible = ticksInfo.ticks[length - 1] > max ? ticksInfo.ticks[length - 1] : max;\n    result = {\n      tickInterval: ticksInfo.tickInterval,\n      minorTickInterval: 0 === scaleOptions.minorTickInterval ? 0 : ticksInfo.minorTickInterval,\n      bounds: bounds,\n      ticks: ticksInfo.ticks\n    };\n  }\n\n  return result;\n}\n\nfunction calculateTranslatorRange(seriesDataSource, scaleOptions) {\n  var minValue;\n  var maxValue;\n  var inverted = false;\n  var startValue = scaleOptions.startValue;\n  var endValue = scaleOptions.endValue;\n  var categories;\n  var categoriesInfo;\n  var translatorRange = seriesDataSource ? seriesDataSource.getBoundRange().arg : new _range2.default.Range();\n  var rangeForCategories;\n  var isDate = \"datetime\" === scaleOptions.valueType;\n  var minRange = scaleOptions.minRange;\n\n  if (scaleOptions.type === DISCRETE) {\n    rangeForCategories = new _range2.default.Range({\n      minVisible: startValue,\n      maxVisible: endValue\n    });\n    rangeForCategories.addRange(translatorRange);\n    translatorRange = rangeForCategories;\n    categories = seriesDataSource ? seriesDataSource.argCategories : scaleOptions.categories || !seriesDataSource && startValue && endValue && [startValue, endValue];\n    categories = categories || [];\n    scaleOptions._categoriesInfo = categoriesInfo = (0, _utils.getCategoriesInfo)(categories, startValue, endValue);\n  }\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    startValue = scaleOptions.startValue = correctValueByInterval(scaleOptions.startValue, isDate, minRange);\n    endValue = scaleOptions.endValue = correctValueByInterval(scaleOptions.endValue, isDate, minRange);\n    translatorRange.minVisible = correctValueByInterval(translatorRange.minVisible, isDate, minRange);\n    translatorRange.maxVisible = correctValueByInterval(translatorRange.maxVisible, isDate, minRange);\n    translatorRange.min = correctValueByInterval(translatorRange.min, isDate, minRange);\n    translatorRange.max = correctValueByInterval(translatorRange.max, isDate, minRange);\n  }\n\n  if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\n    inverted = categoriesInfo ? categoriesInfo.inverted : startValue > endValue;\n    minValue = categoriesInfo ? categoriesInfo.start : inverted ? endValue : startValue;\n    maxValue = categoriesInfo ? categoriesInfo.end : inverted ? startValue : endValue;\n  } else {\n    if ((0, _type2.isDefined)(startValue) || (0, _type2.isDefined)(endValue)) {\n      minValue = startValue;\n      maxValue = endValue;\n    } else {\n      if (categoriesInfo) {\n        minValue = categoriesInfo.start;\n        maxValue = categoriesInfo.end;\n      }\n    }\n  }\n\n  translatorRange.addRange({\n    invert: inverted,\n    min: minValue,\n    max: maxValue,\n    minVisible: minValue,\n    maxVisible: maxValue,\n    dataType: scaleOptions.valueType\n  });\n  translatorRange.addRange({\n    categories: !seriesDataSource ? categories : void 0,\n    base: scaleOptions.logarithmBase,\n    axisType: scaleOptions.type,\n    dataType: scaleOptions.valueType\n  });\n  seriesDataSource && translatorRange.sortCategories(categories);\n  return translatorRange;\n}\n\nfunction startEndNotDefined(start, end) {\n  return !(0, _type2.isDefined)(start) || !(0, _type2.isDefined)(end);\n}\n\nfunction getTextBBox(renderer, text, fontOptions) {\n  var textElement = renderer.text(text, INVISIBLE_POS, INVISIBLE_POS).css((0, _utils.patchFontOptions)(fontOptions)).append(renderer.root);\n  var textBBox = textElement.getBBox();\n  textElement.remove();\n  return textBBox;\n}\n\nfunction getDateMarkerVisibilityChecker(screenDelta) {\n  return function (isDateScale, isMarkerVisible, min, max, tickInterval) {\n    if (isMarkerVisible && isDateScale) {\n      if (!(0, _type2.isDefined)(tickInterval) || tickInterval.years || tickInterval.months >= 6 || screenDelta / SEMIDISCRETE_GRID_SPACING_FACTOR < _ceil((max - min) / (0, _date.dateToMilliseconds)(\"year\")) + 1) {\n        isMarkerVisible = false;\n      }\n    }\n\n    return isMarkerVisible;\n  };\n}\n\nfunction updateScaleOptions(scaleOptions, seriesDataSource, translatorRange, tickIntervalsInfo, checkDateMarkerVisibility) {\n  var bounds;\n  var isEmptyInterval;\n  var categoriesInfo = scaleOptions._categoriesInfo;\n  var intervals;\n  var isDateTime = scaleOptions.valueType === DATETIME;\n\n  if (seriesDataSource && !seriesDataSource.isEmpty() && !translatorRange.isEmpty()) {\n    bounds = tickIntervalsInfo.bounds;\n    translatorRange.addRange(bounds);\n    scaleOptions.startValue = translatorRange.invert ? bounds.maxVisible : bounds.minVisible;\n    scaleOptions.endValue = translatorRange.invert ? bounds.minVisible : bounds.maxVisible;\n  }\n\n  scaleOptions.marker.visible = checkDateMarkerVisibility(isDateTime && scaleOptions.type.indexOf(DISCRETE) === -1, scaleOptions.marker.visible, scaleOptions.startValue, scaleOptions.endValue, tickIntervalsInfo.tickInterval);\n\n  if (categoriesInfo) {\n    scaleOptions.startValue = categoriesInfo.start;\n    scaleOptions.endValue = categoriesInfo.end;\n  }\n\n  if (scaleOptions.type.indexOf(DISCRETE) === -1) {\n    isEmptyInterval = (0, _type2.isDate)(scaleOptions.startValue) && (0, _type2.isDate)(scaleOptions.endValue) && scaleOptions.startValue.getTime() === scaleOptions.endValue.getTime() || scaleOptions.startValue === scaleOptions.endValue;\n  }\n\n  scaleOptions.isEmpty = startEndNotDefined(scaleOptions.startValue, scaleOptions.endValue) || isEmptyInterval;\n\n  if (scaleOptions.isEmpty) {\n    scaleOptions.startValue = scaleOptions.endValue = void 0;\n  } else {\n    scaleOptions.minorTickInterval = tickIntervalsInfo.minorTickInterval;\n    scaleOptions.tickInterval = tickIntervalsInfo.tickInterval;\n\n    if (isDateTime && (!(0, _type2.isDefined)(scaleOptions.label.format) || scaleOptions.type === SEMIDISCRETE && scaleOptions.minorTickInterval !== scaleOptions.tickInterval)) {\n      if (scaleOptions.type === DISCRETE) {\n        scaleOptions.label.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks);\n      } else {\n        if (!scaleOptions.marker.visible) {\n          scaleOptions.label.format = _format_helper2.default.getDateFormatByTickInterval(scaleOptions.startValue, scaleOptions.endValue, scaleOptions.tickInterval);\n        } else {\n          scaleOptions.label.format = (0, _date.getDateFormatByTickInterval)(scaleOptions.tickInterval);\n        }\n      }\n    }\n  }\n\n  if (scaleOptions.type === SEMIDISCRETE) {\n    intervals = getIntervalCustomTicks(scaleOptions);\n    scaleOptions.customMinorTicks = intervals.altIntervals;\n    scaleOptions.customTicks = intervals.intervals;\n    scaleOptions.customBoundTicks = [scaleOptions.customTicks[0]];\n  }\n}\n\nfunction prepareScaleOptions(scaleOption, calculatedValueType, incidentOccurred, containerColor) {\n  var parsedValue = 0;\n\n  var valueType = _parse_utils2.default.correctValueType((0, _utils.normalizeEnum)(scaleOption.valueType));\n\n  var validateStartEndValues = function validateStartEndValues(field, parser) {\n    var messageToIncidentOccurred = field === START_VALUE ? \"start\" : \"end\";\n\n    if ((0, _type2.isDefined)(scaleOption[field])) {\n      parsedValue = parser(scaleOption[field]);\n\n      if ((0, _type2.isDefined)(parsedValue)) {\n        scaleOption[field] = parsedValue;\n      } else {\n        scaleOption[field] = void 0;\n        incidentOccurred(\"E2202\", [messageToIncidentOccurred]);\n      }\n    }\n  };\n\n  valueType = calculatedValueType || valueType;\n\n  if (!valueType) {\n    valueType = calculateValueType(scaleOption.startValue, scaleOption.endValue) || \"numeric\";\n  }\n\n  if (valueType === STRING || scaleOption.categories) {\n    scaleOption.type = DISCRETE;\n    valueType = STRING;\n  }\n\n  scaleOption.containerColor = containerColor;\n  scaleOption.valueType = valueType;\n  scaleOption.dataType = valueType;\n\n  var parser = _parse_utils2.default.getParser(valueType);\n\n  validateStartEndValues(START_VALUE, parser);\n  validateStartEndValues(END_VALUE, parser);\n  checkLogarithmicOptions(scaleOption, logarithmBase, incidentOccurred);\n\n  if (!scaleOption.type) {\n    scaleOption.type = \"continuous\";\n  }\n\n  scaleOption.parser = parser;\n\n  if (scaleOption.type === SEMIDISCRETE) {\n    scaleOption.minorTick.visible = false;\n    scaleOption.minorTickInterval = scaleOption.minRange;\n    scaleOption.marker.visible = false;\n    scaleOption.maxRange = void 0;\n  }\n\n  scaleOption.forceUserTickInterval |= (0, _type2.isDefined)(scaleOption.tickInterval) && !(0, _type2.isDefined)(scaleOption.axisDivisionFactor);\n  scaleOption.axisDivisionFactor = (0, _type2.isDefined)(scaleOption.axisDivisionFactor) ? scaleOption.axisDivisionFactor : DEFAULT_AXIS_DIVISION_FACTOR;\n  scaleOption.minorAxisDivisionFactor = (0, _type2.isDefined)(scaleOption.minorAxisDivisionFactor) ? scaleOption.minorAxisDivisionFactor : DEFAULT_MINOR_AXIS_DIVISION_FACTOR;\n  return scaleOption;\n}\n\nfunction correctValueByInterval(value, isDate, interval) {\n  if ((0, _type2.isDefined)(value)) {\n    value = isDate ? (0, _date.correctDateWithUnitBeginning)(new Date(value), interval) : (0, _math.adjust)(_floor((0, _math.adjust)(value / interval)) * interval);\n  }\n\n  return value;\n}\n\nfunction getIntervalCustomTicks(options) {\n  var min = options.startValue;\n  var max = options.endValue;\n  var isDate = \"datetime\" === options.valueType;\n  var tickInterval = options.tickInterval;\n  var res = {\n    intervals: []\n  };\n\n  if (!(0, _type2.isDefined)(min) || !(0, _type2.isDefined)(max)) {\n    return res;\n  }\n\n  res.intervals = (0, _date.getSequenceByInterval)(min, max, options.minorTickInterval);\n\n  if (tickInterval !== options.minorTickInterval) {\n    res.altIntervals = res.intervals;\n    min = correctValueByInterval(min, isDate, tickInterval);\n    max = correctValueByInterval(max, isDate, tickInterval);\n    res.intervals = (0, _date.getSequenceByInterval)(min, max, tickInterval);\n    res.intervals[0] = res.altIntervals[0];\n  }\n\n  return res;\n}\n\nfunction getPrecisionForSlider(startValue, endValue, screenDelta) {\n  var d = Math.abs(endValue - startValue) / screenDelta;\n\n  var tail = d - _floor(d);\n\n  return tail > 0 ? _ceil(Math.abs((0, _math.adjust)((0, _utils.getLog)(tail, 10)))) : 0;\n}\n\nvar dxRangeSelector = _base_widget2.default.inherit({\n  _toggleParentsScrollSubscription: function _toggleParentsScrollSubscription() {},\n  _eventsMap: {\n    onValueChanged: {\n      name: VALUE_CHANGED\n    }\n  },\n  _setDeprecatedOptions: function _setDeprecatedOptions() {\n    this.callBase.apply(this, arguments);\n    (0, _extend.extend)(this._deprecatedOptions, {\n      \"chart.barWidth\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.barPadding' or 'chart.series.barPadding' option instead\"\n      },\n      \"chart.equalBarWidth\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.ignoreEmptyPoints' or 'chart.series.ignoreEmptyPoints' option instead\"\n      },\n      \"chart.useAggregation\": {\n        since: \"18.1\",\n        message: \"Use the 'chart.commonSeriesSettings.aggregation.enabled' or 'chart.series.aggregation.enabled' option instead\"\n      }\n    });\n  },\n  _rootClassPrefix: \"dxrs\",\n  _rootClass: \"dxrs-range-selector\",\n  _dataIsReady: function _dataIsReady() {\n    return this._dataIsLoaded();\n  },\n  _initialChanges: [\"DATA_SOURCE\", \"VALUE\"],\n  _themeDependentChanges: [\"MOSTLY_TOTAL\"],\n  _themeSection: \"rangeSelector\",\n  _fontFields: [\"scale.label.font\", \"sliderMarker.font\"],\n  _initCore: function _initCore() {\n    var that = this;\n    var renderer = that._renderer;\n    var root = renderer.root;\n    root.css({\n      \"touch-action\": \"pan-y\"\n    });\n    that._clipRect = renderer.clipRect();\n    var rangeViewGroup = renderer.g().attr({\n      \"class\": \"dxrs-view\"\n    }).append(root);\n    var slidersGroup = renderer.g().attr({\n      \"class\": \"dxrs-slidersContainer\",\n      \"clip-path\": that._clipRect.id\n    }).append(root);\n    var scaleGroup = renderer.g().attr({\n      \"class\": \"dxrs-scale\",\n      \"clip-path\": that._clipRect.id\n    }).append(root);\n    var scaleBreaksGroup = renderer.g().attr({\n      \"class\": \"dxrs-scale-breaks\"\n    }).append(root);\n    var trackersGroup = renderer.g().attr({\n      \"class\": \"dxrs-trackers\"\n    }).append(root);\n    that._axis = new AxisWrapper({\n      renderer: renderer,\n      root: scaleGroup,\n      scaleBreaksGroup: scaleBreaksGroup,\n      updateSelectedRange: function updateSelectedRange(range, e) {\n        that.setValue((0, _utils.convertVisualRangeObject)(range), e);\n      },\n      incidentOccurred: that._incidentOccurred\n    });\n    that._rangeView = new _range_view2.default.RangeView({\n      renderer: renderer,\n      root: rangeViewGroup,\n      translator: that._axis.getTranslator()\n    });\n    that._slidersController = new _sliders_controller2.default.SlidersController({\n      renderer: renderer,\n      root: slidersGroup,\n      trackersGroup: trackersGroup,\n      updateSelectedRange: function updateSelectedRange(range, lastSelectedRange, e) {\n        if (!that._rangeOption) {\n          that.option(VALUE, (0, _utils.convertVisualRangeObject)(range, (0, _type2.isPlainObject)(that._options[VALUE])));\n        }\n\n        that._eventTrigger(VALUE_CHANGED, {\n          value: (0, _utils.convertVisualRangeObject)(range),\n          previousValue: (0, _utils.convertVisualRangeObject)(lastSelectedRange),\n          event: e\n        });\n      },\n      axis: that._axis,\n      translator: that._axis.getTranslator()\n    });\n    that._tracker = new _tracker.Tracker({\n      renderer: renderer,\n      controller: that._slidersController\n    });\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 400,\n      height: 160\n    };\n  },\n  _disposeCore: function _disposeCore() {\n    this._axis.dispose();\n\n    this._slidersController.dispose();\n\n    this._tracker.dispose();\n  },\n  _applySize: function _applySize(rect) {\n    this._clientRect = rect.slice();\n\n    this._change([\"MOSTLY_TOTAL\"]);\n  },\n  _optionChangesMap: {\n    scale: \"SCALE\",\n    value: \"VALUE\",\n    dataSource: \"DATA_SOURCE\"\n  },\n  _optionChangesOrder: [\"SCALE\", \"DATA_SOURCE\"],\n  _change_SCALE: function _change_SCALE() {\n    this._change([\"MOSTLY_TOTAL\"]);\n  },\n  _setValueByDataSource: function _setValueByDataSource() {\n    var that = this;\n    var options = that._options;\n    var axis = that._axis;\n\n    if (options.dataSource) {\n      var selectedRangeUpdateMode = that.option(\"selectedRangeUpdateMode\");\n      var value = that.getValue();\n      var valueIsReady = (0, _type2.isDefined)(value[0]) && (0, _type2.isDefined)(value[1]);\n\n      if ((0, _type2.isDefined)(selectedRangeUpdateMode)) {\n        selectedRangeUpdateMode = (0, _utils.normalizeEnum)(selectedRangeUpdateMode);\n        that.__skipAnimation = true;\n      } else {\n        if (valueIsReady) {\n          selectedRangeUpdateMode = RESET;\n        }\n      }\n\n      if (\"auto\" === selectedRangeUpdateMode && valueIsReady) {\n        var rangesInfo = axis.allScaleSelected(value);\n\n        if (rangesInfo.startValue && rangesInfo.endValue) {\n          selectedRangeUpdateMode = RESET;\n        } else {\n          if (rangesInfo.endValue) {\n            selectedRangeUpdateMode = SHIFT;\n          } else {\n            selectedRangeUpdateMode = KEEP;\n          }\n        }\n      }\n\n      if (selectedRangeUpdateMode === RESET) {\n        options[VALUE] = null;\n      } else {\n        if (selectedRangeUpdateMode === SHIFT && valueIsReady) {\n          var _value = that.getValue();\n\n          that.__skipAnimation = true;\n          options[VALUE] = {\n            length: axis.getVisualRangeLength({\n              minVisible: _value[0],\n              maxVisible: _value[1]\n            })\n          };\n        } else {\n          if (selectedRangeUpdateMode === KEEP) {\n            that.__skipAnimation = true;\n          }\n        }\n      }\n    }\n  },\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    if (this._options.dataSource) {\n      this._updateDataSource();\n    }\n  },\n  _customChangesOrder: [\"MOSTLY_TOTAL\", \"VALUE\", \"SLIDER_SELECTION\"],\n  _change_MOSTLY_TOTAL: function _change_MOSTLY_TOTAL() {\n    this._applyMostlyTotalChange();\n  },\n  _change_SLIDER_SELECTION: function _change_SLIDER_SELECTION() {\n    var that = this;\n    var value = that._options[VALUE];\n\n    that._slidersController.setSelectedRange(value && (0, _utils.getVizRangeObject)(value));\n  },\n  _change_VALUE: function _change_VALUE() {\n    var that = this;\n    var option = that._rangeOption;\n\n    if (option) {\n      that._options[VALUE] = option;\n      that.setValue(option);\n    }\n  },\n  _validateRange: function _validateRange(start, end) {\n    var that = this;\n\n    var translator = that._axis.getTranslator();\n\n    if ((0, _type2.isDefined)(start) && !translator.isValid(start) || (0, _type2.isDefined)(end) && !translator.isValid(end)) {\n      that._incidentOccurred(\"E2203\");\n    }\n  },\n  _applyChanges: function _applyChanges() {\n    var that = this;\n    var value = that._options[VALUE];\n\n    if (that._changes.has(\"VALUE\") && value) {\n      that._rangeOption = value;\n    }\n\n    that.callBase.apply(that, arguments);\n    that._rangeOption = null;\n    that.__isResizing = that.__skipAnimation = false;\n  },\n  _applyMostlyTotalChange: function _applyMostlyTotalChange() {\n    var that = this;\n    var renderer = that._renderer;\n    var rect = that._clientRect;\n    var currentAnimationEnabled;\n    var canvas = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    if (that.__isResizing || that.__skipAnimation) {\n      currentAnimationEnabled = renderer.animationEnabled();\n      renderer.updateAnimationOptions({\n        enabled: false\n      });\n    }\n\n    that._clipRect.attr({\n      x: rect[0],\n      y: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    });\n\n    that._axis.getTranslator().update(new _range2.default.Range(), canvas, {\n      isHorizontal: true\n    });\n\n    that._updateContent({\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    });\n\n    if (that.__isResizing || that.__skipAnimation) {\n      renderer.updateAnimationOptions({\n        enabled: currentAnimationEnabled\n      });\n    }\n\n    that._drawn();\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    this._setValueByDataSource();\n\n    this._requestChange([\"MOSTLY_TOTAL\"]);\n  },\n  _completeSeriesDataSourceCreation: function _completeSeriesDataSourceCreation(scaleOptions, seriesDataSource) {\n    var rect = this._clientRect;\n    var canvas = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    this._axis.updateOptions((0, _extend.extend)({}, scaleOptions, {\n      isHorizontal: true,\n      label: {}\n    }));\n\n    seriesDataSource.isShowChart() && this._axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\n\n    this._axis.updateCanvas(canvas);\n\n    seriesDataSource.createPoints();\n  },\n  _updateContent: function _updateContent(canvas) {\n    var that = this;\n    var chartOptions = that.option(\"chart\");\n\n    var seriesDataSource = that._createSeriesDataSource(chartOptions);\n\n    var isCompactMode = !(seriesDataSource && seriesDataSource.isShowChart() || that.option(\"background.image.url\"));\n    var scaleOptions = prepareScaleOptions(that._getOption(\"scale\"), seriesDataSource && seriesDataSource.getCalculatedValueType(), that._incidentOccurred, this._getOption(\"containerBackgroundColor\", true));\n    seriesDataSource && that._completeSeriesDataSourceCreation(scaleOptions, seriesDataSource);\n    var argTranslatorRange = calculateTranslatorRange(seriesDataSource, scaleOptions);\n    var tickIntervalsInfo = updateTickIntervals(scaleOptions, canvas.width, that._incidentOccurred, argTranslatorRange);\n    var chartThemeManager = seriesDataSource && seriesDataSource.isShowChart() && seriesDataSource.getThemeManager();\n\n    if (chartThemeManager) {\n      checkLogarithmicOptions(chartOptions && chartOptions.valueAxis, chartThemeManager.getOptions(\"valueAxis\").logarithmBase, that._incidentOccurred);\n    }\n\n    updateScaleOptions(scaleOptions, seriesDataSource, argTranslatorRange, tickIntervalsInfo, getDateMarkerVisibilityChecker(canvas.width));\n    updateTranslatorRangeInterval(argTranslatorRange, scaleOptions);\n\n    var sliderMarkerOptions = that._prepareSliderMarkersOptions(scaleOptions, canvas.width, tickIntervalsInfo, argTranslatorRange);\n\n    var indents = calculateIndents(that._renderer, scaleOptions, sliderMarkerOptions, that.option(\"indent\"), tickIntervalsInfo);\n    var rangeContainerCanvas = {\n      left: canvas.left + indents.left,\n      top: canvas.top + indents.top,\n      width: canvas.left + indents.left + _max(canvas.width - indents.left - indents.right, 1),\n      height: _max(!isCompactMode ? canvas.height - indents.top - indents.bottom - calculateScaleAreaHeight(that._renderer, scaleOptions, showScaleMarkers(scaleOptions), tickIntervalsInfo) : _common2.default.HEIGHT_COMPACT_MODE, 0),\n      right: 0,\n      bottom: 0\n    };\n\n    that._axis.update(scaleOptions, isCompactMode, rangeContainerCanvas, argTranslatorRange, seriesDataSource);\n\n    scaleOptions.minorTickInterval = scaleOptions.isEmpty ? 0 : scaleOptions.minorTickInterval;\n\n    that._updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, rangeContainerCanvas, seriesDataSource);\n\n    if (chartThemeManager) {\n      chartThemeManager.dispose();\n    }\n  },\n  _updateElements: function _updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, canvas, seriesDataSource) {\n    var that = this;\n\n    var behavior = that._getOption(\"behavior\");\n\n    var shutterOptions = that._getOption(\"shutter\");\n\n    var isNotSemiDiscrete = scaleOptions.type !== SEMIDISCRETE;\n    shutterOptions.color = shutterOptions.color || that._getOption(CONTAINER_BACKGROUND_COLOR, true);\n\n    that._rangeView.update(that.option(\"background\"), that._themeManager.theme(\"background\"), canvas, isCompactMode, behavior.animationEnabled && that._renderer.animationEnabled(), seriesDataSource);\n\n    that._isUpdating = true;\n\n    that._slidersController.update([canvas.top, canvas.top + canvas.height], behavior, isCompactMode, that._getOption(\"sliderHandle\"), sliderMarkerOptions, shutterOptions, {\n      minRange: isNotSemiDiscrete ? that.option(\"scale.minRange\") : void 0,\n      maxRange: isNotSemiDiscrete ? that.option(\"scale.maxRange\") : void 0\n    }, that._axis.getFullTicks(), that._getOption(\"selectedRangeColor\", true));\n\n    that._requestChange([\"SLIDER_SELECTION\"]);\n\n    that._isUpdating = false;\n\n    that._tracker.update(!that._axis.getTranslator().getBusinessRange().isEmpty(), behavior);\n  },\n  _createSeriesDataSource: function _createSeriesDataSource(chartOptions) {\n    var that = this;\n    var seriesDataSource;\n\n    var dataSource = that._dataSourceItems();\n\n    var scaleOptions = that._getOption(\"scale\");\n\n    var valueType = scaleOptions.valueType || calculateValueType(scaleOptions.startValue, scaleOptions.endValue);\n    var valueAxis = new _base_axis2.default.Axis({\n      renderer: that._renderer,\n      axisType: \"xyAxes\",\n      drawingType: \"linear\"\n    });\n    valueAxis.updateOptions({\n      isHorizontal: false,\n      label: {},\n      categoriesSortingMethod: that._getOption(\"chart\").valueAxis.categoriesSortingMethod\n    });\n\n    if (dataSource || chartOptions && chartOptions.series) {\n      chartOptions = (0, _extend.extend)({}, chartOptions, {\n        theme: that.option(\"theme\")\n      });\n      seriesDataSource = new _series_data_source2.default.SeriesDataSource({\n        renderer: that._renderer,\n        dataSource: dataSource,\n        valueType: (0, _utils.normalizeEnum)(valueType),\n        axisType: scaleOptions.type,\n        chart: chartOptions,\n        dataSourceField: that.option(\"dataSourceField\"),\n        incidentOccurred: that._incidentOccurred,\n        categories: scaleOptions.categories,\n        argumentAxis: that._axis,\n        valueAxis: valueAxis\n      });\n    }\n\n    return seriesDataSource;\n  },\n  _prepareSliderMarkersOptions: function _prepareSliderMarkersOptions(scaleOptions, screenDelta, tickIntervalsInfo, argRange) {\n    var that = this;\n    var minorTickInterval = tickIntervalsInfo.minorTickInterval;\n    var tickInterval = tickIntervalsInfo.tickInterval;\n    var interval = tickInterval;\n    var endValue = scaleOptions.endValue;\n    var startValue = scaleOptions.startValue;\n\n    var sliderMarkerOptions = that._getOption(SLIDER_MARKER);\n\n    var doNotSnap = !that._getOption(\"behavior\").snapToTicks;\n    var isTypeDiscrete = scaleOptions.type === DISCRETE;\n    var isValueTypeDatetime = scaleOptions.valueType === DATETIME;\n    sliderMarkerOptions.borderColor = that._getOption(CONTAINER_BACKGROUND_COLOR, true);\n\n    if (!sliderMarkerOptions.format && !argRange.isEmpty()) {\n      if (doNotSnap && (0, _type2.isNumeric)(scaleOptions.startValue)) {\n        sliderMarkerOptions.format = {\n          type: \"fixedPoint\",\n          precision: getPrecisionForSlider(startValue, endValue, screenDelta)\n        };\n      }\n\n      if (isValueTypeDatetime && !isTypeDiscrete) {\n        if ((0, _type2.isDefined)(minorTickInterval) && 0 !== minorTickInterval) {\n          interval = getMinorTickIntervalUnit(tickInterval, minorTickInterval, doNotSnap);\n        }\n\n        if (!scaleOptions.marker.visible) {\n          if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\n            sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTickInterval(startValue, endValue, interval);\n          }\n        } else {\n          sliderMarkerOptions.format = (0, _date.getDateFormatByTickInterval)(interval);\n        }\n      }\n\n      if (isValueTypeDatetime && isTypeDiscrete && tickIntervalsInfo.ticks.length) {\n        sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks);\n      }\n    }\n\n    return sliderMarkerOptions;\n  },\n  getValue: function getValue() {\n    return (0, _utils.convertVisualRangeObject)(this._slidersController.getSelectedRange());\n  },\n  setValue: function setValue(value, e) {\n    var visualRange = (0, _utils.getVizRangeObject)(value);\n\n    if (!this._isUpdating && value) {\n      this._validateRange(visualRange.startValue, visualRange.endValue);\n\n      !(0, _utils.rangesAreEqual)(visualRange, this._slidersController.getSelectedRange()) && this._slidersController.setSelectedRange(visualRange, e);\n    }\n  },\n  _setContentSize: function _setContentSize() {\n    this.__isResizing = 2 === this._changes.count();\n    this.callBase.apply(this, arguments);\n  }\n});\n\n(0, _iterator.each)([\"selectedRangeColor\", \"containerBackgroundColor\", \"sliderMarker\", \"sliderHandle\", \"shutter\", OPTION_BACKGROUND, \"behavior\", \"chart\", \"indent\"], function (_, name) {\n  dxRangeSelector.prototype._optionChangesMap[name] = \"MOSTLY_TOTAL\";\n});\n\nfunction prepareAxisOptions(scaleOptions, isCompactMode, height, axisPosition) {\n  scaleOptions.marker.label.font = scaleOptions.label.font;\n  scaleOptions.color = scaleOptions.marker.color = scaleOptions.tick.color;\n  scaleOptions.opacity = scaleOptions.marker.opacity = scaleOptions.tick.opacity;\n  scaleOptions.width = scaleOptions.marker.width = scaleOptions.tick.width;\n  scaleOptions.placeholderSize = (scaleOptions.placeholderHeight || 0) + axisPosition;\n  scaleOptions.argumentType = scaleOptions.valueType;\n  scaleOptions.visible = isCompactMode;\n  scaleOptions.isHorizontal = true;\n  scaleOptions.calculateMinors = true;\n  scaleOptions.semiDiscreteInterval = scaleOptions.minRange;\n\n  if (!isCompactMode) {\n    scaleOptions.minorTick.length = scaleOptions.tick.length = height;\n  }\n\n  scaleOptions.label.indentFromAxis = scaleOptions.label.topIndent + axisPosition;\n  return scaleOptions;\n}\n\nfunction createDateMarkersEvent(scaleOptions, markerTrackers, setSelectedRange) {\n  (0, _iterator.each)(markerTrackers, function (_, value) {\n    value.on(\"dxpointerdown\", onPointerDown);\n  });\n\n  function onPointerDown(e) {\n    var range = e.target.range;\n    var minRange = scaleOptions.minRange ? (0, _date.addInterval)(range.startValue, scaleOptions.minRange) : void 0;\n    var maxRange = scaleOptions.maxRange ? (0, _date.addInterval)(range.startValue, scaleOptions.maxRange) : void 0;\n\n    if (!(minRange && minRange > range.endValue || maxRange && maxRange < range.endValue)) {\n      setSelectedRange(range, e);\n    }\n  }\n}\n\nfunction getShiftDirection() {\n  return 1;\n}\n\nfunction getTickStartPositionShift(length) {\n  return length % 2 === 1 ? -_floor(length / 2) : -length / 2;\n}\n\nfunction AxisWrapper(params) {\n  var that = this;\n  that._axis = new _base_axis2.default.Axis({\n    renderer: params.renderer,\n    axesContainerGroup: params.root,\n    scaleBreaksGroup: params.scaleBreaksGroup,\n    incidentOccurred: params.incidentOccurred,\n    axisType: \"xyAxes\",\n    drawingType: \"linear\",\n    widgetClass: \"dxrs\",\n    axisClass: \"range-selector\",\n    isArgumentAxis: true\n  });\n  that._updateSelectedRangeCallback = params.updateSelectedRange;\n  that._axis.getAxisSharpDirection = that._axis.getSharpDirectionByCoords = getShiftDirection;\n  that._axis.getTickStartPositionShift = getTickStartPositionShift;\n}\n\nAxisWrapper.prototype = {\n  constructor: AxisWrapper,\n  dispose: function dispose() {\n    this._axis.dispose();\n  },\n  calculateInterval: function calculateInterval(value, prevValue) {\n    return this._axis.calculateInterval(value, prevValue);\n  },\n  update: function update(options, isCompactMode, canvas, businessRange, seriesDataSource) {\n    var axis = this._axis;\n    axis.updateOptions(prepareAxisOptions(options, isCompactMode, canvas.height, canvas.height / 2 - _ceil(options.width / 2)));\n    axis.validate();\n    axis.setBusinessRange(businessRange, true);\n\n    if (void 0 !== seriesDataSource && seriesDataSource.isShowChart()) {\n      axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\n    }\n\n    axis.draw(canvas);\n    axis.shift({\n      left: 0,\n      bottom: -canvas.height / 2 + canvas.top\n    });\n\n    if (axis.getMarkerTrackers()) {\n      createDateMarkersEvent(options, axis.getMarkerTrackers(), this._updateSelectedRangeCallback);\n    }\n\n    axis.drawScaleBreaks({\n      start: canvas.top,\n      end: canvas.top + canvas.height\n    });\n  },\n  visualRange: function visualRange() {},\n  getViewport: function getViewport() {\n    return {};\n  },\n  allScaleSelected: function allScaleSelected(value) {\n    var _this$_axis$visualRan = this._axis.visualRange(),\n        startValue = _this$_axis$visualRan.startValue,\n        endValue = _this$_axis$visualRan.endValue;\n\n    return {\n      startValue: value[0].valueOf() === startValue.valueOf(),\n      endValue: value[1].valueOf() === endValue.valueOf()\n    };\n  },\n  getOptions: function getOptions() {\n    return this._axis.getOptions() || {};\n  }\n};\n[\"setMarginOptions\", \"getFullTicks\", \"updateCanvas\", \"updateOptions\", \"getAggregationInfo\", \"getTranslator\", \"getVisualRangeLength\", \"getVisibleArea\", \"getMarginOptions\"].forEach(function (methodName) {\n  AxisWrapper.prototype[methodName] = function () {\n    var axis = this._axis;\n    return axis[methodName].apply(axis, arguments);\n  };\n});\n(0, _component_registrator2.default)(\"dxRangeSelector\", dxRangeSelector);\nmodule.exports = dxRangeSelector;\ndxRangeSelector.addPlugin(_export.plugin);\ndxRangeSelector.addPlugin(_title.plugin);\ndxRangeSelector.addPlugin(_loading_indicator.plugin);\ndxRangeSelector.addPlugin(_data_source.plugin);","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/viz/range_selector/range_selector.js"],"names":["_component_registrator","require","_component_registrator2","_interopRequireDefault","_type2","_extend","_iterator","_utils","_date","_math","_range","_range2","_base_axis","_base_axis2","_parse_utils","_parse_utils2","_format_helper","_format_helper2","_common","_common2","_sliders_controller","_sliders_controller2","_tracker","_range_view","_range_view2","_series_data_source","_series_data_source2","_tick_generator","_tick_generator2","_base_widget","_base_widget2","_export","_title","_loading_indicator","_data_source","obj","__esModule","_max","Math","max","_ceil","ceil","_floor","floor","START_VALUE","END_VALUE","DATETIME","VALUE","DISCRETE","SEMIDISCRETE","STRING","VALUE_CHANGED","CONTAINER_BACKGROUND_COLOR","SLIDER_MARKER","OPTION_BACKGROUND","LOGARITHMIC","KEEP","SHIFT","RESET","INVISIBLE_POS","SEMIDISCRETE_GRID_SPACING_FACTOR","DEFAULT_AXIS_DIVISION_FACTOR","DEFAULT_MINOR_AXIS_DIVISION_FACTOR","logarithmBase","calculateMarkerHeight","renderer","value","sliderMarkerOptions","formattedText","default","consts","emptySliderMarkerText","formatValue","textBBox","getTextBBox","font","height","paddingTopBottom","pointerSize","calculateScaleLabelHalfWidth","scaleOptions","tickIntervalsInfo","label","valueType","type","width","calculateIndents","scale","indentOptions","leftMarkerHeight","leftScaleLabelWidth","rightScaleLabelWidth","rightMarkerHeight","placeholderWidthLeft","placeholderWidthRight","placeholderHeight","ticks","customTicks","startTickValue","endTickValue","left","right","visible","startValue","endValue","isDefined","length","top","bottom","calculateValueType","firstValue","secondValue","typeFirstValue","typeSecondValue","validType","showScaleMarkers","marker","updateTranslatorRangeInterval","translatorRange","intervalX","minorTickInterval","tickInterval","dateToMilliseconds","addRange","interval","checkLogarithmicOptions","options","defaultLogarithmBase","incidentOccurred","isNumeric","calculateScaleAreaHeight","visibleMarkers","labelScaleOptions","markerScaleOptions","text","topIndent","separatorHeight","getMinorTickIntervalUnit","withCorrection","getDateUnitInterval","majorUnit","idx","dateUnitIntervals","indexOf","getNextTickInterval","isDateType","getNextDateUnit","calculateTickIntervalsForSemidiscreteScale","min","screenDelta","gridSpacingFactor","axisDivisionFactor","tickCountByInterval","tickCountByScreen","bounds","minVisible","maxVisible","updateTickIntervals","range","result","categoriesInfo","_categoriesInfo","ticksInfo","tickGenerator","axisType","dataType","logBase","allowNegatives","linearThreshold","abs","minorAxisDivisionFactor","calculateMinors","allowDecimals","endOnTick","rangeIsEmpty","isEmpty","categories","forceUserTickInterval","minorTickCount","calculateTranslatorRange","seriesDataSource","minValue","maxValue","inverted","getBoundRange","arg","Range","rangeForCategories","isDate","minRange","argCategories","getCategoriesInfo","correctValueByInterval","start","end","invert","base","sortCategories","startEndNotDefined","fontOptions","textElement","css","patchFontOptions","append","root","getBBox","remove","getDateMarkerVisibilityChecker","isDateScale","isMarkerVisible","years","months","updateScaleOptions","checkDateMarkerVisibility","isEmptyInterval","intervals","isDateTime","getTime","format","getDateFormatByTicks","getDateFormatByTickInterval","getIntervalCustomTicks","customMinorTicks","altIntervals","customBoundTicks","prepareScaleOptions","scaleOption","calculatedValueType","containerColor","parsedValue","correctValueType","normalizeEnum","validateStartEndValues","field","parser","messageToIncidentOccurred","getParser","minorTick","maxRange","correctDateWithUnitBeginning","Date","adjust","res","getSequenceByInterval","getPrecisionForSlider","d","tail","getLog","dxRangeSelector","inherit","_toggleParentsScrollSubscription","_eventsMap","onValueChanged","name","_setDeprecatedOptions","callBase","apply","arguments","extend","_deprecatedOptions","since","message","_rootClassPrefix","_rootClass","_dataIsReady","_dataIsLoaded","_initialChanges","_themeDependentChanges","_themeSection","_fontFields","_initCore","that","_renderer","_clipRect","clipRect","rangeViewGroup","g","attr","slidersGroup","id","scaleGroup","scaleBreaksGroup","trackersGroup","_axis","AxisWrapper","updateSelectedRange","e","setValue","convertVisualRangeObject","_incidentOccurred","_rangeView","RangeView","translator","getTranslator","_slidersController","SlidersController","lastSelectedRange","_rangeOption","option","isPlainObject","_options","_eventTrigger","previousValue","event","axis","Tracker","controller","_getDefaultSize","_disposeCore","dispose","_applySize","rect","_clientRect","slice","_change","_optionChangesMap","dataSource","_optionChangesOrder","_change_SCALE","_setValueByDataSource","selectedRangeUpdateMode","getValue","valueIsReady","__skipAnimation","rangesInfo","allScaleSelected","_value","getVisualRangeLength","_change_DATA_SOURCE","_updateDataSource","_customChangesOrder","_change_MOSTLY_TOTAL","_applyMostlyTotalChange","_change_SLIDER_SELECTION","setSelectedRange","getVizRangeObject","_change_VALUE","_validateRange","isValid","_applyChanges","_changes","has","__isResizing","currentAnimationEnabled","canvas","animationEnabled","updateAnimationOptions","enabled","x","y","update","isHorizontal","_updateContent","_drawn","_dataSourceChangedHandler","_requestChange","_completeSeriesDataSourceCreation","updateOptions","isShowChart","setMarginOptions","getMarginOptions","updateCanvas","createPoints","chartOptions","_createSeriesDataSource","isCompactMode","_getOption","getCalculatedValueType","argTranslatorRange","chartThemeManager","getThemeManager","valueAxis","getOptions","_prepareSliderMarkersOptions","indents","rangeContainerCanvas","HEIGHT_COMPACT_MODE","_updateElements","behavior","shutterOptions","isNotSemiDiscrete","color","_themeManager","theme","_isUpdating","getFullTicks","getBusinessRange","_dataSourceItems","Axis","drawingType","categoriesSortingMethod","series","SeriesDataSource","chart","dataSourceField","argumentAxis","argRange","doNotSnap","snapToTicks","isTypeDiscrete","isValueTypeDatetime","borderColor","precision","getSelectedRange","visualRange","rangesAreEqual","_setContentSize","count","each","_","prototype","prepareAxisOptions","axisPosition","tick","opacity","placeholderSize","argumentType","semiDiscreteInterval","indentFromAxis","createDateMarkersEvent","markerTrackers","on","onPointerDown","target","addInterval","getShiftDirection","getTickStartPositionShift","params","axesContainerGroup","widgetClass","axisClass","isArgumentAxis","_updateSelectedRangeCallback","getAxisSharpDirection","getSharpDirectionByCoords","constructor","calculateInterval","prevValue","businessRange","validate","setBusinessRange","draw","shift","getMarkerTrackers","drawScaleBreaks","getViewport","_this$_axis$visualRan","valueOf","forEach","methodName","module","exports","addPlugin","plugin"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/range_selector.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _type2 = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _utils = require(\"../core/utils\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _range = require(\"../translators/range\");\r\nvar _range2 = _interopRequireDefault(_range);\r\nvar _base_axis = require(\"../axes/base_axis\");\r\nvar _base_axis2 = _interopRequireDefault(_base_axis);\r\nvar _parse_utils = require(\"../components/parse_utils\");\r\nvar _parse_utils2 = _interopRequireDefault(_parse_utils);\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _common = require(\"./common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _sliders_controller = require(\"./sliders_controller\");\r\nvar _sliders_controller2 = _interopRequireDefault(_sliders_controller);\r\nvar _tracker = require(\"./tracker\");\r\nvar _range_view = require(\"./range_view\");\r\nvar _range_view2 = _interopRequireDefault(_range_view);\r\nvar _series_data_source = require(\"./series_data_source\");\r\nvar _series_data_source2 = _interopRequireDefault(_series_data_source);\r\nvar _tick_generator = require(\"../axes/tick_generator\");\r\nvar _tick_generator2 = _interopRequireDefault(_tick_generator);\r\nvar _base_widget = require(\"../core/base_widget\");\r\nvar _base_widget2 = _interopRequireDefault(_base_widget);\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\nvar _data_source = require(\"../core/data_source\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _max = Math.max;\r\nvar _ceil = Math.ceil;\r\nvar _floor = Math.floor;\r\nvar START_VALUE = \"startValue\";\r\nvar END_VALUE = \"endValue\";\r\nvar DATETIME = \"datetime\";\r\nvar VALUE = \"value\";\r\nvar DISCRETE = \"discrete\";\r\nvar SEMIDISCRETE = \"semidiscrete\";\r\nvar STRING = \"string\";\r\nvar VALUE_CHANGED = VALUE + \"Changed\";\r\nvar CONTAINER_BACKGROUND_COLOR = \"containerBackgroundColor\";\r\nvar SLIDER_MARKER = \"sliderMarker\";\r\nvar OPTION_BACKGROUND = \"background\";\r\nvar LOGARITHMIC = \"logarithmic\";\r\nvar KEEP = \"keep\";\r\nvar SHIFT = \"shift\";\r\nvar RESET = \"reset\";\r\nvar INVISIBLE_POS = -1e3;\r\nvar SEMIDISCRETE_GRID_SPACING_FACTOR = 50;\r\nvar DEFAULT_AXIS_DIVISION_FACTOR = 30;\r\nvar DEFAULT_MINOR_AXIS_DIVISION_FACTOR = 15;\r\nvar logarithmBase = 10;\r\n\r\nfunction calculateMarkerHeight(renderer, value, sliderMarkerOptions) {\r\n    var formattedText = void 0 === value ? _common2.default.consts.emptySliderMarkerText : _common2.default.formatValue(value, sliderMarkerOptions);\r\n    var textBBox = getTextBBox(renderer, formattedText, sliderMarkerOptions.font);\r\n    return _ceil(textBBox.height) + 2 * sliderMarkerOptions.paddingTopBottom + _common2.default.consts.pointerSize\r\n}\r\n\r\nfunction calculateScaleLabelHalfWidth(renderer, value, scaleOptions, tickIntervalsInfo) {\r\n    var formattedText = _common2.default.formatValue(value, scaleOptions.label, tickIntervalsInfo, scaleOptions.valueType, scaleOptions.type, scaleOptions.logarithmBase);\r\n    var textBBox = getTextBBox(renderer, formattedText, scaleOptions.label.font);\r\n    return _ceil(textBBox.width / 2)\r\n}\r\n\r\nfunction calculateIndents(renderer, scale, sliderMarkerOptions, indentOptions, tickIntervalsInfo) {\r\n    var leftMarkerHeight;\r\n    var leftScaleLabelWidth = 0;\r\n    var rightScaleLabelWidth = 0;\r\n    var rightMarkerHeight;\r\n    var placeholderWidthLeft;\r\n    var placeholderWidthRight;\r\n    var placeholderHeight;\r\n    var ticks = \"semidiscrete\" === scale.type ? scale.customTicks : tickIntervalsInfo.ticks;\r\n    var startTickValue;\r\n    var endTickValue;\r\n    indentOptions = indentOptions || {};\r\n    placeholderWidthLeft = indentOptions.left;\r\n    placeholderWidthRight = indentOptions.right;\r\n    placeholderHeight = sliderMarkerOptions.placeholderHeight;\r\n    if (sliderMarkerOptions.visible) {\r\n        leftMarkerHeight = calculateMarkerHeight(renderer, scale.startValue, sliderMarkerOptions);\r\n        rightMarkerHeight = calculateMarkerHeight(renderer, scale.endValue, sliderMarkerOptions);\r\n        if (void 0 === placeholderHeight) {\r\n            placeholderHeight = _max(leftMarkerHeight, rightMarkerHeight)\r\n        }\r\n    }\r\n    if (scale.label.visible) {\r\n        startTickValue = (0, _type2.isDefined)(scale.startValue) ? ticks[0] : void 0;\r\n        endTickValue = (0, _type2.isDefined)(scale.endValue) ? ticks[ticks.length - 1] : void 0;\r\n        leftScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, startTickValue, scale, tickIntervalsInfo);\r\n        rightScaleLabelWidth = calculateScaleLabelHalfWidth(renderer, endTickValue, scale, tickIntervalsInfo)\r\n    }\r\n    placeholderWidthLeft = void 0 !== placeholderWidthLeft ? placeholderWidthLeft : leftScaleLabelWidth;\r\n    placeholderWidthRight = (void 0 !== placeholderWidthRight ? placeholderWidthRight : rightScaleLabelWidth) || 1;\r\n    return {\r\n        left: placeholderWidthLeft,\r\n        right: placeholderWidthRight,\r\n        top: placeholderHeight || 0,\r\n        bottom: 0\r\n    }\r\n}\r\n\r\nfunction calculateValueType(firstValue, secondValue) {\r\n    var typeFirstValue = (0, _type2.type)(firstValue);\r\n    var typeSecondValue = (0, _type2.type)(secondValue);\r\n    var validType = function(type) {\r\n        return typeFirstValue === type || typeSecondValue === type\r\n    };\r\n    return validType(\"date\") ? DATETIME : validType(\"number\") ? \"numeric\" : validType(STRING) ? STRING : \"\"\r\n}\r\n\r\nfunction showScaleMarkers(scaleOptions) {\r\n    return scaleOptions.valueType === DATETIME && scaleOptions.marker.visible\r\n}\r\n\r\nfunction updateTranslatorRangeInterval(translatorRange, scaleOptions) {\r\n    var intervalX = scaleOptions.minorTickInterval || scaleOptions.tickInterval;\r\n    if (\"datetime\" === scaleOptions.valueType) {\r\n        intervalX = (0, _date.dateToMilliseconds)(intervalX)\r\n    }\r\n    translatorRange.addRange({\r\n        interval: intervalX\r\n    })\r\n}\r\n\r\nfunction checkLogarithmicOptions(options, defaultLogarithmBase, incidentOccurred) {\r\n    if (!options) {\r\n        return\r\n    }\r\n    var logarithmBase = options.logarithmBase;\r\n    if (options.type === LOGARITHMIC && logarithmBase <= 0 || logarithmBase && !(0, _type2.isNumeric)(logarithmBase)) {\r\n        options.logarithmBase = defaultLogarithmBase;\r\n        incidentOccurred(\"E2104\")\r\n    } else {\r\n        if (options.type !== LOGARITHMIC) {\r\n            options.logarithmBase = void 0\r\n        }\r\n    }\r\n}\r\n\r\nfunction calculateScaleAreaHeight(renderer, scaleOptions, visibleMarkers, tickIntervalsInfo) {\r\n    var labelScaleOptions = scaleOptions.label;\r\n    var markerScaleOptions = scaleOptions.marker;\r\n    var placeholderHeight = scaleOptions.placeholderHeight;\r\n    var ticks = \"semidiscrete\" === scaleOptions.type ? scaleOptions.customTicks : tickIntervalsInfo.ticks;\r\n    var text = _common2.default.formatValue(ticks[0], labelScaleOptions);\r\n    if (placeholderHeight) {\r\n        return placeholderHeight\r\n    } else {\r\n        return (labelScaleOptions.visible ? labelScaleOptions.topIndent + getTextBBox(renderer, text, labelScaleOptions.font).height : 0) + (visibleMarkers ? markerScaleOptions.topIndent + markerScaleOptions.separatorHeight : 0)\r\n    }\r\n}\r\n\r\nfunction getMinorTickIntervalUnit(tickInterval, minorTickInterval, withCorrection) {\r\n    var interval = (0, _date.getDateUnitInterval)(minorTickInterval);\r\n    var majorUnit = (0, _date.getDateUnitInterval)(tickInterval);\r\n    var idx = _date.dateUnitIntervals.indexOf(interval);\r\n    if (withCorrection && interval === majorUnit && idx > 0) {\r\n        interval = _date.dateUnitIntervals[idx - 1]\r\n    }\r\n    return interval\r\n}\r\n\r\nfunction getNextTickInterval(tickInterval, minorTickInterval, isDateType) {\r\n    if (!tickInterval) {\r\n        tickInterval = minorTickInterval\r\n    } else {\r\n        if (isDateType) {\r\n            tickInterval = (0, _date.getNextDateUnit)(tickInterval)\r\n        } else {\r\n            tickInterval += minorTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta) {\r\n    var minorTickInterval = scaleOptions.minorTickInterval;\r\n    var tickInterval = scaleOptions.tickInterval;\r\n    var interval;\r\n    var isDateType = \"datetime\" === scaleOptions.valueType;\r\n    var gridSpacingFactor = scaleOptions.axisDivisionFactor || {};\r\n    var tickCountByInterval;\r\n    var tickCountByScreen;\r\n    if (!tickInterval) {\r\n        do {\r\n            interval = getNextTickInterval(tickInterval, minorTickInterval, isDateType);\r\n            if (tickInterval !== interval) {\r\n                tickInterval = interval\r\n            } else {\r\n                break\r\n            }\r\n            if (isDateType) {\r\n                interval = (0, _date.dateToMilliseconds)(tickInterval)\r\n            }\r\n            tickCountByInterval = _ceil((max - min) / interval);\r\n            tickCountByScreen = _floor(screenDelta / (gridSpacingFactor[tickInterval] || SEMIDISCRETE_GRID_SPACING_FACTOR)) || 1\r\n        } while (interval && tickCountByInterval > tickCountByScreen)\r\n    }\r\n    return {\r\n        tickInterval: tickInterval,\r\n        minorTickInterval: minorTickInterval,\r\n        bounds: {\r\n            minVisible: min,\r\n            maxVisible: max\r\n        },\r\n        ticks: []\r\n    }\r\n}\r\n\r\nfunction updateTickIntervals(scaleOptions, screenDelta, incidentOccurred, range) {\r\n    var result;\r\n    var min = (0, _type2.isDefined)(range.minVisible) ? range.minVisible : range.min;\r\n    var max = (0, _type2.isDefined)(range.maxVisible) ? range.maxVisible : range.max;\r\n    var categoriesInfo = scaleOptions._categoriesInfo;\r\n    var ticksInfo;\r\n    var length;\r\n    var bounds = {};\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        result = calculateTickIntervalsForSemidiscreteScale(scaleOptions, min, max, screenDelta)\r\n    } else {\r\n        ticksInfo = _tick_generator2.default.tickGenerator({\r\n            axisType: scaleOptions.type,\r\n            dataType: scaleOptions.valueType,\r\n            logBase: scaleOptions.logarithmBase,\r\n            allowNegatives: true,\r\n            linearThreshold: Math.abs(scaleOptions.linearThreshold || 0),\r\n            axisDivisionFactor: scaleOptions.axisDivisionFactor,\r\n            minorAxisDivisionFactor: scaleOptions.minorAxisDivisionFactor,\r\n            calculateMinors: true,\r\n            allowDecimals: scaleOptions.allowDecimals,\r\n            endOnTick: scaleOptions.endOnTick,\r\n            incidentOccurred: incidentOccurred,\r\n            rangeIsEmpty: range.isEmpty()\r\n        })({\r\n            min: min,\r\n            max: max,\r\n            categories: (0, _type2.isDefined)(categoriesInfo) ? categoriesInfo.categories : []\r\n        }, screenDelta, scaleOptions.tickInterval, scaleOptions.forceUserTickInterval, void 0, scaleOptions.minorTickInterval, scaleOptions.minorTickCount);\r\n        length = ticksInfo.ticks.length;\r\n        bounds.minVisible = ticksInfo.ticks[0] < min ? ticksInfo.ticks[0] : min;\r\n        bounds.maxVisible = ticksInfo.ticks[length - 1] > max ? ticksInfo.ticks[length - 1] : max;\r\n        result = {\r\n            tickInterval: ticksInfo.tickInterval,\r\n            minorTickInterval: 0 === scaleOptions.minorTickInterval ? 0 : ticksInfo.minorTickInterval,\r\n            bounds: bounds,\r\n            ticks: ticksInfo.ticks\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateTranslatorRange(seriesDataSource, scaleOptions) {\r\n    var minValue;\r\n    var maxValue;\r\n    var inverted = false;\r\n    var startValue = scaleOptions.startValue;\r\n    var endValue = scaleOptions.endValue;\r\n    var categories;\r\n    var categoriesInfo;\r\n    var translatorRange = seriesDataSource ? seriesDataSource.getBoundRange().arg : new _range2.default.Range;\r\n    var rangeForCategories;\r\n    var isDate = \"datetime\" === scaleOptions.valueType;\r\n    var minRange = scaleOptions.minRange;\r\n    if (scaleOptions.type === DISCRETE) {\r\n        rangeForCategories = new _range2.default.Range({\r\n            minVisible: startValue,\r\n            maxVisible: endValue\r\n        });\r\n        rangeForCategories.addRange(translatorRange);\r\n        translatorRange = rangeForCategories;\r\n        categories = seriesDataSource ? seriesDataSource.argCategories : scaleOptions.categories || !seriesDataSource && startValue && endValue && [startValue, endValue];\r\n        categories = categories || [];\r\n        scaleOptions._categoriesInfo = categoriesInfo = (0, _utils.getCategoriesInfo)(categories, startValue, endValue)\r\n    }\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        startValue = scaleOptions.startValue = correctValueByInterval(scaleOptions.startValue, isDate, minRange);\r\n        endValue = scaleOptions.endValue = correctValueByInterval(scaleOptions.endValue, isDate, minRange);\r\n        translatorRange.minVisible = correctValueByInterval(translatorRange.minVisible, isDate, minRange);\r\n        translatorRange.maxVisible = correctValueByInterval(translatorRange.maxVisible, isDate, minRange);\r\n        translatorRange.min = correctValueByInterval(translatorRange.min, isDate, minRange);\r\n        translatorRange.max = correctValueByInterval(translatorRange.max, isDate, minRange)\r\n    }\r\n    if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\r\n        inverted = categoriesInfo ? categoriesInfo.inverted : startValue > endValue;\r\n        minValue = categoriesInfo ? categoriesInfo.start : inverted ? endValue : startValue;\r\n        maxValue = categoriesInfo ? categoriesInfo.end : inverted ? startValue : endValue\r\n    } else {\r\n        if ((0, _type2.isDefined)(startValue) || (0, _type2.isDefined)(endValue)) {\r\n            minValue = startValue;\r\n            maxValue = endValue\r\n        } else {\r\n            if (categoriesInfo) {\r\n                minValue = categoriesInfo.start;\r\n                maxValue = categoriesInfo.end\r\n            }\r\n        }\r\n    }\r\n    translatorRange.addRange({\r\n        invert: inverted,\r\n        min: minValue,\r\n        max: maxValue,\r\n        minVisible: minValue,\r\n        maxVisible: maxValue,\r\n        dataType: scaleOptions.valueType\r\n    });\r\n    translatorRange.addRange({\r\n        categories: !seriesDataSource ? categories : void 0,\r\n        base: scaleOptions.logarithmBase,\r\n        axisType: scaleOptions.type,\r\n        dataType: scaleOptions.valueType\r\n    });\r\n    seriesDataSource && translatorRange.sortCategories(categories);\r\n    return translatorRange\r\n}\r\n\r\nfunction startEndNotDefined(start, end) {\r\n    return !(0, _type2.isDefined)(start) || !(0, _type2.isDefined)(end)\r\n}\r\n\r\nfunction getTextBBox(renderer, text, fontOptions) {\r\n    var textElement = renderer.text(text, INVISIBLE_POS, INVISIBLE_POS).css((0, _utils.patchFontOptions)(fontOptions)).append(renderer.root);\r\n    var textBBox = textElement.getBBox();\r\n    textElement.remove();\r\n    return textBBox\r\n}\r\n\r\nfunction getDateMarkerVisibilityChecker(screenDelta) {\r\n    return function(isDateScale, isMarkerVisible, min, max, tickInterval) {\r\n        if (isMarkerVisible && isDateScale) {\r\n            if (!(0, _type2.isDefined)(tickInterval) || tickInterval.years || tickInterval.months >= 6 || screenDelta / SEMIDISCRETE_GRID_SPACING_FACTOR < _ceil((max - min) / (0, _date.dateToMilliseconds)(\"year\")) + 1) {\r\n                isMarkerVisible = false\r\n            }\r\n        }\r\n        return isMarkerVisible\r\n    }\r\n}\r\n\r\nfunction updateScaleOptions(scaleOptions, seriesDataSource, translatorRange, tickIntervalsInfo, checkDateMarkerVisibility) {\r\n    var bounds;\r\n    var isEmptyInterval;\r\n    var categoriesInfo = scaleOptions._categoriesInfo;\r\n    var intervals;\r\n    var isDateTime = scaleOptions.valueType === DATETIME;\r\n    if (seriesDataSource && !seriesDataSource.isEmpty() && !translatorRange.isEmpty()) {\r\n        bounds = tickIntervalsInfo.bounds;\r\n        translatorRange.addRange(bounds);\r\n        scaleOptions.startValue = translatorRange.invert ? bounds.maxVisible : bounds.minVisible;\r\n        scaleOptions.endValue = translatorRange.invert ? bounds.minVisible : bounds.maxVisible\r\n    }\r\n    scaleOptions.marker.visible = checkDateMarkerVisibility(isDateTime && scaleOptions.type.indexOf(DISCRETE) === -1, scaleOptions.marker.visible, scaleOptions.startValue, scaleOptions.endValue, tickIntervalsInfo.tickInterval);\r\n    if (categoriesInfo) {\r\n        scaleOptions.startValue = categoriesInfo.start;\r\n        scaleOptions.endValue = categoriesInfo.end\r\n    }\r\n    if (scaleOptions.type.indexOf(DISCRETE) === -1) {\r\n        isEmptyInterval = (0, _type2.isDate)(scaleOptions.startValue) && (0, _type2.isDate)(scaleOptions.endValue) && scaleOptions.startValue.getTime() === scaleOptions.endValue.getTime() || scaleOptions.startValue === scaleOptions.endValue\r\n    }\r\n    scaleOptions.isEmpty = startEndNotDefined(scaleOptions.startValue, scaleOptions.endValue) || isEmptyInterval;\r\n    if (scaleOptions.isEmpty) {\r\n        scaleOptions.startValue = scaleOptions.endValue = void 0\r\n    } else {\r\n        scaleOptions.minorTickInterval = tickIntervalsInfo.minorTickInterval;\r\n        scaleOptions.tickInterval = tickIntervalsInfo.tickInterval;\r\n        if (isDateTime && (!(0, _type2.isDefined)(scaleOptions.label.format) || scaleOptions.type === SEMIDISCRETE && scaleOptions.minorTickInterval !== scaleOptions.tickInterval)) {\r\n            if (scaleOptions.type === DISCRETE) {\r\n                scaleOptions.label.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks)\r\n            } else {\r\n                if (!scaleOptions.marker.visible) {\r\n                    scaleOptions.label.format = _format_helper2.default.getDateFormatByTickInterval(scaleOptions.startValue, scaleOptions.endValue, scaleOptions.tickInterval)\r\n                } else {\r\n                    scaleOptions.label.format = (0, _date.getDateFormatByTickInterval)(scaleOptions.tickInterval)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (scaleOptions.type === SEMIDISCRETE) {\r\n        intervals = getIntervalCustomTicks(scaleOptions);\r\n        scaleOptions.customMinorTicks = intervals.altIntervals;\r\n        scaleOptions.customTicks = intervals.intervals;\r\n        scaleOptions.customBoundTicks = [scaleOptions.customTicks[0]]\r\n    }\r\n}\r\n\r\nfunction prepareScaleOptions(scaleOption, calculatedValueType, incidentOccurred, containerColor) {\r\n    var parsedValue = 0;\r\n    var valueType = _parse_utils2.default.correctValueType((0, _utils.normalizeEnum)(scaleOption.valueType));\r\n    var validateStartEndValues = function(field, parser) {\r\n        var messageToIncidentOccurred = field === START_VALUE ? \"start\" : \"end\";\r\n        if ((0, _type2.isDefined)(scaleOption[field])) {\r\n            parsedValue = parser(scaleOption[field]);\r\n            if ((0, _type2.isDefined)(parsedValue)) {\r\n                scaleOption[field] = parsedValue\r\n            } else {\r\n                scaleOption[field] = void 0;\r\n                incidentOccurred(\"E2202\", [messageToIncidentOccurred])\r\n            }\r\n        }\r\n    };\r\n    valueType = calculatedValueType || valueType;\r\n    if (!valueType) {\r\n        valueType = calculateValueType(scaleOption.startValue, scaleOption.endValue) || \"numeric\"\r\n    }\r\n    if (valueType === STRING || scaleOption.categories) {\r\n        scaleOption.type = DISCRETE;\r\n        valueType = STRING\r\n    }\r\n    scaleOption.containerColor = containerColor;\r\n    scaleOption.valueType = valueType;\r\n    scaleOption.dataType = valueType;\r\n    var parser = _parse_utils2.default.getParser(valueType);\r\n    validateStartEndValues(START_VALUE, parser);\r\n    validateStartEndValues(END_VALUE, parser);\r\n    checkLogarithmicOptions(scaleOption, logarithmBase, incidentOccurred);\r\n    if (!scaleOption.type) {\r\n        scaleOption.type = \"continuous\"\r\n    }\r\n    scaleOption.parser = parser;\r\n    if (scaleOption.type === SEMIDISCRETE) {\r\n        scaleOption.minorTick.visible = false;\r\n        scaleOption.minorTickInterval = scaleOption.minRange;\r\n        scaleOption.marker.visible = false;\r\n        scaleOption.maxRange = void 0\r\n    }\r\n    scaleOption.forceUserTickInterval |= (0, _type2.isDefined)(scaleOption.tickInterval) && !(0, _type2.isDefined)(scaleOption.axisDivisionFactor);\r\n    scaleOption.axisDivisionFactor = (0, _type2.isDefined)(scaleOption.axisDivisionFactor) ? scaleOption.axisDivisionFactor : DEFAULT_AXIS_DIVISION_FACTOR;\r\n    scaleOption.minorAxisDivisionFactor = (0, _type2.isDefined)(scaleOption.minorAxisDivisionFactor) ? scaleOption.minorAxisDivisionFactor : DEFAULT_MINOR_AXIS_DIVISION_FACTOR;\r\n    return scaleOption\r\n}\r\n\r\nfunction correctValueByInterval(value, isDate, interval) {\r\n    if ((0, _type2.isDefined)(value)) {\r\n        value = isDate ? (0, _date.correctDateWithUnitBeginning)(new Date(value), interval) : (0, _math.adjust)(_floor((0, _math.adjust)(value / interval)) * interval)\r\n    }\r\n    return value\r\n}\r\n\r\nfunction getIntervalCustomTicks(options) {\r\n    var min = options.startValue;\r\n    var max = options.endValue;\r\n    var isDate = \"datetime\" === options.valueType;\r\n    var tickInterval = options.tickInterval;\r\n    var res = {\r\n        intervals: []\r\n    };\r\n    if (!(0, _type2.isDefined)(min) || !(0, _type2.isDefined)(max)) {\r\n        return res\r\n    }\r\n    res.intervals = (0, _date.getSequenceByInterval)(min, max, options.minorTickInterval);\r\n    if (tickInterval !== options.minorTickInterval) {\r\n        res.altIntervals = res.intervals;\r\n        min = correctValueByInterval(min, isDate, tickInterval);\r\n        max = correctValueByInterval(max, isDate, tickInterval);\r\n        res.intervals = (0, _date.getSequenceByInterval)(min, max, tickInterval);\r\n        res.intervals[0] = res.altIntervals[0]\r\n    }\r\n    return res\r\n}\r\n\r\nfunction getPrecisionForSlider(startValue, endValue, screenDelta) {\r\n    var d = Math.abs(endValue - startValue) / screenDelta;\r\n    var tail = d - _floor(d);\r\n    return tail > 0 ? _ceil(Math.abs((0, _math.adjust)((0, _utils.getLog)(tail, 10)))) : 0\r\n}\r\nvar dxRangeSelector = _base_widget2.default.inherit({\r\n    _toggleParentsScrollSubscription: function() {},\r\n    _eventsMap: {\r\n        onValueChanged: {\r\n            name: VALUE_CHANGED\r\n        }\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase.apply(this, arguments);\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            \"chart.barWidth\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.barPadding' or 'chart.series.barPadding' option instead\"\r\n            },\r\n            \"chart.equalBarWidth\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.ignoreEmptyPoints' or 'chart.series.ignoreEmptyPoints' option instead\"\r\n            },\r\n            \"chart.useAggregation\": {\r\n                since: \"18.1\",\r\n                message: \"Use the 'chart.commonSeriesSettings.aggregation.enabled' or 'chart.series.aggregation.enabled' option instead\"\r\n            }\r\n        })\r\n    },\r\n    _rootClassPrefix: \"dxrs\",\r\n    _rootClass: \"dxrs-range-selector\",\r\n    _dataIsReady: function() {\r\n        return this._dataIsLoaded()\r\n    },\r\n    _initialChanges: [\"DATA_SOURCE\", \"VALUE\"],\r\n    _themeDependentChanges: [\"MOSTLY_TOTAL\"],\r\n    _themeSection: \"rangeSelector\",\r\n    _fontFields: [\"scale.label.font\", \"sliderMarker.font\"],\r\n    _initCore: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var root = renderer.root;\r\n        root.css({\r\n            \"touch-action\": \"pan-y\"\r\n        });\r\n        that._clipRect = renderer.clipRect();\r\n        var rangeViewGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-view\"\r\n        }).append(root);\r\n        var slidersGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-slidersContainer\",\r\n            \"clip-path\": that._clipRect.id\r\n        }).append(root);\r\n        var scaleGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-scale\",\r\n            \"clip-path\": that._clipRect.id\r\n        }).append(root);\r\n        var scaleBreaksGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-scale-breaks\"\r\n        }).append(root);\r\n        var trackersGroup = renderer.g().attr({\r\n            \"class\": \"dxrs-trackers\"\r\n        }).append(root);\r\n        that._axis = new AxisWrapper({\r\n            renderer: renderer,\r\n            root: scaleGroup,\r\n            scaleBreaksGroup: scaleBreaksGroup,\r\n            updateSelectedRange: function(range, e) {\r\n                that.setValue((0, _utils.convertVisualRangeObject)(range), e)\r\n            },\r\n            incidentOccurred: that._incidentOccurred\r\n        });\r\n        that._rangeView = new _range_view2.default.RangeView({\r\n            renderer: renderer,\r\n            root: rangeViewGroup,\r\n            translator: that._axis.getTranslator()\r\n        });\r\n        that._slidersController = new _sliders_controller2.default.SlidersController({\r\n            renderer: renderer,\r\n            root: slidersGroup,\r\n            trackersGroup: trackersGroup,\r\n            updateSelectedRange: function(range, lastSelectedRange, e) {\r\n                if (!that._rangeOption) {\r\n                    that.option(VALUE, (0, _utils.convertVisualRangeObject)(range, (0, _type2.isPlainObject)(that._options[VALUE])))\r\n                }\r\n                that._eventTrigger(VALUE_CHANGED, {\r\n                    value: (0, _utils.convertVisualRangeObject)(range),\r\n                    previousValue: (0, _utils.convertVisualRangeObject)(lastSelectedRange),\r\n                    event: e\r\n                })\r\n            },\r\n            axis: that._axis,\r\n            translator: that._axis.getTranslator()\r\n        });\r\n        that._tracker = new _tracker.Tracker({\r\n            renderer: renderer,\r\n            controller: that._slidersController\r\n        })\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 400,\r\n            height: 160\r\n        }\r\n    },\r\n    _disposeCore: function() {\r\n        this._axis.dispose();\r\n        this._slidersController.dispose();\r\n        this._tracker.dispose()\r\n    },\r\n    _applySize: function(rect) {\r\n        this._clientRect = rect.slice();\r\n        this._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _optionChangesMap: {\r\n        scale: \"SCALE\",\r\n        value: \"VALUE\",\r\n        dataSource: \"DATA_SOURCE\"\r\n    },\r\n    _optionChangesOrder: [\"SCALE\", \"DATA_SOURCE\"],\r\n    _change_SCALE: function() {\r\n        this._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _setValueByDataSource: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var axis = that._axis;\r\n        if (options.dataSource) {\r\n            var selectedRangeUpdateMode = that.option(\"selectedRangeUpdateMode\");\r\n            var value = that.getValue();\r\n            var valueIsReady = (0, _type2.isDefined)(value[0]) && (0, _type2.isDefined)(value[1]);\r\n            if ((0, _type2.isDefined)(selectedRangeUpdateMode)) {\r\n                selectedRangeUpdateMode = (0, _utils.normalizeEnum)(selectedRangeUpdateMode);\r\n                that.__skipAnimation = true\r\n            } else {\r\n                if (valueIsReady) {\r\n                    selectedRangeUpdateMode = RESET\r\n                }\r\n            }\r\n            if (\"auto\" === selectedRangeUpdateMode && valueIsReady) {\r\n                var rangesInfo = axis.allScaleSelected(value);\r\n                if (rangesInfo.startValue && rangesInfo.endValue) {\r\n                    selectedRangeUpdateMode = RESET\r\n                } else {\r\n                    if (rangesInfo.endValue) {\r\n                        selectedRangeUpdateMode = SHIFT\r\n                    } else {\r\n                        selectedRangeUpdateMode = KEEP\r\n                    }\r\n                }\r\n            }\r\n            if (selectedRangeUpdateMode === RESET) {\r\n                options[VALUE] = null\r\n            } else {\r\n                if (selectedRangeUpdateMode === SHIFT && valueIsReady) {\r\n                    var _value = that.getValue();\r\n                    that.__skipAnimation = true;\r\n                    options[VALUE] = {\r\n                        length: axis.getVisualRangeLength({\r\n                            minVisible: _value[0],\r\n                            maxVisible: _value[1]\r\n                        })\r\n                    }\r\n                } else {\r\n                    if (selectedRangeUpdateMode === KEEP) {\r\n                        that.__skipAnimation = true\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _change_DATA_SOURCE: function() {\r\n        if (this._options.dataSource) {\r\n            this._updateDataSource()\r\n        }\r\n    },\r\n    _customChangesOrder: [\"MOSTLY_TOTAL\", \"VALUE\", \"SLIDER_SELECTION\"],\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._applyMostlyTotalChange()\r\n    },\r\n    _change_SLIDER_SELECTION: function() {\r\n        var that = this;\r\n        var value = that._options[VALUE];\r\n        that._slidersController.setSelectedRange(value && (0, _utils.getVizRangeObject)(value))\r\n    },\r\n    _change_VALUE: function() {\r\n        var that = this;\r\n        var option = that._rangeOption;\r\n        if (option) {\r\n            that._options[VALUE] = option;\r\n            that.setValue(option)\r\n        }\r\n    },\r\n    _validateRange: function(start, end) {\r\n        var that = this;\r\n        var translator = that._axis.getTranslator();\r\n        if ((0, _type2.isDefined)(start) && !translator.isValid(start) || (0, _type2.isDefined)(end) && !translator.isValid(end)) {\r\n            that._incidentOccurred(\"E2203\")\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        var that = this;\r\n        var value = that._options[VALUE];\r\n        if (that._changes.has(\"VALUE\") && value) {\r\n            that._rangeOption = value\r\n        }\r\n        that.callBase.apply(that, arguments);\r\n        that._rangeOption = null;\r\n        that.__isResizing = that.__skipAnimation = false\r\n    },\r\n    _applyMostlyTotalChange: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var rect = that._clientRect;\r\n        var currentAnimationEnabled;\r\n        var canvas = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        if (that.__isResizing || that.__skipAnimation) {\r\n            currentAnimationEnabled = renderer.animationEnabled();\r\n            renderer.updateAnimationOptions({\r\n                enabled: false\r\n            })\r\n        }\r\n        that._clipRect.attr({\r\n            x: rect[0],\r\n            y: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        });\r\n        that._axis.getTranslator().update(new _range2.default.Range, canvas, {\r\n            isHorizontal: true\r\n        });\r\n        that._updateContent({\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        });\r\n        if (that.__isResizing || that.__skipAnimation) {\r\n            renderer.updateAnimationOptions({\r\n                enabled: currentAnimationEnabled\r\n            })\r\n        }\r\n        that._drawn()\r\n    },\r\n    _dataSourceChangedHandler: function() {\r\n        this._setValueByDataSource();\r\n        this._requestChange([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _completeSeriesDataSourceCreation: function(scaleOptions, seriesDataSource) {\r\n        var rect = this._clientRect;\r\n        var canvas = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        this._axis.updateOptions((0, _extend.extend)({}, scaleOptions, {\r\n            isHorizontal: true,\r\n            label: {}\r\n        }));\r\n        seriesDataSource.isShowChart() && this._axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas));\r\n        this._axis.updateCanvas(canvas);\r\n        seriesDataSource.createPoints()\r\n    },\r\n    _updateContent: function(canvas) {\r\n        var that = this;\r\n        var chartOptions = that.option(\"chart\");\r\n        var seriesDataSource = that._createSeriesDataSource(chartOptions);\r\n        var isCompactMode = !(seriesDataSource && seriesDataSource.isShowChart() || that.option(\"background.image.url\"));\r\n        var scaleOptions = prepareScaleOptions(that._getOption(\"scale\"), seriesDataSource && seriesDataSource.getCalculatedValueType(), that._incidentOccurred, this._getOption(\"containerBackgroundColor\", true));\r\n        seriesDataSource && that._completeSeriesDataSourceCreation(scaleOptions, seriesDataSource);\r\n        var argTranslatorRange = calculateTranslatorRange(seriesDataSource, scaleOptions);\r\n        var tickIntervalsInfo = updateTickIntervals(scaleOptions, canvas.width, that._incidentOccurred, argTranslatorRange);\r\n        var chartThemeManager = seriesDataSource && seriesDataSource.isShowChart() && seriesDataSource.getThemeManager();\r\n        if (chartThemeManager) {\r\n            checkLogarithmicOptions(chartOptions && chartOptions.valueAxis, chartThemeManager.getOptions(\"valueAxis\").logarithmBase, that._incidentOccurred)\r\n        }\r\n        updateScaleOptions(scaleOptions, seriesDataSource, argTranslatorRange, tickIntervalsInfo, getDateMarkerVisibilityChecker(canvas.width));\r\n        updateTranslatorRangeInterval(argTranslatorRange, scaleOptions);\r\n        var sliderMarkerOptions = that._prepareSliderMarkersOptions(scaleOptions, canvas.width, tickIntervalsInfo, argTranslatorRange);\r\n        var indents = calculateIndents(that._renderer, scaleOptions, sliderMarkerOptions, that.option(\"indent\"), tickIntervalsInfo);\r\n        var rangeContainerCanvas = {\r\n            left: canvas.left + indents.left,\r\n            top: canvas.top + indents.top,\r\n            width: canvas.left + indents.left + _max(canvas.width - indents.left - indents.right, 1),\r\n            height: _max(!isCompactMode ? canvas.height - indents.top - indents.bottom - calculateScaleAreaHeight(that._renderer, scaleOptions, showScaleMarkers(scaleOptions), tickIntervalsInfo) : _common2.default.HEIGHT_COMPACT_MODE, 0),\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        that._axis.update(scaleOptions, isCompactMode, rangeContainerCanvas, argTranslatorRange, seriesDataSource);\r\n        scaleOptions.minorTickInterval = scaleOptions.isEmpty ? 0 : scaleOptions.minorTickInterval;\r\n        that._updateElements(scaleOptions, sliderMarkerOptions, isCompactMode, rangeContainerCanvas, seriesDataSource);\r\n        if (chartThemeManager) {\r\n            chartThemeManager.dispose()\r\n        }\r\n    },\r\n    _updateElements: function(scaleOptions, sliderMarkerOptions, isCompactMode, canvas, seriesDataSource) {\r\n        var that = this;\r\n        var behavior = that._getOption(\"behavior\");\r\n        var shutterOptions = that._getOption(\"shutter\");\r\n        var isNotSemiDiscrete = scaleOptions.type !== SEMIDISCRETE;\r\n        shutterOptions.color = shutterOptions.color || that._getOption(CONTAINER_BACKGROUND_COLOR, true);\r\n        that._rangeView.update(that.option(\"background\"), that._themeManager.theme(\"background\"), canvas, isCompactMode, behavior.animationEnabled && that._renderer.animationEnabled(), seriesDataSource);\r\n        that._isUpdating = true;\r\n        that._slidersController.update([canvas.top, canvas.top + canvas.height], behavior, isCompactMode, that._getOption(\"sliderHandle\"), sliderMarkerOptions, shutterOptions, {\r\n            minRange: isNotSemiDiscrete ? that.option(\"scale.minRange\") : void 0,\r\n            maxRange: isNotSemiDiscrete ? that.option(\"scale.maxRange\") : void 0\r\n        }, that._axis.getFullTicks(), that._getOption(\"selectedRangeColor\", true));\r\n        that._requestChange([\"SLIDER_SELECTION\"]);\r\n        that._isUpdating = false;\r\n        that._tracker.update(!that._axis.getTranslator().getBusinessRange().isEmpty(), behavior)\r\n    },\r\n    _createSeriesDataSource: function(chartOptions) {\r\n        var that = this;\r\n        var seriesDataSource;\r\n        var dataSource = that._dataSourceItems();\r\n        var scaleOptions = that._getOption(\"scale\");\r\n        var valueType = scaleOptions.valueType || calculateValueType(scaleOptions.startValue, scaleOptions.endValue);\r\n        var valueAxis = new _base_axis2.default.Axis({\r\n            renderer: that._renderer,\r\n            axisType: \"xyAxes\",\r\n            drawingType: \"linear\"\r\n        });\r\n        valueAxis.updateOptions({\r\n            isHorizontal: false,\r\n            label: {},\r\n            categoriesSortingMethod: that._getOption(\"chart\").valueAxis.categoriesSortingMethod\r\n        });\r\n        if (dataSource || chartOptions && chartOptions.series) {\r\n            chartOptions = (0, _extend.extend)({}, chartOptions, {\r\n                theme: that.option(\"theme\")\r\n            });\r\n            seriesDataSource = new _series_data_source2.default.SeriesDataSource({\r\n                renderer: that._renderer,\r\n                dataSource: dataSource,\r\n                valueType: (0, _utils.normalizeEnum)(valueType),\r\n                axisType: scaleOptions.type,\r\n                chart: chartOptions,\r\n                dataSourceField: that.option(\"dataSourceField\"),\r\n                incidentOccurred: that._incidentOccurred,\r\n                categories: scaleOptions.categories,\r\n                argumentAxis: that._axis,\r\n                valueAxis: valueAxis\r\n            })\r\n        }\r\n        return seriesDataSource\r\n    },\r\n    _prepareSliderMarkersOptions: function(scaleOptions, screenDelta, tickIntervalsInfo, argRange) {\r\n        var that = this;\r\n        var minorTickInterval = tickIntervalsInfo.minorTickInterval;\r\n        var tickInterval = tickIntervalsInfo.tickInterval;\r\n        var interval = tickInterval;\r\n        var endValue = scaleOptions.endValue;\r\n        var startValue = scaleOptions.startValue;\r\n        var sliderMarkerOptions = that._getOption(SLIDER_MARKER);\r\n        var doNotSnap = !that._getOption(\"behavior\").snapToTicks;\r\n        var isTypeDiscrete = scaleOptions.type === DISCRETE;\r\n        var isValueTypeDatetime = scaleOptions.valueType === DATETIME;\r\n        sliderMarkerOptions.borderColor = that._getOption(CONTAINER_BACKGROUND_COLOR, true);\r\n        if (!sliderMarkerOptions.format && !argRange.isEmpty()) {\r\n            if (doNotSnap && (0, _type2.isNumeric)(scaleOptions.startValue)) {\r\n                sliderMarkerOptions.format = {\r\n                    type: \"fixedPoint\",\r\n                    precision: getPrecisionForSlider(startValue, endValue, screenDelta)\r\n                }\r\n            }\r\n            if (isValueTypeDatetime && !isTypeDiscrete) {\r\n                if ((0, _type2.isDefined)(minorTickInterval) && 0 !== minorTickInterval) {\r\n                    interval = getMinorTickIntervalUnit(tickInterval, minorTickInterval, doNotSnap)\r\n                }\r\n                if (!scaleOptions.marker.visible) {\r\n                    if ((0, _type2.isDefined)(startValue) && (0, _type2.isDefined)(endValue)) {\r\n                        sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTickInterval(startValue, endValue, interval)\r\n                    }\r\n                } else {\r\n                    sliderMarkerOptions.format = (0, _date.getDateFormatByTickInterval)(interval)\r\n                }\r\n            }\r\n            if (isValueTypeDatetime && isTypeDiscrete && tickIntervalsInfo.ticks.length) {\r\n                sliderMarkerOptions.format = _format_helper2.default.getDateFormatByTicks(tickIntervalsInfo.ticks)\r\n            }\r\n        }\r\n        return sliderMarkerOptions\r\n    },\r\n    getValue: function() {\r\n        return (0, _utils.convertVisualRangeObject)(this._slidersController.getSelectedRange())\r\n    },\r\n    setValue: function(value, e) {\r\n        var visualRange = (0, _utils.getVizRangeObject)(value);\r\n        if (!this._isUpdating && value) {\r\n            this._validateRange(visualRange.startValue, visualRange.endValue);\r\n            !(0, _utils.rangesAreEqual)(visualRange, this._slidersController.getSelectedRange()) && this._slidersController.setSelectedRange(visualRange, e)\r\n        }\r\n    },\r\n    _setContentSize: function() {\r\n        this.__isResizing = 2 === this._changes.count();\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n});\r\n(0, _iterator.each)([\"selectedRangeColor\", \"containerBackgroundColor\", \"sliderMarker\", \"sliderHandle\", \"shutter\", OPTION_BACKGROUND, \"behavior\", \"chart\", \"indent\"], function(_, name) {\r\n    dxRangeSelector.prototype._optionChangesMap[name] = \"MOSTLY_TOTAL\"\r\n});\r\n\r\nfunction prepareAxisOptions(scaleOptions, isCompactMode, height, axisPosition) {\r\n    scaleOptions.marker.label.font = scaleOptions.label.font;\r\n    scaleOptions.color = scaleOptions.marker.color = scaleOptions.tick.color;\r\n    scaleOptions.opacity = scaleOptions.marker.opacity = scaleOptions.tick.opacity;\r\n    scaleOptions.width = scaleOptions.marker.width = scaleOptions.tick.width;\r\n    scaleOptions.placeholderSize = (scaleOptions.placeholderHeight || 0) + axisPosition;\r\n    scaleOptions.argumentType = scaleOptions.valueType;\r\n    scaleOptions.visible = isCompactMode;\r\n    scaleOptions.isHorizontal = true;\r\n    scaleOptions.calculateMinors = true;\r\n    scaleOptions.semiDiscreteInterval = scaleOptions.minRange;\r\n    if (!isCompactMode) {\r\n        scaleOptions.minorTick.length = scaleOptions.tick.length = height\r\n    }\r\n    scaleOptions.label.indentFromAxis = scaleOptions.label.topIndent + axisPosition;\r\n    return scaleOptions\r\n}\r\n\r\nfunction createDateMarkersEvent(scaleOptions, markerTrackers, setSelectedRange) {\r\n    (0, _iterator.each)(markerTrackers, function(_, value) {\r\n        value.on(\"dxpointerdown\", onPointerDown)\r\n    });\r\n\r\n    function onPointerDown(e) {\r\n        var range = e.target.range;\r\n        var minRange = scaleOptions.minRange ? (0, _date.addInterval)(range.startValue, scaleOptions.minRange) : void 0;\r\n        var maxRange = scaleOptions.maxRange ? (0, _date.addInterval)(range.startValue, scaleOptions.maxRange) : void 0;\r\n        if (!(minRange && minRange > range.endValue || maxRange && maxRange < range.endValue)) {\r\n            setSelectedRange(range, e)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getShiftDirection() {\r\n    return 1\r\n}\r\n\r\nfunction getTickStartPositionShift(length) {\r\n    return length % 2 === 1 ? -_floor(length / 2) : -length / 2\r\n}\r\n\r\nfunction AxisWrapper(params) {\r\n    var that = this;\r\n    that._axis = new _base_axis2.default.Axis({\r\n        renderer: params.renderer,\r\n        axesContainerGroup: params.root,\r\n        scaleBreaksGroup: params.scaleBreaksGroup,\r\n        incidentOccurred: params.incidentOccurred,\r\n        axisType: \"xyAxes\",\r\n        drawingType: \"linear\",\r\n        widgetClass: \"dxrs\",\r\n        axisClass: \"range-selector\",\r\n        isArgumentAxis: true\r\n    });\r\n    that._updateSelectedRangeCallback = params.updateSelectedRange;\r\n    that._axis.getAxisSharpDirection = that._axis.getSharpDirectionByCoords = getShiftDirection;\r\n    that._axis.getTickStartPositionShift = getTickStartPositionShift\r\n}\r\nAxisWrapper.prototype = {\r\n    constructor: AxisWrapper,\r\n    dispose: function() {\r\n        this._axis.dispose()\r\n    },\r\n    calculateInterval: function(value, prevValue) {\r\n        return this._axis.calculateInterval(value, prevValue)\r\n    },\r\n    update: function(options, isCompactMode, canvas, businessRange, seriesDataSource) {\r\n        var axis = this._axis;\r\n        axis.updateOptions(prepareAxisOptions(options, isCompactMode, canvas.height, canvas.height / 2 - _ceil(options.width / 2)));\r\n        axis.validate();\r\n        axis.setBusinessRange(businessRange, true);\r\n        if (void 0 !== seriesDataSource && seriesDataSource.isShowChart()) {\r\n            axis.setMarginOptions(seriesDataSource.getMarginOptions(canvas))\r\n        }\r\n        axis.draw(canvas);\r\n        axis.shift({\r\n            left: 0,\r\n            bottom: -canvas.height / 2 + canvas.top\r\n        });\r\n        if (axis.getMarkerTrackers()) {\r\n            createDateMarkersEvent(options, axis.getMarkerTrackers(), this._updateSelectedRangeCallback)\r\n        }\r\n        axis.drawScaleBreaks({\r\n            start: canvas.top,\r\n            end: canvas.top + canvas.height\r\n        })\r\n    },\r\n    visualRange: function() {},\r\n    getViewport: function() {\r\n        return {}\r\n    },\r\n    allScaleSelected: function(value) {\r\n        var _this$_axis$visualRan = this._axis.visualRange(),\r\n            startValue = _this$_axis$visualRan.startValue,\r\n            endValue = _this$_axis$visualRan.endValue;\r\n        return {\r\n            startValue: value[0].valueOf() === startValue.valueOf(),\r\n            endValue: value[1].valueOf() === endValue.valueOf()\r\n        }\r\n    },\r\n    getOptions: function() {\r\n        return this._axis.getOptions() || {}\r\n    }\r\n};\r\n[\"setMarginOptions\", \"getFullTicks\", \"updateCanvas\", \"updateOptions\", \"getAggregationInfo\", \"getTranslator\", \"getVisualRangeLength\", \"getVisibleArea\", \"getMarginOptions\"].forEach(function(methodName) {\r\n    AxisWrapper.prototype[methodName] = function() {\r\n        var axis = this._axis;\r\n        return axis[methodName].apply(axis, arguments)\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxRangeSelector\", dxRangeSelector);\r\nmodule.exports = dxRangeSelector;\r\ndxRangeSelector.addPlugin(_export.plugin);\r\ndxRangeSelector.addPlugin(_title.plugin);\r\ndxRangeSelector.addPlugin(_loading_indicator.plugin);\r\ndxRangeSelector.addPlugin(_data_source.plugin);\r\n"]},"metadata":{},"sourceType":"script"}