{"ast":null,"code":"/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tracker = Tracker;\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _support = require(\"../../core/utils/support\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\n\nvar window = _window2.default.getWindow();\n\nfunction isLeftButtonPressed(event) {\n  var e = event || window.event;\n  var originalEvent = e.originalEvent;\n  var touches = e.touches;\n  var pointerType = originalEvent ? originalEvent.pointerType : false;\n  var eventTouches = originalEvent ? originalEvent.touches : false;\n  var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\n  var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\n  return 1 === e.which || isMSPointerLeftClick || isTouches;\n}\n\nfunction isMultiTouches(event) {\n  var originalEvent = event.originalEvent;\n  var touches = event.touches;\n  var eventTouches = originalEvent && originalEvent.touches;\n  return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null;\n}\n\nfunction preventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.preventDefault();\n  }\n}\n\nfunction stopPropagationAndPreventDefault(e) {\n  if (!isMultiTouches(e)) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n}\n\nfunction isTouchEventArgs(e) {\n  return e && e.type && 0 === e.type.indexOf(\"touch\");\n}\n\nfunction getEventPageX(event) {\n  var originalEvent = event.originalEvent;\n  var result = 0;\n\n  if (event.pageX) {\n    result = event.pageX;\n  } else {\n    if (originalEvent && originalEvent.pageX) {\n      result = originalEvent.pageX;\n    }\n  }\n\n  if (originalEvent && originalEvent.touches) {\n    if (originalEvent.touches.length > 0) {\n      result = originalEvent.touches[0].pageX;\n    } else {\n      if (originalEvent.changedTouches.length > 0) {\n        result = originalEvent.changedTouches[0].pageX;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents;\n\n  var isTouchEvent;\n  var isActive = false;\n  var initialPosition;\n  var movingHandler = null;\n  var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer2.default.move, function (e) {\n    var position;\n    var offset;\n\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      position = getEventPageX(e);\n      offset = getRootOffsetLeft();\n\n      if (movingHandler) {\n        movingHandler(position - offset, e);\n      } else {\n        if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\n          movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e);\n        }\n      }\n    }\n  }), _defineProperty(_docEvents, _pointer2.default.up, function (e) {\n    var position;\n\n    if (isActive) {\n      position = getEventPageX(e);\n\n      if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\n        controller.moveSelectedArea(position - getRootOffsetLeft(), e);\n      }\n\n      cancel(e);\n    }\n  }), _docEvents);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n\n      if (movingHandler) {\n        movingHandler.complete(e);\n        movingHandler = null;\n      }\n    }\n  }\n\n  area.on(_pointer2.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    initialPosition = getEventPageX(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\n  var _docEvents2;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer2.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents2, _pointer2.default.up, cancel), _docEvents2);\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  area.on(_pointer2.default.down, function (e) {\n    if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n      return;\n    }\n\n    isActive = true;\n    isTouchEvent = isTouchEventArgs(e);\n    movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\n    stopPropagationAndPreventDefault(e);\n  });\n  return docEvents;\n}\n\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\n  var _docEvents3;\n\n  var isTouchEvent;\n  var isActive = false;\n  var movingHandler = null;\n  var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer2.default.move, function (e) {\n    if (isTouchEvent !== isTouchEventArgs(e)) {\n      return;\n    }\n\n    if (!isLeftButtonPressed(e)) {\n      cancel(e);\n    }\n\n    if (isActive) {\n      preventDefault(e);\n      movingHandler(getEventPageX(e) - getRootOffsetLeft(), e);\n    }\n  }), _defineProperty(_docEvents3, _pointer2.default.up, cancel), _docEvents3);\n  (0, _iterator.each)(sliders, function (i, slider) {\n    var _slider$on;\n\n    slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer2.default.down, function (e) {\n      if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\n        return;\n      }\n\n      isActive = true;\n      isTouchEvent = isTouchEventArgs(e);\n      movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\n      stopPropagationAndPreventDefault(e);\n    }), _defineProperty(_slider$on, _pointer2.default.move, function () {\n      if (!movingHandler) {\n        controller.foregroundSlider(i);\n      }\n    }), _slider$on));\n  });\n\n  function cancel(e) {\n    if (isActive) {\n      isActive = false;\n      movingHandler.complete(e);\n      movingHandler = null;\n    }\n  }\n\n  return docEvents;\n}\n\nfunction Tracker(params) {\n  var state = this._state = {};\n  var targets = params.controller.getTrackerTargets();\n\n  if (_support.pointer) {\n    params.renderer.root.css({\n      msTouchAction: \"pinch-zoom\"\n    });\n  }\n\n  this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\n  (0, _iterator.each)(this._docEvents, function (_, events) {\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), events);\n  });\n\n  function getRootOffsetLeft() {\n    return params.renderer.getRootOffset().left;\n  }\n}\n\nTracker.prototype = {\n  constructor: Tracker,\n  dispose: function dispose() {\n    (0, _iterator.each)(this._docEvents, function (_, events) {\n      _events_engine2.default.off(_dom_adapter2.default.getDocument(), events);\n    });\n  },\n  update: function update(enabled, behavior) {\n    var state = this._state;\n    state.enabled = enabled;\n    state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\n    state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled;\n  }\n};","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/viz/range_selector/tracker.js"],"names":["Object","defineProperty","exports","value","Tracker","_events_engine","require","_events_engine2","_interopRequireDefault","_pointer","_pointer2","_window","_window2","_dom_adapter","_dom_adapter2","_iterator","_support","obj","__esModule","_defineProperty","key","enumerable","configurable","writable","MIN_MANUAL_SELECTING_WIDTH","window","default","getWindow","isLeftButtonPressed","event","e","originalEvent","touches","pointerType","eventTouches","isMSPointerLeftClick","MSPOINTER_TYPE_TOUCH","MSPOINTER_TYPE_MOUSE","buttons","isTouches","length","which","isMultiTouches","preventDefault","stopPropagationAndPreventDefault","stopPropagation","isTouchEventArgs","type","indexOf","getEventPageX","result","pageX","changedTouches","initializeAreaEvents","controller","area","state","getRootOffsetLeft","_docEvents","isTouchEvent","isActive","initialPosition","movingHandler","docEvents","move","position","offset","cancel","manualRangeSelectionEnabled","Math","abs","placeSliderAndBeginMoving","up","moveSelectedRangeByClick","moveSelectedArea","complete","on","down","enabled","initializeSelectedAreaEvents","_docEvents2","beginSelectedAreaMoving","initializeSliderEvents","sliders","_docEvents3","each","i","slider","_slider$on","beginSliderMoving","foregroundSlider","params","_state","targets","getTrackerTargets","pointer","renderer","root","css","msTouchAction","selectedArea","_","events","getDocument","getRootOffset","left","prototype","constructor","dispose","off","update","behavior"],"mappings":"AAAA;;;;;;;;AAQA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,EAAAA,KAAK,EAAE;AADkC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBA,OAAlB;;AACA,IAAIC,cAAc,GAAGC,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAIC,eAAe,GAAGC,sBAAsB,CAACH,cAAD,CAA5C;;AACA,IAAII,QAAQ,GAAGH,OAAO,CAAC,sBAAD,CAAtB;;AACA,IAAII,SAAS,GAAGF,sBAAsB,CAACC,QAAD,CAAtC;;AACA,IAAIE,OAAO,GAAGL,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIM,QAAQ,GAAGJ,sBAAsB,CAACG,OAAD,CAArC;;AACA,IAAIE,YAAY,GAAGP,OAAO,CAAC,wBAAD,CAA1B;;AACA,IAAIQ,aAAa,GAAGN,sBAAsB,CAACK,YAAD,CAA1C;;AACA,IAAIE,SAAS,GAAGT,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIU,QAAQ,GAAGV,OAAO,CAAC,0BAAD,CAAtB;;AAEA,SAASE,sBAAT,CAAgCS,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,eAAT,CAAyBF,GAAzB,EAA8BG,GAA9B,EAAmCjB,KAAnC,EAA0C;AACtC,MAAIiB,GAAG,IAAIH,GAAX,EAAgB;AACZjB,IAAAA,MAAM,CAACC,cAAP,CAAsBgB,GAAtB,EAA2BG,GAA3B,EAAgC;AAC5BjB,MAAAA,KAAK,EAAEA,KADqB;AAE5BkB,MAAAA,UAAU,EAAE,IAFgB;AAG5BC,MAAAA,YAAY,EAAE,IAHc;AAI5BC,MAAAA,QAAQ,EAAE;AAJkB,KAAhC;AAMH,GAPD,MAOO;AACHN,IAAAA,GAAG,CAACG,GAAD,CAAH,GAAWjB,KAAX;AACH;;AACD,SAAOc,GAAP;AACH;;AACD,IAAIO,0BAA0B,GAAG,EAAjC;;AACA,IAAIC,MAAM,GAAGb,QAAQ,CAACc,OAAT,CAAiBC,SAAjB,EAAb;;AAEA,SAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAChC,MAAIC,CAAC,GAAGD,KAAK,IAAIJ,MAAM,CAACI,KAAxB;AACA,MAAIE,aAAa,GAAGD,CAAC,CAACC,aAAtB;AACA,MAAIC,OAAO,GAAGF,CAAC,CAACE,OAAhB;AACA,MAAIC,WAAW,GAAGF,aAAa,GAAGA,aAAa,CAACE,WAAjB,GAA+B,KAA9D;AACA,MAAIC,YAAY,GAAGH,aAAa,GAAGA,aAAa,CAACC,OAAjB,GAA2B,KAA3D;AACA,MAAIG,oBAAoB,GAAGJ,aAAa,IAAI,KAAK,CAAL,KAAWE,WAA5B,KAA4CA,WAAW,MAAMF,aAAa,CAACK,oBAAd,IAAsC,OAA5C,CAAX,IAAmEH,WAAW,MAAMF,aAAa,CAACM,oBAAd,IAAsC,OAA5C,CAAX,IAAmE,MAAMN,aAAa,CAACO,OAAtM,CAA3B;AACA,MAAIC,SAAS,GAAGP,OAAO,IAAIA,OAAO,CAACQ,MAAR,GAAiB,CAA5B,IAAiCN,YAAY,IAAIA,YAAY,CAACM,MAAb,GAAsB,CAAvF;AACA,SAAO,MAAMV,CAAC,CAACW,KAAR,IAAiBN,oBAAjB,IAAyCI,SAAhD;AACH;;AAED,SAASG,cAAT,CAAwBb,KAAxB,EAA+B;AAC3B,MAAIE,aAAa,GAAGF,KAAK,CAACE,aAA1B;AACA,MAAIC,OAAO,GAAGH,KAAK,CAACG,OAApB;AACA,MAAIE,YAAY,GAAGH,aAAa,IAAIA,aAAa,CAACC,OAAlD;AACA,SAAOA,OAAO,IAAIA,OAAO,CAACQ,MAAR,GAAiB,CAA5B,IAAiCN,YAAY,IAAIA,YAAY,CAACM,MAAb,GAAsB,CAAvE,IAA4E,IAAnF;AACH;;AAED,SAASG,cAAT,CAAwBb,CAAxB,EAA2B;AACvB,MAAI,CAACY,cAAc,CAACZ,CAAD,CAAnB,EAAwB;AACpBA,IAAAA,CAAC,CAACa,cAAF;AACH;AACJ;;AAED,SAASC,gCAAT,CAA0Cd,CAA1C,EAA6C;AACzC,MAAI,CAACY,cAAc,CAACZ,CAAD,CAAnB,EAAwB;AACpBA,IAAAA,CAAC,CAACe,eAAF;AACAf,IAAAA,CAAC,CAACa,cAAF;AACH;AACJ;;AAED,SAASG,gBAAT,CAA0BhB,CAA1B,EAA6B;AACzB,SAAOA,CAAC,IAAIA,CAAC,CAACiB,IAAP,IAAe,MAAMjB,CAAC,CAACiB,IAAF,CAAOC,OAAP,CAAe,OAAf,CAA5B;AACH;;AAED,SAASC,aAAT,CAAuBpB,KAAvB,EAA8B;AAC1B,MAAIE,aAAa,GAAGF,KAAK,CAACE,aAA1B;AACA,MAAImB,MAAM,GAAG,CAAb;;AACA,MAAIrB,KAAK,CAACsB,KAAV,EAAiB;AACbD,IAAAA,MAAM,GAAGrB,KAAK,CAACsB,KAAf;AACH,GAFD,MAEO;AACH,QAAIpB,aAAa,IAAIA,aAAa,CAACoB,KAAnC,EAA0C;AACtCD,MAAAA,MAAM,GAAGnB,aAAa,CAACoB,KAAvB;AACH;AACJ;;AACD,MAAIpB,aAAa,IAAIA,aAAa,CAACC,OAAnC,EAA4C;AACxC,QAAID,aAAa,CAACC,OAAd,CAAsBQ,MAAtB,GAA+B,CAAnC,EAAsC;AAClCU,MAAAA,MAAM,GAAGnB,aAAa,CAACC,OAAd,CAAsB,CAAtB,EAAyBmB,KAAlC;AACH,KAFD,MAEO;AACH,UAAIpB,aAAa,CAACqB,cAAd,CAA6BZ,MAA7B,GAAsC,CAA1C,EAA6C;AACzCU,QAAAA,MAAM,GAAGnB,aAAa,CAACqB,cAAd,CAA6B,CAA7B,EAAgCD,KAAzC;AACH;AACJ;AACJ;;AACD,SAAOD,MAAP;AACH;;AAED,SAASG,oBAAT,CAA8BC,UAA9B,EAA0CC,IAA1C,EAAgDC,KAAhD,EAAuDC,iBAAvD,EAA0E;AACtE,MAAIC,UAAJ;;AACA,MAAIC,YAAJ;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIC,eAAJ;AACA,MAAIC,aAAa,GAAG,IAApB;AACA,MAAIC,SAAS,IAAIL,UAAU,GAAG,EAAb,EAAiBvC,eAAe,CAACuC,UAAD,EAAahD,SAAS,CAACgB,OAAV,CAAkBsC,IAA/B,EAAqC,UAASlC,CAAT,EAAY;AAC9F,QAAImC,QAAJ;AACA,QAAIC,MAAJ;;AACA,QAAIP,YAAY,KAAKb,gBAAgB,CAAChB,CAAD,CAArC,EAA0C;AACtC;AACH;;AACD,QAAI,CAACF,mBAAmB,CAACE,CAAD,CAAxB,EAA6B;AACzBqC,MAAAA,MAAM,CAACrC,CAAD,CAAN;AACH;;AACD,QAAI8B,QAAJ,EAAc;AACVK,MAAAA,QAAQ,GAAGhB,aAAa,CAACnB,CAAD,CAAxB;AACAoC,MAAAA,MAAM,GAAGT,iBAAiB,EAA1B;;AACA,UAAIK,aAAJ,EAAmB;AACfA,QAAAA,aAAa,CAACG,QAAQ,GAAGC,MAAZ,EAAoBpC,CAApB,CAAb;AACH,OAFD,MAEO;AACH,YAAI0B,KAAK,CAACY,2BAAN,IAAqCC,IAAI,CAACC,GAAL,CAAST,eAAe,GAAGI,QAA3B,KAAwCzC,0BAAjF,EAA6G;AACzGsC,UAAAA,aAAa,GAAGR,UAAU,CAACiB,yBAAX,CAAqCV,eAAe,GAAGK,MAAvD,EAA+DD,QAAQ,GAAGC,MAA1E,EAAkFpC,CAAlF,CAAhB;AACH;AACJ;AACJ;AACJ,GApBgD,CAAhC,EAoBbX,eAAe,CAACuC,UAAD,EAAahD,SAAS,CAACgB,OAAV,CAAkB8C,EAA/B,EAAmC,UAAS1C,CAAT,EAAY;AAC9D,QAAImC,QAAJ;;AACA,QAAIL,QAAJ,EAAc;AACVK,MAAAA,QAAQ,GAAGhB,aAAa,CAACnB,CAAD,CAAxB;;AACA,UAAI,CAACgC,aAAD,IAAkBN,KAAK,CAACiB,wBAAxB,IAAoDJ,IAAI,CAACC,GAAL,CAAST,eAAe,GAAGI,QAA3B,IAAuCzC,0BAA/F,EAA2H;AACvH8B,QAAAA,UAAU,CAACoB,gBAAX,CAA4BT,QAAQ,GAAGR,iBAAiB,EAAxD,EAA4D3B,CAA5D;AACH;;AACDqC,MAAAA,MAAM,CAACrC,CAAD,CAAN;AACH;AACJ,GATkB,CApBF,EA6Bb4B,UA7BS,CAAb;;AA+BA,WAASS,MAAT,CAAgBrC,CAAhB,EAAmB;AACf,QAAI8B,QAAJ,EAAc;AACVA,MAAAA,QAAQ,GAAG,KAAX;;AACA,UAAIE,aAAJ,EAAmB;AACfA,QAAAA,aAAa,CAACa,QAAd,CAAuB7C,CAAvB;AACAgC,QAAAA,aAAa,GAAG,IAAhB;AACH;AACJ;AACJ;;AACDP,EAAAA,IAAI,CAACqB,EAAL,CAAQlE,SAAS,CAACgB,OAAV,CAAkBmD,IAA1B,EAAgC,UAAS/C,CAAT,EAAY;AACxC,QAAI,CAAC0B,KAAK,CAACsB,OAAP,IAAkB,CAAClD,mBAAmB,CAACE,CAAD,CAAtC,IAA6C8B,QAAjD,EAA2D;AACvD;AACH;;AACDA,IAAAA,QAAQ,GAAG,IAAX;AACAD,IAAAA,YAAY,GAAGb,gBAAgB,CAAChB,CAAD,CAA/B;AACA+B,IAAAA,eAAe,GAAGZ,aAAa,CAACnB,CAAD,CAA/B;AACH,GAPD;AAQA,SAAOiC,SAAP;AACH;;AAED,SAASgB,4BAAT,CAAsCzB,UAAtC,EAAkDC,IAAlD,EAAwDC,KAAxD,EAA+DC,iBAA/D,EAAkF;AAC9E,MAAIuB,WAAJ;;AACA,MAAIrB,YAAJ;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIE,aAAa,GAAG,IAApB;AACA,MAAIC,SAAS,IAAIiB,WAAW,GAAG,EAAd,EAAkB7D,eAAe,CAAC6D,WAAD,EAActE,SAAS,CAACgB,OAAV,CAAkBsC,IAAhC,EAAsC,UAASlC,CAAT,EAAY;AAChG,QAAI6B,YAAY,KAAKb,gBAAgB,CAAChB,CAAD,CAArC,EAA0C;AACtC;AACH;;AACD,QAAI,CAACF,mBAAmB,CAACE,CAAD,CAAxB,EAA6B;AACzBqC,MAAAA,MAAM,CAACrC,CAAD,CAAN;AACH;;AACD,QAAI8B,QAAJ,EAAc;AACVjB,MAAAA,cAAc,CAACb,CAAD,CAAd;AACAgC,MAAAA,aAAa,CAACb,aAAa,CAACnB,CAAD,CAAb,GAAmB2B,iBAAiB,EAArC,EAAyC3B,CAAzC,CAAb;AACH;AACJ,GAXiD,CAAjC,EAWbX,eAAe,CAAC6D,WAAD,EAActE,SAAS,CAACgB,OAAV,CAAkB8C,EAAhC,EAAoCL,MAApC,CAXF,EAW+Ca,WAXnD,CAAb;;AAaA,WAASb,MAAT,CAAgBrC,CAAhB,EAAmB;AACf,QAAI8B,QAAJ,EAAc;AACVA,MAAAA,QAAQ,GAAG,KAAX;AACAE,MAAAA,aAAa,CAACa,QAAd,CAAuB7C,CAAvB;AACAgC,MAAAA,aAAa,GAAG,IAAhB;AACH;AACJ;;AACDP,EAAAA,IAAI,CAACqB,EAAL,CAAQlE,SAAS,CAACgB,OAAV,CAAkBmD,IAA1B,EAAgC,UAAS/C,CAAT,EAAY;AACxC,QAAI,CAAC0B,KAAK,CAACsB,OAAP,IAAkB,CAAClD,mBAAmB,CAACE,CAAD,CAAtC,IAA6C8B,QAAjD,EAA2D;AACvD;AACH;;AACDA,IAAAA,QAAQ,GAAG,IAAX;AACAD,IAAAA,YAAY,GAAGb,gBAAgB,CAAChB,CAAD,CAA/B;AACAgC,IAAAA,aAAa,GAAGR,UAAU,CAAC2B,uBAAX,CAAmChC,aAAa,CAACnB,CAAD,CAAb,GAAmB2B,iBAAiB,EAAvE,CAAhB;AACAb,IAAAA,gCAAgC,CAACd,CAAD,CAAhC;AACH,GARD;AASA,SAAOiC,SAAP;AACH;;AAED,SAASmB,sBAAT,CAAgC5B,UAAhC,EAA4C6B,OAA5C,EAAqD3B,KAArD,EAA4DC,iBAA5D,EAA+E;AAC3E,MAAI2B,WAAJ;;AACA,MAAIzB,YAAJ;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIE,aAAa,GAAG,IAApB;AACA,MAAIC,SAAS,IAAIqB,WAAW,GAAG,EAAd,EAAkBjE,eAAe,CAACiE,WAAD,EAAc1E,SAAS,CAACgB,OAAV,CAAkBsC,IAAhC,EAAsC,UAASlC,CAAT,EAAY;AAChG,QAAI6B,YAAY,KAAKb,gBAAgB,CAAChB,CAAD,CAArC,EAA0C;AACtC;AACH;;AACD,QAAI,CAACF,mBAAmB,CAACE,CAAD,CAAxB,EAA6B;AACzBqC,MAAAA,MAAM,CAACrC,CAAD,CAAN;AACH;;AACD,QAAI8B,QAAJ,EAAc;AACVjB,MAAAA,cAAc,CAACb,CAAD,CAAd;AACAgC,MAAAA,aAAa,CAACb,aAAa,CAACnB,CAAD,CAAb,GAAmB2B,iBAAiB,EAArC,EAAyC3B,CAAzC,CAAb;AACH;AACJ,GAXiD,CAAjC,EAWbX,eAAe,CAACiE,WAAD,EAAc1E,SAAS,CAACgB,OAAV,CAAkB8C,EAAhC,EAAoCL,MAApC,CAXF,EAW+CiB,WAXnD,CAAb;AAYA,GAAC,GAAGrE,SAAS,CAACsE,IAAd,EAAoBF,OAApB,EAA6B,UAASG,CAAT,EAAYC,MAAZ,EAAoB;AAC7C,QAAIC,UAAJ;;AACAD,IAAAA,MAAM,CAACX,EAAP,EAAWY,UAAU,GAAG,EAAb,EAAiBrE,eAAe,CAACqE,UAAD,EAAa9E,SAAS,CAACgB,OAAV,CAAkBmD,IAA/B,EAAqC,UAAS/C,CAAT,EAAY;AACxF,UAAI,CAAC0B,KAAK,CAACsB,OAAP,IAAkB,CAAClD,mBAAmB,CAACE,CAAD,CAAtC,IAA6C8B,QAAjD,EAA2D;AACvD;AACH;;AACDA,MAAAA,QAAQ,GAAG,IAAX;AACAD,MAAAA,YAAY,GAAGb,gBAAgB,CAAChB,CAAD,CAA/B;AACAgC,MAAAA,aAAa,GAAGR,UAAU,CAACmC,iBAAX,CAA6BH,CAA7B,EAAgCrC,aAAa,CAACnB,CAAD,CAAb,GAAmB2B,iBAAiB,EAApE,CAAhB;AACAb,MAAAA,gCAAgC,CAACd,CAAD,CAAhC;AACH,KAR0C,CAAhC,EAQPX,eAAe,CAACqE,UAAD,EAAa9E,SAAS,CAACgB,OAAV,CAAkBsC,IAA/B,EAAqC,YAAW;AAC/D,UAAI,CAACF,aAAL,EAAoB;AAChBR,QAAAA,UAAU,CAACoC,gBAAX,CAA4BJ,CAA5B;AACH;AACJ,KAJkB,CARR,EAYPE,UAZJ;AAaH,GAfD;;AAiBA,WAASrB,MAAT,CAAgBrC,CAAhB,EAAmB;AACf,QAAI8B,QAAJ,EAAc;AACVA,MAAAA,QAAQ,GAAG,KAAX;AACAE,MAAAA,aAAa,CAACa,QAAd,CAAuB7C,CAAvB;AACAgC,MAAAA,aAAa,GAAG,IAAhB;AACH;AACJ;;AACD,SAAOC,SAAP;AACH;;AAED,SAAS3D,OAAT,CAAiBuF,MAAjB,EAAyB;AACrB,MAAInC,KAAK,GAAG,KAAKoC,MAAL,GAAc,EAA1B;AACA,MAAIC,OAAO,GAAGF,MAAM,CAACrC,UAAP,CAAkBwC,iBAAlB,EAAd;;AACA,MAAI9E,QAAQ,CAAC+E,OAAb,EAAsB;AAClBJ,IAAAA,MAAM,CAACK,QAAP,CAAgBC,IAAhB,CAAqBC,GAArB,CAAyB;AACrBC,MAAAA,aAAa,EAAE;AADM,KAAzB;AAGH;;AACD,OAAKzC,UAAL,GAAkB,CAACqB,4BAA4B,CAACY,MAAM,CAACrC,UAAR,EAAoBuC,OAAO,CAACO,YAA5B,EAA0C5C,KAA1C,EAAiDC,iBAAjD,CAA7B,EAAkGJ,oBAAoB,CAACsC,MAAM,CAACrC,UAAR,EAAoBuC,OAAO,CAACtC,IAA5B,EAAkCC,KAAlC,EAAyCC,iBAAzC,CAAtH,EAAmLyB,sBAAsB,CAACS,MAAM,CAACrC,UAAR,EAAoBuC,OAAO,CAACV,OAA5B,EAAqC3B,KAArC,EAA4CC,iBAA5C,CAAzM,CAAlB;AACA,GAAC,GAAG1C,SAAS,CAACsE,IAAd,EAAoB,KAAK3B,UAAzB,EAAqC,UAAS2C,CAAT,EAAYC,MAAZ,EAAoB;AACrD/F,IAAAA,eAAe,CAACmB,OAAhB,CAAwBkD,EAAxB,CAA2B9D,aAAa,CAACY,OAAd,CAAsB6E,WAAtB,EAA3B,EAAgED,MAAhE;AACH,GAFD;;AAIA,WAAS7C,iBAAT,GAA6B;AACzB,WAAOkC,MAAM,CAACK,QAAP,CAAgBQ,aAAhB,GAAgCC,IAAvC;AACH;AACJ;;AACDrG,OAAO,CAACsG,SAAR,GAAoB;AAChBC,EAAAA,WAAW,EAAEvG,OADG;AAEhBwG,EAAAA,OAAO,EAAE,mBAAW;AAChB,KAAC,GAAG7F,SAAS,CAACsE,IAAd,EAAoB,KAAK3B,UAAzB,EAAqC,UAAS2C,CAAT,EAAYC,MAAZ,EAAoB;AACrD/F,MAAAA,eAAe,CAACmB,OAAhB,CAAwBmF,GAAxB,CAA4B/F,aAAa,CAACY,OAAd,CAAsB6E,WAAtB,EAA5B,EAAiED,MAAjE;AACH,KAFD;AAGH,GANe;AAOhBQ,EAAAA,MAAM,EAAE,gBAAShC,OAAT,EAAkBiC,QAAlB,EAA4B;AAChC,QAAIvD,KAAK,GAAG,KAAKoC,MAAjB;AACApC,IAAAA,KAAK,CAACsB,OAAN,GAAgBA,OAAhB;AACAtB,IAAAA,KAAK,CAACiB,wBAAN,GAAiCsC,QAAQ,CAACtC,wBAA1C;AACAjB,IAAAA,KAAK,CAACY,2BAAN,GAAoC2C,QAAQ,CAAC3C,2BAA7C;AACH;AAZe,CAApB","sourcesContent":["/**\r\n * DevExtreme (viz/range_selector/tracker.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.Tracker = Tracker;\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _support = require(\"../../core/utils/support\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar MIN_MANUAL_SELECTING_WIDTH = 10;\r\nvar window = _window2.default.getWindow();\r\n\r\nfunction isLeftButtonPressed(event) {\r\n    var e = event || window.event;\r\n    var originalEvent = e.originalEvent;\r\n    var touches = e.touches;\r\n    var pointerType = originalEvent ? originalEvent.pointerType : false;\r\n    var eventTouches = originalEvent ? originalEvent.touches : false;\r\n    var isMSPointerLeftClick = originalEvent && void 0 !== pointerType && (pointerType === (originalEvent.MSPOINTER_TYPE_TOUCH || \"touch\") || pointerType === (originalEvent.MSPOINTER_TYPE_MOUSE || \"mouse\") && 1 === originalEvent.buttons);\r\n    var isTouches = touches && touches.length > 0 || eventTouches && eventTouches.length > 0;\r\n    return 1 === e.which || isMSPointerLeftClick || isTouches\r\n}\r\n\r\nfunction isMultiTouches(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var touches = event.touches;\r\n    var eventTouches = originalEvent && originalEvent.touches;\r\n    return touches && touches.length > 1 || eventTouches && eventTouches.length > 1 || null\r\n}\r\n\r\nfunction preventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction stopPropagationAndPreventDefault(e) {\r\n    if (!isMultiTouches(e)) {\r\n        e.stopPropagation();\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\nfunction isTouchEventArgs(e) {\r\n    return e && e.type && 0 === e.type.indexOf(\"touch\")\r\n}\r\n\r\nfunction getEventPageX(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var result = 0;\r\n    if (event.pageX) {\r\n        result = event.pageX\r\n    } else {\r\n        if (originalEvent && originalEvent.pageX) {\r\n            result = originalEvent.pageX\r\n        }\r\n    }\r\n    if (originalEvent && originalEvent.touches) {\r\n        if (originalEvent.touches.length > 0) {\r\n            result = originalEvent.touches[0].pageX\r\n        } else {\r\n            if (originalEvent.changedTouches.length > 0) {\r\n                result = originalEvent.changedTouches[0].pageX\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction initializeAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var initialPosition;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents = {}, _defineProperty(_docEvents, _pointer2.default.move, function(e) {\r\n        var position;\r\n        var offset;\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            offset = getRootOffsetLeft();\r\n            if (movingHandler) {\r\n                movingHandler(position - offset, e)\r\n            } else {\r\n                if (state.manualRangeSelectionEnabled && Math.abs(initialPosition - position) >= MIN_MANUAL_SELECTING_WIDTH) {\r\n                    movingHandler = controller.placeSliderAndBeginMoving(initialPosition - offset, position - offset, e)\r\n                }\r\n            }\r\n        }\r\n    }), _defineProperty(_docEvents, _pointer2.default.up, function(e) {\r\n        var position;\r\n        if (isActive) {\r\n            position = getEventPageX(e);\r\n            if (!movingHandler && state.moveSelectedRangeByClick && Math.abs(initialPosition - position) < MIN_MANUAL_SELECTING_WIDTH) {\r\n                controller.moveSelectedArea(position - getRootOffsetLeft(), e)\r\n            }\r\n            cancel(e)\r\n        }\r\n    }), _docEvents);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            if (movingHandler) {\r\n                movingHandler.complete(e);\r\n                movingHandler = null\r\n            }\r\n        }\r\n    }\r\n    area.on(_pointer2.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        initialPosition = getEventPageX(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSelectedAreaEvents(controller, area, state, getRootOffsetLeft) {\r\n    var _docEvents2;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents2 = {}, _defineProperty(_docEvents2, _pointer2.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents2, _pointer2.default.up, cancel), _docEvents2);\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    area.on(_pointer2.default.down, function(e) {\r\n        if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n            return\r\n        }\r\n        isActive = true;\r\n        isTouchEvent = isTouchEventArgs(e);\r\n        movingHandler = controller.beginSelectedAreaMoving(getEventPageX(e) - getRootOffsetLeft());\r\n        stopPropagationAndPreventDefault(e)\r\n    });\r\n    return docEvents\r\n}\r\n\r\nfunction initializeSliderEvents(controller, sliders, state, getRootOffsetLeft) {\r\n    var _docEvents3;\r\n    var isTouchEvent;\r\n    var isActive = false;\r\n    var movingHandler = null;\r\n    var docEvents = (_docEvents3 = {}, _defineProperty(_docEvents3, _pointer2.default.move, function(e) {\r\n        if (isTouchEvent !== isTouchEventArgs(e)) {\r\n            return\r\n        }\r\n        if (!isLeftButtonPressed(e)) {\r\n            cancel(e)\r\n        }\r\n        if (isActive) {\r\n            preventDefault(e);\r\n            movingHandler(getEventPageX(e) - getRootOffsetLeft(), e)\r\n        }\r\n    }), _defineProperty(_docEvents3, _pointer2.default.up, cancel), _docEvents3);\r\n    (0, _iterator.each)(sliders, function(i, slider) {\r\n        var _slider$on;\r\n        slider.on((_slider$on = {}, _defineProperty(_slider$on, _pointer2.default.down, function(e) {\r\n            if (!state.enabled || !isLeftButtonPressed(e) || isActive) {\r\n                return\r\n            }\r\n            isActive = true;\r\n            isTouchEvent = isTouchEventArgs(e);\r\n            movingHandler = controller.beginSliderMoving(i, getEventPageX(e) - getRootOffsetLeft());\r\n            stopPropagationAndPreventDefault(e)\r\n        }), _defineProperty(_slider$on, _pointer2.default.move, function() {\r\n            if (!movingHandler) {\r\n                controller.foregroundSlider(i)\r\n            }\r\n        }), _slider$on))\r\n    });\r\n\r\n    function cancel(e) {\r\n        if (isActive) {\r\n            isActive = false;\r\n            movingHandler.complete(e);\r\n            movingHandler = null\r\n        }\r\n    }\r\n    return docEvents\r\n}\r\n\r\nfunction Tracker(params) {\r\n    var state = this._state = {};\r\n    var targets = params.controller.getTrackerTargets();\r\n    if (_support.pointer) {\r\n        params.renderer.root.css({\r\n            msTouchAction: \"pinch-zoom\"\r\n        })\r\n    }\r\n    this._docEvents = [initializeSelectedAreaEvents(params.controller, targets.selectedArea, state, getRootOffsetLeft), initializeAreaEvents(params.controller, targets.area, state, getRootOffsetLeft), initializeSliderEvents(params.controller, targets.sliders, state, getRootOffsetLeft)];\r\n    (0, _iterator.each)(this._docEvents, function(_, events) {\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), events)\r\n    });\r\n\r\n    function getRootOffsetLeft() {\r\n        return params.renderer.getRootOffset().left\r\n    }\r\n}\r\nTracker.prototype = {\r\n    constructor: Tracker,\r\n    dispose: function() {\r\n        (0, _iterator.each)(this._docEvents, function(_, events) {\r\n            _events_engine2.default.off(_dom_adapter2.default.getDocument(), events)\r\n        })\r\n    },\r\n    update: function(enabled, behavior) {\r\n        var state = this._state;\r\n        state.enabled = enabled;\r\n        state.moveSelectedRangeByClick = behavior.moveSelectedRangeByClick;\r\n        state.manualRangeSelectionEnabled = behavior.manualRangeSelectionEnabled\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}