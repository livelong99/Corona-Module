{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _ui = require(\"../widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _drawer = require(\"../drawer\");\n\nvar _drawer2 = _interopRequireDefault(_drawer);\n\nvar _load_indicator = require(\"../load_indicator\");\n\nvar _load_indicator2 = _interopRequireDefault(_load_indicator);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _uiDiagram = require(\"./ui.diagram.toolbar\");\n\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\n\nvar _uiDiagram3 = require(\"./ui.diagram.leftpanel\");\n\nvar _uiDiagram4 = _interopRequireDefault(_uiDiagram3);\n\nvar _uiDiagram5 = require(\"./ui.diagram.rightpanel\");\n\nvar _uiDiagram6 = _interopRequireDefault(_uiDiagram5);\n\nvar _uiDiagram7 = require(\"./ui.diagram.contextmenu\");\n\nvar _uiDiagram8 = _interopRequireDefault(_uiDiagram7);\n\nvar _uiDiagram9 = require(\"./ui.diagram.dialogs\");\n\nvar _uiDiagram10 = _interopRequireDefault(_uiDiagram9);\n\nvar _uiDiagram11 = require(\"./ui.diagram.toolbox\");\n\nvar _uiDiagram12 = _interopRequireDefault(_uiDiagram11);\n\nvar _uiDiagram13 = require(\"./ui.diagram.optionsupdate\");\n\nvar _uiDiagram14 = _interopRequireDefault(_uiDiagram13);\n\nvar _uiDiagram15 = require(\"./ui.diagram.nodes\");\n\nvar _uiDiagram16 = _interopRequireDefault(_uiDiagram15);\n\nvar _uiDiagram17 = require(\"./ui.diagram.edges\");\n\nvar _uiDiagram18 = _interopRequireDefault(_uiDiagram17);\n\nvar _tooltip = require(\"../tooltip\");\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _diagram_importer = require(\"./diagram_importer\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _number = require(\"../../localization/number\");\n\nvar _number2 = _interopRequireDefault(_number);\n\nvar _uiDiagram19 = require(\"./ui.diagram.dialogmanager\");\n\nvar _uiDiagram20 = _interopRequireDefault(_uiDiagram19);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DIAGRAM_CLASS = \"dx-diagram\";\nvar DIAGRAM_FULLSCREEN_CLASS = \"dx-diagram-fullscreen\";\nvar DIAGRAM_TOOLBAR_WRAPPER_CLASS = DIAGRAM_CLASS + \"-toolbar-wrapper\";\nvar DIAGRAM_CONTENT_WRAPPER_CLASS = DIAGRAM_CLASS + \"-content-wrapper\";\nvar DIAGRAM_DRAWER_WRAPPER_CLASS = DIAGRAM_CLASS + \"-drawer-wrapper\";\nvar DIAGRAM_CONTENT_CLASS = DIAGRAM_CLASS + \"-content\";\nvar DIAGRAM_LOADING_INDICATOR_CLASS = DIAGRAM_CLASS + \"-loading-indicator\";\nvar DIAGRAM_DEFAULT_UNIT = \"in\";\nvar DIAGRAM_DEFAULT_ZOOMLEVEL = 1;\nvar DIAGRAM_DEFAULT_AUTOZOOM = \"disabled\";\nvar DIAGRAM_DEFAULT_PAGE_ORIENTATION = \"portrait\";\nvar DIAGRAM_DEFAULT_PAGE_COLOR = \"white\";\nvar DIAGRAM_NAMESPACE = \"dxDiagramEvent\";\n\nvar FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"fullscreenchange\", DIAGRAM_NAMESPACE);\n\nvar IE_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"msfullscreenchange\", DIAGRAM_NAMESPACE);\n\nvar WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"webkitfullscreenchange\", DIAGRAM_NAMESPACE);\n\nvar MOZ_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"mozfullscreenchange\", DIAGRAM_NAMESPACE);\n\nvar Diagram = function (_Widget) {\n  _inherits(Diagram, _Widget);\n\n  var _super = _createSuper(Diagram);\n\n  function Diagram() {\n    _classCallCheck(this, Diagram);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Diagram, [{\n    key: \"_init\",\n    value: function value() {\n      this._updateDiagramLockCount = 0;\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_init\", this).call(this);\n\n      this._initDiagram();\n\n      this.optionsUpdateBar = new _uiDiagram14.default(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(Diagram.prototype), \"_initMarkup\", this).call(this);\n\n      var isServerSide = !(0, _window.hasWindow)();\n      this.$element().addClass(DIAGRAM_CLASS);\n      this._toolbarInstance = void 0;\n\n      if (this.option(\"toolbar.visible\")) {\n        this._renderToolbar();\n      }\n\n      var $contentWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_WRAPPER_CLASS).appendTo(this.$element());\n      this._leftPanel = void 0;\n\n      if (this.option(\"toolbox.visible\")) {\n        this._renderLeftPanel($contentWrapper);\n      }\n\n      var $drawerWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_DRAWER_WRAPPER_CLASS).appendTo($contentWrapper);\n\n      if (this.option(\"propertiesPanel.enabled\")) {\n        var $drawer = (0, _renderer2.default)(\"<div>\").appendTo($drawerWrapper);\n        this._content = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($drawer);\n\n        this._renderRightPanel($drawer);\n      } else {\n        this._content = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($drawerWrapper);\n      }\n\n      this._contextMenu = void 0;\n\n      if (this.option(\"contextMenu.enabled\")) {\n        this._renderContextMenu(this._content);\n      }\n\n      this._renderDialog(this._content);\n\n      !isServerSide && this._diagramInstance.createDocument(this._content[0]);\n\n      if (this.option(\"zoomLevel\") !== DIAGRAM_DEFAULT_ZOOMLEVEL) {\n        this._updateZoomLevelState();\n      }\n\n      if (this.option(\"autoZoom\") !== DIAGRAM_DEFAULT_AUTOZOOM) {\n        this._updateAutoZoomState();\n      }\n\n      if (this.option(\"simpleView\")) {\n        this._updateSimpleViewState();\n      }\n\n      if (this.option(\"readOnly\") || this.option(\"disabled\")) {\n        this._updateReadOnlyState();\n      }\n\n      if (this.option(\"fullScreen\")) {\n        this._updateFullscreenState();\n      }\n\n      this._diagramInstance.barManager.registerBar(this.optionsUpdateBar);\n    }\n  }, {\n    key: \"notifyBarCommandExecuted\",\n    value: function value() {\n      this._diagramInstance.captureFocus();\n    }\n  }, {\n    key: \"_registerBar\",\n    value: function value(component) {\n      component.bar.onChanged.add(this);\n\n      this._diagramInstance.barManager.registerBar(component.bar);\n    }\n  }, {\n    key: \"_renderToolbar\",\n    value: function value() {\n      var _this = this;\n\n      var $toolbarWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_WRAPPER_CLASS).appendTo(this.$element());\n      var toolbarWidgetCommandNames = [];\n\n      if (this.option(\"propertiesPanel.enabled\") && this.option(\"propertiesPanel.collapsible\")) {\n        toolbarWidgetCommandNames.push(\"options\");\n      }\n\n      this._toolbarInstance = this._createComponent($toolbarWrapper, _uiDiagram2.default, {\n        commands: this.option(\"toolbar.commands\"),\n        onContentReady: function onContentReady(e) {\n          return _this._registerBar(e.component);\n        },\n        onPointerUp: this._onPanelPointerUp.bind(this),\n        \"export\": this.option(\"export\"),\n        widgetCommandNames: toolbarWidgetCommandNames\n      });\n    }\n  }, {\n    key: \"_renderLeftPanel\",\n    value: function value($parent) {\n      var _this2 = this;\n\n      var isServerSide = !(0, _window.hasWindow)();\n      var $leftPanel = (0, _renderer2.default)(\"<div>\").appendTo($parent);\n      this._leftPanel = this._createComponent($leftPanel, _uiDiagram4.default, {\n        toolboxGroups: this._getToolboxGroups(),\n        disabled: this.option(\"readOnly\"),\n        onShapeCategoryRendered: function onShapeCategoryRendered(e) {\n          if (isServerSide) {\n            return;\n          }\n\n          var $toolboxContainer = (0, _renderer2.default)(e.$element);\n\n          _this2._diagramInstance.createToolbox($toolboxContainer[0], 40, 8, {\n            \"data-toggle\": \"shape-toolbox-tooltip\"\n          }, e.shapes || e.category, \"texts\" === e.displayMode);\n\n          _this2._createTooltips($parent, $toolboxContainer.find('[data-toggle=\"shape-toolbox-tooltip\"]'));\n        },\n        onPointerUp: this._onPanelPointerUp.bind(this)\n      });\n    }\n  }, {\n    key: \"_createTooltips\",\n    value: function value($container, targets) {\n      var _this3 = this;\n\n      targets.each(function (index, element) {\n        var $target = (0, _renderer2.default)(element);\n        var $tooltip = (0, _renderer2.default)(\"<div>\").html($target.attr(\"title\")).appendTo($container);\n\n        _this3._createComponent($tooltip, _tooltip2.default, {\n          target: $target.get(0),\n          showEvent: \"mouseenter\",\n          hideEvent: \"mouseleave\",\n          position: \"top\",\n          animation: {\n            show: {\n              type: \"fade\",\n              from: 0,\n              to: 1,\n              delay: 500\n            },\n            hide: {\n              type: \"fade\",\n              from: 1,\n              to: 0,\n              delay: 100\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_invalidateContextMenuCommands\",\n    value: function value() {\n      if (this._contextMenu) {\n        this._contextMenu.option({\n          commands: this.option(\"contextMenu.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidatePropertiesPanelGroups\",\n    value: function value() {\n      if (this._rightPanel) {\n        this._rightPanel.option({\n          propertyGroups: this.option(\"propertiesPanel.groups\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateToolbarCommands\",\n    value: function value() {\n      if (this._toolbarInstance) {\n        this._toolbarInstance.option({\n          commands: this.option(\"toolbar.commands\")\n        });\n      }\n    }\n  }, {\n    key: \"_invalidateToolboxGroups\",\n    value: function value() {\n      if (this._leftPanel) {\n        this._leftPanel.option({\n          toolboxGroups: this._getToolboxGroups()\n        });\n      }\n    }\n  }, {\n    key: \"_setLeftPanelEnabled\",\n    value: function value(enabled) {\n      if (this._leftPanel) {\n        this._leftPanel.option({\n          disabled: !enabled\n        });\n      }\n    }\n  }, {\n    key: \"_renderRightPanel\",\n    value: function value($parent) {\n      var _this4 = this;\n\n      var isCollapsible = this.option(\"propertiesPanel.collapsible\");\n\n      var drawer = this._createComponent($parent, _drawer2.default, {\n        closeOnOutsideClick: isCollapsible,\n        opened: !isCollapsible,\n        openedStateMode: isCollapsible ? \"overlap\" : \"shrink\",\n        position: \"right\",\n        template: function template($options) {\n          _this4._rightPanel = _this4._createComponent($options, _uiDiagram6.default, {\n            propertyGroups: _this4.option(\"propertiesPanel.groups\"),\n            onContentReady: function onContentReady(e) {\n              return _this4._registerBar(e.component);\n            },\n            onPointerUp: _this4._onPanelPointerUp.bind(_this4)\n          });\n        }\n      });\n\n      if (this._toolbarInstance) {\n        this._toolbarInstance.option(\"onWidgetCommand\", function (e) {\n          if (\"options\" === e.name) {\n            drawer.toggle();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onPanelPointerUp\",\n    value: function value() {\n      this._diagramInstance.captureFocus();\n    }\n  }, {\n    key: \"_renderContextMenu\",\n    value: function value($mainElement) {\n      var _this5 = this;\n\n      var $contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n      this._contextMenu = this._createComponent($contextMenu, _uiDiagram8.default, {\n        commands: this.option(\"contextMenu.commands\"),\n        container: $mainElement,\n        onContentReady: function onContentReady(_ref) {\n          var component = _ref.component;\n          return _this5._registerBar(component);\n        },\n        onVisibleChanged: function onVisibleChanged(_ref2) {\n          var component = _ref2.component;\n          return _this5._diagramInstance.barManager.updateBarItemsState(component.bar);\n        },\n        onItemClick: function onItemClick(itemData) {\n          return _this5._onBeforeCommandExecuted(itemData.command);\n        }\n      });\n    }\n  }, {\n    key: \"_onBeforeCommandExecuted\",\n    value: function value(command) {\n      var dialogParameters = _uiDiagram20.default.getDialogParameters(command);\n\n      if (dialogParameters) {\n        this._showDialog(dialogParameters);\n      }\n\n      return !!dialogParameters;\n    }\n  }, {\n    key: \"_renderDialog\",\n    value: function value($mainElement) {\n      var $dialogElement = (0, _renderer2.default)(\"<div>\").appendTo($mainElement);\n      this._dialogInstance = this._createComponent($dialogElement, _uiDiagram10.default, {});\n    }\n  }, {\n    key: \"_showDialog\",\n    value: function value(dialogParameters) {\n      if (this._dialogInstance) {\n        this._dialogInstance.option(\"onGetContent\", dialogParameters.onGetContent);\n\n        this._dialogInstance.option(\"onHidden\", function () {\n          this._diagramInstance.captureFocus();\n        }.bind(this));\n\n        this._dialogInstance.option(\"command\", this._diagramInstance.commandManager.getCommand(dialogParameters.command));\n\n        this._dialogInstance.option(\"title\", dialogParameters.title);\n\n        this._dialogInstance._show();\n      }\n    }\n  }, {\n    key: \"_showLoadingIndicator\",\n    value: function value() {\n      this._loadingIndicator = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_LOADING_INDICATOR_CLASS);\n\n      this._createComponent(this._loadingIndicator, _load_indicator2.default, {});\n\n      var $parent = this._content || this.$element();\n      $parent.append(this._loadingIndicator);\n    }\n  }, {\n    key: \"_hideLoadingIndicator\",\n    value: function value() {\n      if (!this._loadingIndicator) {\n        return;\n      }\n\n      this._loadingIndicator.remove();\n\n      this._loadingIndicator = null;\n    }\n  }, {\n    key: \"_initDiagram\",\n    value: function value() {\n      var _getDiagram = (0, _diagram_importer.getDiagram)(),\n          DiagramControl = _getDiagram.DiagramControl;\n\n      this._diagramInstance = new DiagramControl();\n      this._diagramInstance.onChanged = this._raiseDataChangeAction.bind(this);\n      this._diagramInstance.onEdgeInserted = this._raiseEdgeInsertedAction.bind(this);\n      this._diagramInstance.onEdgeUpdated = this._raiseEdgeUpdatedAction.bind(this);\n      this._diagramInstance.onEdgeRemoved = this._raiseEdgeRemovedAction.bind(this);\n      this._diagramInstance.onNodeInserted = this._raiseNodeInsertedAction.bind(this);\n      this._diagramInstance.onNodeUpdated = this._raiseNodeUpdatedAction.bind(this);\n      this._diagramInstance.onNodeRemoved = this._raiseNodeRemovedAction.bind(this);\n      this._diagramInstance.onToolboxDragStart = this._raiseToolboxDragStart.bind(this);\n      this._diagramInstance.onToolboxDragEnd = this._raiseToolboxDragEnd.bind(this);\n      this._diagramInstance.onToggleFullscreen = this._onToggleFullScreen.bind(this);\n      this._diagramInstance.onShowContextMenu = this._onShowContextMenu.bind(this);\n      this._diagramInstance.onHideContextMenu = this._onHideContextMenu.bind(this);\n\n      this._diagramInstance.onNativeAction.add({\n        notifyItemClick: this._raiseItemClickAction.bind(this),\n        notifyItemDblClick: this._raiseItemDblClickAction.bind(this),\n        notifySelectionChanged: this._raiseSelectionChanged.bind(this)\n      });\n\n      this._updateUnitItems();\n\n      this._updateFormatUnitsMethod();\n\n      if (this.option(\"units\") !== DIAGRAM_DEFAULT_UNIT) {\n        this._updateUnitsState();\n      }\n\n      if (this.option(\"pageSize\")) {\n        if (this.option(\"pageSize.items\")) {\n          this._updatePageSizeItemsState();\n        }\n\n        if (this.option(\"pageSize.width\") && this.option(\"pageSize.height\")) {\n          this._updatePageSizeState();\n        }\n      }\n\n      if (this.option(\"pageOrientation\") !== DIAGRAM_DEFAULT_PAGE_ORIENTATION) {\n        this._updatePageOrientationState();\n      }\n\n      if (this.option(\"pageColor\") !== DIAGRAM_DEFAULT_PAGE_COLOR) {\n        this._updatePageColorState();\n      }\n\n      if (this.option(\"viewUnits\") !== DIAGRAM_DEFAULT_UNIT) {\n        this._updateViewUnitsState();\n      }\n\n      if (!this.option(\"showGrid\")) {\n        this._updateShowGridState();\n      }\n\n      if (!this.option(\"snapToGrid\")) {\n        this._updateSnapToGridState();\n      }\n\n      if (this.option(\"gridSize\")) {\n        if (this.option(\"gridSize.items\")) {\n          this._updateGridSizeItemsState();\n        }\n\n        this._updateGridSizeState();\n      }\n\n      if (this.option(\"zoomLevel.items\")) {\n        this._updateZoomLevelItemsState();\n      }\n\n      this._updateCustomShapes(this._getCustomShapes());\n\n      this._refreshDataSources();\n    }\n  }, {\n    key: \"_dispose\",\n    value: function value() {\n      if (this._diagramInstance) {\n        this._diagramInstance.dispose();\n\n        this._diagramInstance = void 0;\n      }\n\n      _get(_getPrototypeOf(Diagram.prototype), \"_dispose\", this).call(this);\n    }\n  }, {\n    key: \"_executeDiagramCommand\",\n    value: function value(command, parameter) {\n      this._diagramInstance.commandManager.getCommand(command).execute(parameter);\n    }\n  }, {\n    key: \"_refreshDataSources\",\n    value: function value() {\n      this._beginUpdateDiagram();\n\n      this._refreshNodesDataSource();\n\n      this._refreshEdgesDataSource();\n\n      this._endUpdateDiagram();\n    }\n  }, {\n    key: \"_refreshNodesDataSource\",\n    value: function value() {\n      if (this._nodesOption) {\n        this._nodesOption._disposeDataSource();\n\n        delete this._nodesOption;\n      }\n\n      if (this.option(\"nodes.dataSource\")) {\n        this._nodesOption = new _uiDiagram16.default(this);\n\n        this._nodesOption.option(\"dataSource\", this.option(\"nodes.dataSource\"));\n\n        this._nodesOption._refreshDataSource();\n      }\n    }\n  }, {\n    key: \"_refreshEdgesDataSource\",\n    value: function value() {\n      if (this._edgesOption) {\n        this._edgesOption._disposeDataSource();\n\n        delete this._edgesOption;\n      }\n\n      if (this.option(\"edges.dataSource\")) {\n        this._edgesOption = new _uiDiagram18.default(this);\n\n        this._edgesOption.option(\"dataSource\", this.option(\"edges.dataSource\"));\n\n        this._edgesOption._refreshDataSource();\n      }\n    }\n  }, {\n    key: \"_getDiagramData\",\n    value: function value() {\n      var value;\n\n      var _getDiagram2 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram2.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Export, function (data) {\n        value = data;\n      });\n\n      return value;\n    }\n  }, {\n    key: \"_setDiagramData\",\n    value: function value(data, keepExistingItems) {\n      var _getDiagram3 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram3.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Import, {\n        data: data,\n        keepExistingItems: keepExistingItems\n      });\n    }\n  }, {\n    key: \"_onDataSourceChanged\",\n    value: function value() {\n      this._bindDiagramData();\n    }\n  }, {\n    key: \"_createOptionGetter\",\n    value: function value(optionName) {\n      var expr = this.option(optionName);\n      return expr && _data2.default.compileGetter(expr);\n    }\n  }, {\n    key: \"_createOptionSetter\",\n    value: function value(optionName) {\n      var expr = this.option(optionName);\n\n      if (_type2.default.isFunction(expr)) {\n        return expr;\n      }\n\n      return expr && _data2.default.compileSetter(expr);\n    }\n  }, {\n    key: \"_bindDiagramData\",\n    value: function value() {\n      if (this._updateDiagramLockCount || !this._isBindingMode()) {\n        return;\n      }\n\n      var _getDiagram4 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram4.DiagramCommand,\n          ConnectorLineOption = _getDiagram4.ConnectorLineOption,\n          ConnectorLineEnding = _getDiagram4.ConnectorLineEnding;\n\n      var lineOptionGetter;\n      var lineOptionSetter;\n      var startLineEndingGetter;\n      var startLineEndingSetter;\n      var endLineEndingGetter;\n      var endLineEndingSetter;\n      var data = {\n        nodeDataSource: this._nodesOption && this._nodesOption.getItems(),\n        edgeDataSource: this._edgesOption && this._edgesOption.getItems(),\n        nodeDataImporter: {\n          getKey: this._createOptionGetter(\"nodes.keyExpr\"),\n          setKey: this._createOptionSetter(\"nodes.keyExpr\"),\n          getLocked: this._createOptionGetter(\"nodes.lockedExpr\"),\n          setLocked: this._createOptionSetter(\"nodes.lockedExpr\"),\n          getStyle: this._createOptionGetter(\"nodes.styleExpr\"),\n          setStyle: this._createOptionSetter(\"nodes.styleExpr\"),\n          getStyleText: this._createOptionGetter(\"nodes.textStyleExpr\"),\n          setStyleText: this._createOptionSetter(\"nodes.textStyleExpr\"),\n          getZIndex: this._createOptionGetter(\"nodes.zIndexExpr\"),\n          setZIndex: this._createOptionSetter(\"nodes.zIndexExpr\"),\n          getType: this._createOptionGetter(\"nodes.typeExpr\"),\n          setType: this._createOptionSetter(\"nodes.typeExpr\"),\n          getText: this._createOptionGetter(\"nodes.textExpr\"),\n          setText: this._createOptionSetter(\"nodes.textExpr\"),\n          getImage: this._createOptionGetter(\"nodes.imageUrlExpr\"),\n          setImage: this._createOptionSetter(\"nodes.imageUrlExpr\"),\n          getLeft: this._createOptionGetter(\"nodes.leftExpr\"),\n          setLeft: this._createOptionSetter(\"nodes.leftExpr\"),\n          getTop: this._createOptionGetter(\"nodes.topExpr\"),\n          setTop: this._createOptionSetter(\"nodes.topExpr\"),\n          getWidth: this._createOptionGetter(\"nodes.widthExpr\"),\n          setWidth: this._createOptionSetter(\"nodes.widthExpr\"),\n          getHeight: this._createOptionGetter(\"nodes.heightExpr\"),\n          setHeight: this._createOptionSetter(\"nodes.heightExpr\"),\n          getParentKey: this._createOptionGetter(\"nodes.parentKeyExpr\"),\n          setParentKey: this._createOptionSetter(\"nodes.parentKeyExpr\"),\n          getItems: this._createOptionGetter(\"nodes.itemsExpr\"),\n          setItems: this._createOptionSetter(\"nodes.itemsExpr\"),\n          getContainerKey: this._createOptionGetter(\"nodes.containerKeyExpr\"),\n          setContainerKey: this._createOptionSetter(\"nodes.containerKeyExpr\"),\n          getChildren: this._createOptionGetter(\"nodes.childrenExpr\"),\n          setChildren: this._createOptionSetter(\"nodes.childrenExpr\")\n        },\n        edgeDataImporter: {\n          getKey: this._createOptionGetter(\"edges.keyExpr\"),\n          setKey: this._createOptionSetter(\"edges.keyExpr\"),\n          getLocked: this._createOptionGetter(\"edges.lockedExpr\"),\n          setLocked: this._createOptionSetter(\"edges.lockedExpr\"),\n          getStyle: this._createOptionGetter(\"edges.styleExpr\"),\n          setStyle: this._createOptionSetter(\"edges.styleExpr\"),\n          getStyleText: this._createOptionGetter(\"edges.textStyleExpr\"),\n          setStyleText: this._createOptionSetter(\"edges.textStyleExpr\"),\n          getZIndex: this._createOptionGetter(\"edges.zIndexExpr\"),\n          setZIndex: this._createOptionSetter(\"edges.zIndexExpr\"),\n          getFrom: this._createOptionGetter(\"edges.fromExpr\"),\n          setFrom: this._createOptionSetter(\"edges.fromExpr\"),\n          getFromPointIndex: this._createOptionGetter(\"edges.fromPointIndexExpr\"),\n          setFromPointIndex: this._createOptionSetter(\"edges.fromPointIndexExpr\"),\n          getTo: this._createOptionGetter(\"edges.toExpr\"),\n          setTo: this._createOptionSetter(\"edges.toExpr\"),\n          getToPointIndex: this._createOptionGetter(\"edges.toPointIndexExpr\"),\n          setToPointIndex: this._createOptionSetter(\"edges.toPointIndexExpr\"),\n          getPoints: this._createOptionGetter(\"edges.pointsExpr\"),\n          setPoints: this._createOptionSetter(\"edges.pointsExpr\"),\n          getText: this._createOptionGetter(\"edges.textExpr\"),\n          setText: this._createOptionSetter(\"edges.textExpr\"),\n          getLineOption: (lineOptionGetter = this._createOptionGetter(\"edges.lineTypeExpr\")) && function (obj) {\n            var lineType = lineOptionGetter(obj);\n\n            switch (lineType) {\n              case \"straight\":\n                return ConnectorLineOption.Straight;\n\n              default:\n                return ConnectorLineOption.Orthogonal;\n            }\n          }.bind(this),\n          setLineOption: (lineOptionSetter = this._createOptionSetter(\"edges.lineTypeExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineOption.Straight:\n                value = \"straight\";\n                break;\n\n              case ConnectorLineOption.Orthogonal:\n                value = \"orthogonal\";\n            }\n\n            lineOptionSetter(obj, value);\n          }.bind(this),\n          getStartLineEnding: (startLineEndingGetter = this._createOptionGetter(\"edges.fromLineEndExpr\")) && function (obj) {\n            var lineType = startLineEndingGetter(obj);\n\n            switch (lineType) {\n              case \"arrow\":\n                return ConnectorLineEnding.Arrow;\n\n              default:\n                return ConnectorLineEnding.None;\n            }\n          }.bind(this),\n          setStartLineEnding: (startLineEndingSetter = this._createOptionSetter(\"edges.fromLineEndExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineEnding.Arrow:\n                value = \"arrow\";\n                break;\n\n              case ConnectorLineEnding.None:\n                value = \"none\";\n            }\n\n            startLineEndingSetter(obj, value);\n          }.bind(this),\n          getEndLineEnding: (endLineEndingGetter = this._createOptionGetter(\"edges.toLineEndExpr\")) && function (obj) {\n            var lineType = endLineEndingGetter(obj);\n\n            switch (lineType) {\n              case \"none\":\n                return ConnectorLineEnding.None;\n\n              default:\n                return ConnectorLineEnding.Arrow;\n            }\n          }.bind(this),\n          setEndLineEnding: (endLineEndingSetter = this._createOptionSetter(\"edges.toLineEndExpr\")) && function (obj, value) {\n            switch (value) {\n              case ConnectorLineEnding.Arrow:\n                value = \"arrow\";\n                break;\n\n              case ConnectorLineEnding.None:\n                value = \"none\";\n            }\n\n            endLineEndingSetter(obj, value);\n          }.bind(this)\n        },\n        layoutParameters: this._getDataBindingLayoutParameters()\n      };\n\n      this._executeDiagramCommand(DiagramCommand.BindDocument, data);\n    }\n  }, {\n    key: \"_getDataBindingLayoutParameters\",\n    value: function value() {\n      var _getDiagram5 = (0, _diagram_importer.getDiagram)(),\n          DataLayoutType = _getDiagram5.DataLayoutType,\n          DataLayoutOrientation = _getDiagram5.DataLayoutOrientation;\n\n      var layoutParametersOption = this.option(\"nodes.autoLayout\");\n\n      if (!layoutParametersOption || \"off\" === layoutParametersOption || \"off\" === layoutParametersOption.type) {\n        return;\n      }\n\n      var parameters = {};\n      var layoutType = layoutParametersOption.type || layoutParametersOption;\n\n      if (\"tree\" === layoutType) {\n        parameters.type = DataLayoutType.Tree;\n      } else {\n        if (\"layered\" === layoutType) {\n          parameters.type = DataLayoutType.Sugiyama;\n        }\n      }\n\n      if (\"vertical\" === layoutParametersOption.orientation) {\n        parameters.orientation = DataLayoutOrientation.Vertical;\n      } else {\n        if (\"horizontal\" === layoutParametersOption.orientation) {\n          parameters.orientation = DataLayoutOrientation.Horizontal;\n        }\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"_getAutoZoomValue\",\n    value: function value(option) {\n      var _getDiagram6 = (0, _diagram_importer.getDiagram)(),\n          AutoZoomMode = _getDiagram6.AutoZoomMode;\n\n      switch (option) {\n        case \"fitContent\":\n          return AutoZoomMode.FitContent;\n\n        case \"fitWidth\":\n          return AutoZoomMode.FitToWidth;\n\n        default:\n          return AutoZoomMode.Disabled;\n      }\n    }\n  }, {\n    key: \"_isBindingMode\",\n    value: function value() {\n      return this._nodesOption && this._nodesOption.hasItems() || this._edgesOption && this._nodesOption.hasItems();\n    }\n  }, {\n    key: \"_beginUpdateDiagram\",\n    value: function value() {\n      this._updateDiagramLockCount++;\n    }\n  }, {\n    key: \"_endUpdateDiagram\",\n    value: function value() {\n      this._updateDiagramLockCount = Math.max(this._updateDiagramLockCount - 1, 0);\n\n      if (!this._updateDiagramLockCount) {\n        this._bindDiagramData();\n      }\n    }\n  }, {\n    key: \"_getCustomShapes\",\n    value: function value() {\n      return this.option(\"customShapes\") || [];\n    }\n  }, {\n    key: \"_getToolboxGroups\",\n    value: function value() {\n      return _uiDiagram12.default.getGroups(this.option(\"toolbox.groups\"));\n    }\n  }, {\n    key: \"_updateCustomShapes\",\n    value: function value(customShapes, prevCustomShapes) {\n      if (Array.isArray(prevCustomShapes)) {\n        this._diagramInstance.removeCustomShapes(prevCustomShapes.map(function (s) {\n          return s.type;\n        }));\n      }\n\n      if (Array.isArray(customShapes)) {\n        this._diagramInstance.addCustomShapes(customShapes.map(function (s) {\n          return {\n            category: s.category,\n            type: s.type,\n            baseType: s.baseType,\n            title: s.title,\n            svgUrl: s.backgroundImageUrl,\n            svgLeft: s.backgroundImageLeft,\n            svgTop: s.backgroundImageTop,\n            svgWidth: s.backgroundImageWidth,\n            svgHeight: s.backgroundImageHeight,\n            defaultWidth: s.defaultWidth,\n            defaultHeight: s.defaultHeight,\n            defaultText: s.defaultText,\n            allowEditText: s.allowEditText,\n            textLeft: s.textLeft,\n            textTop: s.textTop,\n            textWidth: s.textWidth,\n            textHeight: s.textHeight,\n            defaultImageUrl: s.defaultImageUrl,\n            allowEditImage: s.allowEditImage,\n            imageLeft: s.imageLeft,\n            imageTop: s.imageTop,\n            imageWidth: s.imageWidth,\n            imageHeight: s.imageHeight,\n            connectionPoints: s.connectionPoints && s.connectionPoints.map(function (pt) {\n              return {\n                x: pt.x,\n                y: pt.y\n              };\n            })\n          };\n        }));\n      }\n    }\n  }, {\n    key: \"_onToggleFullScreen\",\n    value: function value(fullScreen) {\n      this._changeNativeFullscreen(fullScreen);\n\n      this.$element().toggleClass(DIAGRAM_FULLSCREEN_CLASS, fullScreen);\n\n      this._diagramInstance.updateLayout();\n    }\n  }, {\n    key: \"_changeNativeFullscreen\",\n    value: function value(setModeOn) {\n      var window = (0, _window.getWindow)();\n\n      if (window.self === window.top || setModeOn === this._inNativeFullscreen()) {\n        return;\n      }\n\n      if (setModeOn) {\n        this._subscribeFullscreenNativeChanged();\n      } else {\n        this._unsubscribeFullscreenNativeChanged();\n      }\n\n      this._setNativeFullscreen(setModeOn);\n    }\n  }, {\n    key: \"_setNativeFullscreen\",\n    value: function value(on) {\n      var window = (0, _window.getWindow)();\n      var document = window.self.document;\n      var body = window.self.document.body;\n\n      if (on) {\n        if (body.requestFullscreen) {\n          body.requestFullscreen();\n        } else {\n          if (body.mozRequestFullscreen) {\n            body.mozRequestFullscreen();\n          } else {\n            if (body.webkitRequestFullscreen) {\n              body.webkitRequestFullscreen();\n            } else {\n              if (body.msRequestFullscreen) {\n                body.msRequestFullscreen();\n              }\n            }\n          }\n        }\n      } else {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else {\n          if (document.mozCancelFullscreen) {\n            document.mozCancelFullscreen();\n          } else {\n            if (document.webkitExitFullscreen) {\n              document.webkitExitFullscreen();\n            } else {\n              if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_inNativeFullscreen\",\n    value: function value() {\n      var document = (0, _window.getWindow)().document;\n      var fullscreenElement = document.fullscreenElement || document.msFullscreenElement || document.webkitFullscreenElement;\n      var isInFullscreen = fullscreenElement === document.body || document.webkitIsFullscreen;\n      return !!isInFullscreen;\n    }\n  }, {\n    key: \"_subscribeFullscreenNativeChanged\",\n    value: function value() {\n      var document = (0, _window.getWindow)().document;\n\n      var handler = this._onNativeFullscreenChangeHandler.bind(this);\n\n      _events_engine2.default.on(document, FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine2.default.on(document, IE_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine2.default.on(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n\n      _events_engine2.default.on(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME, handler);\n    }\n  }, {\n    key: \"_unsubscribeFullscreenNativeChanged\",\n    value: function value() {\n      var document = (0, _window.getWindow)().document;\n\n      _events_engine2.default.off(document, FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine2.default.off(document, IE_FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine2.default.off(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME);\n\n      _events_engine2.default.off(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME);\n    }\n  }, {\n    key: \"_onNativeFullscreenChangeHandler\",\n    value: function value() {\n      if (!this._inNativeFullscreen()) {\n        this._unsubscribeFullscreenNativeChanged();\n\n        this._onToggleFullScreen(false);\n      }\n    }\n  }, {\n    key: \"_onShowContextMenu\",\n    value: function value(x, y, selection) {\n      this._contextMenu._show(x, y, selection);\n    }\n  }, {\n    key: \"_onHideContextMenu\",\n    value: function value() {\n      this._contextMenu._hide();\n    }\n  }, {\n    key: \"_getDiagramUnitValue\",\n    value: function value(_value) {\n      var _getDiagram7 = (0, _diagram_importer.getDiagram)(),\n          DiagramUnit = _getDiagram7.DiagramUnit;\n\n      switch (_value) {\n        case \"in\":\n          return DiagramUnit.In;\n\n        case \"cm\":\n          return DiagramUnit.Cm;\n\n        case \"px\":\n          return DiagramUnit.Px;\n\n        default:\n          return DiagramUnit.In;\n      }\n    }\n  }, {\n    key: \"_updateReadOnlyState\",\n    value: function value() {\n      var _getDiagram8 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram8.DiagramCommand;\n\n      var readOnly = this.option(\"readOnly\") || this.option(\"disabled\");\n\n      this._executeDiagramCommand(DiagramCommand.ToggleReadOnly, readOnly);\n\n      this._setLeftPanelEnabled(!readOnly);\n    }\n  }, {\n    key: \"_updateZoomLevelState\",\n    value: function value() {\n      var zoomLevel = this.option(\"zoomLevel.value\");\n\n      if (!zoomLevel) {\n        zoomLevel = this.option(\"zoomLevel\");\n      }\n\n      var _getDiagram9 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram9.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ZoomLevel, zoomLevel);\n    }\n  }, {\n    key: \"_updateZoomLevelItemsState\",\n    value: function value() {\n      var zoomLevelItems = this.option(\"zoomLevel.items\");\n\n      if (!Array.isArray(zoomLevelItems)) {\n        return;\n      }\n\n      var _getDiagram10 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram10.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ZoomLevelItems, zoomLevelItems);\n    }\n  }, {\n    key: \"_updateAutoZoomState\",\n    value: function value() {\n      var _getDiagram11 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram11.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.SwitchAutoZoom, this._getAutoZoomValue(this.option(\"autoZoom\")));\n    }\n  }, {\n    key: \"_updateSimpleViewState\",\n    value: function value() {\n      var _getDiagram12 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram12.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ToggleSimpleView, this.option(\"simpleView\"));\n    }\n  }, {\n    key: \"_updateFullscreenState\",\n    value: function value() {\n      var _getDiagram13 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram13.DiagramCommand;\n\n      var fullScreen = this.option(\"fullScreen\");\n\n      this._executeDiagramCommand(DiagramCommand.Fullscreen, fullScreen);\n\n      this._onToggleFullScreen(fullScreen);\n    }\n  }, {\n    key: \"_updateShowGridState\",\n    value: function value() {\n      var _getDiagram14 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram14.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ShowGrid, this.option(\"showGrid\"));\n    }\n  }, {\n    key: \"_updateSnapToGridState\",\n    value: function value() {\n      var _getDiagram15 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram15.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.SnapToGrid, this.option(\"snapToGrid\"));\n    }\n  }, {\n    key: \"_updateGridSizeState\",\n    value: function value() {\n      var gridSize = this.option(\"gridSize.value\");\n\n      if (!gridSize) {\n        gridSize = this.option(\"gridSize\");\n      }\n\n      var _getDiagram16 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram16.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.GridSize, gridSize);\n    }\n  }, {\n    key: \"_updateGridSizeItemsState\",\n    value: function value() {\n      var gridSizeItems = this.option(\"gridSize.items\");\n\n      if (!Array.isArray(gridSizeItems)) {\n        return;\n      }\n\n      var _getDiagram17 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram17.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.GridSizeItems, gridSizeItems);\n    }\n  }, {\n    key: \"_updateUnitItems\",\n    value: function value() {\n      var _getDiagram18 = (0, _diagram_importer.getDiagram)(),\n          DiagramUnit = _getDiagram18.DiagramUnit;\n\n      var items = {};\n      items[DiagramUnit.In] = _message2.default.format(\"dxDiagram-unitIn\");\n      items[DiagramUnit.Cm] = _message2.default.format(\"dxDiagram-unitCm\");\n      items[DiagramUnit.Px] = _message2.default.format(\"dxDiagram-unitPx\");\n      this._diagramInstance.settings.unitItems = items;\n    }\n  }, {\n    key: \"_updateFormatUnitsMethod\",\n    value: function value() {\n      this._diagramInstance.settings.formatUnit = function (value) {\n        return _number2.default.format(value);\n      };\n    }\n  }, {\n    key: \"_updateViewUnitsState\",\n    value: function value() {\n      var _getDiagram19 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram19.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.ViewUnits, this._getDiagramUnitValue(this.option(\"viewUnits\")));\n    }\n  }, {\n    key: \"_updateUnitsState\",\n    value: function value() {\n      var _getDiagram20 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram20.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.Units, this._getDiagramUnitValue(this.option(\"units\")));\n    }\n  }, {\n    key: \"_updatePageSizeState\",\n    value: function value() {\n      var pageSize = this.option(\"pageSize\");\n\n      if (!pageSize || !pageSize.width || !pageSize.height) {\n        return;\n      }\n\n      var _getDiagram21 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram21.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageSize, pageSize);\n    }\n  }, {\n    key: \"_updatePageSizeItemsState\",\n    value: function value() {\n      var pageSizeItems = this.option(\"pageSize.items\");\n\n      if (!Array.isArray(pageSizeItems)) {\n        return;\n      }\n\n      var _getDiagram22 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram22.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageSizeItems, pageSizeItems);\n    }\n  }, {\n    key: \"_updatePageOrientationState\",\n    value: function value() {\n      var _getDiagram23 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram23.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageLandscape, \"landscape\" === this.option(\"pageOrientation\"));\n    }\n  }, {\n    key: \"_updatePageColorState\",\n    value: function value() {\n      var _getDiagram24 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram24.DiagramCommand;\n\n      this._executeDiagramCommand(DiagramCommand.PageColor, this.option(\"pageColor\"));\n    }\n  }, {\n    key: \"export\",\n    value: function value() {\n      return this._getDiagramData();\n    }\n  }, {\n    key: \"exportTo\",\n    value: function value(format, callback) {\n      var command = this._getDiagramExportToCommand(format);\n\n      this._executeDiagramCommand(command, callback);\n    }\n  }, {\n    key: \"_getDiagramExportToCommand\",\n    value: function value(format) {\n      var _getDiagram25 = (0, _diagram_importer.getDiagram)(),\n          DiagramCommand = _getDiagram25.DiagramCommand;\n\n      switch (format) {\n        case \"png\":\n          return DiagramCommand.ExportPng;\n\n        case \"jpg\":\n          return DiagramCommand.ExportJpg;\n\n        default:\n          return DiagramCommand.ExportSvg;\n      }\n    }\n  }, {\n    key: \"import\",\n    value: function value(data, updateExistingItemsOnly) {\n      this._setDiagramData(data, updateExistingItemsOnly);\n\n      this._raiseDataChangeAction();\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(Diagram.prototype), \"_getDefaultOptions\", this).call(this), {\n        readOnly: false,\n        zoomLevel: DIAGRAM_DEFAULT_ZOOMLEVEL,\n        simpleView: false,\n        autoZoom: DIAGRAM_DEFAULT_AUTOZOOM,\n        fullScreen: false,\n        showGrid: true,\n        snapToGrid: true,\n        units: DIAGRAM_DEFAULT_UNIT,\n        viewUnits: DIAGRAM_DEFAULT_UNIT,\n        pageOrientation: DIAGRAM_DEFAULT_PAGE_ORIENTATION,\n        pageColor: DIAGRAM_DEFAULT_PAGE_COLOR,\n        onDataChanged: null,\n        nodes: {\n          dataSource: null,\n          keyExpr: \"id\",\n          lockedExpr: void 0,\n          styleExpr: void 0,\n          textStyleExpr: void 0,\n          zIndexExpr: void 0,\n          typeExpr: \"type\",\n          textExpr: \"text\",\n          imageUrlExpr: void 0,\n          parentKeyExpr: void 0,\n          itemsExpr: void 0,\n          leftExpr: void 0,\n          topExpr: void 0,\n          widthExpr: void 0,\n          heightExpr: void 0,\n          containerKeyExpr: void 0,\n          childrenExpr: \"children\",\n          autoLayout: \"tree\"\n        },\n        edges: {\n          dataSource: null,\n          keyExpr: \"id\",\n          lockedExpr: void 0,\n          styleExpr: void 0,\n          textStyleExpr: void 0,\n          zIndexExpr: void 0,\n          fromExpr: \"from\",\n          fromPointIndexExpr: void 0,\n          toExpr: \"to\",\n          toPointIndexExpr: void 0,\n          pointsExpr: void 0,\n          textExpr: void 0,\n          lineTypeExpr: void 0,\n          fromLineEndExpr: void 0,\n          toLineEndExpr: void 0\n        },\n        customShapes: [],\n        toolbox: {\n          visible: true\n        },\n        toolbar: {\n          visible: true\n        },\n        contextMenu: {\n          enabled: true\n        },\n        propertiesPanel: {\n          enabled: true,\n          collapsible: true\n        },\n        \"export\": {\n          fileName: \"Diagram\",\n          proxyUrl: void 0\n        },\n        onItemClick: null,\n        onItemDblClick: null,\n        onSelectionChanged: null\n      });\n    }\n  }, {\n    key: \"_createDataChangeAction\",\n    value: function value() {\n      this._dataChangeAction = this._createActionByOption(\"onDataChanged\");\n    }\n  }, {\n    key: \"_raiseDataChangeAction\",\n    value: function value() {\n      if (!this._dataChangeAction) {\n        this._createDataChangeAction();\n      }\n\n      this._dataChangeAction();\n    }\n  }, {\n    key: \"_raiseEdgeInsertedAction\",\n    value: function value(data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.insert(data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseEdgeUpdatedAction\",\n    value: function value(key, data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.update(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseEdgeRemovedAction\",\n    value: function value(key, data, callback, errorCallback) {\n      if (this._edgesOption) {\n        this._edgesOption.remove(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeInsertedAction\",\n    value: function value(data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.insert(data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeUpdatedAction\",\n    value: function value(key, data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.update(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseNodeRemovedAction\",\n    value: function value(key, data, callback, errorCallback) {\n      if (this._nodesOption) {\n        this._nodesOption.remove(key, data, callback, errorCallback);\n      }\n    }\n  }, {\n    key: \"_raiseToolboxDragStart\",\n    value: function value() {\n      if (this._leftPanel) {\n        this._leftPanel.$element().addClass(\"dx-skip-gesture-event\");\n      }\n    }\n  }, {\n    key: \"_raiseToolboxDragEnd\",\n    value: function value() {\n      if (this._leftPanel) {\n        this._leftPanel.$element().removeClass(\"dx-skip-gesture-event\");\n      }\n    }\n  }, {\n    key: \"_createItemClickAction\",\n    value: function value() {\n      this._itemClickAction = this._createActionByOption(\"onItemClick\");\n    }\n  }, {\n    key: \"_createItemDblClickAction\",\n    value: function value() {\n      this._itemDblClickAction = this._createActionByOption(\"onItemDblClick\");\n    }\n  }, {\n    key: \"_createSelectionChangedAction\",\n    value: function value() {\n      this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n    }\n  }, {\n    key: \"_raiseItemClickAction\",\n    value: function value(nativeItem) {\n      if (!this._itemClickAction) {\n        this._createItemClickAction();\n      }\n\n      this._itemClickAction({\n        item: this._nativeItemToDiagramItem(nativeItem)\n      });\n    }\n  }, {\n    key: \"_raiseItemDblClickAction\",\n    value: function value(nativeItem) {\n      if (!this._itemDblClickAction) {\n        this._createItemDblClickAction();\n      }\n\n      this._itemDblClickAction({\n        item: this._nativeItemToDiagramItem(nativeItem)\n      });\n    }\n  }, {\n    key: \"_raiseSelectionChanged\",\n    value: function value(nativeItems) {\n      if (!this._selectionChangedAction) {\n        this._createSelectionChangedAction();\n      }\n\n      this._selectionChangedAction({\n        items: nativeItems.map(this._nativeItemToDiagramItem.bind(this))\n      });\n    }\n  }, {\n    key: \"_nativeItemToDiagramItem\",\n    value: function value(nativeItem) {\n      var _getDiagram26 = (0, _diagram_importer.getDiagram)(),\n          NativeShape = _getDiagram26.NativeShape;\n\n      var createMethod = nativeItem instanceof NativeShape ? this._nativeShapeToDiagramShape.bind(this) : this._nativeConnectorToDiagramConnector.bind(this);\n      return (0, _extend.extend)({\n        id: nativeItem.id\n      }, createMethod(nativeItem));\n    }\n  }, {\n    key: \"_nativeShapeToDiagramShape\",\n    value: function value(nativeShape) {\n      return {\n        dataItem: this._nodesOption && this._nodesOption.findItem(nativeShape.key),\n        itemType: \"shape\",\n        text: nativeShape.text,\n        type: nativeShape.type\n      };\n    }\n  }, {\n    key: \"_nativeConnectorToDiagramConnector\",\n    value: function value(nativeConnector) {\n      return {\n        dataItem: this._edgesOption && this._edgesOption.findItem(nativeConnector.key),\n        itemType: \"connector\",\n        texts: nativeConnector.texts,\n        fromKey: nativeConnector.fromKey,\n        toKey: nativeConnector.toKey\n      };\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      if (this.optionsUpdateBar.isUpdateLocked()) {\n        return;\n      }\n\n      this.optionsUpdateBar.beginUpdate();\n\n      try {\n        this._optionChangedCore(args);\n      } finally {\n        this.optionsUpdateBar.endUpdate();\n      }\n    }\n  }, {\n    key: \"_optionChangedCore\",\n    value: function value(args) {\n      switch (args.name) {\n        case \"readOnly\":\n        case \"disabled\":\n          this._updateReadOnlyState();\n\n          break;\n\n        case \"zoomLevel\":\n          if (\"zoomLevel\" === args.fullName || \"zoomLevel.items\" === args.fullName) {\n            this._updateZoomLevelItemsState();\n          }\n\n          if (\"zoomLevel\" === args.fullName || \"zoomLevel.value\" === args.fullName) {\n            this._updateZoomLevelState();\n          }\n\n          break;\n\n        case \"autoZoom\":\n          this._updateAutoZoomState();\n\n          break;\n\n        case \"simpleView\":\n          this._updateSimpleViewState();\n\n          break;\n\n        case \"fullScreen\":\n          this._updateFullscreenState();\n\n          break;\n\n        case \"showGrid\":\n          this._updateShowGridState();\n\n          break;\n\n        case \"snapToGrid\":\n          this._updateSnapToGridState();\n\n          break;\n\n        case \"gridSize\":\n          if (\"gridSize\" === args.fullName || \"gridSize.items\" === args.fullName) {\n            this._updateGridSizeItemsState();\n          }\n\n          if (\"gridSize\" === args.fullName || \"gridSize.value\" === args.fullName) {\n            this._updateGridSizeState();\n          }\n\n          break;\n\n        case \"viewUnits\":\n          this._updateViewUnitsState();\n\n          break;\n\n        case \"units\":\n          this._updateUnitsState();\n\n          break;\n\n        case \"pageSize\":\n          if (\"pageSize\" === args.fullName || \"pageSize.items\" === args.fullName) {\n            this._updatePageSizeItemsState();\n          }\n\n          if (\"pageSize\" === args.fullName || \"pageSize.width\" === args.fullName || \"pageSize.height\" === args.fullName) {\n            this._updatePageSizeState();\n          }\n\n          break;\n\n        case \"pageOrientation\":\n          this._updatePageOrientationState();\n\n          break;\n\n        case \"pageColor\":\n          this._updatePageColorState();\n\n          break;\n\n        case \"nodes\":\n          if (\"nodes.autoLayout\" === args.fullName) {\n            this._refreshDataSources();\n          } else {\n            this._refreshNodesDataSource();\n          }\n\n          break;\n\n        case \"edges\":\n          this._refreshEdgesDataSource();\n\n          break;\n\n        case \"customShapes\":\n          this._updateCustomShapes(args.value, args.previousValue);\n\n          this._invalidate();\n\n          break;\n\n        case \"contextMenu\":\n          if (\"contextMenu.commands\" === args.fullName) {\n            this._invalidateContextMenuCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"propertiesPanel\":\n          if (\"propertiesPanel.groups\" === args.name) {\n            this._invalidatePropertiesPanelGroups();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"toolbox\":\n          if (\"toolbox.groups\" === args.fullName) {\n            this._invalidateToolboxGroups();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"toolbar\":\n          if (\"toolbar.commands\" === args.fullName) {\n            this._invalidateToolbarCommands();\n          } else {\n            this._invalidate();\n          }\n\n          break;\n\n        case \"onDataChanged\":\n          this._createDataChangeAction();\n\n          break;\n\n        case \"onItemClick\":\n          this._createItemClickAction();\n\n          break;\n\n        case \"onItemDblClick\":\n          this._createItemDblClickAction();\n\n          break;\n\n        case \"onSelectionChanged\":\n          this._createSelectionChangedAction();\n\n          break;\n\n        case \"export\":\n          if (this._toolbarInstance) {\n            this._toolbarInstance.option(\"export\", args.value);\n          }\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(Diagram.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }]);\n\n  return Diagram;\n}(_ui2.default);\n\n(0, _component_registrator2.default)(\"dxDiagram\", Diagram);\nmodule.exports = Diagram;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/diagram/ui.diagram.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_ui","_ui2","_drawer","_drawer2","_load_indicator","_load_indicator2","_component_registrator","_component_registrator2","_extend","_type","_type2","_data","_data2","_uiDiagram","_uiDiagram2","_uiDiagram3","_uiDiagram4","_uiDiagram5","_uiDiagram6","_uiDiagram7","_uiDiagram8","_uiDiagram9","_uiDiagram10","_uiDiagram11","_uiDiagram12","_uiDiagram13","_uiDiagram14","_uiDiagram15","_uiDiagram16","_uiDiagram17","_uiDiagram18","_tooltip","_tooltip2","_diagram_importer","_window","_events_engine","_events_engine2","_utils","_utils2","_message","_message2","_number","_number2","_uiDiagram19","_uiDiagram20","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_createSuper","Derived","result","Super","_isNativeReflectConstruct","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","DIAGRAM_CLASS","DIAGRAM_FULLSCREEN_CLASS","DIAGRAM_TOOLBAR_WRAPPER_CLASS","DIAGRAM_CONTENT_WRAPPER_CLASS","DIAGRAM_DRAWER_WRAPPER_CLASS","DIAGRAM_CONTENT_CLASS","DIAGRAM_LOADING_INDICATOR_CLASS","DIAGRAM_DEFAULT_UNIT","DIAGRAM_DEFAULT_ZOOMLEVEL","DIAGRAM_DEFAULT_AUTOZOOM","DIAGRAM_DEFAULT_PAGE_ORIENTATION","DIAGRAM_DEFAULT_PAGE_COLOR","DIAGRAM_NAMESPACE","FULLSCREEN_CHANGE_EVENT_NAME","default","addNamespace","IE_FULLSCREEN_CHANGE_EVENT_NAME","WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME","MOZ_FULLSCREEN_CHANGE_EVENT_NAME","Diagram","_Widget","_super","_updateDiagramLockCount","_initDiagram","optionsUpdateBar","isServerSide","hasWindow","$element","addClass","_toolbarInstance","option","_renderToolbar","$contentWrapper","appendTo","_leftPanel","_renderLeftPanel","$drawerWrapper","$drawer","_content","_renderRightPanel","_contextMenu","_renderContextMenu","_renderDialog","_diagramInstance","createDocument","_updateZoomLevelState","_updateAutoZoomState","_updateSimpleViewState","_updateReadOnlyState","_updateFullscreenState","barManager","registerBar","captureFocus","component","bar","onChanged","add","_this","$toolbarWrapper","toolbarWidgetCommandNames","push","_createComponent","commands","onContentReady","_registerBar","onPointerUp","_onPanelPointerUp","bind","widgetCommandNames","$parent","_this2","$leftPanel","toolboxGroups","_getToolboxGroups","disabled","onShapeCategoryRendered","$toolboxContainer","createToolbox","shapes","category","displayMode","_createTooltips","find","$container","targets","_this3","each","index","element","$target","$tooltip","html","attr","showEvent","hideEvent","position","animation","show","type","from","to","delay","hide","_rightPanel","propertyGroups","enabled","_this4","isCollapsible","drawer","closeOnOutsideClick","opened","openedStateMode","template","$options","name","toggle","$mainElement","_this5","$contextMenu","container","_ref","onVisibleChanged","_ref2","updateBarItemsState","onItemClick","itemData","_onBeforeCommandExecuted","command","dialogParameters","getDialogParameters","_showDialog","$dialogElement","_dialogInstance","onGetContent","commandManager","getCommand","title","_show","_loadingIndicator","append","remove","_getDiagram","getDiagram","DiagramControl","_raiseDataChangeAction","onEdgeInserted","_raiseEdgeInsertedAction","onEdgeUpdated","_raiseEdgeUpdatedAction","onEdgeRemoved","_raiseEdgeRemovedAction","onNodeInserted","_raiseNodeInsertedAction","onNodeUpdated","_raiseNodeUpdatedAction","onNodeRemoved","_raiseNodeRemovedAction","onToolboxDragStart","_raiseToolboxDragStart","onToolboxDragEnd","_raiseToolboxDragEnd","onToggleFullscreen","_onToggleFullScreen","onShowContextMenu","_onShowContextMenu","onHideContextMenu","_onHideContextMenu","onNativeAction","notifyItemClick","_raiseItemClickAction","notifyItemDblClick","_raiseItemDblClickAction","notifySelectionChanged","_raiseSelectionChanged","_updateUnitItems","_updateFormatUnitsMethod","_updateUnitsState","_updatePageSizeItemsState","_updatePageSizeState","_updatePageOrientationState","_updatePageColorState","_updateViewUnitsState","_updateShowGridState","_updateSnapToGridState","_updateGridSizeItemsState","_updateGridSizeState","_updateZoomLevelItemsState","_updateCustomShapes","_getCustomShapes","_refreshDataSources","dispose","parameter","execute","_beginUpdateDiagram","_refreshNodesDataSource","_refreshEdgesDataSource","_endUpdateDiagram","_nodesOption","_disposeDataSource","_refreshDataSource","_edgesOption","_getDiagram2","DiagramCommand","_executeDiagramCommand","Export","data","keepExistingItems","_getDiagram3","Import","_bindDiagramData","optionName","expr","compileGetter","isFunction","compileSetter","_isBindingMode","_getDiagram4","ConnectorLineOption","ConnectorLineEnding","lineOptionGetter","lineOptionSetter","startLineEndingGetter","startLineEndingSetter","endLineEndingGetter","endLineEndingSetter","nodeDataSource","getItems","edgeDataSource","nodeDataImporter","getKey","_createOptionGetter","setKey","_createOptionSetter","getLocked","setLocked","getStyle","setStyle","getStyleText","setStyleText","getZIndex","setZIndex","getType","setType","getText","setText","getImage","setImage","getLeft","setLeft","getTop","setTop","getWidth","setWidth","getHeight","setHeight","getParentKey","setParentKey","setItems","getContainerKey","setContainerKey","getChildren","setChildren","edgeDataImporter","getFrom","setFrom","getFromPointIndex","setFromPointIndex","getTo","setTo","getToPointIndex","setToPointIndex","getPoints","setPoints","getLineOption","lineType","Straight","Orthogonal","setLineOption","getStartLineEnding","Arrow","None","setStartLineEnding","getEndLineEnding","setEndLineEnding","layoutParameters","_getDataBindingLayoutParameters","BindDocument","_getDiagram5","DataLayoutType","DataLayoutOrientation","layoutParametersOption","parameters","layoutType","Tree","Sugiyama","orientation","Vertical","Horizontal","_getDiagram6","AutoZoomMode","FitContent","FitToWidth","Disabled","hasItems","Math","max","getGroups","customShapes","prevCustomShapes","Array","isArray","removeCustomShapes","map","s","addCustomShapes","baseType","svgUrl","backgroundImageUrl","svgLeft","backgroundImageLeft","svgTop","backgroundImageTop","svgWidth","backgroundImageWidth","svgHeight","backgroundImageHeight","defaultWidth","defaultHeight","defaultText","allowEditText","textLeft","textTop","textWidth","textHeight","defaultImageUrl","allowEditImage","imageLeft","imageTop","imageWidth","imageHeight","connectionPoints","pt","x","y","fullScreen","_changeNativeFullscreen","toggleClass","updateLayout","setModeOn","window","getWindow","top","_inNativeFullscreen","_subscribeFullscreenNativeChanged","_unsubscribeFullscreenNativeChanged","_setNativeFullscreen","on","document","body","requestFullscreen","mozRequestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullscreen","webkitExitFullscreen","msExitFullscreen","fullscreenElement","msFullscreenElement","webkitFullscreenElement","isInFullscreen","webkitIsFullscreen","handler","_onNativeFullscreenChangeHandler","off","selection","_hide","_getDiagram7","DiagramUnit","In","Cm","Px","_getDiagram8","readOnly","ToggleReadOnly","_setLeftPanelEnabled","zoomLevel","_getDiagram9","ZoomLevel","zoomLevelItems","_getDiagram10","ZoomLevelItems","_getDiagram11","SwitchAutoZoom","_getAutoZoomValue","_getDiagram12","ToggleSimpleView","_getDiagram13","Fullscreen","_getDiagram14","ShowGrid","_getDiagram15","SnapToGrid","gridSize","_getDiagram16","GridSize","gridSizeItems","_getDiagram17","GridSizeItems","_getDiagram18","items","format","settings","unitItems","formatUnit","_getDiagram19","ViewUnits","_getDiagramUnitValue","_getDiagram20","Units","pageSize","width","height","_getDiagram21","PageSize","pageSizeItems","_getDiagram22","PageSizeItems","_getDiagram23","PageLandscape","_getDiagram24","PageColor","_getDiagramData","callback","_getDiagramExportToCommand","_getDiagram25","ExportPng","ExportJpg","ExportSvg","updateExistingItemsOnly","_setDiagramData","extend","simpleView","autoZoom","showGrid","snapToGrid","units","viewUnits","pageOrientation","pageColor","onDataChanged","nodes","dataSource","keyExpr","lockedExpr","styleExpr","textStyleExpr","zIndexExpr","typeExpr","textExpr","imageUrlExpr","parentKeyExpr","itemsExpr","leftExpr","topExpr","widthExpr","heightExpr","containerKeyExpr","childrenExpr","autoLayout","edges","fromExpr","fromPointIndexExpr","toExpr","toPointIndexExpr","pointsExpr","lineTypeExpr","fromLineEndExpr","toLineEndExpr","toolbox","visible","toolbar","contextMenu","propertiesPanel","collapsible","fileName","proxyUrl","onItemDblClick","onSelectionChanged","_dataChangeAction","_createActionByOption","_createDataChangeAction","errorCallback","insert","update","removeClass","_itemClickAction","_itemDblClickAction","_selectionChangedAction","nativeItem","_createItemClickAction","item","_nativeItemToDiagramItem","_createItemDblClickAction","nativeItems","_createSelectionChangedAction","_getDiagram26","NativeShape","createMethod","_nativeShapeToDiagramShape","_nativeConnectorToDiagramConnector","id","nativeShape","dataItem","findItem","itemType","text","nativeConnector","texts","fromKey","toKey","args","isUpdateLocked","beginUpdate","_optionChangedCore","endUpdate","fullName","previousValue","_invalidate","_invalidateContextMenuCommands","_invalidatePropertiesPanelGroups","_invalidateToolboxGroups","_invalidateToolbarCommands","module","exports"],"mappings":"AAAA;;;;;;;;AAQA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,GAAG,GAAGH,OAAO,CAAC,qBAAD,CAAjB;;AACA,IAAII,IAAI,GAAGF,sBAAsB,CAACC,GAAD,CAAjC;;AACA,IAAIE,OAAO,GAAGL,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIM,QAAQ,GAAGJ,sBAAsB,CAACG,OAAD,CAArC;;AACA,IAAIE,eAAe,GAAGP,OAAO,CAAC,mBAAD,CAA7B;;AACA,IAAIQ,gBAAgB,GAAGN,sBAAsB,CAACK,eAAD,CAA7C;;AACA,IAAIE,sBAAsB,GAAGT,OAAO,CAAC,kCAAD,CAApC;;AACA,IAAIU,uBAAuB,GAAGR,sBAAsB,CAACO,sBAAD,CAApD;;AACA,IAAIE,OAAO,GAAGX,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIY,KAAK,GAAGZ,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIa,MAAM,GAAGX,sBAAsB,CAACU,KAAD,CAAnC;;AACA,IAAIE,KAAK,GAAGd,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIe,MAAM,GAAGb,sBAAsB,CAACY,KAAD,CAAnC;;AACA,IAAIE,UAAU,GAAGhB,OAAO,CAAC,sBAAD,CAAxB;;AACA,IAAIiB,WAAW,GAAGf,sBAAsB,CAACc,UAAD,CAAxC;;AACA,IAAIE,WAAW,GAAGlB,OAAO,CAAC,wBAAD,CAAzB;;AACA,IAAImB,WAAW,GAAGjB,sBAAsB,CAACgB,WAAD,CAAxC;;AACA,IAAIE,WAAW,GAAGpB,OAAO,CAAC,yBAAD,CAAzB;;AACA,IAAIqB,WAAW,GAAGnB,sBAAsB,CAACkB,WAAD,CAAxC;;AACA,IAAIE,WAAW,GAAGtB,OAAO,CAAC,0BAAD,CAAzB;;AACA,IAAIuB,WAAW,GAAGrB,sBAAsB,CAACoB,WAAD,CAAxC;;AACA,IAAIE,WAAW,GAAGxB,OAAO,CAAC,sBAAD,CAAzB;;AACA,IAAIyB,YAAY,GAAGvB,sBAAsB,CAACsB,WAAD,CAAzC;;AACA,IAAIE,YAAY,GAAG1B,OAAO,CAAC,sBAAD,CAA1B;;AACA,IAAI2B,YAAY,GAAGzB,sBAAsB,CAACwB,YAAD,CAAzC;;AACA,IAAIE,YAAY,GAAG5B,OAAO,CAAC,4BAAD,CAA1B;;AACA,IAAI6B,YAAY,GAAG3B,sBAAsB,CAAC0B,YAAD,CAAzC;;AACA,IAAIE,YAAY,GAAG9B,OAAO,CAAC,oBAAD,CAA1B;;AACA,IAAI+B,YAAY,GAAG7B,sBAAsB,CAAC4B,YAAD,CAAzC;;AACA,IAAIE,YAAY,GAAGhC,OAAO,CAAC,oBAAD,CAA1B;;AACA,IAAIiC,YAAY,GAAG/B,sBAAsB,CAAC8B,YAAD,CAAzC;;AACA,IAAIE,QAAQ,GAAGlC,OAAO,CAAC,YAAD,CAAtB;;AACA,IAAImC,SAAS,GAAGjC,sBAAsB,CAACgC,QAAD,CAAtC;;AACA,IAAIE,iBAAiB,GAAGpC,OAAO,CAAC,oBAAD,CAA/B;;AACA,IAAIqC,OAAO,GAAGrC,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIsC,cAAc,GAAGtC,OAAO,CAAC,iCAAD,CAA5B;;AACA,IAAIuC,eAAe,GAAGrC,sBAAsB,CAACoC,cAAD,CAA5C;;AACA,IAAIE,MAAM,GAAGxC,OAAO,CAAC,oBAAD,CAApB;;AACA,IAAIyC,OAAO,GAAGvC,sBAAsB,CAACsC,MAAD,CAApC;;AACA,IAAIE,QAAQ,GAAG1C,OAAO,CAAC,4BAAD,CAAtB;;AACA,IAAI2C,SAAS,GAAGzC,sBAAsB,CAACwC,QAAD,CAAtC;;AACA,IAAIE,OAAO,GAAG5C,OAAO,CAAC,2BAAD,CAArB;;AACA,IAAI6C,QAAQ,GAAG3C,sBAAsB,CAAC0C,OAAD,CAArC;;AACA,IAAIE,YAAY,GAAG9C,OAAO,CAAC,4BAAD,CAA1B;;AACA,IAAI+C,YAAY,GAAG7C,sBAAsB,CAAC4C,YAAD,CAAzC;;AAEA,SAAS5C,sBAAT,CAAgC8C,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,OAAT,CAAiBF,GAAjB,EAAsB;AAClB;;AACA,MAAI,eAAe,OAAOG,MAAtB,IAAgC,aAAa,OAAOA,MAAM,CAACC,QAA/D,EAAyE;AACrEF,IAAAA,OAAO,GAAG,iBAASF,GAAT,EAAc;AACpB,aAAO,OAAOA,GAAd;AACH,KAFD;AAGH,GAJD,MAIO;AACHE,IAAAA,OAAO,GAAG,iBAASF,GAAT,EAAc;AACpB,aAAOA,GAAG,IAAI,eAAe,OAAOG,MAA7B,IAAuCH,GAAG,CAACK,WAAJ,KAAoBF,MAA3D,IAAqEH,GAAG,KAAKG,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAON,GAAzH;AACH,KAFD;AAGH;;AACD,SAAOE,OAAO,CAACF,GAAD,CAAd;AACH;;AAED,SAASO,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAC5C,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACpC,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACH;AACJ;;AAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AACtC,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AACAE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AACAD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;;AACA,QAAI,WAAWF,UAAf,EAA2B;AACvBA,MAAAA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AACH;;AACDC,IAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BI,UAAU,CAACM,GAAzC,EAA8CN,UAA9C;AACH;AACJ;;AAED,SAASO,YAAT,CAAsBd,WAAtB,EAAmCe,UAAnC,EAA+CC,WAA/C,EAA4D;AACxD,MAAID,UAAJ,EAAgB;AACZb,IAAAA,iBAAiB,CAACF,WAAW,CAACH,SAAb,EAAwBkB,UAAxB,CAAjB;AACH;;AACD,MAAIC,WAAJ,EAAiB;AACbd,IAAAA,iBAAiB,CAACF,WAAD,EAAcgB,WAAd,CAAjB;AACH;;AACD,SAAOhB,WAAP;AACH;;AAED,SAASiB,IAAT,CAAcd,MAAd,EAAsBe,QAAtB,EAAgCC,QAAhC,EAA0C;AACtC,MAAI,gBAAgB,OAAOC,OAAvB,IAAkCA,OAAO,CAACC,GAA9C,EAAmD;AAC/CJ,IAAAA,IAAI,GAAGG,OAAO,CAACC,GAAf;AACH,GAFD,MAEO;AACHJ,IAAAA,IAAI,GAAG,cAASd,MAAT,EAAiBe,QAAjB,EAA2BC,QAA3B,EAAqC;AACxC,UAAIG,IAAI,GAAGC,cAAc,CAACpB,MAAD,EAASe,QAAT,CAAzB;;AACA,UAAI,CAACI,IAAL,EAAW;AACP;AACH;;AACD,UAAIE,IAAI,GAAGb,MAAM,CAACc,wBAAP,CAAgCH,IAAhC,EAAsCJ,QAAtC,CAAX;;AACA,UAAIM,IAAI,CAACH,GAAT,EAAc;AACV,eAAOG,IAAI,CAACH,GAAL,CAASK,IAAT,CAAcP,QAAd,CAAP;AACH;;AACD,aAAOK,IAAI,CAACG,KAAZ;AACH,KAVD;AAWH;;AACD,SAAOV,IAAI,CAACd,MAAD,EAASe,QAAT,EAAmBC,QAAQ,IAAIhB,MAA/B,CAAX;AACH;;AAED,SAASoB,cAAT,CAAwBK,MAAxB,EAAgCV,QAAhC,EAA0C;AACtC,SAAO,CAACP,MAAM,CAACd,SAAP,CAAiBgC,cAAjB,CAAgCH,IAAhC,CAAqCE,MAArC,EAA6CV,QAA7C,CAAR,EAAgE;AAC5DU,IAAAA,MAAM,GAAGE,eAAe,CAACF,MAAD,CAAxB;;AACA,QAAI,SAASA,MAAb,EAAqB;AACjB;AACH;AACJ;;AACD,SAAOA,MAAP;AACH;;AAED,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;AAC3B,SAAO,YAAW;AACd,QAAIC,MAAJ;AAAA,QAAYC,KAAK,GAAGJ,eAAe,CAACE,OAAD,CAAnC;;AACA,QAAIG,yBAAyB,EAA7B,EAAiC;AAC7B,UAAIC,SAAS,GAAGN,eAAe,CAAC,IAAD,CAAf,CAAsBlC,WAAtC;;AACAqC,MAAAA,MAAM,GAAGb,OAAO,CAACiB,SAAR,CAAkBH,KAAlB,EAAyBI,SAAzB,EAAoCF,SAApC,CAAT;AACH,KAHD,MAGO;AACHH,MAAAA,MAAM,GAAGC,KAAK,CAACK,KAAN,CAAY,IAAZ,EAAkBD,SAAlB,CAAT;AACH;;AACD,WAAOE,0BAA0B,CAAC,IAAD,EAAOP,MAAP,CAAjC;AACH,GATD;AAUH;;AAED,SAASO,0BAAT,CAAoCC,IAApC,EAA0Cf,IAA1C,EAAgD;AAC5C,MAAIA,IAAI,KAAK,aAAajC,OAAO,CAACiC,IAAD,CAApB,IAA8B,eAAe,OAAOA,IAAzD,CAAR,EAAwE;AACpE,WAAOA,IAAP;AACH;;AACD,SAAOgB,sBAAsB,CAACD,IAAD,CAA7B;AACH;;AAED,SAASC,sBAAT,CAAgCD,IAAhC,EAAsC;AAClC,MAAI,KAAK,CAAL,KAAWA,IAAf,EAAqB;AACjB,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AACH;;AACD,SAAOF,IAAP;AACH;;AAED,SAASN,yBAAT,GAAqC;AACjC,MAAI,gBAAgB,OAAOf,OAAvB,IAAkC,CAACA,OAAO,CAACiB,SAA/C,EAA0D;AACtD,WAAO,KAAP;AACH;;AACD,MAAIjB,OAAO,CAACiB,SAAR,CAAkBO,IAAtB,EAA4B;AACxB,WAAO,KAAP;AACH;;AACD,MAAI,eAAe,OAAOC,KAA1B,EAAiC;AAC7B,WAAO,IAAP;AACH;;AACD,MAAI;AACAC,IAAAA,IAAI,CAACjD,SAAL,CAAekD,QAAf,CAAwBrB,IAAxB,CAA6BN,OAAO,CAACiB,SAAR,CAAkBS,IAAlB,EAAwB,EAAxB,EAA4B,YAAW,CAAE,CAAzC,CAA7B;AACA,WAAO,IAAP;AACH,GAHD,CAGE,OAAOE,CAAP,EAAU;AACR,WAAO,KAAP;AACH;AACJ;;AAED,SAASlB,eAAT,CAAyBmB,CAAzB,EAA4B;AACxBnB,EAAAA,eAAe,GAAGnB,MAAM,CAACuC,cAAP,GAAwBvC,MAAM,CAACwC,cAA/B,GAAgD,UAASF,CAAT,EAAY;AAC1E,WAAOA,CAAC,CAACG,SAAF,IAAezC,MAAM,CAACwC,cAAP,CAAsBF,CAAtB,CAAtB;AACH,GAFD;AAGA,SAAOnB,eAAe,CAACmB,CAAD,CAAtB;AACH;;AAED,SAASI,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AACrC,MAAI,eAAe,OAAOA,UAAtB,IAAoC,SAASA,UAAjD,EAA6D;AACzD,UAAM,IAAItD,SAAJ,CAAc,oDAAd,CAAN;AACH;;AACDqD,EAAAA,QAAQ,CAACzD,SAAT,GAAqBc,MAAM,CAAC6C,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC1D,SAAvC,EAAkD;AACnED,IAAAA,WAAW,EAAE;AACT+B,MAAAA,KAAK,EAAE2B,QADE;AAET5C,MAAAA,QAAQ,EAAE,IAFD;AAGTD,MAAAA,YAAY,EAAE;AAHL;AADsD,GAAlD,CAArB;;AAOA,MAAI8C,UAAJ,EAAgB;AACZE,IAAAA,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AACH;AACJ;;AAED,SAASE,eAAT,CAAyBR,CAAzB,EAA4BS,CAA5B,EAA+B;AAC3BD,EAAAA,eAAe,GAAG9C,MAAM,CAACuC,cAAP,IAAyB,UAASD,CAAT,EAAYS,CAAZ,EAAe;AACtDT,IAAAA,CAAC,CAACG,SAAF,GAAcM,CAAd;AACA,WAAOT,CAAP;AACH,GAHD;;AAIA,SAAOQ,eAAe,CAACR,CAAD,EAAIS,CAAJ,CAAtB;AACH;;AACD,IAAIC,aAAa,GAAG,YAApB;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,6BAA6B,GAAGF,aAAa,GAAG,kBAApD;AACA,IAAIG,6BAA6B,GAAGH,aAAa,GAAG,kBAApD;AACA,IAAII,4BAA4B,GAAGJ,aAAa,GAAG,iBAAnD;AACA,IAAIK,qBAAqB,GAAGL,aAAa,GAAG,UAA5C;AACA,IAAIM,+BAA+B,GAAGN,aAAa,GAAG,oBAAtD;AACA,IAAIO,oBAAoB,GAAG,IAA3B;AACA,IAAIC,yBAAyB,GAAG,CAAhC;AACA,IAAIC,wBAAwB,GAAG,UAA/B;AACA,IAAIC,gCAAgC,GAAG,UAAvC;AACA,IAAIC,0BAA0B,GAAG,OAAjC;AACA,IAAIC,iBAAiB,GAAG,gBAAxB;;AACA,IAAIC,4BAA4B,GAAGxF,OAAO,CAACyF,OAAR,CAAgBC,YAAhB,CAA6B,kBAA7B,EAAiDH,iBAAjD,CAAnC;;AACA,IAAII,+BAA+B,GAAG3F,OAAO,CAACyF,OAAR,CAAgBC,YAAhB,CAA6B,oBAA7B,EAAmDH,iBAAnD,CAAtC;;AACA,IAAIK,mCAAmC,GAAG5F,OAAO,CAACyF,OAAR,CAAgBC,YAAhB,CAA6B,wBAA7B,EAAuDH,iBAAvD,CAA1C;;AACA,IAAIM,gCAAgC,GAAG7F,OAAO,CAACyF,OAAR,CAAgBC,YAAhB,CAA6B,qBAA7B,EAAoDH,iBAApD,CAAvC;;AACA,IAAIO,OAAO,GAAG,UAASC,OAAT,EAAkB;AAC5B1B,EAAAA,SAAS,CAACyB,OAAD,EAAUC,OAAV,CAAT;;AACA,MAAIC,MAAM,GAAGjD,YAAY,CAAC+C,OAAD,CAAzB;;AAEA,WAASA,OAAT,GAAmB;AACfhF,IAAAA,eAAe,CAAC,IAAD,EAAOgF,OAAP,CAAf;;AACA,WAAOE,MAAM,CAACzC,KAAP,CAAa,IAAb,EAAmBD,SAAnB,CAAP;AACH;;AACDxB,EAAAA,YAAY,CAACgE,OAAD,EAAU,CAAC;AACnBjE,IAAAA,GAAG,EAAE,OADc;AAEnBc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKsD,uBAAL,GAA+B,CAA/B;;AACAhE,MAAAA,IAAI,CAACa,eAAe,CAACgD,OAAO,CAACjF,SAAT,CAAhB,EAAqC,OAArC,EAA8C,IAA9C,CAAJ,CAAwD6B,IAAxD,CAA6D,IAA7D;;AACA,WAAKwD,YAAL;;AACA,WAAKC,gBAAL,GAAwB,IAAI/G,YAAY,CAACqG,OAAjB,CAAyB,IAAzB,CAAxB;AACH;AAPkB,GAAD,EAQnB;AACC5D,IAAAA,GAAG,EAAE,aADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACdV,MAAAA,IAAI,CAACa,eAAe,CAACgD,OAAO,CAACjF,SAAT,CAAhB,EAAqC,aAArC,EAAoD,IAApD,CAAJ,CAA8D6B,IAA9D,CAAmE,IAAnE;;AACA,UAAI0D,YAAY,GAAG,CAAC,CAAC,GAAGxG,OAAO,CAACyG,SAAZ,GAApB;AACA,WAAKC,QAAL,GAAgBC,QAAhB,CAAyB5B,aAAzB;AACA,WAAK6B,gBAAL,GAAwB,KAAK,CAA7B;;AACA,UAAI,KAAKC,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChC,aAAKC,cAAL;AACH;;AACD,UAAIC,eAAe,GAAG,CAAC,GAAGnJ,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0CzB,6BAA1C,EAAyE8B,QAAzE,CAAkF,KAAKN,QAAL,EAAlF,CAAtB;AACA,WAAKO,UAAL,GAAkB,KAAK,CAAvB;;AACA,UAAI,KAAKJ,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChC,aAAKK,gBAAL,CAAsBH,eAAtB;AACH;;AACD,UAAII,cAAc,GAAG,CAAC,GAAGvJ,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0CxB,4BAA1C,EAAwE6B,QAAxE,CAAiFD,eAAjF,CAArB;;AACA,UAAI,KAAKF,MAAL,CAAY,yBAAZ,CAAJ,EAA4C;AACxC,YAAIO,OAAO,GAAG,CAAC,GAAGxJ,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCmB,QAAjC,CAA0CG,cAA1C,CAAd;AACA,aAAKE,QAAL,GAAgB,CAAC,GAAGzJ,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0CvB,qBAA1C,EAAiE4B,QAAjE,CAA0EI,OAA1E,CAAhB;;AACA,aAAKE,iBAAL,CAAuBF,OAAvB;AACH,OAJD,MAIO;AACH,aAAKC,QAAL,GAAgB,CAAC,GAAGzJ,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0CvB,qBAA1C,EAAiE4B,QAAjE,CAA0EG,cAA1E,CAAhB;AACH;;AACD,WAAKI,YAAL,GAAoB,KAAK,CAAzB;;AACA,UAAI,KAAKV,MAAL,CAAY,qBAAZ,CAAJ,EAAwC;AACpC,aAAKW,kBAAL,CAAwB,KAAKH,QAA7B;AACH;;AACD,WAAKI,aAAL,CAAmB,KAAKJ,QAAxB;;AACA,OAACb,YAAD,IAAiB,KAAKkB,gBAAL,CAAsBC,cAAtB,CAAqC,KAAKN,QAAL,CAAc,CAAd,CAArC,CAAjB;;AACA,UAAI,KAAKR,MAAL,CAAY,WAAZ,MAA6BtB,yBAAjC,EAA4D;AACxD,aAAKqC,qBAAL;AACH;;AACD,UAAI,KAAKf,MAAL,CAAY,UAAZ,MAA4BrB,wBAAhC,EAA0D;AACtD,aAAKqC,oBAAL;AACH;;AACD,UAAI,KAAKhB,MAAL,CAAY,YAAZ,CAAJ,EAA+B;AAC3B,aAAKiB,sBAAL;AACH;;AACD,UAAI,KAAKjB,MAAL,CAAY,UAAZ,KAA2B,KAAKA,MAAL,CAAY,UAAZ,CAA/B,EAAwD;AACpD,aAAKkB,oBAAL;AACH;;AACD,UAAI,KAAKlB,MAAL,CAAY,YAAZ,CAAJ,EAA+B;AAC3B,aAAKmB,sBAAL;AACH;;AACD,WAAKN,gBAAL,CAAsBO,UAAtB,CAAiCC,WAAjC,CAA6C,KAAK3B,gBAAlD;AACH;AA7CF,GARmB,EAsDnB;AACCtE,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAK2E,gBAAL,CAAsBS,YAAtB;AACH;AAJF,GAtDmB,EA2DnB;AACClG,IAAAA,GAAG,EAAE,cADN;AAECc,IAAAA,KAAK,EAAE,eAASqF,SAAT,EAAoB;AACvBA,MAAAA,SAAS,CAACC,GAAV,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,IAA5B;;AACA,WAAKb,gBAAL,CAAsBO,UAAtB,CAAiCC,WAAjC,CAA6CE,SAAS,CAACC,GAAvD;AACH;AALF,GA3DmB,EAiEnB;AACCpG,IAAAA,GAAG,EAAE,gBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIyF,KAAK,GAAG,IAAZ;;AACA,UAAIC,eAAe,GAAG,CAAC,GAAG7K,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0C1B,6BAA1C,EAAyE+B,QAAzE,CAAkF,KAAKN,QAAL,EAAlF,CAAtB;AACA,UAAIgC,yBAAyB,GAAG,EAAhC;;AACA,UAAI,KAAK7B,MAAL,CAAY,yBAAZ,KAA0C,KAAKA,MAAL,CAAY,6BAAZ,CAA9C,EAA0F;AACtF6B,QAAAA,yBAAyB,CAACC,IAA1B,CAA+B,SAA/B;AACH;;AACD,WAAK/B,gBAAL,GAAwB,KAAKgC,gBAAL,CAAsBH,eAAtB,EAAuC7J,WAAW,CAACiH,OAAnD,EAA4D;AAChFgD,QAAAA,QAAQ,EAAE,KAAKhC,MAAL,CAAY,kBAAZ,CADsE;AAEhFiC,QAAAA,cAAc,EAAE,wBAAS1E,CAAT,EAAY;AACxB,iBAAOoE,KAAK,CAACO,YAAN,CAAmB3E,CAAC,CAACgE,SAArB,CAAP;AACH,SAJ+E;AAKhFY,QAAAA,WAAW,EAAE,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CALmE;AAMhF,kBAAU,KAAKrC,MAAL,CAAY,QAAZ,CANsE;AAOhFsC,QAAAA,kBAAkB,EAAET;AAP4D,OAA5D,CAAxB;AASH;AAlBF,GAjEmB,EAoFnB;AACCzG,IAAAA,GAAG,EAAE,kBADN;AAECc,IAAAA,KAAK,EAAE,eAASqG,OAAT,EAAkB;AACrB,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAI7C,YAAY,GAAG,CAAC,CAAC,GAAGxG,OAAO,CAACyG,SAAZ,GAApB;AACA,UAAI6C,UAAU,GAAG,CAAC,GAAG1L,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCmB,QAAjC,CAA0CoC,OAA1C,CAAjB;AACA,WAAKnC,UAAL,GAAkB,KAAK2B,gBAAL,CAAsBU,UAAtB,EAAkCxK,WAAW,CAAC+G,OAA9C,EAAuD;AACrE0D,QAAAA,aAAa,EAAE,KAAKC,iBAAL,EADsD;AAErEC,QAAAA,QAAQ,EAAE,KAAK5C,MAAL,CAAY,UAAZ,CAF2D;AAGrE6C,QAAAA,uBAAuB,EAAE,iCAAStF,CAAT,EAAY;AACjC,cAAIoC,YAAJ,EAAkB;AACd;AACH;;AACD,cAAImD,iBAAiB,GAAG,CAAC,GAAG/L,UAAU,CAACiI,OAAf,EAAwBzB,CAAC,CAACsC,QAA1B,CAAxB;;AACA2C,UAAAA,MAAM,CAAC3B,gBAAP,CAAwBkC,aAAxB,CAAsCD,iBAAiB,CAAC,CAAD,CAAvD,EAA4D,EAA5D,EAAgE,CAAhE,EAAmE;AAC/D,2BAAe;AADgD,WAAnE,EAEGvF,CAAC,CAACyF,MAAF,IAAYzF,CAAC,CAAC0F,QAFjB,EAE2B,YAAY1F,CAAC,CAAC2F,WAFzC;;AAGAV,UAAAA,MAAM,CAACW,eAAP,CAAuBZ,OAAvB,EAAgCO,iBAAiB,CAACM,IAAlB,CAAuB,uCAAvB,CAAhC;AACH,SAZoE;AAarEjB,QAAAA,WAAW,EAAE,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B;AAbwD,OAAvD,CAAlB;AAeH;AArBF,GApFmB,EA0GnB;AACCjH,IAAAA,GAAG,EAAE,iBADN;AAECc,IAAAA,KAAK,EAAE,eAASmH,UAAT,EAAqBC,OAArB,EAA8B;AACjC,UAAIC,MAAM,GAAG,IAAb;;AACAD,MAAAA,OAAO,CAACE,IAAR,CAAa,UAASC,KAAT,EAAgBC,OAAhB,EAAyB;AAClC,YAAIC,OAAO,GAAG,CAAC,GAAG5M,UAAU,CAACiI,OAAf,EAAwB0E,OAAxB,CAAd;AACA,YAAIE,QAAQ,GAAG,CAAC,GAAG7M,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiC6E,IAAjC,CAAsCF,OAAO,CAACG,IAAR,CAAa,OAAb,CAAtC,EAA6D3D,QAA7D,CAAsEkD,UAAtE,CAAf;;AACAE,QAAAA,MAAM,CAACxB,gBAAP,CAAwB6B,QAAxB,EAAkC3K,SAAS,CAAC+F,OAA5C,EAAqD;AACjDtE,UAAAA,MAAM,EAAEiJ,OAAO,CAAC/H,GAAR,CAAY,CAAZ,CADyC;AAEjDmI,UAAAA,SAAS,EAAE,YAFsC;AAGjDC,UAAAA,SAAS,EAAE,YAHsC;AAIjDC,UAAAA,QAAQ,EAAE,KAJuC;AAKjDC,UAAAA,SAAS,EAAE;AACPC,YAAAA,IAAI,EAAE;AACFC,cAAAA,IAAI,EAAE,MADJ;AAEFC,cAAAA,IAAI,EAAE,CAFJ;AAGFC,cAAAA,EAAE,EAAE,CAHF;AAIFC,cAAAA,KAAK,EAAE;AAJL,aADC;AAOPC,YAAAA,IAAI,EAAE;AACFJ,cAAAA,IAAI,EAAE,MADJ;AAEFC,cAAAA,IAAI,EAAE,CAFJ;AAGFC,cAAAA,EAAE,EAAE,CAHF;AAIFC,cAAAA,KAAK,EAAE;AAJL;AAPC;AALsC,SAArD;AAoBH,OAvBD;AAwBH;AA5BF,GA1GmB,EAuInB;AACCnJ,IAAAA,GAAG,EAAE,gCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKwE,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBV,MAAlB,CAAyB;AACrBgC,UAAAA,QAAQ,EAAE,KAAKhC,MAAL,CAAY,sBAAZ;AADW,SAAzB;AAGH;AACJ;AARF,GAvImB,EAgJnB;AACC5E,IAAAA,GAAG,EAAE,kCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKuI,WAAT,EAAsB;AAClB,aAAKA,WAAL,CAAiBzE,MAAjB,CAAwB;AACpB0E,UAAAA,cAAc,EAAE,KAAK1E,MAAL,CAAY,wBAAZ;AADI,SAAxB;AAGH;AACJ;AARF,GAhJmB,EAyJnB;AACC5E,IAAAA,GAAG,EAAE,4BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAK6D,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBC,MAAtB,CAA6B;AACzBgC,UAAAA,QAAQ,EAAE,KAAKhC,MAAL,CAAY,kBAAZ;AADe,SAA7B;AAGH;AACJ;AARF,GAzJmB,EAkKnB;AACC5E,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKkE,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBJ,MAAhB,CAAuB;AACnB0C,UAAAA,aAAa,EAAE,KAAKC,iBAAL;AADI,SAAvB;AAGH;AACJ;AARF,GAlKmB,EA2KnB;AACCvH,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,eAASyI,OAAT,EAAkB;AACrB,UAAI,KAAKvE,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBJ,MAAhB,CAAuB;AACnB4C,UAAAA,QAAQ,EAAE,CAAC+B;AADQ,SAAvB;AAGH;AACJ;AARF,GA3KmB,EAoLnB;AACCvJ,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,eAASqG,OAAT,EAAkB;AACrB,UAAIqC,MAAM,GAAG,IAAb;;AACA,UAAIC,aAAa,GAAG,KAAK7E,MAAL,CAAY,6BAAZ,CAApB;;AACA,UAAI8E,MAAM,GAAG,KAAK/C,gBAAL,CAAsBQ,OAAtB,EAA+BnL,QAAQ,CAAC4H,OAAxC,EAAiD;AAC1D+F,QAAAA,mBAAmB,EAAEF,aADqC;AAE1DG,QAAAA,MAAM,EAAE,CAACH,aAFiD;AAG1DI,QAAAA,eAAe,EAAEJ,aAAa,GAAG,SAAH,GAAe,QAHa;AAI1DZ,QAAAA,QAAQ,EAAE,OAJgD;AAK1DiB,QAAAA,QAAQ,EAAE,kBAASC,QAAT,EAAmB;AACzBP,UAAAA,MAAM,CAACH,WAAP,GAAqBG,MAAM,CAAC7C,gBAAP,CAAwBoD,QAAxB,EAAkChN,WAAW,CAAC6G,OAA9C,EAAuD;AACxE0F,YAAAA,cAAc,EAAEE,MAAM,CAAC5E,MAAP,CAAc,wBAAd,CADwD;AAExEiC,YAAAA,cAAc,EAAE,wBAAS1E,CAAT,EAAY;AACxB,qBAAOqH,MAAM,CAAC1C,YAAP,CAAoB3E,CAAC,CAACgE,SAAtB,CAAP;AACH,aAJuE;AAKxEY,YAAAA,WAAW,EAAEyC,MAAM,CAACxC,iBAAP,CAAyBC,IAAzB,CAA8BuC,MAA9B;AAL2D,WAAvD,CAArB;AAOH;AAbyD,OAAjD,CAAb;;AAeA,UAAI,KAAK7E,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBC,MAAtB,CAA6B,iBAA7B,EAAgD,UAASzC,CAAT,EAAY;AACxD,cAAI,cAAcA,CAAC,CAAC6H,IAApB,EAA0B;AACtBN,YAAAA,MAAM,CAACO,MAAP;AACH;AACJ,SAJD;AAKH;AACJ;AA3BF,GApLmB,EAgNnB;AACCjK,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAK2E,gBAAL,CAAsBS,YAAtB;AACH;AAJF,GAhNmB,EAqNnB;AACClG,IAAAA,GAAG,EAAE,oBADN;AAECc,IAAAA,KAAK,EAAE,eAASoJ,YAAT,EAAuB;AAC1B,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAIC,YAAY,GAAG,CAAC,GAAGzO,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCmB,QAAjC,CAA0C,KAAKN,QAAL,EAA1C,CAAnB;AACA,WAAKa,YAAL,GAAoB,KAAKqB,gBAAL,CAAsByD,YAAtB,EAAoCnN,WAAW,CAAC2G,OAAhD,EAAyD;AACzEgD,QAAAA,QAAQ,EAAE,KAAKhC,MAAL,CAAY,sBAAZ,CAD+D;AAEzEyF,QAAAA,SAAS,EAAEH,YAF8D;AAGzErD,QAAAA,cAAc,EAAE,wBAASyD,IAAT,EAAe;AAC3B,cAAInE,SAAS,GAAGmE,IAAI,CAACnE,SAArB;AACA,iBAAOgE,MAAM,CAACrD,YAAP,CAAoBX,SAApB,CAAP;AACH,SANwE;AAOzEoE,QAAAA,gBAAgB,EAAE,0BAASC,KAAT,EAAgB;AAC9B,cAAIrE,SAAS,GAAGqE,KAAK,CAACrE,SAAtB;AACA,iBAAOgE,MAAM,CAAC1E,gBAAP,CAAwBO,UAAxB,CAAmCyE,mBAAnC,CAAuDtE,SAAS,CAACC,GAAjE,CAAP;AACH,SAVwE;AAWzEsE,QAAAA,WAAW,EAAE,qBAASC,QAAT,EAAmB;AAC5B,iBAAOR,MAAM,CAACS,wBAAP,CAAgCD,QAAQ,CAACE,OAAzC,CAAP;AACH;AAbwE,OAAzD,CAApB;AAeH;AApBF,GArNmB,EA0OnB;AACC7K,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,eAAS+J,OAAT,EAAkB;AACrB,UAAIC,gBAAgB,GAAGrM,YAAY,CAACmF,OAAb,CAAqBmH,mBAArB,CAAyCF,OAAzC,CAAvB;;AACA,UAAIC,gBAAJ,EAAsB;AAClB,aAAKE,WAAL,CAAiBF,gBAAjB;AACH;;AACD,aAAO,CAAC,CAACA,gBAAT;AACH;AARF,GA1OmB,EAmPnB;AACC9K,IAAAA,GAAG,EAAE,eADN;AAECc,IAAAA,KAAK,EAAE,eAASoJ,YAAT,EAAuB;AAC1B,UAAIe,cAAc,GAAG,CAAC,GAAGtP,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCmB,QAAjC,CAA0CmF,YAA1C,CAArB;AACA,WAAKgB,eAAL,GAAuB,KAAKvE,gBAAL,CAAsBsE,cAAtB,EAAsC9N,YAAY,CAACyG,OAAnD,EAA4D,EAA5D,CAAvB;AACH;AALF,GAnPmB,EAyPnB;AACC5D,IAAAA,GAAG,EAAE,aADN;AAECc,IAAAA,KAAK,EAAE,eAASgK,gBAAT,EAA2B;AAC9B,UAAI,KAAKI,eAAT,EAA0B;AACtB,aAAKA,eAAL,CAAqBtG,MAArB,CAA4B,cAA5B,EAA4CkG,gBAAgB,CAACK,YAA7D;;AACA,aAAKD,eAAL,CAAqBtG,MAArB,CAA4B,UAA5B,EAAwC,YAAW;AAC/C,eAAKa,gBAAL,CAAsBS,YAAtB;AACH,SAFuC,CAEtCe,IAFsC,CAEjC,IAFiC,CAAxC;;AAGA,aAAKiE,eAAL,CAAqBtG,MAArB,CAA4B,SAA5B,EAAuC,KAAKa,gBAAL,CAAsB2F,cAAtB,CAAqCC,UAArC,CAAgDP,gBAAgB,CAACD,OAAjE,CAAvC;;AACA,aAAKK,eAAL,CAAqBtG,MAArB,CAA4B,OAA5B,EAAqCkG,gBAAgB,CAACQ,KAAtD;;AACA,aAAKJ,eAAL,CAAqBK,KAArB;AACH;AACJ;AAZF,GAzPmB,EAsQnB;AACCvL,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAK0K,iBAAL,GAAyB,CAAC,GAAG7P,UAAU,CAACiI,OAAf,EAAwB,OAAxB,EAAiCc,QAAjC,CAA0CtB,+BAA1C,CAAzB;;AACA,WAAKuD,gBAAL,CAAsB,KAAK6E,iBAA3B,EAA8CtP,gBAAgB,CAAC0H,OAA/D,EAAwE,EAAxE;;AACA,UAAIuD,OAAO,GAAG,KAAK/B,QAAL,IAAiB,KAAKX,QAAL,EAA/B;AACA0C,MAAAA,OAAO,CAACsE,MAAR,CAAe,KAAKD,iBAApB;AACH;AAPF,GAtQmB,EA8QnB;AACCxL,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,CAAC,KAAK0K,iBAAV,EAA6B;AACzB;AACH;;AACD,WAAKA,iBAAL,CAAuBE,MAAvB;;AACA,WAAKF,iBAAL,GAAyB,IAAzB;AACH;AARF,GA9QmB,EAuRnB;AACCxL,IAAAA,GAAG,EAAE,cADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI6K,WAAW,GAAG,CAAC,GAAG7N,iBAAiB,CAAC8N,UAAtB,GAAlB;AAAA,UACIC,cAAc,GAAGF,WAAW,CAACE,cADjC;;AAEA,WAAKpG,gBAAL,GAAwB,IAAIoG,cAAJ,EAAxB;AACA,WAAKpG,gBAAL,CAAsBY,SAAtB,GAAkC,KAAKyF,sBAAL,CAA4B7E,IAA5B,CAAiC,IAAjC,CAAlC;AACA,WAAKxB,gBAAL,CAAsBsG,cAAtB,GAAuC,KAAKC,wBAAL,CAA8B/E,IAA9B,CAAmC,IAAnC,CAAvC;AACA,WAAKxB,gBAAL,CAAsBwG,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BjF,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKxB,gBAAL,CAAsB0G,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BnF,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKxB,gBAAL,CAAsB4G,cAAtB,GAAuC,KAAKC,wBAAL,CAA8BrF,IAA9B,CAAmC,IAAnC,CAAvC;AACA,WAAKxB,gBAAL,CAAsB8G,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BvF,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKxB,gBAAL,CAAsBgH,aAAtB,GAAsC,KAAKC,uBAAL,CAA6BzF,IAA7B,CAAkC,IAAlC,CAAtC;AACA,WAAKxB,gBAAL,CAAsBkH,kBAAtB,GAA2C,KAAKC,sBAAL,CAA4B3F,IAA5B,CAAiC,IAAjC,CAA3C;AACA,WAAKxB,gBAAL,CAAsBoH,gBAAtB,GAAyC,KAAKC,oBAAL,CAA0B7F,IAA1B,CAA+B,IAA/B,CAAzC;AACA,WAAKxB,gBAAL,CAAsBsH,kBAAtB,GAA2C,KAAKC,mBAAL,CAAyB/F,IAAzB,CAA8B,IAA9B,CAA3C;AACA,WAAKxB,gBAAL,CAAsBwH,iBAAtB,GAA0C,KAAKC,kBAAL,CAAwBjG,IAAxB,CAA6B,IAA7B,CAA1C;AACA,WAAKxB,gBAAL,CAAsB0H,iBAAtB,GAA0C,KAAKC,kBAAL,CAAwBnG,IAAxB,CAA6B,IAA7B,CAA1C;;AACA,WAAKxB,gBAAL,CAAsB4H,cAAtB,CAAqC/G,GAArC,CAAyC;AACrCgH,QAAAA,eAAe,EAAE,KAAKC,qBAAL,CAA2BtG,IAA3B,CAAgC,IAAhC,CADoB;AAErCuG,QAAAA,kBAAkB,EAAE,KAAKC,wBAAL,CAA8BxG,IAA9B,CAAmC,IAAnC,CAFiB;AAGrCyG,QAAAA,sBAAsB,EAAE,KAAKC,sBAAL,CAA4B1G,IAA5B,CAAiC,IAAjC;AAHa,OAAzC;;AAKA,WAAK2G,gBAAL;;AACA,WAAKC,wBAAL;;AACA,UAAI,KAAKjJ,MAAL,CAAY,OAAZ,MAAyBvB,oBAA7B,EAAmD;AAC/C,aAAKyK,iBAAL;AACH;;AACD,UAAI,KAAKlJ,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,YAAI,KAAKA,MAAL,CAAY,gBAAZ,CAAJ,EAAmC;AAC/B,eAAKmJ,yBAAL;AACH;;AACD,YAAI,KAAKnJ,MAAL,CAAY,gBAAZ,KAAiC,KAAKA,MAAL,CAAY,iBAAZ,CAArC,EAAqE;AACjE,eAAKoJ,oBAAL;AACH;AACJ;;AACD,UAAI,KAAKpJ,MAAL,CAAY,iBAAZ,MAAmCpB,gCAAvC,EAAyE;AACrE,aAAKyK,2BAAL;AACH;;AACD,UAAI,KAAKrJ,MAAL,CAAY,WAAZ,MAA6BnB,0BAAjC,EAA6D;AACzD,aAAKyK,qBAAL;AACH;;AACD,UAAI,KAAKtJ,MAAL,CAAY,WAAZ,MAA6BvB,oBAAjC,EAAuD;AACnD,aAAK8K,qBAAL;AACH;;AACD,UAAI,CAAC,KAAKvJ,MAAL,CAAY,UAAZ,CAAL,EAA8B;AAC1B,aAAKwJ,oBAAL;AACH;;AACD,UAAI,CAAC,KAAKxJ,MAAL,CAAY,YAAZ,CAAL,EAAgC;AAC5B,aAAKyJ,sBAAL;AACH;;AACD,UAAI,KAAKzJ,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,YAAI,KAAKA,MAAL,CAAY,gBAAZ,CAAJ,EAAmC;AAC/B,eAAK0J,yBAAL;AACH;;AACD,aAAKC,oBAAL;AACH;;AACD,UAAI,KAAK3J,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChC,aAAK4J,0BAAL;AACH;;AACD,WAAKC,mBAAL,CAAyB,KAAKC,gBAAL,EAAzB;;AACA,WAAKC,mBAAL;AACH;AA9DF,GAvRmB,EAsVnB;AACC3O,IAAAA,GAAG,EAAE,UADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAK2E,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBmJ,OAAtB;;AACA,aAAKnJ,gBAAL,GAAwB,KAAK,CAA7B;AACH;;AACDrF,MAAAA,IAAI,CAACa,eAAe,CAACgD,OAAO,CAACjF,SAAT,CAAhB,EAAqC,UAArC,EAAiD,IAAjD,CAAJ,CAA2D6B,IAA3D,CAAgE,IAAhE;AACH;AARF,GAtVmB,EA+VnB;AACCb,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,eAAS+J,OAAT,EAAkBgE,SAAlB,EAA6B;AAChC,WAAKpJ,gBAAL,CAAsB2F,cAAtB,CAAqCC,UAArC,CAAgDR,OAAhD,EAAyDiE,OAAzD,CAAiED,SAAjE;AACH;AAJF,GA/VmB,EAoWnB;AACC7O,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKiO,mBAAL;;AACA,WAAKC,uBAAL;;AACA,WAAKC,uBAAL;;AACA,WAAKC,iBAAL;AACH;AAPF,GApWmB,EA4WnB;AACClP,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKqO,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBC,kBAAlB;;AACA,eAAO,KAAKD,YAAZ;AACH;;AACD,UAAI,KAAKvK,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,aAAKuK,YAAL,GAAoB,IAAI1R,YAAY,CAACmG,OAAjB,CAAyB,IAAzB,CAApB;;AACA,aAAKuL,YAAL,CAAkBvK,MAAlB,CAAyB,YAAzB,EAAuC,KAAKA,MAAL,CAAY,kBAAZ,CAAvC;;AACA,aAAKuK,YAAL,CAAkBE,kBAAlB;AACH;AACJ;AAZF,GA5WmB,EAyXnB;AACCrP,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKwO,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBF,kBAAlB;;AACA,eAAO,KAAKE,YAAZ;AACH;;AACD,UAAI,KAAK1K,MAAL,CAAY,kBAAZ,CAAJ,EAAqC;AACjC,aAAK0K,YAAL,GAAoB,IAAI3R,YAAY,CAACiG,OAAjB,CAAyB,IAAzB,CAApB;;AACA,aAAK0L,YAAL,CAAkB1K,MAAlB,CAAyB,YAAzB,EAAuC,KAAKA,MAAL,CAAY,kBAAZ,CAAvC;;AACA,aAAK0K,YAAL,CAAkBD,kBAAlB;AACH;AACJ;AAZF,GAzXmB,EAsYnB;AACCrP,IAAAA,GAAG,EAAE,iBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIA,KAAJ;;AACA,UAAIyO,YAAY,GAAG,CAAC,GAAGzR,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4D,cAAc,GAAGD,YAAY,CAACC,cADlC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACE,MAA3C,EAAmD,UAASC,IAAT,EAAe;AAC9D7O,QAAAA,KAAK,GAAG6O,IAAR;AACH,OAFD;;AAGA,aAAO7O,KAAP;AACH;AAVF,GAtYmB,EAiZnB;AACCd,IAAAA,GAAG,EAAE,iBADN;AAECc,IAAAA,KAAK,EAAE,eAAS6O,IAAT,EAAeC,iBAAf,EAAkC;AACrC,UAAIC,YAAY,GAAG,CAAC,GAAG/R,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4D,cAAc,GAAGK,YAAY,CAACL,cADlC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACM,MAA3C,EAAmD;AAC/CH,QAAAA,IAAI,EAAEA,IADyC;AAE/CC,QAAAA,iBAAiB,EAAEA;AAF4B,OAAnD;AAIH;AATF,GAjZmB,EA2ZnB;AACC5P,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKiP,gBAAL;AACH;AAJF,GA3ZmB,EAganB;AACC/P,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,eAASkP,UAAT,EAAqB;AACxB,UAAIC,IAAI,GAAG,KAAKrL,MAAL,CAAYoL,UAAZ,CAAX;AACA,aAAOC,IAAI,IAAIxT,MAAM,CAACmH,OAAP,CAAesM,aAAf,CAA6BD,IAA7B,CAAf;AACH;AALF,GAhamB,EAsanB;AACCjQ,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,eAASkP,UAAT,EAAqB;AACxB,UAAIC,IAAI,GAAG,KAAKrL,MAAL,CAAYoL,UAAZ,CAAX;;AACA,UAAIzT,MAAM,CAACqH,OAAP,CAAeuM,UAAf,CAA0BF,IAA1B,CAAJ,EAAqC;AACjC,eAAOA,IAAP;AACH;;AACD,aAAOA,IAAI,IAAIxT,MAAM,CAACmH,OAAP,CAAewM,aAAf,CAA6BH,IAA7B,CAAf;AACH;AARF,GAtamB,EA+anB;AACCjQ,IAAAA,GAAG,EAAE,kBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKsD,uBAAL,IAAgC,CAAC,KAAKiM,cAAL,EAArC,EAA4D;AACxD;AACH;;AACD,UAAIC,YAAY,GAAG,CAAC,GAAGxS,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4D,cAAc,GAAGc,YAAY,CAACd,cADlC;AAAA,UAEIe,mBAAmB,GAAGD,YAAY,CAACC,mBAFvC;AAAA,UAGIC,mBAAmB,GAAGF,YAAY,CAACE,mBAHvC;;AAIA,UAAIC,gBAAJ;AACA,UAAIC,gBAAJ;AACA,UAAIC,qBAAJ;AACA,UAAIC,qBAAJ;AACA,UAAIC,mBAAJ;AACA,UAAIC,mBAAJ;AACA,UAAInB,IAAI,GAAG;AACPoB,QAAAA,cAAc,EAAE,KAAK5B,YAAL,IAAqB,KAAKA,YAAL,CAAkB6B,QAAlB,EAD9B;AAEPC,QAAAA,cAAc,EAAE,KAAK3B,YAAL,IAAqB,KAAKA,YAAL,CAAkB0B,QAAlB,EAF9B;AAGPE,QAAAA,gBAAgB,EAAE;AACdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CADM;AAEdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CAFM;AAGdC,UAAAA,SAAS,EAAE,KAAKH,mBAAL,CAAyB,kBAAzB,CAHG;AAIdI,UAAAA,SAAS,EAAE,KAAKF,mBAAL,CAAyB,kBAAzB,CAJG;AAKdG,UAAAA,QAAQ,EAAE,KAAKL,mBAAL,CAAyB,iBAAzB,CALI;AAMdM,UAAAA,QAAQ,EAAE,KAAKJ,mBAAL,CAAyB,iBAAzB,CANI;AAOdK,UAAAA,YAAY,EAAE,KAAKP,mBAAL,CAAyB,qBAAzB,CAPA;AAQdQ,UAAAA,YAAY,EAAE,KAAKN,mBAAL,CAAyB,qBAAzB,CARA;AASdO,UAAAA,SAAS,EAAE,KAAKT,mBAAL,CAAyB,kBAAzB,CATG;AAUdU,UAAAA,SAAS,EAAE,KAAKR,mBAAL,CAAyB,kBAAzB,CAVG;AAWdS,UAAAA,OAAO,EAAE,KAAKX,mBAAL,CAAyB,gBAAzB,CAXK;AAYdY,UAAAA,OAAO,EAAE,KAAKV,mBAAL,CAAyB,gBAAzB,CAZK;AAadW,UAAAA,OAAO,EAAE,KAAKb,mBAAL,CAAyB,gBAAzB,CAbK;AAcdc,UAAAA,OAAO,EAAE,KAAKZ,mBAAL,CAAyB,gBAAzB,CAdK;AAeda,UAAAA,QAAQ,EAAE,KAAKf,mBAAL,CAAyB,oBAAzB,CAfI;AAgBdgB,UAAAA,QAAQ,EAAE,KAAKd,mBAAL,CAAyB,oBAAzB,CAhBI;AAiBde,UAAAA,OAAO,EAAE,KAAKjB,mBAAL,CAAyB,gBAAzB,CAjBK;AAkBdkB,UAAAA,OAAO,EAAE,KAAKhB,mBAAL,CAAyB,gBAAzB,CAlBK;AAmBdiB,UAAAA,MAAM,EAAE,KAAKnB,mBAAL,CAAyB,eAAzB,CAnBM;AAoBdoB,UAAAA,MAAM,EAAE,KAAKlB,mBAAL,CAAyB,eAAzB,CApBM;AAqBdmB,UAAAA,QAAQ,EAAE,KAAKrB,mBAAL,CAAyB,iBAAzB,CArBI;AAsBdsB,UAAAA,QAAQ,EAAE,KAAKpB,mBAAL,CAAyB,iBAAzB,CAtBI;AAuBdqB,UAAAA,SAAS,EAAE,KAAKvB,mBAAL,CAAyB,kBAAzB,CAvBG;AAwBdwB,UAAAA,SAAS,EAAE,KAAKtB,mBAAL,CAAyB,kBAAzB,CAxBG;AAyBduB,UAAAA,YAAY,EAAE,KAAKzB,mBAAL,CAAyB,qBAAzB,CAzBA;AA0Bd0B,UAAAA,YAAY,EAAE,KAAKxB,mBAAL,CAAyB,qBAAzB,CA1BA;AA2BdN,UAAAA,QAAQ,EAAE,KAAKI,mBAAL,CAAyB,iBAAzB,CA3BI;AA4Bd2B,UAAAA,QAAQ,EAAE,KAAKzB,mBAAL,CAAyB,iBAAzB,CA5BI;AA6Bd0B,UAAAA,eAAe,EAAE,KAAK5B,mBAAL,CAAyB,wBAAzB,CA7BH;AA8Bd6B,UAAAA,eAAe,EAAE,KAAK3B,mBAAL,CAAyB,wBAAzB,CA9BH;AA+Bd4B,UAAAA,WAAW,EAAE,KAAK9B,mBAAL,CAAyB,oBAAzB,CA/BC;AAgCd+B,UAAAA,WAAW,EAAE,KAAK7B,mBAAL,CAAyB,oBAAzB;AAhCC,SAHX;AAqCP8B,QAAAA,gBAAgB,EAAE;AACdjC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CADM;AAEdC,UAAAA,MAAM,EAAE,KAAKC,mBAAL,CAAyB,eAAzB,CAFM;AAGdC,UAAAA,SAAS,EAAE,KAAKH,mBAAL,CAAyB,kBAAzB,CAHG;AAIdI,UAAAA,SAAS,EAAE,KAAKF,mBAAL,CAAyB,kBAAzB,CAJG;AAKdG,UAAAA,QAAQ,EAAE,KAAKL,mBAAL,CAAyB,iBAAzB,CALI;AAMdM,UAAAA,QAAQ,EAAE,KAAKJ,mBAAL,CAAyB,iBAAzB,CANI;AAOdK,UAAAA,YAAY,EAAE,KAAKP,mBAAL,CAAyB,qBAAzB,CAPA;AAQdQ,UAAAA,YAAY,EAAE,KAAKN,mBAAL,CAAyB,qBAAzB,CARA;AASdO,UAAAA,SAAS,EAAE,KAAKT,mBAAL,CAAyB,kBAAzB,CATG;AAUdU,UAAAA,SAAS,EAAE,KAAKR,mBAAL,CAAyB,kBAAzB,CAVG;AAWd+B,UAAAA,OAAO,EAAE,KAAKjC,mBAAL,CAAyB,gBAAzB,CAXK;AAYdkC,UAAAA,OAAO,EAAE,KAAKhC,mBAAL,CAAyB,gBAAzB,CAZK;AAadiC,UAAAA,iBAAiB,EAAE,KAAKnC,mBAAL,CAAyB,0BAAzB,CAbL;AAcdoC,UAAAA,iBAAiB,EAAE,KAAKlC,mBAAL,CAAyB,0BAAzB,CAdL;AAedmC,UAAAA,KAAK,EAAE,KAAKrC,mBAAL,CAAyB,cAAzB,CAfO;AAgBdsC,UAAAA,KAAK,EAAE,KAAKpC,mBAAL,CAAyB,cAAzB,CAhBO;AAiBdqC,UAAAA,eAAe,EAAE,KAAKvC,mBAAL,CAAyB,wBAAzB,CAjBH;AAkBdwC,UAAAA,eAAe,EAAE,KAAKtC,mBAAL,CAAyB,wBAAzB,CAlBH;AAmBduC,UAAAA,SAAS,EAAE,KAAKzC,mBAAL,CAAyB,kBAAzB,CAnBG;AAoBd0C,UAAAA,SAAS,EAAE,KAAKxC,mBAAL,CAAyB,kBAAzB,CApBG;AAqBdW,UAAAA,OAAO,EAAE,KAAKb,mBAAL,CAAyB,gBAAzB,CArBK;AAsBdc,UAAAA,OAAO,EAAE,KAAKZ,mBAAL,CAAyB,gBAAzB,CAtBK;AAuBdyC,UAAAA,aAAa,EAAE,CAACtD,gBAAgB,GAAG,KAAKW,mBAAL,CAAyB,oBAAzB,CAApB,KAAuE,UAAS1S,GAAT,EAAc;AAChG,gBAAIsV,QAAQ,GAAGvD,gBAAgB,CAAC/R,GAAD,CAA/B;;AACA,oBAAQsV,QAAR;AACI,mBAAK,UAAL;AACI,uBAAOzD,mBAAmB,CAAC0D,QAA3B;;AACJ;AACI,uBAAO1D,mBAAmB,CAAC2D,UAA3B;AAJR;AAMH,WARqF,CAQpFjN,IARoF,CAQ/E,IAR+E,CAvBxE;AAgCdkN,UAAAA,aAAa,EAAE,CAACzD,gBAAgB,GAAG,KAAKY,mBAAL,CAAyB,oBAAzB,CAApB,KAAuE,UAAS5S,GAAT,EAAcoC,KAAd,EAAqB;AACvG,oBAAQA,KAAR;AACI,mBAAKyP,mBAAmB,CAAC0D,QAAzB;AACInT,gBAAAA,KAAK,GAAG,UAAR;AACA;;AACJ,mBAAKyP,mBAAmB,CAAC2D,UAAzB;AACIpT,gBAAAA,KAAK,GAAG,YAAR;AALR;;AAOA4P,YAAAA,gBAAgB,CAAChS,GAAD,EAAMoC,KAAN,CAAhB;AACH,WATqF,CASpFmG,IAToF,CAS/E,IAT+E,CAhCxE;AA0CdmN,UAAAA,kBAAkB,EAAE,CAACzD,qBAAqB,GAAG,KAAKS,mBAAL,CAAyB,uBAAzB,CAAzB,KAA+E,UAAS1S,GAAT,EAAc;AAC7G,gBAAIsV,QAAQ,GAAGrD,qBAAqB,CAACjS,GAAD,CAApC;;AACA,oBAAQsV,QAAR;AACI,mBAAK,OAAL;AACI,uBAAOxD,mBAAmB,CAAC6D,KAA3B;;AACJ;AACI,uBAAO7D,mBAAmB,CAAC8D,IAA3B;AAJR;AAMH,WARkG,CAQjGrN,IARiG,CAQ5F,IAR4F,CA1CrF;AAmDdsN,UAAAA,kBAAkB,EAAE,CAAC3D,qBAAqB,GAAG,KAAKU,mBAAL,CAAyB,uBAAzB,CAAzB,KAA+E,UAAS5S,GAAT,EAAcoC,KAAd,EAAqB;AACpH,oBAAQA,KAAR;AACI,mBAAK0P,mBAAmB,CAAC6D,KAAzB;AACIvT,gBAAAA,KAAK,GAAG,OAAR;AACA;;AACJ,mBAAK0P,mBAAmB,CAAC8D,IAAzB;AACIxT,gBAAAA,KAAK,GAAG,MAAR;AALR;;AAOA8P,YAAAA,qBAAqB,CAAClS,GAAD,EAAMoC,KAAN,CAArB;AACH,WATkG,CASjGmG,IATiG,CAS5F,IAT4F,CAnDrF;AA6DduN,UAAAA,gBAAgB,EAAE,CAAC3D,mBAAmB,GAAG,KAAKO,mBAAL,CAAyB,qBAAzB,CAAvB,KAA2E,UAAS1S,GAAT,EAAc;AACvG,gBAAIsV,QAAQ,GAAGnD,mBAAmB,CAACnS,GAAD,CAAlC;;AACA,oBAAQsV,QAAR;AACI,mBAAK,MAAL;AACI,uBAAOxD,mBAAmB,CAAC8D,IAA3B;;AACJ;AACI,uBAAO9D,mBAAmB,CAAC6D,KAA3B;AAJR;AAMH,WAR4F,CAQ3FpN,IAR2F,CAQtF,IARsF,CA7D/E;AAsEdwN,UAAAA,gBAAgB,EAAE,CAAC3D,mBAAmB,GAAG,KAAKQ,mBAAL,CAAyB,qBAAzB,CAAvB,KAA2E,UAAS5S,GAAT,EAAcoC,KAAd,EAAqB;AAC9G,oBAAQA,KAAR;AACI,mBAAK0P,mBAAmB,CAAC6D,KAAzB;AACIvT,gBAAAA,KAAK,GAAG,OAAR;AACA;;AACJ,mBAAK0P,mBAAmB,CAAC8D,IAAzB;AACIxT,gBAAAA,KAAK,GAAG,MAAR;AALR;;AAOAgQ,YAAAA,mBAAmB,CAACpS,GAAD,EAAMoC,KAAN,CAAnB;AACH,WAT4F,CAS3FmG,IAT2F,CAStF,IATsF;AAtE/E,SArCX;AAsHPyN,QAAAA,gBAAgB,EAAE,KAAKC,+BAAL;AAtHX,OAAX;;AAwHA,WAAKlF,sBAAL,CAA4BD,cAAc,CAACoF,YAA3C,EAAyDjF,IAAzD;AACH;AAzIF,GA/amB,EAyjBnB;AACC3P,IAAAA,GAAG,EAAE,iCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI+T,YAAY,GAAG,CAAC,GAAG/W,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACIkJ,cAAc,GAAGD,YAAY,CAACC,cADlC;AAAA,UAEIC,qBAAqB,GAAGF,YAAY,CAACE,qBAFzC;;AAGA,UAAIC,sBAAsB,GAAG,KAAKpQ,MAAL,CAAY,kBAAZ,CAA7B;;AACA,UAAI,CAACoQ,sBAAD,IAA2B,UAAUA,sBAArC,IAA+D,UAAUA,sBAAsB,CAAChM,IAApG,EAA0G;AACtG;AACH;;AACD,UAAIiM,UAAU,GAAG,EAAjB;AACA,UAAIC,UAAU,GAAGF,sBAAsB,CAAChM,IAAvB,IAA+BgM,sBAAhD;;AACA,UAAI,WAAWE,UAAf,EAA2B;AACvBD,QAAAA,UAAU,CAACjM,IAAX,GAAkB8L,cAAc,CAACK,IAAjC;AACH,OAFD,MAEO;AACH,YAAI,cAAcD,UAAlB,EAA8B;AAC1BD,UAAAA,UAAU,CAACjM,IAAX,GAAkB8L,cAAc,CAACM,QAAjC;AACH;AACJ;;AACD,UAAI,eAAeJ,sBAAsB,CAACK,WAA1C,EAAuD;AACnDJ,QAAAA,UAAU,CAACI,WAAX,GAAyBN,qBAAqB,CAACO,QAA/C;AACH,OAFD,MAEO;AACH,YAAI,iBAAiBN,sBAAsB,CAACK,WAA5C,EAAyD;AACrDJ,UAAAA,UAAU,CAACI,WAAX,GAAyBN,qBAAqB,CAACQ,UAA/C;AACH;AACJ;;AACD,aAAON,UAAP;AACH;AA3BF,GAzjBmB,EAqlBnB;AACCjV,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,eAAS8D,MAAT,EAAiB;AACpB,UAAI4Q,YAAY,GAAG,CAAC,GAAG1X,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI6J,YAAY,GAAGD,YAAY,CAACC,YADhC;;AAEA,cAAQ7Q,MAAR;AACI,aAAK,YAAL;AACI,iBAAO6Q,YAAY,CAACC,UAApB;;AACJ,aAAK,UAAL;AACI,iBAAOD,YAAY,CAACE,UAApB;;AACJ;AACI,iBAAOF,YAAY,CAACG,QAApB;AANR;AAQH;AAbF,GArlBmB,EAmmBnB;AACC5V,IAAAA,GAAG,EAAE,gBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,aAAO,KAAKqO,YAAL,IAAqB,KAAKA,YAAL,CAAkB0G,QAAlB,EAArB,IAAqD,KAAKvG,YAAL,IAAqB,KAAKH,YAAL,CAAkB0G,QAAlB,EAAjF;AACH;AAJF,GAnmBmB,EAwmBnB;AACC7V,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKsD,uBAAL;AACH;AAJF,GAxmBmB,EA6mBnB;AACCpE,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKsD,uBAAL,GAA+B0R,IAAI,CAACC,GAAL,CAAS,KAAK3R,uBAAL,GAA+B,CAAxC,EAA2C,CAA3C,CAA/B;;AACA,UAAI,CAAC,KAAKA,uBAAV,EAAmC;AAC/B,aAAK2L,gBAAL;AACH;AACJ;AAPF,GA7mBmB,EAqnBnB;AACC/P,IAAAA,GAAG,EAAE,kBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,aAAO,KAAK8D,MAAL,CAAY,cAAZ,KAA+B,EAAtC;AACH;AAJF,GArnBmB,EA0nBnB;AACC5E,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,aAAOzD,YAAY,CAACuG,OAAb,CAAqBoS,SAArB,CAA+B,KAAKpR,MAAL,CAAY,gBAAZ,CAA/B,CAAP;AACH;AAJF,GA1nBmB,EA+nBnB;AACC5E,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,eAASmV,YAAT,EAAuBC,gBAAvB,EAAyC;AAC5C,UAAIC,KAAK,CAACC,OAAN,CAAcF,gBAAd,CAAJ,EAAqC;AACjC,aAAKzQ,gBAAL,CAAsB4Q,kBAAtB,CAAyCH,gBAAgB,CAACI,GAAjB,CAAqB,UAASC,CAAT,EAAY;AACtE,iBAAOA,CAAC,CAACvN,IAAT;AACH,SAFwC,CAAzC;AAGH;;AACD,UAAImN,KAAK,CAACC,OAAN,CAAcH,YAAd,CAAJ,EAAiC;AAC7B,aAAKxQ,gBAAL,CAAsB+Q,eAAtB,CAAsCP,YAAY,CAACK,GAAb,CAAiB,UAASC,CAAT,EAAY;AAC/D,iBAAO;AACH1O,YAAAA,QAAQ,EAAE0O,CAAC,CAAC1O,QADT;AAEHmB,YAAAA,IAAI,EAAEuN,CAAC,CAACvN,IAFL;AAGHyN,YAAAA,QAAQ,EAAEF,CAAC,CAACE,QAHT;AAIHnL,YAAAA,KAAK,EAAEiL,CAAC,CAACjL,KAJN;AAKHoL,YAAAA,MAAM,EAAEH,CAAC,CAACI,kBALP;AAMHC,YAAAA,OAAO,EAAEL,CAAC,CAACM,mBANR;AAOHC,YAAAA,MAAM,EAAEP,CAAC,CAACQ,kBAPP;AAQHC,YAAAA,QAAQ,EAAET,CAAC,CAACU,oBART;AASHC,YAAAA,SAAS,EAAEX,CAAC,CAACY,qBATV;AAUHC,YAAAA,YAAY,EAAEb,CAAC,CAACa,YAVb;AAWHC,YAAAA,aAAa,EAAEd,CAAC,CAACc,aAXd;AAYHC,YAAAA,WAAW,EAAEf,CAAC,CAACe,WAZZ;AAaHC,YAAAA,aAAa,EAAEhB,CAAC,CAACgB,aAbd;AAcHC,YAAAA,QAAQ,EAAEjB,CAAC,CAACiB,QAdT;AAeHC,YAAAA,OAAO,EAAElB,CAAC,CAACkB,OAfR;AAgBHC,YAAAA,SAAS,EAAEnB,CAAC,CAACmB,SAhBV;AAiBHC,YAAAA,UAAU,EAAEpB,CAAC,CAACoB,UAjBX;AAkBHC,YAAAA,eAAe,EAAErB,CAAC,CAACqB,eAlBhB;AAmBHC,YAAAA,cAAc,EAAEtB,CAAC,CAACsB,cAnBf;AAoBHC,YAAAA,SAAS,EAAEvB,CAAC,CAACuB,SApBV;AAqBHC,YAAAA,QAAQ,EAAExB,CAAC,CAACwB,QArBT;AAsBHC,YAAAA,UAAU,EAAEzB,CAAC,CAACyB,UAtBX;AAuBHC,YAAAA,WAAW,EAAE1B,CAAC,CAAC0B,WAvBZ;AAwBHC,YAAAA,gBAAgB,EAAE3B,CAAC,CAAC2B,gBAAF,IAAsB3B,CAAC,CAAC2B,gBAAF,CAAmB5B,GAAnB,CAAuB,UAAS6B,EAAT,EAAa;AACxE,qBAAO;AACHC,gBAAAA,CAAC,EAAED,EAAE,CAACC,CADH;AAEHC,gBAAAA,CAAC,EAAEF,EAAE,CAACE;AAFH,eAAP;AAIH,aALuC;AAxBrC,WAAP;AA+BH,SAhCqC,CAAtC;AAiCH;AACJ;AA3CF,GA/nBmB,EA2qBnB;AACCrY,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,eAASwX,UAAT,EAAqB;AACxB,WAAKC,uBAAL,CAA6BD,UAA7B;;AACA,WAAK7T,QAAL,GAAgB+T,WAAhB,CAA4BzV,wBAA5B,EAAsDuV,UAAtD;;AACA,WAAK7S,gBAAL,CAAsBgT,YAAtB;AACH;AANF,GA3qBmB,EAkrBnB;AACCzY,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,eAAS4X,SAAT,EAAoB;AACvB,UAAIC,MAAM,GAAG,CAAC,GAAG5a,OAAO,CAAC6a,SAAZ,GAAb;;AACA,UAAID,MAAM,CAAC/W,IAAP,KAAgB+W,MAAM,CAACE,GAAvB,IAA8BH,SAAS,KAAK,KAAKI,mBAAL,EAAhD,EAA4E;AACxE;AACH;;AACD,UAAIJ,SAAJ,EAAe;AACX,aAAKK,iCAAL;AACH,OAFD,MAEO;AACH,aAAKC,mCAAL;AACH;;AACD,WAAKC,oBAAL,CAA0BP,SAA1B;AACH;AAbF,GAlrBmB,EAgsBnB;AACC1Y,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,eAASoY,EAAT,EAAa;AAChB,UAAIP,MAAM,GAAG,CAAC,GAAG5a,OAAO,CAAC6a,SAAZ,GAAb;AACA,UAAIO,QAAQ,GAAGR,MAAM,CAAC/W,IAAP,CAAYuX,QAA3B;AACA,UAAIC,IAAI,GAAGT,MAAM,CAAC/W,IAAP,CAAYuX,QAAZ,CAAqBC,IAAhC;;AACA,UAAIF,EAAJ,EAAQ;AACJ,YAAIE,IAAI,CAACC,iBAAT,EAA4B;AACxBD,UAAAA,IAAI,CAACC,iBAAL;AACH,SAFD,MAEO;AACH,cAAID,IAAI,CAACE,oBAAT,EAA+B;AAC3BF,YAAAA,IAAI,CAACE,oBAAL;AACH,WAFD,MAEO;AACH,gBAAIF,IAAI,CAACG,uBAAT,EAAkC;AAC9BH,cAAAA,IAAI,CAACG,uBAAL;AACH,aAFD,MAEO;AACH,kBAAIH,IAAI,CAACI,mBAAT,EAA8B;AAC1BJ,gBAAAA,IAAI,CAACI,mBAAL;AACH;AACJ;AACJ;AACJ;AACJ,OAhBD,MAgBO;AACH,YAAIL,QAAQ,CAACM,cAAb,EAA6B;AACzBN,UAAAA,QAAQ,CAACM,cAAT;AACH,SAFD,MAEO;AACH,cAAIN,QAAQ,CAACO,mBAAb,EAAkC;AAC9BP,YAAAA,QAAQ,CAACO,mBAAT;AACH,WAFD,MAEO;AACH,gBAAIP,QAAQ,CAACQ,oBAAb,EAAmC;AAC/BR,cAAAA,QAAQ,CAACQ,oBAAT;AACH,aAFD,MAEO;AACH,kBAAIR,QAAQ,CAACS,gBAAb,EAA+B;AAC3BT,gBAAAA,QAAQ,CAACS,gBAAT;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AAvCF,GAhsBmB,EAwuBnB;AACC5Z,IAAAA,GAAG,EAAE,qBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIqY,QAAQ,GAAG,CAAC,GAAGpb,OAAO,CAAC6a,SAAZ,IAAyBO,QAAxC;AACA,UAAIU,iBAAiB,GAAGV,QAAQ,CAACU,iBAAT,IAA8BV,QAAQ,CAACW,mBAAvC,IAA8DX,QAAQ,CAACY,uBAA/F;AACA,UAAIC,cAAc,GAAGH,iBAAiB,KAAKV,QAAQ,CAACC,IAA/B,IAAuCD,QAAQ,CAACc,kBAArE;AACA,aAAO,CAAC,CAACD,cAAT;AACH;AAPF,GAxuBmB,EAgvBnB;AACCha,IAAAA,GAAG,EAAE,mCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIqY,QAAQ,GAAG,CAAC,GAAGpb,OAAO,CAAC6a,SAAZ,IAAyBO,QAAxC;;AACA,UAAIe,OAAO,GAAG,KAAKC,gCAAL,CAAsClT,IAAtC,CAA2C,IAA3C,CAAd;;AACAhJ,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBsV,EAAxB,CAA2BC,QAA3B,EAAqCxV,4BAArC,EAAmEuW,OAAnE;;AACAjc,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBsV,EAAxB,CAA2BC,QAA3B,EAAqCrV,+BAArC,EAAsEoW,OAAtE;;AACAjc,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBsV,EAAxB,CAA2BC,QAA3B,EAAqCpV,mCAArC,EAA0EmW,OAA1E;;AACAjc,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBsV,EAAxB,CAA2BC,QAA3B,EAAqCnV,gCAArC,EAAuEkW,OAAvE;AACH;AATF,GAhvBmB,EA0vBnB;AACCla,IAAAA,GAAG,EAAE,qCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIqY,QAAQ,GAAG,CAAC,GAAGpb,OAAO,CAAC6a,SAAZ,IAAyBO,QAAxC;;AACAlb,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBwW,GAAxB,CAA4BjB,QAA5B,EAAsCxV,4BAAtC;;AACA1F,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBwW,GAAxB,CAA4BjB,QAA5B,EAAsCrV,+BAAtC;;AACA7F,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBwW,GAAxB,CAA4BjB,QAA5B,EAAsCpV,mCAAtC;;AACA9F,MAAAA,eAAe,CAAC2F,OAAhB,CAAwBwW,GAAxB,CAA4BjB,QAA5B,EAAsCnV,gCAAtC;AACH;AARF,GA1vBmB,EAmwBnB;AACChE,IAAAA,GAAG,EAAE,kCADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,CAAC,KAAKgY,mBAAL,EAAL,EAAiC;AAC7B,aAAKE,mCAAL;;AACA,aAAKhM,mBAAL,CAAyB,KAAzB;AACH;AACJ;AAPF,GAnwBmB,EA2wBnB;AACChN,IAAAA,GAAG,EAAE,oBADN;AAECc,IAAAA,KAAK,EAAE,eAASsX,CAAT,EAAYC,CAAZ,EAAegC,SAAf,EAA0B;AAC7B,WAAK/U,YAAL,CAAkBiG,KAAlB,CAAwB6M,CAAxB,EAA2BC,CAA3B,EAA8BgC,SAA9B;AACH;AAJF,GA3wBmB,EAgxBnB;AACCra,IAAAA,GAAG,EAAE,oBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKwE,YAAL,CAAkBgV,KAAlB;AACH;AAJF,GAhxBmB,EAqxBnB;AACCta,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,eAASA,MAAT,EAAgB;AACnB,UAAIyZ,YAAY,GAAG,CAAC,GAAGzc,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4O,WAAW,GAAGD,YAAY,CAACC,WAD/B;;AAEA,cAAQ1Z,MAAR;AACI,aAAK,IAAL;AACI,iBAAO0Z,WAAW,CAACC,EAAnB;;AACJ,aAAK,IAAL;AACI,iBAAOD,WAAW,CAACE,EAAnB;;AACJ,aAAK,IAAL;AACI,iBAAOF,WAAW,CAACG,EAAnB;;AACJ;AACI,iBAAOH,WAAW,CAACC,EAAnB;AARR;AAUH;AAfF,GArxBmB,EAqyBnB;AACCza,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI8Z,YAAY,GAAG,CAAC,GAAG9c,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4D,cAAc,GAAGoL,YAAY,CAACpL,cADlC;;AAEA,UAAIqL,QAAQ,GAAG,KAAKjW,MAAL,CAAY,UAAZ,KAA2B,KAAKA,MAAL,CAAY,UAAZ,CAA1C;;AACA,WAAK6K,sBAAL,CAA4BD,cAAc,CAACsL,cAA3C,EAA2DD,QAA3D;;AACA,WAAKE,oBAAL,CAA0B,CAACF,QAA3B;AACH;AARF,GAryBmB,EA8yBnB;AACC7a,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIka,SAAS,GAAG,KAAKpW,MAAL,CAAY,iBAAZ,CAAhB;;AACA,UAAI,CAACoW,SAAL,EAAgB;AACZA,QAAAA,SAAS,GAAG,KAAKpW,MAAL,CAAY,WAAZ,CAAZ;AACH;;AACD,UAAIqW,YAAY,GAAG,CAAC,GAAGnd,iBAAiB,CAAC8N,UAAtB,GAAnB;AAAA,UACI4D,cAAc,GAAGyL,YAAY,CAACzL,cADlC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC0L,SAA3C,EAAsDF,SAAtD;AACH;AAVF,GA9yBmB,EAyzBnB;AACChb,IAAAA,GAAG,EAAE,4BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIqa,cAAc,GAAG,KAAKvW,MAAL,CAAY,iBAAZ,CAArB;;AACA,UAAI,CAACuR,KAAK,CAACC,OAAN,CAAc+E,cAAd,CAAL,EAAoC;AAChC;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAGtd,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAG4L,aAAa,CAAC5L,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC6L,cAA3C,EAA2DF,cAA3D;AACH;AAVF,GAzzBmB,EAo0BnB;AACCnb,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIwa,aAAa,GAAG,CAAC,GAAGxd,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAG8L,aAAa,CAAC9L,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC+L,cAA3C,EAA2D,KAAKC,iBAAL,CAAuB,KAAK5W,MAAL,CAAY,UAAZ,CAAvB,CAA3D;AACH;AANF,GAp0BmB,EA20BnB;AACC5E,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI2a,aAAa,GAAG,CAAC,GAAG3d,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGiM,aAAa,CAACjM,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACkM,gBAA3C,EAA6D,KAAK9W,MAAL,CAAY,YAAZ,CAA7D;AACH;AANF,GA30BmB,EAk1BnB;AACC5E,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI6a,aAAa,GAAG,CAAC,GAAG7d,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGmM,aAAa,CAACnM,cADnC;;AAEA,UAAI8I,UAAU,GAAG,KAAK1T,MAAL,CAAY,YAAZ,CAAjB;;AACA,WAAK6K,sBAAL,CAA4BD,cAAc,CAACoM,UAA3C,EAAuDtD,UAAvD;;AACA,WAAKtL,mBAAL,CAAyBsL,UAAzB;AACH;AARF,GAl1BmB,EA21BnB;AACCtY,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI+a,aAAa,GAAG,CAAC,GAAG/d,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGqM,aAAa,CAACrM,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACsM,QAA3C,EAAqD,KAAKlX,MAAL,CAAY,UAAZ,CAArD;AACH;AANF,GA31BmB,EAk2BnB;AACC5E,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIib,aAAa,GAAG,CAAC,GAAGje,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGuM,aAAa,CAACvM,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACwM,UAA3C,EAAuD,KAAKpX,MAAL,CAAY,YAAZ,CAAvD;AACH;AANF,GAl2BmB,EAy2BnB;AACC5E,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAImb,QAAQ,GAAG,KAAKrX,MAAL,CAAY,gBAAZ,CAAf;;AACA,UAAI,CAACqX,QAAL,EAAe;AACXA,QAAAA,QAAQ,GAAG,KAAKrX,MAAL,CAAY,UAAZ,CAAX;AACH;;AACD,UAAIsX,aAAa,GAAG,CAAC,GAAGpe,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAG0M,aAAa,CAAC1M,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC2M,QAA3C,EAAqDF,QAArD;AACH;AAVF,GAz2BmB,EAo3BnB;AACCjc,IAAAA,GAAG,EAAE,2BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIsb,aAAa,GAAG,KAAKxX,MAAL,CAAY,gBAAZ,CAApB;;AACA,UAAI,CAACuR,KAAK,CAACC,OAAN,CAAcgG,aAAd,CAAL,EAAmC;AAC/B;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAGve,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAG6M,aAAa,CAAC7M,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC8M,aAA3C,EAA0DF,aAA1D;AACH;AAVF,GAp3BmB,EA+3BnB;AACCpc,IAAAA,GAAG,EAAE,kBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIyb,aAAa,GAAG,CAAC,GAAGze,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4O,WAAW,GAAG+B,aAAa,CAAC/B,WADhC;;AAEA,UAAIgC,KAAK,GAAG,EAAZ;AACAA,MAAAA,KAAK,CAAChC,WAAW,CAACC,EAAb,CAAL,GAAwBpc,SAAS,CAACuF,OAAV,CAAkB6Y,MAAlB,CAAyB,kBAAzB,CAAxB;AACAD,MAAAA,KAAK,CAAChC,WAAW,CAACE,EAAb,CAAL,GAAwBrc,SAAS,CAACuF,OAAV,CAAkB6Y,MAAlB,CAAyB,kBAAzB,CAAxB;AACAD,MAAAA,KAAK,CAAChC,WAAW,CAACG,EAAb,CAAL,GAAwBtc,SAAS,CAACuF,OAAV,CAAkB6Y,MAAlB,CAAyB,kBAAzB,CAAxB;AACA,WAAKhX,gBAAL,CAAsBiX,QAAtB,CAA+BC,SAA/B,GAA2CH,KAA3C;AACH;AAVF,GA/3BmB,EA04BnB;AACCxc,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAK2E,gBAAL,CAAsBiX,QAAtB,CAA+BE,UAA/B,GAA4C,UAAS9b,KAAT,EAAgB;AACxD,eAAOvC,QAAQ,CAACqF,OAAT,CAAiB6Y,MAAjB,CAAwB3b,KAAxB,CAAP;AACH,OAFD;AAGH;AANF,GA14BmB,EAi5BnB;AACCd,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI+b,aAAa,GAAG,CAAC,GAAG/e,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGqN,aAAa,CAACrN,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACsN,SAA3C,EAAsD,KAAKC,oBAAL,CAA0B,KAAKnY,MAAL,CAAY,WAAZ,CAA1B,CAAtD;AACH;AANF,GAj5BmB,EAw5BnB;AACC5E,IAAAA,GAAG,EAAE,mBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIkc,aAAa,GAAG,CAAC,GAAGlf,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGwN,aAAa,CAACxN,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACyN,KAA3C,EAAkD,KAAKF,oBAAL,CAA0B,KAAKnY,MAAL,CAAY,OAAZ,CAA1B,CAAlD;AACH;AANF,GAx5BmB,EA+5BnB;AACC5E,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIoc,QAAQ,GAAG,KAAKtY,MAAL,CAAY,UAAZ,CAAf;;AACA,UAAI,CAACsY,QAAD,IAAa,CAACA,QAAQ,CAACC,KAAvB,IAAgC,CAACD,QAAQ,CAACE,MAA9C,EAAsD;AAClD;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAGvf,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAG6N,aAAa,CAAC7N,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAAC8N,QAA3C,EAAqDJ,QAArD;AACH;AAVF,GA/5BmB,EA06BnB;AACCld,IAAAA,GAAG,EAAE,2BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAIyc,aAAa,GAAG,KAAK3Y,MAAL,CAAY,gBAAZ,CAApB;;AACA,UAAI,CAACuR,KAAK,CAACC,OAAN,CAAcmH,aAAd,CAAL,EAAmC;AAC/B;AACH;;AACD,UAAIC,aAAa,GAAG,CAAC,GAAG1f,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGgO,aAAa,CAAChO,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACiO,aAA3C,EAA0DF,aAA1D;AACH;AAVF,GA16BmB,EAq7BnB;AACCvd,IAAAA,GAAG,EAAE,6BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI4c,aAAa,GAAG,CAAC,GAAG5f,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGkO,aAAa,CAAClO,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACmO,aAA3C,EAA0D,gBAAgB,KAAK/Y,MAAL,CAAY,iBAAZ,CAA1E;AACH;AANF,GAr7BmB,EA47BnB;AACC5E,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI8c,aAAa,GAAG,CAAC,GAAG9f,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGoO,aAAa,CAACpO,cADnC;;AAEA,WAAKC,sBAAL,CAA4BD,cAAc,CAACqO,SAA3C,EAAsD,KAAKjZ,MAAL,CAAY,WAAZ,CAAtD;AACH;AANF,GA57BmB,EAm8BnB;AACC5E,IAAAA,GAAG,EAAE,QADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,aAAO,KAAKgd,eAAL,EAAP;AACH;AAJF,GAn8BmB,EAw8BnB;AACC9d,IAAAA,GAAG,EAAE,UADN;AAECc,IAAAA,KAAK,EAAE,eAAS2b,MAAT,EAAiBsB,QAAjB,EAA2B;AAC9B,UAAIlT,OAAO,GAAG,KAAKmT,0BAAL,CAAgCvB,MAAhC,CAAd;;AACA,WAAKhN,sBAAL,CAA4B5E,OAA5B,EAAqCkT,QAArC;AACH;AALF,GAx8BmB,EA88BnB;AACC/d,IAAAA,GAAG,EAAE,4BADN;AAECc,IAAAA,KAAK,EAAE,eAAS2b,MAAT,EAAiB;AACpB,UAAIwB,aAAa,GAAG,CAAC,GAAGngB,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI4D,cAAc,GAAGyO,aAAa,CAACzO,cADnC;;AAEA,cAAQiN,MAAR;AACI,aAAK,KAAL;AACI,iBAAOjN,cAAc,CAAC0O,SAAtB;;AACJ,aAAK,KAAL;AACI,iBAAO1O,cAAc,CAAC2O,SAAtB;;AACJ;AACI,iBAAO3O,cAAc,CAAC4O,SAAtB;AANR;AAQH;AAbF,GA98BmB,EA49BnB;AACCpe,IAAAA,GAAG,EAAE,QADN;AAECc,IAAAA,KAAK,EAAE,eAAS6O,IAAT,EAAe0O,uBAAf,EAAwC;AAC3C,WAAKC,eAAL,CAAqB3O,IAArB,EAA2B0O,uBAA3B;;AACA,WAAKvS,sBAAL;AACH;AALF,GA59BmB,EAk+BnB;AACC9L,IAAAA,GAAG,EAAE,oBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,aAAO,CAAC,GAAGzE,OAAO,CAACkiB,MAAZ,EAAoBne,IAAI,CAACa,eAAe,CAACgD,OAAO,CAACjF,SAAT,CAAhB,EAAqC,oBAArC,EAA2D,IAA3D,CAAJ,CAAqE6B,IAArE,CAA0E,IAA1E,CAApB,EAAqG;AACxGga,QAAAA,QAAQ,EAAE,KAD8F;AAExGG,QAAAA,SAAS,EAAE1X,yBAF6F;AAGxGkb,QAAAA,UAAU,EAAE,KAH4F;AAIxGC,QAAAA,QAAQ,EAAElb,wBAJ8F;AAKxG+U,QAAAA,UAAU,EAAE,KAL4F;AAMxGoG,QAAAA,QAAQ,EAAE,IAN8F;AAOxGC,QAAAA,UAAU,EAAE,IAP4F;AAQxGC,QAAAA,KAAK,EAAEvb,oBARiG;AASxGwb,QAAAA,SAAS,EAAExb,oBAT6F;AAUxGyb,QAAAA,eAAe,EAAEtb,gCAVuF;AAWxGub,QAAAA,SAAS,EAAEtb,0BAX6F;AAYxGub,QAAAA,aAAa,EAAE,IAZyF;AAaxGC,QAAAA,KAAK,EAAE;AACHC,UAAAA,UAAU,EAAE,IADT;AAEHC,UAAAA,OAAO,EAAE,IAFN;AAGHC,UAAAA,UAAU,EAAE,KAAK,CAHd;AAIHC,UAAAA,SAAS,EAAE,KAAK,CAJb;AAKHC,UAAAA,aAAa,EAAE,KAAK,CALjB;AAMHC,UAAAA,UAAU,EAAE,KAAK,CANd;AAOHC,UAAAA,QAAQ,EAAE,MAPP;AAQHC,UAAAA,QAAQ,EAAE,MARP;AASHC,UAAAA,YAAY,EAAE,KAAK,CAThB;AAUHC,UAAAA,aAAa,EAAE,KAAK,CAVjB;AAWHC,UAAAA,SAAS,EAAE,KAAK,CAXb;AAYHC,UAAAA,QAAQ,EAAE,KAAK,CAZZ;AAaHC,UAAAA,OAAO,EAAE,KAAK,CAbX;AAcHC,UAAAA,SAAS,EAAE,KAAK,CAdb;AAeHC,UAAAA,UAAU,EAAE,KAAK,CAfd;AAgBHC,UAAAA,gBAAgB,EAAE,KAAK,CAhBpB;AAiBHC,UAAAA,YAAY,EAAE,UAjBX;AAkBHC,UAAAA,UAAU,EAAE;AAlBT,SAbiG;AAiCxGC,QAAAA,KAAK,EAAE;AACHlB,UAAAA,UAAU,EAAE,IADT;AAEHC,UAAAA,OAAO,EAAE,IAFN;AAGHC,UAAAA,UAAU,EAAE,KAAK,CAHd;AAIHC,UAAAA,SAAS,EAAE,KAAK,CAJb;AAKHC,UAAAA,aAAa,EAAE,KAAK,CALjB;AAMHC,UAAAA,UAAU,EAAE,KAAK,CANd;AAOHc,UAAAA,QAAQ,EAAE,MAPP;AAQHC,UAAAA,kBAAkB,EAAE,KAAK,CARtB;AASHC,UAAAA,MAAM,EAAE,IATL;AAUHC,UAAAA,gBAAgB,EAAE,KAAK,CAVpB;AAWHC,UAAAA,UAAU,EAAE,KAAK,CAXd;AAYHhB,UAAAA,QAAQ,EAAE,KAAK,CAZZ;AAaHiB,UAAAA,YAAY,EAAE,KAAK,CAbhB;AAcHC,UAAAA,eAAe,EAAE,KAAK,CAdnB;AAeHC,UAAAA,aAAa,EAAE,KAAK;AAfjB,SAjCiG;AAkDxG3K,QAAAA,YAAY,EAAE,EAlD0F;AAmDxG4K,QAAAA,OAAO,EAAE;AACLC,UAAAA,OAAO,EAAE;AADJ,SAnD+F;AAsDxGC,QAAAA,OAAO,EAAE;AACLD,UAAAA,OAAO,EAAE;AADJ,SAtD+F;AAyDxGE,QAAAA,WAAW,EAAE;AACTzX,UAAAA,OAAO,EAAE;AADA,SAzD2F;AA4DxG0X,QAAAA,eAAe,EAAE;AACb1X,UAAAA,OAAO,EAAE,IADI;AAEb2X,UAAAA,WAAW,EAAE;AAFA,SA5DuF;AAgExG,kBAAU;AACNC,UAAAA,QAAQ,EAAE,SADJ;AAENC,UAAAA,QAAQ,EAAE,KAAK;AAFT,SAhE8F;AAoExG1W,QAAAA,WAAW,EAAE,IApE2F;AAqExG2W,QAAAA,cAAc,EAAE,IArEwF;AAsExGC,QAAAA,kBAAkB,EAAE;AAtEoF,OAArG,CAAP;AAwEH;AA3EF,GAl+BmB,EA8iCnB;AACCthB,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKygB,iBAAL,GAAyB,KAAKC,qBAAL,CAA2B,eAA3B,CAAzB;AACH;AAJF,GA9iCmB,EAmjCnB;AACCxhB,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,CAAC,KAAKygB,iBAAV,EAA6B;AACzB,aAAKE,uBAAL;AACH;;AACD,WAAKF,iBAAL;AACH;AAPF,GAnjCmB,EA2jCnB;AACCvhB,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,eAAS6O,IAAT,EAAeoO,QAAf,EAAyB2D,aAAzB,EAAwC;AAC3C,UAAI,KAAKpS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBqS,MAAlB,CAAyBhS,IAAzB,EAA+BoO,QAA/B,EAAyC2D,aAAzC;AACH;AACJ;AANF,GA3jCmB,EAkkCnB;AACC1hB,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,eAASd,GAAT,EAAc2P,IAAd,EAAoBoO,QAApB,EAA8B2D,aAA9B,EAA6C;AAChD,UAAI,KAAKpS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBsS,MAAlB,CAAyB5hB,GAAzB,EAA8B2P,IAA9B,EAAoCoO,QAApC,EAA8C2D,aAA9C;AACH;AACJ;AANF,GAlkCmB,EAykCnB;AACC1hB,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,eAASd,GAAT,EAAc2P,IAAd,EAAoBoO,QAApB,EAA8B2D,aAA9B,EAA6C;AAChD,UAAI,KAAKpS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkB5D,MAAlB,CAAyB1L,GAAzB,EAA8B2P,IAA9B,EAAoCoO,QAApC,EAA8C2D,aAA9C;AACH;AACJ;AANF,GAzkCmB,EAglCnB;AACC1hB,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,eAAS6O,IAAT,EAAeoO,QAAf,EAAyB2D,aAAzB,EAAwC;AAC3C,UAAI,KAAKvS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBwS,MAAlB,CAAyBhS,IAAzB,EAA+BoO,QAA/B,EAAyC2D,aAAzC;AACH;AACJ;AANF,GAhlCmB,EAulCnB;AACC1hB,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,eAASd,GAAT,EAAc2P,IAAd,EAAoBoO,QAApB,EAA8B2D,aAA9B,EAA6C;AAChD,UAAI,KAAKvS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkByS,MAAlB,CAAyB5hB,GAAzB,EAA8B2P,IAA9B,EAAoCoO,QAApC,EAA8C2D,aAA9C;AACH;AACJ;AANF,GAvlCmB,EA8lCnB;AACC1hB,IAAAA,GAAG,EAAE,yBADN;AAECc,IAAAA,KAAK,EAAE,eAASd,GAAT,EAAc2P,IAAd,EAAoBoO,QAApB,EAA8B2D,aAA9B,EAA6C;AAChD,UAAI,KAAKvS,YAAT,EAAuB;AACnB,aAAKA,YAAL,CAAkBzD,MAAlB,CAAyB1L,GAAzB,EAA8B2P,IAA9B,EAAoCoO,QAApC,EAA8C2D,aAA9C;AACH;AACJ;AANF,GA9lCmB,EAqmCnB;AACC1hB,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKkE,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBP,QAAhB,GAA2BC,QAA3B,CAAoC,uBAApC;AACH;AACJ;AANF,GArmCmB,EA4mCnB;AACC1E,IAAAA,GAAG,EAAE,sBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,UAAI,KAAKkE,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBP,QAAhB,GAA2Bod,WAA3B,CAAuC,uBAAvC;AACH;AACJ;AANF,GA5mCmB,EAmnCnB;AACC7hB,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKghB,gBAAL,GAAwB,KAAKN,qBAAL,CAA2B,aAA3B,CAAxB;AACH;AAJF,GAnnCmB,EAwnCnB;AACCxhB,IAAAA,GAAG,EAAE,2BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKihB,mBAAL,GAA2B,KAAKP,qBAAL,CAA2B,gBAA3B,CAA3B;AACH;AAJF,GAxnCmB,EA6nCnB;AACCxhB,IAAAA,GAAG,EAAE,+BADN;AAECc,IAAAA,KAAK,EAAE,iBAAW;AACd,WAAKkhB,uBAAL,GAA+B,KAAKR,qBAAL,CAA2B,oBAA3B,CAA/B;AACH;AAJF,GA7nCmB,EAkoCnB;AACCxhB,IAAAA,GAAG,EAAE,uBADN;AAECc,IAAAA,KAAK,EAAE,eAASmhB,UAAT,EAAqB;AACxB,UAAI,CAAC,KAAKH,gBAAV,EAA4B;AACxB,aAAKI,sBAAL;AACH;;AACD,WAAKJ,gBAAL,CAAsB;AAClBK,QAAAA,IAAI,EAAE,KAAKC,wBAAL,CAA8BH,UAA9B;AADY,OAAtB;AAGH;AATF,GAloCmB,EA4oCnB;AACCjiB,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,eAASmhB,UAAT,EAAqB;AACxB,UAAI,CAAC,KAAKF,mBAAV,EAA+B;AAC3B,aAAKM,yBAAL;AACH;;AACD,WAAKN,mBAAL,CAAyB;AACrBI,QAAAA,IAAI,EAAE,KAAKC,wBAAL,CAA8BH,UAA9B;AADe,OAAzB;AAGH;AATF,GA5oCmB,EAspCnB;AACCjiB,IAAAA,GAAG,EAAE,wBADN;AAECc,IAAAA,KAAK,EAAE,eAASwhB,WAAT,EAAsB;AACzB,UAAI,CAAC,KAAKN,uBAAV,EAAmC;AAC/B,aAAKO,6BAAL;AACH;;AACD,WAAKP,uBAAL,CAA6B;AACzBxF,QAAAA,KAAK,EAAE8F,WAAW,CAAChM,GAAZ,CAAgB,KAAK8L,wBAAL,CAA8Bnb,IAA9B,CAAmC,IAAnC,CAAhB;AADkB,OAA7B;AAGH;AATF,GAtpCmB,EAgqCnB;AACCjH,IAAAA,GAAG,EAAE,0BADN;AAECc,IAAAA,KAAK,EAAE,eAASmhB,UAAT,EAAqB;AACxB,UAAIO,aAAa,GAAG,CAAC,GAAG1kB,iBAAiB,CAAC8N,UAAtB,GAApB;AAAA,UACI6W,WAAW,GAAGD,aAAa,CAACC,WADhC;;AAEA,UAAIC,YAAY,GAAGT,UAAU,YAAYQ,WAAtB,GAAoC,KAAKE,0BAAL,CAAgC1b,IAAhC,CAAqC,IAArC,CAApC,GAAiF,KAAK2b,kCAAL,CAAwC3b,IAAxC,CAA6C,IAA7C,CAApG;AACA,aAAO,CAAC,GAAG5K,OAAO,CAACkiB,MAAZ,EAAoB;AACvBsE,QAAAA,EAAE,EAAEZ,UAAU,CAACY;AADQ,OAApB,EAEJH,YAAY,CAACT,UAAD,CAFR,CAAP;AAGH;AATF,GAhqCmB,EA0qCnB;AACCjiB,IAAAA,GAAG,EAAE,4BADN;AAECc,IAAAA,KAAK,EAAE,eAASgiB,WAAT,EAAsB;AACzB,aAAO;AACHC,QAAAA,QAAQ,EAAE,KAAK5T,YAAL,IAAqB,KAAKA,YAAL,CAAkB6T,QAAlB,CAA2BF,WAAW,CAAC9iB,GAAvC,CAD5B;AAEHijB,QAAAA,QAAQ,EAAE,OAFP;AAGHC,QAAAA,IAAI,EAAEJ,WAAW,CAACI,IAHf;AAIHla,QAAAA,IAAI,EAAE8Z,WAAW,CAAC9Z;AAJf,OAAP;AAMH;AATF,GA1qCmB,EAorCnB;AACChJ,IAAAA,GAAG,EAAE,oCADN;AAECc,IAAAA,KAAK,EAAE,eAASqiB,eAAT,EAA0B;AAC7B,aAAO;AACHJ,QAAAA,QAAQ,EAAE,KAAKzT,YAAL,IAAqB,KAAKA,YAAL,CAAkB0T,QAAlB,CAA2BG,eAAe,CAACnjB,GAA3C,CAD5B;AAEHijB,QAAAA,QAAQ,EAAE,WAFP;AAGHG,QAAAA,KAAK,EAAED,eAAe,CAACC,KAHpB;AAIHC,QAAAA,OAAO,EAAEF,eAAe,CAACE,OAJtB;AAKHC,QAAAA,KAAK,EAAEH,eAAe,CAACG;AALpB,OAAP;AAOH;AAVF,GAprCmB,EA+rCnB;AACCtjB,IAAAA,GAAG,EAAE,gBADN;AAECc,IAAAA,KAAK,EAAE,eAASyiB,IAAT,EAAe;AAClB,UAAI,KAAKjf,gBAAL,CAAsBkf,cAAtB,EAAJ,EAA4C;AACxC;AACH;;AACD,WAAKlf,gBAAL,CAAsBmf,WAAtB;;AACA,UAAI;AACA,aAAKC,kBAAL,CAAwBH,IAAxB;AACH,OAFD,SAEU;AACN,aAAKjf,gBAAL,CAAsBqf,SAAtB;AACH;AACJ;AAZF,GA/rCmB,EA4sCnB;AACC3jB,IAAAA,GAAG,EAAE,oBADN;AAECc,IAAAA,KAAK,EAAE,eAASyiB,IAAT,EAAe;AAClB,cAAQA,IAAI,CAACvZ,IAAb;AACI,aAAK,UAAL;AACA,aAAK,UAAL;AACI,eAAKlE,oBAAL;;AACA;;AACJ,aAAK,WAAL;AACI,cAAI,gBAAgByd,IAAI,CAACK,QAArB,IAAiC,sBAAsBL,IAAI,CAACK,QAAhE,EAA0E;AACtE,iBAAKpV,0BAAL;AACH;;AACD,cAAI,gBAAgB+U,IAAI,CAACK,QAArB,IAAiC,sBAAsBL,IAAI,CAACK,QAAhE,EAA0E;AACtE,iBAAKje,qBAAL;AACH;;AACD;;AACJ,aAAK,UAAL;AACI,eAAKC,oBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKC,sBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKE,sBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,eAAKqI,oBAAL;;AACA;;AACJ,aAAK,YAAL;AACI,eAAKC,sBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,cAAI,eAAekV,IAAI,CAACK,QAApB,IAAgC,qBAAqBL,IAAI,CAACK,QAA9D,EAAwE;AACpE,iBAAKtV,yBAAL;AACH;;AACD,cAAI,eAAeiV,IAAI,CAACK,QAApB,IAAgC,qBAAqBL,IAAI,CAACK,QAA9D,EAAwE;AACpE,iBAAKrV,oBAAL;AACH;;AACD;;AACJ,aAAK,WAAL;AACI,eAAKJ,qBAAL;;AACA;;AACJ,aAAK,OAAL;AACI,eAAKL,iBAAL;;AACA;;AACJ,aAAK,UAAL;AACI,cAAI,eAAeyV,IAAI,CAACK,QAApB,IAAgC,qBAAqBL,IAAI,CAACK,QAA9D,EAAwE;AACpE,iBAAK7V,yBAAL;AACH;;AACD,cAAI,eAAewV,IAAI,CAACK,QAApB,IAAgC,qBAAqBL,IAAI,CAACK,QAA1D,IAAsE,sBAAsBL,IAAI,CAACK,QAArG,EAA+G;AAC3G,iBAAK5V,oBAAL;AACH;;AACD;;AACJ,aAAK,iBAAL;AACI,eAAKC,2BAAL;;AACA;;AACJ,aAAK,WAAL;AACI,eAAKC,qBAAL;;AACA;;AACJ,aAAK,OAAL;AACI,cAAI,uBAAuBqV,IAAI,CAACK,QAAhC,EAA0C;AACtC,iBAAKjV,mBAAL;AACH,WAFD,MAEO;AACH,iBAAKK,uBAAL;AACH;;AACD;;AACJ,aAAK,OAAL;AACI,eAAKC,uBAAL;;AACA;;AACJ,aAAK,cAAL;AACI,eAAKR,mBAAL,CAAyB8U,IAAI,CAACziB,KAA9B,EAAqCyiB,IAAI,CAACM,aAA1C;;AACA,eAAKC,WAAL;;AACA;;AACJ,aAAK,aAAL;AACI,cAAI,2BAA2BP,IAAI,CAACK,QAApC,EAA8C;AAC1C,iBAAKG,8BAAL;AACH,WAFD,MAEO;AACH,iBAAKD,WAAL;AACH;;AACD;;AACJ,aAAK,iBAAL;AACI,cAAI,6BAA6BP,IAAI,CAACvZ,IAAtC,EAA4C;AACxC,iBAAKga,gCAAL;AACH,WAFD,MAEO;AACH,iBAAKF,WAAL;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,qBAAqBP,IAAI,CAACK,QAA9B,EAAwC;AACpC,iBAAKK,wBAAL;AACH,WAFD,MAEO;AACH,iBAAKH,WAAL;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,uBAAuBP,IAAI,CAACK,QAAhC,EAA0C;AACtC,iBAAKM,0BAAL;AACH,WAFD,MAEO;AACH,iBAAKJ,WAAL;AACH;;AACD;;AACJ,aAAK,eAAL;AACI,eAAKrC,uBAAL;;AACA;;AACJ,aAAK,aAAL;AACI,eAAKS,sBAAL;;AACA;;AACJ,aAAK,gBAAL;AACI,eAAKG,yBAAL;;AACA;;AACJ,aAAK,oBAAL;AACI,eAAKE,6BAAL;;AACA;;AACJ,aAAK,QAAL;AACI,cAAI,KAAK5d,gBAAT,EAA2B;AACvB,iBAAKA,gBAAL,CAAsBC,MAAtB,CAA6B,QAA7B,EAAuC2e,IAAI,CAACziB,KAA5C;AACH;;AACD;;AACJ;AACIV,UAAAA,IAAI,CAACa,eAAe,CAACgD,OAAO,CAACjF,SAAT,CAAhB,EAAqC,gBAArC,EAAuD,IAAvD,CAAJ,CAAiE6B,IAAjE,CAAsE,IAAtE,EAA4E0iB,IAA5E;;AApHR;AAsHH;AAzHF,GA5sCmB,CAAV,CAAZ;;AAu0CA,SAAOtf,OAAP;AACH,CAh1Ca,CAg1CZnI,IAAI,CAAC8H,OAh1CO,CAAd;;AAi1CA,CAAC,GAAGxH,uBAAuB,CAACwH,OAA5B,EAAqC,WAArC,EAAkDK,OAAlD;AACAkgB,MAAM,CAACC,OAAP,GAAiBngB,OAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/diagram/ui.diagram.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _ui = require(\"../widget/ui.widget\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _drawer = require(\"../drawer\");\r\nvar _drawer2 = _interopRequireDefault(_drawer);\r\nvar _load_indicator = require(\"../load_indicator\");\r\nvar _load_indicator2 = _interopRequireDefault(_load_indicator);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _data2 = _interopRequireDefault(_data);\r\nvar _uiDiagram = require(\"./ui.diagram.toolbar\");\r\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\r\nvar _uiDiagram3 = require(\"./ui.diagram.leftpanel\");\r\nvar _uiDiagram4 = _interopRequireDefault(_uiDiagram3);\r\nvar _uiDiagram5 = require(\"./ui.diagram.rightpanel\");\r\nvar _uiDiagram6 = _interopRequireDefault(_uiDiagram5);\r\nvar _uiDiagram7 = require(\"./ui.diagram.contextmenu\");\r\nvar _uiDiagram8 = _interopRequireDefault(_uiDiagram7);\r\nvar _uiDiagram9 = require(\"./ui.diagram.dialogs\");\r\nvar _uiDiagram10 = _interopRequireDefault(_uiDiagram9);\r\nvar _uiDiagram11 = require(\"./ui.diagram.toolbox\");\r\nvar _uiDiagram12 = _interopRequireDefault(_uiDiagram11);\r\nvar _uiDiagram13 = require(\"./ui.diagram.optionsupdate\");\r\nvar _uiDiagram14 = _interopRequireDefault(_uiDiagram13);\r\nvar _uiDiagram15 = require(\"./ui.diagram.nodes\");\r\nvar _uiDiagram16 = _interopRequireDefault(_uiDiagram15);\r\nvar _uiDiagram17 = require(\"./ui.diagram.edges\");\r\nvar _uiDiagram18 = _interopRequireDefault(_uiDiagram17);\r\nvar _tooltip = require(\"../tooltip\");\r\nvar _tooltip2 = _interopRequireDefault(_tooltip);\r\nvar _diagram_importer = require(\"./diagram_importer\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _number = require(\"../../localization/number\");\r\nvar _number2 = _interopRequireDefault(_number);\r\nvar _uiDiagram19 = require(\"./ui.diagram.dialogmanager\");\r\nvar _uiDiagram20 = _interopRequireDefault(_uiDiagram19);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (_isNativeReflectConstruct()) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DIAGRAM_CLASS = \"dx-diagram\";\r\nvar DIAGRAM_FULLSCREEN_CLASS = \"dx-diagram-fullscreen\";\r\nvar DIAGRAM_TOOLBAR_WRAPPER_CLASS = DIAGRAM_CLASS + \"-toolbar-wrapper\";\r\nvar DIAGRAM_CONTENT_WRAPPER_CLASS = DIAGRAM_CLASS + \"-content-wrapper\";\r\nvar DIAGRAM_DRAWER_WRAPPER_CLASS = DIAGRAM_CLASS + \"-drawer-wrapper\";\r\nvar DIAGRAM_CONTENT_CLASS = DIAGRAM_CLASS + \"-content\";\r\nvar DIAGRAM_LOADING_INDICATOR_CLASS = DIAGRAM_CLASS + \"-loading-indicator\";\r\nvar DIAGRAM_DEFAULT_UNIT = \"in\";\r\nvar DIAGRAM_DEFAULT_ZOOMLEVEL = 1;\r\nvar DIAGRAM_DEFAULT_AUTOZOOM = \"disabled\";\r\nvar DIAGRAM_DEFAULT_PAGE_ORIENTATION = \"portrait\";\r\nvar DIAGRAM_DEFAULT_PAGE_COLOR = \"white\";\r\nvar DIAGRAM_NAMESPACE = \"dxDiagramEvent\";\r\nvar FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"fullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar IE_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"msfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"webkitfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar MOZ_FULLSCREEN_CHANGE_EVENT_NAME = _utils2.default.addNamespace(\"mozfullscreenchange\", DIAGRAM_NAMESPACE);\r\nvar Diagram = function(_Widget) {\r\n    _inherits(Diagram, _Widget);\r\n    var _super = _createSuper(Diagram);\r\n\r\n    function Diagram() {\r\n        _classCallCheck(this, Diagram);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(Diagram, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this._updateDiagramLockCount = 0;\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_init\", this).call(this);\r\n            this._initDiagram();\r\n            this.optionsUpdateBar = new _uiDiagram14.default(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_initMarkup\", this).call(this);\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            this.$element().addClass(DIAGRAM_CLASS);\r\n            this._toolbarInstance = void 0;\r\n            if (this.option(\"toolbar.visible\")) {\r\n                this._renderToolbar()\r\n            }\r\n            var $contentWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_WRAPPER_CLASS).appendTo(this.$element());\r\n            this._leftPanel = void 0;\r\n            if (this.option(\"toolbox.visible\")) {\r\n                this._renderLeftPanel($contentWrapper)\r\n            }\r\n            var $drawerWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_DRAWER_WRAPPER_CLASS).appendTo($contentWrapper);\r\n            if (this.option(\"propertiesPanel.enabled\")) {\r\n                var $drawer = (0, _renderer2.default)(\"<div>\").appendTo($drawerWrapper);\r\n                this._content = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($drawer);\r\n                this._renderRightPanel($drawer)\r\n            } else {\r\n                this._content = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_CONTENT_CLASS).appendTo($drawerWrapper)\r\n            }\r\n            this._contextMenu = void 0;\r\n            if (this.option(\"contextMenu.enabled\")) {\r\n                this._renderContextMenu(this._content)\r\n            }\r\n            this._renderDialog(this._content);\r\n            !isServerSide && this._diagramInstance.createDocument(this._content[0]);\r\n            if (this.option(\"zoomLevel\") !== DIAGRAM_DEFAULT_ZOOMLEVEL) {\r\n                this._updateZoomLevelState()\r\n            }\r\n            if (this.option(\"autoZoom\") !== DIAGRAM_DEFAULT_AUTOZOOM) {\r\n                this._updateAutoZoomState()\r\n            }\r\n            if (this.option(\"simpleView\")) {\r\n                this._updateSimpleViewState()\r\n            }\r\n            if (this.option(\"readOnly\") || this.option(\"disabled\")) {\r\n                this._updateReadOnlyState()\r\n            }\r\n            if (this.option(\"fullScreen\")) {\r\n                this._updateFullscreenState()\r\n            }\r\n            this._diagramInstance.barManager.registerBar(this.optionsUpdateBar)\r\n        }\r\n    }, {\r\n        key: \"notifyBarCommandExecuted\",\r\n        value: function() {\r\n            this._diagramInstance.captureFocus()\r\n        }\r\n    }, {\r\n        key: \"_registerBar\",\r\n        value: function(component) {\r\n            component.bar.onChanged.add(this);\r\n            this._diagramInstance.barManager.registerBar(component.bar)\r\n        }\r\n    }, {\r\n        key: \"_renderToolbar\",\r\n        value: function() {\r\n            var _this = this;\r\n            var $toolbarWrapper = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_TOOLBAR_WRAPPER_CLASS).appendTo(this.$element());\r\n            var toolbarWidgetCommandNames = [];\r\n            if (this.option(\"propertiesPanel.enabled\") && this.option(\"propertiesPanel.collapsible\")) {\r\n                toolbarWidgetCommandNames.push(\"options\")\r\n            }\r\n            this._toolbarInstance = this._createComponent($toolbarWrapper, _uiDiagram2.default, {\r\n                commands: this.option(\"toolbar.commands\"),\r\n                onContentReady: function(e) {\r\n                    return _this._registerBar(e.component)\r\n                },\r\n                onPointerUp: this._onPanelPointerUp.bind(this),\r\n                \"export\": this.option(\"export\"),\r\n                widgetCommandNames: toolbarWidgetCommandNames\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_renderLeftPanel\",\r\n        value: function($parent) {\r\n            var _this2 = this;\r\n            var isServerSide = !(0, _window.hasWindow)();\r\n            var $leftPanel = (0, _renderer2.default)(\"<div>\").appendTo($parent);\r\n            this._leftPanel = this._createComponent($leftPanel, _uiDiagram4.default, {\r\n                toolboxGroups: this._getToolboxGroups(),\r\n                disabled: this.option(\"readOnly\"),\r\n                onShapeCategoryRendered: function(e) {\r\n                    if (isServerSide) {\r\n                        return\r\n                    }\r\n                    var $toolboxContainer = (0, _renderer2.default)(e.$element);\r\n                    _this2._diagramInstance.createToolbox($toolboxContainer[0], 40, 8, {\r\n                        \"data-toggle\": \"shape-toolbox-tooltip\"\r\n                    }, e.shapes || e.category, \"texts\" === e.displayMode);\r\n                    _this2._createTooltips($parent, $toolboxContainer.find('[data-toggle=\"shape-toolbox-tooltip\"]'))\r\n                },\r\n                onPointerUp: this._onPanelPointerUp.bind(this)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createTooltips\",\r\n        value: function($container, targets) {\r\n            var _this3 = this;\r\n            targets.each(function(index, element) {\r\n                var $target = (0, _renderer2.default)(element);\r\n                var $tooltip = (0, _renderer2.default)(\"<div>\").html($target.attr(\"title\")).appendTo($container);\r\n                _this3._createComponent($tooltip, _tooltip2.default, {\r\n                    target: $target.get(0),\r\n                    showEvent: \"mouseenter\",\r\n                    hideEvent: \"mouseleave\",\r\n                    position: \"top\",\r\n                    animation: {\r\n                        show: {\r\n                            type: \"fade\",\r\n                            from: 0,\r\n                            to: 1,\r\n                            delay: 500\r\n                        },\r\n                        hide: {\r\n                            type: \"fade\",\r\n                            from: 1,\r\n                            to: 0,\r\n                            delay: 100\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_invalidateContextMenuCommands\",\r\n        value: function() {\r\n            if (this._contextMenu) {\r\n                this._contextMenu.option({\r\n                    commands: this.option(\"contextMenu.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidatePropertiesPanelGroups\",\r\n        value: function() {\r\n            if (this._rightPanel) {\r\n                this._rightPanel.option({\r\n                    propertyGroups: this.option(\"propertiesPanel.groups\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateToolbarCommands\",\r\n        value: function() {\r\n            if (this._toolbarInstance) {\r\n                this._toolbarInstance.option({\r\n                    commands: this.option(\"toolbar.commands\")\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_invalidateToolboxGroups\",\r\n        value: function() {\r\n            if (this._leftPanel) {\r\n                this._leftPanel.option({\r\n                    toolboxGroups: this._getToolboxGroups()\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setLeftPanelEnabled\",\r\n        value: function(enabled) {\r\n            if (this._leftPanel) {\r\n                this._leftPanel.option({\r\n                    disabled: !enabled\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderRightPanel\",\r\n        value: function($parent) {\r\n            var _this4 = this;\r\n            var isCollapsible = this.option(\"propertiesPanel.collapsible\");\r\n            var drawer = this._createComponent($parent, _drawer2.default, {\r\n                closeOnOutsideClick: isCollapsible,\r\n                opened: !isCollapsible,\r\n                openedStateMode: isCollapsible ? \"overlap\" : \"shrink\",\r\n                position: \"right\",\r\n                template: function($options) {\r\n                    _this4._rightPanel = _this4._createComponent($options, _uiDiagram6.default, {\r\n                        propertyGroups: _this4.option(\"propertiesPanel.groups\"),\r\n                        onContentReady: function(e) {\r\n                            return _this4._registerBar(e.component)\r\n                        },\r\n                        onPointerUp: _this4._onPanelPointerUp.bind(_this4)\r\n                    })\r\n                }\r\n            });\r\n            if (this._toolbarInstance) {\r\n                this._toolbarInstance.option(\"onWidgetCommand\", function(e) {\r\n                    if (\"options\" === e.name) {\r\n                        drawer.toggle()\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onPanelPointerUp\",\r\n        value: function() {\r\n            this._diagramInstance.captureFocus()\r\n        }\r\n    }, {\r\n        key: \"_renderContextMenu\",\r\n        value: function($mainElement) {\r\n            var _this5 = this;\r\n            var $contextMenu = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n            this._contextMenu = this._createComponent($contextMenu, _uiDiagram8.default, {\r\n                commands: this.option(\"contextMenu.commands\"),\r\n                container: $mainElement,\r\n                onContentReady: function(_ref) {\r\n                    var component = _ref.component;\r\n                    return _this5._registerBar(component)\r\n                },\r\n                onVisibleChanged: function(_ref2) {\r\n                    var component = _ref2.component;\r\n                    return _this5._diagramInstance.barManager.updateBarItemsState(component.bar)\r\n                },\r\n                onItemClick: function(itemData) {\r\n                    return _this5._onBeforeCommandExecuted(itemData.command)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onBeforeCommandExecuted\",\r\n        value: function(command) {\r\n            var dialogParameters = _uiDiagram20.default.getDialogParameters(command);\r\n            if (dialogParameters) {\r\n                this._showDialog(dialogParameters)\r\n            }\r\n            return !!dialogParameters\r\n        }\r\n    }, {\r\n        key: \"_renderDialog\",\r\n        value: function($mainElement) {\r\n            var $dialogElement = (0, _renderer2.default)(\"<div>\").appendTo($mainElement);\r\n            this._dialogInstance = this._createComponent($dialogElement, _uiDiagram10.default, {})\r\n        }\r\n    }, {\r\n        key: \"_showDialog\",\r\n        value: function(dialogParameters) {\r\n            if (this._dialogInstance) {\r\n                this._dialogInstance.option(\"onGetContent\", dialogParameters.onGetContent);\r\n                this._dialogInstance.option(\"onHidden\", function() {\r\n                    this._diagramInstance.captureFocus()\r\n                }.bind(this));\r\n                this._dialogInstance.option(\"command\", this._diagramInstance.commandManager.getCommand(dialogParameters.command));\r\n                this._dialogInstance.option(\"title\", dialogParameters.title);\r\n                this._dialogInstance._show()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_showLoadingIndicator\",\r\n        value: function() {\r\n            this._loadingIndicator = (0, _renderer2.default)(\"<div>\").addClass(DIAGRAM_LOADING_INDICATOR_CLASS);\r\n            this._createComponent(this._loadingIndicator, _load_indicator2.default, {});\r\n            var $parent = this._content || this.$element();\r\n            $parent.append(this._loadingIndicator)\r\n        }\r\n    }, {\r\n        key: \"_hideLoadingIndicator\",\r\n        value: function() {\r\n            if (!this._loadingIndicator) {\r\n                return\r\n            }\r\n            this._loadingIndicator.remove();\r\n            this._loadingIndicator = null\r\n        }\r\n    }, {\r\n        key: \"_initDiagram\",\r\n        value: function() {\r\n            var _getDiagram = (0, _diagram_importer.getDiagram)(),\r\n                DiagramControl = _getDiagram.DiagramControl;\r\n            this._diagramInstance = new DiagramControl;\r\n            this._diagramInstance.onChanged = this._raiseDataChangeAction.bind(this);\r\n            this._diagramInstance.onEdgeInserted = this._raiseEdgeInsertedAction.bind(this);\r\n            this._diagramInstance.onEdgeUpdated = this._raiseEdgeUpdatedAction.bind(this);\r\n            this._diagramInstance.onEdgeRemoved = this._raiseEdgeRemovedAction.bind(this);\r\n            this._diagramInstance.onNodeInserted = this._raiseNodeInsertedAction.bind(this);\r\n            this._diagramInstance.onNodeUpdated = this._raiseNodeUpdatedAction.bind(this);\r\n            this._diagramInstance.onNodeRemoved = this._raiseNodeRemovedAction.bind(this);\r\n            this._diagramInstance.onToolboxDragStart = this._raiseToolboxDragStart.bind(this);\r\n            this._diagramInstance.onToolboxDragEnd = this._raiseToolboxDragEnd.bind(this);\r\n            this._diagramInstance.onToggleFullscreen = this._onToggleFullScreen.bind(this);\r\n            this._diagramInstance.onShowContextMenu = this._onShowContextMenu.bind(this);\r\n            this._diagramInstance.onHideContextMenu = this._onHideContextMenu.bind(this);\r\n            this._diagramInstance.onNativeAction.add({\r\n                notifyItemClick: this._raiseItemClickAction.bind(this),\r\n                notifyItemDblClick: this._raiseItemDblClickAction.bind(this),\r\n                notifySelectionChanged: this._raiseSelectionChanged.bind(this)\r\n            });\r\n            this._updateUnitItems();\r\n            this._updateFormatUnitsMethod();\r\n            if (this.option(\"units\") !== DIAGRAM_DEFAULT_UNIT) {\r\n                this._updateUnitsState()\r\n            }\r\n            if (this.option(\"pageSize\")) {\r\n                if (this.option(\"pageSize.items\")) {\r\n                    this._updatePageSizeItemsState()\r\n                }\r\n                if (this.option(\"pageSize.width\") && this.option(\"pageSize.height\")) {\r\n                    this._updatePageSizeState()\r\n                }\r\n            }\r\n            if (this.option(\"pageOrientation\") !== DIAGRAM_DEFAULT_PAGE_ORIENTATION) {\r\n                this._updatePageOrientationState()\r\n            }\r\n            if (this.option(\"pageColor\") !== DIAGRAM_DEFAULT_PAGE_COLOR) {\r\n                this._updatePageColorState()\r\n            }\r\n            if (this.option(\"viewUnits\") !== DIAGRAM_DEFAULT_UNIT) {\r\n                this._updateViewUnitsState()\r\n            }\r\n            if (!this.option(\"showGrid\")) {\r\n                this._updateShowGridState()\r\n            }\r\n            if (!this.option(\"snapToGrid\")) {\r\n                this._updateSnapToGridState()\r\n            }\r\n            if (this.option(\"gridSize\")) {\r\n                if (this.option(\"gridSize.items\")) {\r\n                    this._updateGridSizeItemsState()\r\n                }\r\n                this._updateGridSizeState()\r\n            }\r\n            if (this.option(\"zoomLevel.items\")) {\r\n                this._updateZoomLevelItemsState()\r\n            }\r\n            this._updateCustomShapes(this._getCustomShapes());\r\n            this._refreshDataSources()\r\n        }\r\n    }, {\r\n        key: \"_dispose\",\r\n        value: function() {\r\n            if (this._diagramInstance) {\r\n                this._diagramInstance.dispose();\r\n                this._diagramInstance = void 0\r\n            }\r\n            _get(_getPrototypeOf(Diagram.prototype), \"_dispose\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_executeDiagramCommand\",\r\n        value: function(command, parameter) {\r\n            this._diagramInstance.commandManager.getCommand(command).execute(parameter)\r\n        }\r\n    }, {\r\n        key: \"_refreshDataSources\",\r\n        value: function() {\r\n            this._beginUpdateDiagram();\r\n            this._refreshNodesDataSource();\r\n            this._refreshEdgesDataSource();\r\n            this._endUpdateDiagram()\r\n        }\r\n    }, {\r\n        key: \"_refreshNodesDataSource\",\r\n        value: function() {\r\n            if (this._nodesOption) {\r\n                this._nodesOption._disposeDataSource();\r\n                delete this._nodesOption\r\n            }\r\n            if (this.option(\"nodes.dataSource\")) {\r\n                this._nodesOption = new _uiDiagram16.default(this);\r\n                this._nodesOption.option(\"dataSource\", this.option(\"nodes.dataSource\"));\r\n                this._nodesOption._refreshDataSource()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_refreshEdgesDataSource\",\r\n        value: function() {\r\n            if (this._edgesOption) {\r\n                this._edgesOption._disposeDataSource();\r\n                delete this._edgesOption\r\n            }\r\n            if (this.option(\"edges.dataSource\")) {\r\n                this._edgesOption = new _uiDiagram18.default(this);\r\n                this._edgesOption.option(\"dataSource\", this.option(\"edges.dataSource\"));\r\n                this._edgesOption._refreshDataSource()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDiagramData\",\r\n        value: function() {\r\n            var value;\r\n            var _getDiagram2 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram2.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Export, function(data) {\r\n                value = data\r\n            });\r\n            return value\r\n        }\r\n    }, {\r\n        key: \"_setDiagramData\",\r\n        value: function(data, keepExistingItems) {\r\n            var _getDiagram3 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram3.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Import, {\r\n                data: data,\r\n                keepExistingItems: keepExistingItems\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onDataSourceChanged\",\r\n        value: function() {\r\n            this._bindDiagramData()\r\n        }\r\n    }, {\r\n        key: \"_createOptionGetter\",\r\n        value: function(optionName) {\r\n            var expr = this.option(optionName);\r\n            return expr && _data2.default.compileGetter(expr)\r\n        }\r\n    }, {\r\n        key: \"_createOptionSetter\",\r\n        value: function(optionName) {\r\n            var expr = this.option(optionName);\r\n            if (_type2.default.isFunction(expr)) {\r\n                return expr\r\n            }\r\n            return expr && _data2.default.compileSetter(expr)\r\n        }\r\n    }, {\r\n        key: \"_bindDiagramData\",\r\n        value: function() {\r\n            if (this._updateDiagramLockCount || !this._isBindingMode()) {\r\n                return\r\n            }\r\n            var _getDiagram4 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram4.DiagramCommand,\r\n                ConnectorLineOption = _getDiagram4.ConnectorLineOption,\r\n                ConnectorLineEnding = _getDiagram4.ConnectorLineEnding;\r\n            var lineOptionGetter;\r\n            var lineOptionSetter;\r\n            var startLineEndingGetter;\r\n            var startLineEndingSetter;\r\n            var endLineEndingGetter;\r\n            var endLineEndingSetter;\r\n            var data = {\r\n                nodeDataSource: this._nodesOption && this._nodesOption.getItems(),\r\n                edgeDataSource: this._edgesOption && this._edgesOption.getItems(),\r\n                nodeDataImporter: {\r\n                    getKey: this._createOptionGetter(\"nodes.keyExpr\"),\r\n                    setKey: this._createOptionSetter(\"nodes.keyExpr\"),\r\n                    getLocked: this._createOptionGetter(\"nodes.lockedExpr\"),\r\n                    setLocked: this._createOptionSetter(\"nodes.lockedExpr\"),\r\n                    getStyle: this._createOptionGetter(\"nodes.styleExpr\"),\r\n                    setStyle: this._createOptionSetter(\"nodes.styleExpr\"),\r\n                    getStyleText: this._createOptionGetter(\"nodes.textStyleExpr\"),\r\n                    setStyleText: this._createOptionSetter(\"nodes.textStyleExpr\"),\r\n                    getZIndex: this._createOptionGetter(\"nodes.zIndexExpr\"),\r\n                    setZIndex: this._createOptionSetter(\"nodes.zIndexExpr\"),\r\n                    getType: this._createOptionGetter(\"nodes.typeExpr\"),\r\n                    setType: this._createOptionSetter(\"nodes.typeExpr\"),\r\n                    getText: this._createOptionGetter(\"nodes.textExpr\"),\r\n                    setText: this._createOptionSetter(\"nodes.textExpr\"),\r\n                    getImage: this._createOptionGetter(\"nodes.imageUrlExpr\"),\r\n                    setImage: this._createOptionSetter(\"nodes.imageUrlExpr\"),\r\n                    getLeft: this._createOptionGetter(\"nodes.leftExpr\"),\r\n                    setLeft: this._createOptionSetter(\"nodes.leftExpr\"),\r\n                    getTop: this._createOptionGetter(\"nodes.topExpr\"),\r\n                    setTop: this._createOptionSetter(\"nodes.topExpr\"),\r\n                    getWidth: this._createOptionGetter(\"nodes.widthExpr\"),\r\n                    setWidth: this._createOptionSetter(\"nodes.widthExpr\"),\r\n                    getHeight: this._createOptionGetter(\"nodes.heightExpr\"),\r\n                    setHeight: this._createOptionSetter(\"nodes.heightExpr\"),\r\n                    getParentKey: this._createOptionGetter(\"nodes.parentKeyExpr\"),\r\n                    setParentKey: this._createOptionSetter(\"nodes.parentKeyExpr\"),\r\n                    getItems: this._createOptionGetter(\"nodes.itemsExpr\"),\r\n                    setItems: this._createOptionSetter(\"nodes.itemsExpr\"),\r\n                    getContainerKey: this._createOptionGetter(\"nodes.containerKeyExpr\"),\r\n                    setContainerKey: this._createOptionSetter(\"nodes.containerKeyExpr\"),\r\n                    getChildren: this._createOptionGetter(\"nodes.childrenExpr\"),\r\n                    setChildren: this._createOptionSetter(\"nodes.childrenExpr\")\r\n                },\r\n                edgeDataImporter: {\r\n                    getKey: this._createOptionGetter(\"edges.keyExpr\"),\r\n                    setKey: this._createOptionSetter(\"edges.keyExpr\"),\r\n                    getLocked: this._createOptionGetter(\"edges.lockedExpr\"),\r\n                    setLocked: this._createOptionSetter(\"edges.lockedExpr\"),\r\n                    getStyle: this._createOptionGetter(\"edges.styleExpr\"),\r\n                    setStyle: this._createOptionSetter(\"edges.styleExpr\"),\r\n                    getStyleText: this._createOptionGetter(\"edges.textStyleExpr\"),\r\n                    setStyleText: this._createOptionSetter(\"edges.textStyleExpr\"),\r\n                    getZIndex: this._createOptionGetter(\"edges.zIndexExpr\"),\r\n                    setZIndex: this._createOptionSetter(\"edges.zIndexExpr\"),\r\n                    getFrom: this._createOptionGetter(\"edges.fromExpr\"),\r\n                    setFrom: this._createOptionSetter(\"edges.fromExpr\"),\r\n                    getFromPointIndex: this._createOptionGetter(\"edges.fromPointIndexExpr\"),\r\n                    setFromPointIndex: this._createOptionSetter(\"edges.fromPointIndexExpr\"),\r\n                    getTo: this._createOptionGetter(\"edges.toExpr\"),\r\n                    setTo: this._createOptionSetter(\"edges.toExpr\"),\r\n                    getToPointIndex: this._createOptionGetter(\"edges.toPointIndexExpr\"),\r\n                    setToPointIndex: this._createOptionSetter(\"edges.toPointIndexExpr\"),\r\n                    getPoints: this._createOptionGetter(\"edges.pointsExpr\"),\r\n                    setPoints: this._createOptionSetter(\"edges.pointsExpr\"),\r\n                    getText: this._createOptionGetter(\"edges.textExpr\"),\r\n                    setText: this._createOptionSetter(\"edges.textExpr\"),\r\n                    getLineOption: (lineOptionGetter = this._createOptionGetter(\"edges.lineTypeExpr\")) && function(obj) {\r\n                        var lineType = lineOptionGetter(obj);\r\n                        switch (lineType) {\r\n                            case \"straight\":\r\n                                return ConnectorLineOption.Straight;\r\n                            default:\r\n                                return ConnectorLineOption.Orthogonal\r\n                        }\r\n                    }.bind(this),\r\n                    setLineOption: (lineOptionSetter = this._createOptionSetter(\"edges.lineTypeExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineOption.Straight:\r\n                                value = \"straight\";\r\n                                break;\r\n                            case ConnectorLineOption.Orthogonal:\r\n                                value = \"orthogonal\"\r\n                        }\r\n                        lineOptionSetter(obj, value)\r\n                    }.bind(this),\r\n                    getStartLineEnding: (startLineEndingGetter = this._createOptionGetter(\"edges.fromLineEndExpr\")) && function(obj) {\r\n                        var lineType = startLineEndingGetter(obj);\r\n                        switch (lineType) {\r\n                            case \"arrow\":\r\n                                return ConnectorLineEnding.Arrow;\r\n                            default:\r\n                                return ConnectorLineEnding.None\r\n                        }\r\n                    }.bind(this),\r\n                    setStartLineEnding: (startLineEndingSetter = this._createOptionSetter(\"edges.fromLineEndExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineEnding.Arrow:\r\n                                value = \"arrow\";\r\n                                break;\r\n                            case ConnectorLineEnding.None:\r\n                                value = \"none\"\r\n                        }\r\n                        startLineEndingSetter(obj, value)\r\n                    }.bind(this),\r\n                    getEndLineEnding: (endLineEndingGetter = this._createOptionGetter(\"edges.toLineEndExpr\")) && function(obj) {\r\n                        var lineType = endLineEndingGetter(obj);\r\n                        switch (lineType) {\r\n                            case \"none\":\r\n                                return ConnectorLineEnding.None;\r\n                            default:\r\n                                return ConnectorLineEnding.Arrow\r\n                        }\r\n                    }.bind(this),\r\n                    setEndLineEnding: (endLineEndingSetter = this._createOptionSetter(\"edges.toLineEndExpr\")) && function(obj, value) {\r\n                        switch (value) {\r\n                            case ConnectorLineEnding.Arrow:\r\n                                value = \"arrow\";\r\n                                break;\r\n                            case ConnectorLineEnding.None:\r\n                                value = \"none\"\r\n                        }\r\n                        endLineEndingSetter(obj, value)\r\n                    }.bind(this)\r\n                },\r\n                layoutParameters: this._getDataBindingLayoutParameters()\r\n            };\r\n            this._executeDiagramCommand(DiagramCommand.BindDocument, data)\r\n        }\r\n    }, {\r\n        key: \"_getDataBindingLayoutParameters\",\r\n        value: function() {\r\n            var _getDiagram5 = (0, _diagram_importer.getDiagram)(),\r\n                DataLayoutType = _getDiagram5.DataLayoutType,\r\n                DataLayoutOrientation = _getDiagram5.DataLayoutOrientation;\r\n            var layoutParametersOption = this.option(\"nodes.autoLayout\");\r\n            if (!layoutParametersOption || \"off\" === layoutParametersOption || \"off\" === layoutParametersOption.type) {\r\n                return\r\n            }\r\n            var parameters = {};\r\n            var layoutType = layoutParametersOption.type || layoutParametersOption;\r\n            if (\"tree\" === layoutType) {\r\n                parameters.type = DataLayoutType.Tree\r\n            } else {\r\n                if (\"layered\" === layoutType) {\r\n                    parameters.type = DataLayoutType.Sugiyama\r\n                }\r\n            }\r\n            if (\"vertical\" === layoutParametersOption.orientation) {\r\n                parameters.orientation = DataLayoutOrientation.Vertical\r\n            } else {\r\n                if (\"horizontal\" === layoutParametersOption.orientation) {\r\n                    parameters.orientation = DataLayoutOrientation.Horizontal\r\n                }\r\n            }\r\n            return parameters\r\n        }\r\n    }, {\r\n        key: \"_getAutoZoomValue\",\r\n        value: function(option) {\r\n            var _getDiagram6 = (0, _diagram_importer.getDiagram)(),\r\n                AutoZoomMode = _getDiagram6.AutoZoomMode;\r\n            switch (option) {\r\n                case \"fitContent\":\r\n                    return AutoZoomMode.FitContent;\r\n                case \"fitWidth\":\r\n                    return AutoZoomMode.FitToWidth;\r\n                default:\r\n                    return AutoZoomMode.Disabled\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isBindingMode\",\r\n        value: function() {\r\n            return this._nodesOption && this._nodesOption.hasItems() || this._edgesOption && this._nodesOption.hasItems()\r\n        }\r\n    }, {\r\n        key: \"_beginUpdateDiagram\",\r\n        value: function() {\r\n            this._updateDiagramLockCount++\r\n        }\r\n    }, {\r\n        key: \"_endUpdateDiagram\",\r\n        value: function() {\r\n            this._updateDiagramLockCount = Math.max(this._updateDiagramLockCount - 1, 0);\r\n            if (!this._updateDiagramLockCount) {\r\n                this._bindDiagramData()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getCustomShapes\",\r\n        value: function() {\r\n            return this.option(\"customShapes\") || []\r\n        }\r\n    }, {\r\n        key: \"_getToolboxGroups\",\r\n        value: function() {\r\n            return _uiDiagram12.default.getGroups(this.option(\"toolbox.groups\"))\r\n        }\r\n    }, {\r\n        key: \"_updateCustomShapes\",\r\n        value: function(customShapes, prevCustomShapes) {\r\n            if (Array.isArray(prevCustomShapes)) {\r\n                this._diagramInstance.removeCustomShapes(prevCustomShapes.map(function(s) {\r\n                    return s.type\r\n                }))\r\n            }\r\n            if (Array.isArray(customShapes)) {\r\n                this._diagramInstance.addCustomShapes(customShapes.map(function(s) {\r\n                    return {\r\n                        category: s.category,\r\n                        type: s.type,\r\n                        baseType: s.baseType,\r\n                        title: s.title,\r\n                        svgUrl: s.backgroundImageUrl,\r\n                        svgLeft: s.backgroundImageLeft,\r\n                        svgTop: s.backgroundImageTop,\r\n                        svgWidth: s.backgroundImageWidth,\r\n                        svgHeight: s.backgroundImageHeight,\r\n                        defaultWidth: s.defaultWidth,\r\n                        defaultHeight: s.defaultHeight,\r\n                        defaultText: s.defaultText,\r\n                        allowEditText: s.allowEditText,\r\n                        textLeft: s.textLeft,\r\n                        textTop: s.textTop,\r\n                        textWidth: s.textWidth,\r\n                        textHeight: s.textHeight,\r\n                        defaultImageUrl: s.defaultImageUrl,\r\n                        allowEditImage: s.allowEditImage,\r\n                        imageLeft: s.imageLeft,\r\n                        imageTop: s.imageTop,\r\n                        imageWidth: s.imageWidth,\r\n                        imageHeight: s.imageHeight,\r\n                        connectionPoints: s.connectionPoints && s.connectionPoints.map(function(pt) {\r\n                            return {\r\n                                x: pt.x,\r\n                                y: pt.y\r\n                            }\r\n                        })\r\n                    }\r\n                }))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onToggleFullScreen\",\r\n        value: function(fullScreen) {\r\n            this._changeNativeFullscreen(fullScreen);\r\n            this.$element().toggleClass(DIAGRAM_FULLSCREEN_CLASS, fullScreen);\r\n            this._diagramInstance.updateLayout()\r\n        }\r\n    }, {\r\n        key: \"_changeNativeFullscreen\",\r\n        value: function(setModeOn) {\r\n            var window = (0, _window.getWindow)();\r\n            if (window.self === window.top || setModeOn === this._inNativeFullscreen()) {\r\n                return\r\n            }\r\n            if (setModeOn) {\r\n                this._subscribeFullscreenNativeChanged()\r\n            } else {\r\n                this._unsubscribeFullscreenNativeChanged()\r\n            }\r\n            this._setNativeFullscreen(setModeOn)\r\n        }\r\n    }, {\r\n        key: \"_setNativeFullscreen\",\r\n        value: function(on) {\r\n            var window = (0, _window.getWindow)();\r\n            var document = window.self.document;\r\n            var body = window.self.document.body;\r\n            if (on) {\r\n                if (body.requestFullscreen) {\r\n                    body.requestFullscreen()\r\n                } else {\r\n                    if (body.mozRequestFullscreen) {\r\n                        body.mozRequestFullscreen()\r\n                    } else {\r\n                        if (body.webkitRequestFullscreen) {\r\n                            body.webkitRequestFullscreen()\r\n                        } else {\r\n                            if (body.msRequestFullscreen) {\r\n                                body.msRequestFullscreen()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (document.exitFullscreen) {\r\n                    document.exitFullscreen()\r\n                } else {\r\n                    if (document.mozCancelFullscreen) {\r\n                        document.mozCancelFullscreen()\r\n                    } else {\r\n                        if (document.webkitExitFullscreen) {\r\n                            document.webkitExitFullscreen()\r\n                        } else {\r\n                            if (document.msExitFullscreen) {\r\n                                document.msExitFullscreen()\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_inNativeFullscreen\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            var fullscreenElement = document.fullscreenElement || document.msFullscreenElement || document.webkitFullscreenElement;\r\n            var isInFullscreen = fullscreenElement === document.body || document.webkitIsFullscreen;\r\n            return !!isInFullscreen\r\n        }\r\n    }, {\r\n        key: \"_subscribeFullscreenNativeChanged\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            var handler = this._onNativeFullscreenChangeHandler.bind(this);\r\n            _events_engine2.default.on(document, FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine2.default.on(document, IE_FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine2.default.on(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME, handler);\r\n            _events_engine2.default.on(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME, handler)\r\n        }\r\n    }, {\r\n        key: \"_unsubscribeFullscreenNativeChanged\",\r\n        value: function() {\r\n            var document = (0, _window.getWindow)().document;\r\n            _events_engine2.default.off(document, FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine2.default.off(document, IE_FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine2.default.off(document, WEBKIT_FULLSCREEN_CHANGE_EVENT_NAME);\r\n            _events_engine2.default.off(document, MOZ_FULLSCREEN_CHANGE_EVENT_NAME)\r\n        }\r\n    }, {\r\n        key: \"_onNativeFullscreenChangeHandler\",\r\n        value: function() {\r\n            if (!this._inNativeFullscreen()) {\r\n                this._unsubscribeFullscreenNativeChanged();\r\n                this._onToggleFullScreen(false)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onShowContextMenu\",\r\n        value: function(x, y, selection) {\r\n            this._contextMenu._show(x, y, selection)\r\n        }\r\n    }, {\r\n        key: \"_onHideContextMenu\",\r\n        value: function() {\r\n            this._contextMenu._hide()\r\n        }\r\n    }, {\r\n        key: \"_getDiagramUnitValue\",\r\n        value: function(value) {\r\n            var _getDiagram7 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramUnit = _getDiagram7.DiagramUnit;\r\n            switch (value) {\r\n                case \"in\":\r\n                    return DiagramUnit.In;\r\n                case \"cm\":\r\n                    return DiagramUnit.Cm;\r\n                case \"px\":\r\n                    return DiagramUnit.Px;\r\n                default:\r\n                    return DiagramUnit.In\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateReadOnlyState\",\r\n        value: function() {\r\n            var _getDiagram8 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram8.DiagramCommand;\r\n            var readOnly = this.option(\"readOnly\") || this.option(\"disabled\");\r\n            this._executeDiagramCommand(DiagramCommand.ToggleReadOnly, readOnly);\r\n            this._setLeftPanelEnabled(!readOnly)\r\n        }\r\n    }, {\r\n        key: \"_updateZoomLevelState\",\r\n        value: function() {\r\n            var zoomLevel = this.option(\"zoomLevel.value\");\r\n            if (!zoomLevel) {\r\n                zoomLevel = this.option(\"zoomLevel\")\r\n            }\r\n            var _getDiagram9 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram9.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ZoomLevel, zoomLevel)\r\n        }\r\n    }, {\r\n        key: \"_updateZoomLevelItemsState\",\r\n        value: function() {\r\n            var zoomLevelItems = this.option(\"zoomLevel.items\");\r\n            if (!Array.isArray(zoomLevelItems)) {\r\n                return\r\n            }\r\n            var _getDiagram10 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram10.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ZoomLevelItems, zoomLevelItems)\r\n        }\r\n    }, {\r\n        key: \"_updateAutoZoomState\",\r\n        value: function() {\r\n            var _getDiagram11 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram11.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.SwitchAutoZoom, this._getAutoZoomValue(this.option(\"autoZoom\")))\r\n        }\r\n    }, {\r\n        key: \"_updateSimpleViewState\",\r\n        value: function() {\r\n            var _getDiagram12 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram12.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ToggleSimpleView, this.option(\"simpleView\"))\r\n        }\r\n    }, {\r\n        key: \"_updateFullscreenState\",\r\n        value: function() {\r\n            var _getDiagram13 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram13.DiagramCommand;\r\n            var fullScreen = this.option(\"fullScreen\");\r\n            this._executeDiagramCommand(DiagramCommand.Fullscreen, fullScreen);\r\n            this._onToggleFullScreen(fullScreen)\r\n        }\r\n    }, {\r\n        key: \"_updateShowGridState\",\r\n        value: function() {\r\n            var _getDiagram14 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram14.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ShowGrid, this.option(\"showGrid\"))\r\n        }\r\n    }, {\r\n        key: \"_updateSnapToGridState\",\r\n        value: function() {\r\n            var _getDiagram15 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram15.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.SnapToGrid, this.option(\"snapToGrid\"))\r\n        }\r\n    }, {\r\n        key: \"_updateGridSizeState\",\r\n        value: function() {\r\n            var gridSize = this.option(\"gridSize.value\");\r\n            if (!gridSize) {\r\n                gridSize = this.option(\"gridSize\")\r\n            }\r\n            var _getDiagram16 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram16.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.GridSize, gridSize)\r\n        }\r\n    }, {\r\n        key: \"_updateGridSizeItemsState\",\r\n        value: function() {\r\n            var gridSizeItems = this.option(\"gridSize.items\");\r\n            if (!Array.isArray(gridSizeItems)) {\r\n                return\r\n            }\r\n            var _getDiagram17 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram17.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.GridSizeItems, gridSizeItems)\r\n        }\r\n    }, {\r\n        key: \"_updateUnitItems\",\r\n        value: function() {\r\n            var _getDiagram18 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramUnit = _getDiagram18.DiagramUnit;\r\n            var items = {};\r\n            items[DiagramUnit.In] = _message2.default.format(\"dxDiagram-unitIn\");\r\n            items[DiagramUnit.Cm] = _message2.default.format(\"dxDiagram-unitCm\");\r\n            items[DiagramUnit.Px] = _message2.default.format(\"dxDiagram-unitPx\");\r\n            this._diagramInstance.settings.unitItems = items\r\n        }\r\n    }, {\r\n        key: \"_updateFormatUnitsMethod\",\r\n        value: function() {\r\n            this._diagramInstance.settings.formatUnit = function(value) {\r\n                return _number2.default.format(value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateViewUnitsState\",\r\n        value: function() {\r\n            var _getDiagram19 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram19.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.ViewUnits, this._getDiagramUnitValue(this.option(\"viewUnits\")))\r\n        }\r\n    }, {\r\n        key: \"_updateUnitsState\",\r\n        value: function() {\r\n            var _getDiagram20 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram20.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.Units, this._getDiagramUnitValue(this.option(\"units\")))\r\n        }\r\n    }, {\r\n        key: \"_updatePageSizeState\",\r\n        value: function() {\r\n            var pageSize = this.option(\"pageSize\");\r\n            if (!pageSize || !pageSize.width || !pageSize.height) {\r\n                return\r\n            }\r\n            var _getDiagram21 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram21.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageSize, pageSize)\r\n        }\r\n    }, {\r\n        key: \"_updatePageSizeItemsState\",\r\n        value: function() {\r\n            var pageSizeItems = this.option(\"pageSize.items\");\r\n            if (!Array.isArray(pageSizeItems)) {\r\n                return\r\n            }\r\n            var _getDiagram22 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram22.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageSizeItems, pageSizeItems)\r\n        }\r\n    }, {\r\n        key: \"_updatePageOrientationState\",\r\n        value: function() {\r\n            var _getDiagram23 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram23.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageLandscape, \"landscape\" === this.option(\"pageOrientation\"))\r\n        }\r\n    }, {\r\n        key: \"_updatePageColorState\",\r\n        value: function() {\r\n            var _getDiagram24 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram24.DiagramCommand;\r\n            this._executeDiagramCommand(DiagramCommand.PageColor, this.option(\"pageColor\"))\r\n        }\r\n    }, {\r\n        key: \"export\",\r\n        value: function() {\r\n            return this._getDiagramData()\r\n        }\r\n    }, {\r\n        key: \"exportTo\",\r\n        value: function(format, callback) {\r\n            var command = this._getDiagramExportToCommand(format);\r\n            this._executeDiagramCommand(command, callback)\r\n        }\r\n    }, {\r\n        key: \"_getDiagramExportToCommand\",\r\n        value: function(format) {\r\n            var _getDiagram25 = (0, _diagram_importer.getDiagram)(),\r\n                DiagramCommand = _getDiagram25.DiagramCommand;\r\n            switch (format) {\r\n                case \"png\":\r\n                    return DiagramCommand.ExportPng;\r\n                case \"jpg\":\r\n                    return DiagramCommand.ExportJpg;\r\n                default:\r\n                    return DiagramCommand.ExportSvg\r\n            }\r\n        }\r\n    }, {\r\n        key: \"import\",\r\n        value: function(data, updateExistingItemsOnly) {\r\n            this._setDiagramData(data, updateExistingItemsOnly);\r\n            this._raiseDataChangeAction()\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(Diagram.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                readOnly: false,\r\n                zoomLevel: DIAGRAM_DEFAULT_ZOOMLEVEL,\r\n                simpleView: false,\r\n                autoZoom: DIAGRAM_DEFAULT_AUTOZOOM,\r\n                fullScreen: false,\r\n                showGrid: true,\r\n                snapToGrid: true,\r\n                units: DIAGRAM_DEFAULT_UNIT,\r\n                viewUnits: DIAGRAM_DEFAULT_UNIT,\r\n                pageOrientation: DIAGRAM_DEFAULT_PAGE_ORIENTATION,\r\n                pageColor: DIAGRAM_DEFAULT_PAGE_COLOR,\r\n                onDataChanged: null,\r\n                nodes: {\r\n                    dataSource: null,\r\n                    keyExpr: \"id\",\r\n                    lockedExpr: void 0,\r\n                    styleExpr: void 0,\r\n                    textStyleExpr: void 0,\r\n                    zIndexExpr: void 0,\r\n                    typeExpr: \"type\",\r\n                    textExpr: \"text\",\r\n                    imageUrlExpr: void 0,\r\n                    parentKeyExpr: void 0,\r\n                    itemsExpr: void 0,\r\n                    leftExpr: void 0,\r\n                    topExpr: void 0,\r\n                    widthExpr: void 0,\r\n                    heightExpr: void 0,\r\n                    containerKeyExpr: void 0,\r\n                    childrenExpr: \"children\",\r\n                    autoLayout: \"tree\"\r\n                },\r\n                edges: {\r\n                    dataSource: null,\r\n                    keyExpr: \"id\",\r\n                    lockedExpr: void 0,\r\n                    styleExpr: void 0,\r\n                    textStyleExpr: void 0,\r\n                    zIndexExpr: void 0,\r\n                    fromExpr: \"from\",\r\n                    fromPointIndexExpr: void 0,\r\n                    toExpr: \"to\",\r\n                    toPointIndexExpr: void 0,\r\n                    pointsExpr: void 0,\r\n                    textExpr: void 0,\r\n                    lineTypeExpr: void 0,\r\n                    fromLineEndExpr: void 0,\r\n                    toLineEndExpr: void 0\r\n                },\r\n                customShapes: [],\r\n                toolbox: {\r\n                    visible: true\r\n                },\r\n                toolbar: {\r\n                    visible: true\r\n                },\r\n                contextMenu: {\r\n                    enabled: true\r\n                },\r\n                propertiesPanel: {\r\n                    enabled: true,\r\n                    collapsible: true\r\n                },\r\n                \"export\": {\r\n                    fileName: \"Diagram\",\r\n                    proxyUrl: void 0\r\n                },\r\n                onItemClick: null,\r\n                onItemDblClick: null,\r\n                onSelectionChanged: null\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createDataChangeAction\",\r\n        value: function() {\r\n            this._dataChangeAction = this._createActionByOption(\"onDataChanged\")\r\n        }\r\n    }, {\r\n        key: \"_raiseDataChangeAction\",\r\n        value: function() {\r\n            if (!this._dataChangeAction) {\r\n                this._createDataChangeAction()\r\n            }\r\n            this._dataChangeAction()\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeInsertedAction\",\r\n        value: function(data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.insert(data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeUpdatedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.update(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseEdgeRemovedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._edgesOption) {\r\n                this._edgesOption.remove(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeInsertedAction\",\r\n        value: function(data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.insert(data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeUpdatedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.update(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseNodeRemovedAction\",\r\n        value: function(key, data, callback, errorCallback) {\r\n            if (this._nodesOption) {\r\n                this._nodesOption.remove(key, data, callback, errorCallback)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseToolboxDragStart\",\r\n        value: function() {\r\n            if (this._leftPanel) {\r\n                this._leftPanel.$element().addClass(\"dx-skip-gesture-event\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_raiseToolboxDragEnd\",\r\n        value: function() {\r\n            if (this._leftPanel) {\r\n                this._leftPanel.$element().removeClass(\"dx-skip-gesture-event\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemClickAction\",\r\n        value: function() {\r\n            this._itemClickAction = this._createActionByOption(\"onItemClick\")\r\n        }\r\n    }, {\r\n        key: \"_createItemDblClickAction\",\r\n        value: function() {\r\n            this._itemDblClickAction = this._createActionByOption(\"onItemDblClick\")\r\n        }\r\n    }, {\r\n        key: \"_createSelectionChangedAction\",\r\n        value: function() {\r\n            this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n        }\r\n    }, {\r\n        key: \"_raiseItemClickAction\",\r\n        value: function(nativeItem) {\r\n            if (!this._itemClickAction) {\r\n                this._createItemClickAction()\r\n            }\r\n            this._itemClickAction({\r\n                item: this._nativeItemToDiagramItem(nativeItem)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseItemDblClickAction\",\r\n        value: function(nativeItem) {\r\n            if (!this._itemDblClickAction) {\r\n                this._createItemDblClickAction()\r\n            }\r\n            this._itemDblClickAction({\r\n                item: this._nativeItemToDiagramItem(nativeItem)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_raiseSelectionChanged\",\r\n        value: function(nativeItems) {\r\n            if (!this._selectionChangedAction) {\r\n                this._createSelectionChangedAction()\r\n            }\r\n            this._selectionChangedAction({\r\n                items: nativeItems.map(this._nativeItemToDiagramItem.bind(this))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_nativeItemToDiagramItem\",\r\n        value: function(nativeItem) {\r\n            var _getDiagram26 = (0, _diagram_importer.getDiagram)(),\r\n                NativeShape = _getDiagram26.NativeShape;\r\n            var createMethod = nativeItem instanceof NativeShape ? this._nativeShapeToDiagramShape.bind(this) : this._nativeConnectorToDiagramConnector.bind(this);\r\n            return (0, _extend.extend)({\r\n                id: nativeItem.id\r\n            }, createMethod(nativeItem))\r\n        }\r\n    }, {\r\n        key: \"_nativeShapeToDiagramShape\",\r\n        value: function(nativeShape) {\r\n            return {\r\n                dataItem: this._nodesOption && this._nodesOption.findItem(nativeShape.key),\r\n                itemType: \"shape\",\r\n                text: nativeShape.text,\r\n                type: nativeShape.type\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_nativeConnectorToDiagramConnector\",\r\n        value: function(nativeConnector) {\r\n            return {\r\n                dataItem: this._edgesOption && this._edgesOption.findItem(nativeConnector.key),\r\n                itemType: \"connector\",\r\n                texts: nativeConnector.texts,\r\n                fromKey: nativeConnector.fromKey,\r\n                toKey: nativeConnector.toKey\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            if (this.optionsUpdateBar.isUpdateLocked()) {\r\n                return\r\n            }\r\n            this.optionsUpdateBar.beginUpdate();\r\n            try {\r\n                this._optionChangedCore(args)\r\n            } finally {\r\n                this.optionsUpdateBar.endUpdate()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_optionChangedCore\",\r\n        value: function(args) {\r\n            switch (args.name) {\r\n                case \"readOnly\":\r\n                case \"disabled\":\r\n                    this._updateReadOnlyState();\r\n                    break;\r\n                case \"zoomLevel\":\r\n                    if (\"zoomLevel\" === args.fullName || \"zoomLevel.items\" === args.fullName) {\r\n                        this._updateZoomLevelItemsState()\r\n                    }\r\n                    if (\"zoomLevel\" === args.fullName || \"zoomLevel.value\" === args.fullName) {\r\n                        this._updateZoomLevelState()\r\n                    }\r\n                    break;\r\n                case \"autoZoom\":\r\n                    this._updateAutoZoomState();\r\n                    break;\r\n                case \"simpleView\":\r\n                    this._updateSimpleViewState();\r\n                    break;\r\n                case \"fullScreen\":\r\n                    this._updateFullscreenState();\r\n                    break;\r\n                case \"showGrid\":\r\n                    this._updateShowGridState();\r\n                    break;\r\n                case \"snapToGrid\":\r\n                    this._updateSnapToGridState();\r\n                    break;\r\n                case \"gridSize\":\r\n                    if (\"gridSize\" === args.fullName || \"gridSize.items\" === args.fullName) {\r\n                        this._updateGridSizeItemsState()\r\n                    }\r\n                    if (\"gridSize\" === args.fullName || \"gridSize.value\" === args.fullName) {\r\n                        this._updateGridSizeState()\r\n                    }\r\n                    break;\r\n                case \"viewUnits\":\r\n                    this._updateViewUnitsState();\r\n                    break;\r\n                case \"units\":\r\n                    this._updateUnitsState();\r\n                    break;\r\n                case \"pageSize\":\r\n                    if (\"pageSize\" === args.fullName || \"pageSize.items\" === args.fullName) {\r\n                        this._updatePageSizeItemsState()\r\n                    }\r\n                    if (\"pageSize\" === args.fullName || \"pageSize.width\" === args.fullName || \"pageSize.height\" === args.fullName) {\r\n                        this._updatePageSizeState()\r\n                    }\r\n                    break;\r\n                case \"pageOrientation\":\r\n                    this._updatePageOrientationState();\r\n                    break;\r\n                case \"pageColor\":\r\n                    this._updatePageColorState();\r\n                    break;\r\n                case \"nodes\":\r\n                    if (\"nodes.autoLayout\" === args.fullName) {\r\n                        this._refreshDataSources()\r\n                    } else {\r\n                        this._refreshNodesDataSource()\r\n                    }\r\n                    break;\r\n                case \"edges\":\r\n                    this._refreshEdgesDataSource();\r\n                    break;\r\n                case \"customShapes\":\r\n                    this._updateCustomShapes(args.value, args.previousValue);\r\n                    this._invalidate();\r\n                    break;\r\n                case \"contextMenu\":\r\n                    if (\"contextMenu.commands\" === args.fullName) {\r\n                        this._invalidateContextMenuCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"propertiesPanel\":\r\n                    if (\"propertiesPanel.groups\" === args.name) {\r\n                        this._invalidatePropertiesPanelGroups()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"toolbox\":\r\n                    if (\"toolbox.groups\" === args.fullName) {\r\n                        this._invalidateToolboxGroups()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"toolbar\":\r\n                    if (\"toolbar.commands\" === args.fullName) {\r\n                        this._invalidateToolbarCommands()\r\n                    } else {\r\n                        this._invalidate()\r\n                    }\r\n                    break;\r\n                case \"onDataChanged\":\r\n                    this._createDataChangeAction();\r\n                    break;\r\n                case \"onItemClick\":\r\n                    this._createItemClickAction();\r\n                    break;\r\n                case \"onItemDblClick\":\r\n                    this._createItemDblClickAction();\r\n                    break;\r\n                case \"onSelectionChanged\":\r\n                    this._createSelectionChangedAction();\r\n                    break;\r\n                case \"export\":\r\n                    if (this._toolbarInstance) {\r\n                        this._toolbarInstance.option(\"export\", args.value)\r\n                    }\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(Diagram.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }]);\r\n    return Diagram\r\n}(_ui2.default);\r\n(0, _component_registrator2.default)(\"dxDiagram\", Diagram);\r\nmodule.exports = Diagram;\r\n"]},"metadata":{},"sourceType":"script"}