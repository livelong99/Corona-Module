{"ast":null,"code":"/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar Guid = require(\"../../core/guid\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar inRange = require(\"../../core/utils/math\").inRange;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar Button = require(\"../button\");\n\nvar Editor = require(\"../editor/editor\");\n\nvar Swipeable = require(\"../../events/gesture/swipeable\");\n\nvar Navigator = require(\"./ui.calendar.navigator\");\n\nvar Views = require(\"./ui.calendar.views\");\n\nvar translator = require(\"../../animation/translator\");\n\nvar browser = require(\"../../core/utils/browser\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\n\nvar devices = require(\"../../core/devices\");\n\nvar fx = require(\"../../animation/fx\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\n\nvar CALENDAR_CLASS = \"dx-calendar\";\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\nvar POP_ANIMATION_FROM = .6;\nvar POP_ANIMATION_TO = 1;\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\nvar LEVEL_COMPARE_MAP = {\n  month: 3,\n  year: 2,\n  decade: 1,\n  century: 0\n};\nvar ZOOM_LEVEL = {\n  MONTH: \"month\",\n  YEAR: \"year\",\n  DECADE: \"decade\",\n  CENTURY: \"century\"\n};\nvar Calendar = Editor.inherit({\n  _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      hoverStateEnabled: true,\n      activeStateEnabled: true,\n      currentDate: new Date(),\n      value: null,\n      dateSerializationFormat: void 0,\n      min: new Date(1e3, 0),\n      max: new Date(3e3, 0),\n      firstDayOfWeek: void 0,\n      zoomLevel: ZOOM_LEVEL.MONTH,\n      maxZoomLevel: ZOOM_LEVEL.MONTH,\n      minZoomLevel: ZOOM_LEVEL.CENTURY,\n      showTodayButton: false,\n      cellTemplate: \"cell\",\n      disabledDates: null,\n      onCellClick: null,\n      onContouredChanged: null,\n      hasFocus: function hasFocus(element) {\n        return element.hasClass(FOCUSED_STATE_CLASS);\n      }\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _supportedKeys: function _supportedKeys() {\n    return extend(this.callBase(), {\n      rightArrow: function rightArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(1);\n        } else {\n          this._moveCurrentDate(1 * this._getRtlCorrection());\n        }\n      },\n      leftArrow: function leftArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(-1);\n        } else {\n          this._moveCurrentDate(-1 * this._getRtlCorrection());\n        }\n      },\n      upArrow: function upArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateUp();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDate(-1 * this._view.option(\"colCount\"));\n        }\n      },\n      downArrow: function downArrow(e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateDown();\n        } else {\n          if (fx.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDate(1 * this._view.option(\"colCount\"));\n        }\n      },\n      home: function home(e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var min = this._dateOption(\"min\");\n\n        var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date, 1);\n      },\n      end: function end(e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var max = this._dateOption(\"max\");\n\n        var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date, -1);\n      },\n      pageUp: function pageUp(e) {\n        e.preventDefault();\n\n        this._waitRenderView(-1);\n      },\n      pageDown: function pageDown(e) {\n        e.preventDefault();\n\n        this._waitRenderView(1);\n      },\n      tab: noop,\n      enter: function enter(e) {\n        if (!this._isMaxZoomLevel()) {\n          this._navigateDown();\n        } else {\n          var value = this._updateTimeComponent(this.option(\"currentDate\"));\n\n          this._dateValue(value, e);\n        }\n      }\n    });\n  },\n  _getSerializationFormat: function _getSerializationFormat(optionName) {\n    var value = this.option(optionName || \"value\");\n\n    if (this.option(\"dateSerializationFormat\")) {\n      return this.option(\"dateSerializationFormat\");\n    }\n\n    if (typeUtils.isNumeric(value)) {\n      return \"number\";\n    }\n\n    if (!typeUtils.isString(value)) {\n      return;\n    }\n\n    return dateSerialization.getDateSerializationFormat(value);\n  },\n  _convertToDate: function _convertToDate(value, optionName) {\n    return dateSerialization.deserializeDate(value);\n  },\n  _dateValue: function _dateValue(value, dxEvent) {\n    if (dxEvent) {\n      this._saveValueChangeEvent(dxEvent);\n    }\n\n    this._dateOption(\"value\", value);\n  },\n  _dateOption: function _dateOption(optionName, optionValue) {\n    if (1 === arguments.length) {\n      return this._convertToDate(this.option(optionName), optionName);\n    }\n\n    var serializationFormat = this._getSerializationFormat(optionName);\n\n    this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat));\n  },\n  _moveCurrentDate: function _moveCurrentDate(offset, baseDate) {\n    var currentDate = baseDate || new Date(this.option(\"currentDate\"));\n\n    var maxDate = this._getMaxDate();\n\n    var minDate = this._getMinDate();\n\n    var zoomLevel = this.option(\"zoomLevel\");\n    var isCurrentDateInRange = inRange(currentDate, minDate, maxDate);\n    var dateForward = new Date(currentDate);\n    var dateBackward = new Date(currentDate);\n    var isDateForwardInRange = isCurrentDateInRange;\n    var isDateBackwardInRange = isCurrentDateInRange;\n    var step = offset || 1;\n\n    while (!offset && (isDateForwardInRange || isDateBackwardInRange) || offset && isDateForwardInRange) {\n      switch (zoomLevel) {\n        case ZOOM_LEVEL.MONTH:\n          dateForward.setDate(dateForward.getDate() + step);\n          dateBackward.setDate(dateBackward.getDate() - step);\n          break;\n\n        case ZOOM_LEVEL.YEAR:\n          dateForward.setMonth(dateForward.getMonth() + step);\n          dateBackward.setMonth(dateBackward.getMonth() - step);\n          break;\n\n        case ZOOM_LEVEL.DECADE:\n          dateForward.setFullYear(dateForward.getFullYear() + step);\n          dateBackward.setFullYear(dateBackward.getFullYear() - step);\n          break;\n\n        case ZOOM_LEVEL.CENTURY:\n          dateForward.setFullYear(dateForward.getFullYear() + 10 * step);\n          dateBackward.setFullYear(dateBackward.getFullYear() - 10 * step);\n      }\n\n      if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\n        currentDate = dateForward;\n        break;\n      }\n\n      if (isDateBackwardInRange && !offset && !this._view.isDateDisabled(dateBackward)) {\n        currentDate = dateBackward;\n        break;\n      }\n\n      isDateBackwardInRange = inRange(dateBackward, minDate, maxDate);\n      isDateForwardInRange = inRange(dateForward, minDate, maxDate);\n    }\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _moveToClosestAvailableDate: function _moveToClosestAvailableDate(baseDate, offset) {\n    if (this._view.isDateDisabled(baseDate)) {\n      this._moveCurrentDate(offset, baseDate);\n    } else {\n      this.option(\"currentDate\", baseDate);\n    }\n  },\n  _init: function _init() {\n    this.callBase();\n\n    this._correctZoomLevel();\n\n    this._initCurrentDate();\n\n    this._initActions();\n  },\n  _correctZoomLevel: function _correctZoomLevel() {\n    var minZoomLevel = this.option(\"minZoomLevel\");\n    var maxZoomLevel = this.option(\"maxZoomLevel\");\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n      return;\n    }\n\n    if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\n      this.option(\"zoomLevel\", maxZoomLevel);\n    } else {\n      if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n        this.option(\"zoomLevel\", minZoomLevel);\n      }\n    }\n  },\n  _initCurrentDate: function _initCurrentDate() {\n    var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _getNormalizedDate: function _getNormalizedDate(date) {\n    date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\n    return typeUtils.isDefined(date) ? new Date(date) : date;\n  },\n  _initActions: function _initActions() {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\");\n    this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.cell = new FunctionTemplate(function (options) {\n      var data = options.model;\n      $(options.container).append($(\"<span>\").text(data && data.text || String(data)));\n    });\n  },\n  _updateCurrentDate: function _updateCurrentDate(date) {\n    if (fx.isAnimating(this._$viewsWrapper)) {\n      fx.stop(this._$viewsWrapper, true);\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    if (min > max) {\n      this.option(\"currentDate\", new Date());\n      return;\n    }\n\n    var normalizedDate = this._getNormalizedDate(date);\n\n    if (date.getTime() !== normalizedDate.getTime()) {\n      this.option(\"currentDate\", new Date(normalizedDate));\n      return;\n    }\n\n    var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\n\n    if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\n      offset = 0;\n    }\n\n    if (this._view && 0 !== offset && !this._suppressNavigation) {\n      this._navigate(offset, normalizedDate);\n    } else {\n      this._renderNavigator();\n\n      this._setViewContoured(normalizedDate);\n\n      this._updateAriaId(normalizedDate);\n    }\n  },\n  _setViewContoured: function _setViewContoured(date) {\n    if (this.option(\"hasFocus\")(this._focusTarget())) {\n      this._view.option(\"contouredDate\", date);\n    }\n  },\n  _getMinDate: function _getMinDate() {\n    if (this.min) {\n      return this.min;\n    }\n\n    this.min = this._dateOption(\"min\") || new Date(1e3, 0);\n    return this.min;\n  },\n  _getMaxDate: function _getMaxDate() {\n    if (this.max) {\n      return this.max;\n    }\n\n    this.max = this._dateOption(\"max\") || new Date(3e3, 0);\n    return this.max;\n  },\n  _getViewsOffset: function _getViewsOffset(startDate, endDate) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (zoomLevel === ZOOM_LEVEL.MONTH) {\n      return this._getMonthsOffset(startDate, endDate);\n    }\n\n    var zoomCorrection;\n\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.CENTURY:\n        zoomCorrection = 100;\n        break;\n\n      case ZOOM_LEVEL.DECADE:\n        zoomCorrection = 10;\n        break;\n\n      default:\n        zoomCorrection = 1;\n    }\n\n    return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection);\n  },\n  _getMonthsOffset: function _getMonthsOffset(startDate, endDate) {\n    var yearOffset = endDate.getFullYear() - startDate.getFullYear();\n    var monthOffset = endDate.getMonth() - startDate.getMonth();\n    return 12 * yearOffset + monthOffset;\n  },\n  _waitRenderView: function _waitRenderView(offset) {\n    if (this._alreadyViewRender) {\n      return;\n    }\n\n    this._alreadyViewRender = true;\n\n    var date = this._getDateByOffset(offset * this._getRtlCorrection());\n\n    this._moveToClosestAvailableDate(date, offset);\n\n    setTimeout(function () {\n      this._alreadyViewRender = false;\n    }.bind(this));\n  },\n  _getRtlCorrection: function _getRtlCorrection() {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _getDateByOffset: function _getDateByOffset(offset, date) {\n    date = new Date(date || this.option(\"currentDate\"));\n    var currentDay = date.getDate();\n    var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\n    date.setDate(1);\n    date.setMonth(date.getMonth() + difference);\n    var lastDay = dateUtils.getLastMonthDate(date).getDate();\n    date.setDate(currentDay > lastDay ? lastDay : currentDay);\n    return date;\n  },\n  _focusTarget: function _focusTarget() {\n    return this.$element();\n  },\n  _initMarkup: function _initMarkup() {\n    this._renderSubmitElement();\n\n    this.callBase();\n    var $element = this.$element();\n    $element.addClass(CALENDAR_CLASS);\n\n    this._renderBody();\n\n    $element.append(this.$body);\n\n    this._renderViews();\n\n    this._renderNavigator();\n\n    $element.append(this._navigator.$element());\n\n    this._renderSwipeable();\n\n    this._renderFooter();\n\n    this._updateAriaSelected();\n\n    this._updateAriaId();\n\n    if (this._view.isDateDisabled(this.option(\"currentDate\"))) {\n      this._moveCurrentDate(0);\n    }\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._setViewContoured(this.option(\"currentDate\"));\n  },\n  _renderBody: function _renderBody() {\n    if (!this._$viewsWrapper) {\n      this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\n      this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\n      this.$body.append(this._$viewsWrapper);\n    }\n  },\n  _renderViews: function _renderViews() {\n    this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\n    var currentDate = this.option(\"currentDate\");\n    this._view = this._renderSpecificView(currentDate);\n\n    this._view.option(\"_keyboardProcessor\", this._viewKeyboardProcessor);\n\n    if (windowUtils.hasWindow()) {\n      var beforeDate = this._getDateByOffset(-1, currentDate);\n\n      this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\n\n      var afterDate = this._getDateByOffset(1, currentDate);\n\n      afterDate.setDate(1);\n      this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null;\n    }\n\n    this._translateViews();\n  },\n  _renderSpecificView: function _renderSpecificView(date) {\n    var specificView = Views[this.option(\"zoomLevel\")];\n    var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\n\n    var config = this._viewConfig(date);\n\n    return new specificView($view, config);\n  },\n  _viewConfig: function _viewConfig(date) {\n    var disabledDates = this.option(\"disabledDates\");\n    disabledDates = typeUtils.isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\n    return {\n      date: date,\n      min: this._getMinDate(),\n      max: this._getMaxDate(),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this._dateOption(\"value\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      disabled: this.option(\"disabled\"),\n      tabIndex: void 0,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      disabledDates: disabledDates,\n      onCellClick: this._cellClickHandler.bind(this),\n      cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\n      allowValueSelection: this._isMaxZoomLevel()\n    };\n  },\n  _injectComponent: function _injectComponent(func) {\n    var that = this;\n    return function (params) {\n      extend(params, {\n        component: that\n      });\n      return func(params);\n    };\n  },\n  _isViewAvailable: function _isViewAvailable(date) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\n    var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\n    return dateUtils.dateInRange(date, min, max);\n  },\n  _translateViews: function _translateViews() {\n    translator.move(this._view.$element(), {\n      left: 0,\n      top: 0\n    });\n    this._beforeView && translator.move(this._beforeView.$element(), {\n      left: this._getViewPosition(-1),\n      top: 0\n    });\n    this._afterView && translator.move(this._afterView.$element(), {\n      left: this._getViewPosition(1),\n      top: 0\n    });\n  },\n  _getViewPosition: function _getViewPosition(coefficient) {\n    var rtlCorrection = this.option(\"rtlEnabled\") && !browser.msie ? -1 : 1;\n    return 100 * coefficient * rtlCorrection + \"%\";\n  },\n  _cellClickHandler: function _cellClickHandler(e) {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewDown(zoomLevel);\n\n    var isMaxZoomLevel = this._isMaxZoomLevel();\n\n    if (nextView && !isMaxZoomLevel) {\n      this._navigateDown(e.event.currentTarget);\n    } else {\n      var newValue = this._updateTimeComponent(e.value);\n\n      this._dateValue(newValue, e.event);\n\n      this._cellClickAction(e);\n    }\n  },\n  _updateTimeComponent: function _updateTimeComponent(date) {\n    var result = new Date(date);\n\n    var currentValue = this._dateOption(\"value\");\n\n    if (currentValue) {\n      result.setHours(currentValue.getHours());\n      result.setMinutes(currentValue.getMinutes());\n      result.setSeconds(currentValue.getSeconds());\n      result.setMilliseconds(currentValue.getMilliseconds());\n    }\n\n    return result;\n  },\n  _isMaxZoomLevel: function _isMaxZoomLevel() {\n    return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\");\n  },\n  _navigateDown: function _navigateDown(cell) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (this._isMaxZoomLevel()) {\n      return;\n    }\n\n    var nextView = dateUtils.getViewDown(zoomLevel);\n\n    if (!nextView) {\n      return;\n    }\n\n    var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\n\n    if (cell) {\n      newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY);\n    }\n\n    this._isOtherViewCellClicked = true;\n    this.option(\"currentDate\", newCurrentDate);\n    this.option(\"zoomLevel\", nextView);\n    this._isOtherViewCellClicked = false;\n\n    this._renderNavigator();\n\n    this._animateShowView();\n\n    this._setViewContoured(this._getNormalizedDate(newCurrentDate));\n  },\n  _renderNavigator: function _renderNavigator() {\n    if (!this._navigator) {\n      this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig());\n    }\n\n    this._navigator.option(\"text\", this._view.getNavigatorCaption());\n\n    this._updateButtonsVisibility();\n  },\n  _navigatorConfig: function _navigatorConfig() {\n    return {\n      text: this._view.getNavigatorCaption(),\n      onClick: this._navigatorClickHandler.bind(this),\n      onCaptionClick: this._navigateUp.bind(this),\n      rtlEnabled: this.option(\"rtlEnabled\")\n    };\n  },\n  _navigatorClickHandler: function _navigatorClickHandler(e) {\n    var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\n\n    this._moveToClosestAvailableDate(currentDate, 1 * e.direction);\n\n    this._updateNavigatorCaption(-e.direction * this._getRtlCorrection());\n  },\n  _navigateUp: function _navigateUp() {\n    var zoomLevel = this.option(\"zoomLevel\");\n    var nextView = dateUtils.getViewUp(zoomLevel);\n\n    if (!nextView || this._isMinZoomLevel(zoomLevel)) {\n      return;\n    }\n\n    var contouredDate = this._view.option(\"contouredDate\");\n\n    this.option(\"zoomLevel\", nextView);\n    this.option(\"currentDate\", contouredDate || this._view.option(\"date\"));\n\n    this._renderNavigator();\n\n    this._animateShowView().done(function () {\n      this._setViewContoured(contouredDate);\n    }.bind(this));\n  },\n  _isMinZoomLevel: function _isMinZoomLevel(zoomLevel) {\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel;\n  },\n  _updateButtonsVisibility: function _updateButtonsVisibility() {\n    this._navigator.toggleButton(\"next\", !typeUtils.isDefined(this._getRequiredView(\"next\")));\n\n    this._navigator.toggleButton(\"prev\", !typeUtils.isDefined(this._getRequiredView(\"prev\")));\n  },\n  _renderSwipeable: function _renderSwipeable() {\n    if (!this._swipeable) {\n      this._swipeable = this._createComponent(this.$element(), Swipeable, {\n        onStart: this._swipeStartHandler.bind(this),\n        onUpdated: this._swipeUpdateHandler.bind(this),\n        onEnd: this._swipeEndHandler.bind(this),\n        itemSizeFunc: this._viewWidth.bind(this)\n      });\n    }\n  },\n  _swipeStartHandler: function _swipeStartHandler(e) {\n    fx.stop(this._$viewsWrapper, true);\n    e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\n    e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0;\n  },\n  _getRequiredView: function _getRequiredView(name) {\n    var view;\n    var isRtl = this.option(\"rtlEnabled\");\n\n    if (\"next\" === name) {\n      view = isRtl ? this._beforeView : this._afterView;\n    } else {\n      if (\"prev\" === name) {\n        view = isRtl ? this._afterView : this._beforeView;\n      }\n    }\n\n    return view;\n  },\n  _swipeUpdateHandler: function _swipeUpdateHandler(e) {\n    var offset = e.event.offset;\n    translator.move(this._$viewsWrapper, {\n      left: offset * this._viewWidth(),\n      top: 0\n    });\n\n    this._updateNavigatorCaption(offset);\n  },\n  _swipeEndHandler: function _swipeEndHandler(e) {\n    var targetOffset = e.event.targetOffset;\n    var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\n\n    if (0 === moveOffset) {\n      this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\n\n      return;\n    }\n\n    var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\n\n    if (this._isDateInInvalidRange(date)) {\n      if (moveOffset >= 0) {\n        date = new Date(this._getMinDate());\n      } else {\n        date = new Date(this._getMaxDate());\n      }\n    }\n\n    this.option(\"currentDate\", date);\n  },\n  _viewWidth: function _viewWidth() {\n    if (!this._viewWidthValue) {\n      this._viewWidthValue = this.$element().width();\n    }\n\n    return this._viewWidthValue;\n  },\n  _updateNavigatorCaption: function _updateNavigatorCaption(offset) {\n    offset *= this._getRtlCorrection();\n    var view = this._view;\n\n    if (offset > .5 && this._beforeView) {\n      view = this._beforeView;\n    } else {\n      if (offset < -.5 && this._afterView) {\n        view = this._afterView;\n      }\n    }\n\n    this._navigator.option(\"text\", view.getNavigatorCaption());\n  },\n  _isDateInInvalidRange: function _isDateInInvalidRange(date) {\n    if (this._view.isBoundary(date)) {\n      return;\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    var normalizedDate = dateUtils.normalizeDate(date, min, max);\n    return normalizedDate === min || normalizedDate === max;\n  },\n  _renderFooter: function _renderFooter() {\n    var showTodayButton = this.option(\"showTodayButton\");\n\n    if (showTodayButton) {\n      var $todayButton = this._createComponent($(\"<a>\"), Button, {\n        focusStateEnabled: false,\n        text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\n        onClick: function () {\n          this._toTodayView();\n        }.bind(this),\n        integrationOptions: {}\n      }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\n\n      this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\n      this.$element().append(this._$footer);\n    }\n\n    this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton);\n  },\n  _renderSubmitElement: function _renderSubmitElement() {\n    this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function _setSubmitValue(value) {\n    var dateValue = this._convertToDate(value);\n\n    this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN));\n  },\n  _getSubmitElement: function _getSubmitElement() {\n    return this._$submitElement;\n  },\n  _animateShowView: function _animateShowView() {\n    fx.stop(this._view.$element(), true);\n    return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise();\n  },\n  _popAnimationView: function _popAnimationView(view, from, to, duration) {\n    return fx.animate(view.$element(), {\n      type: \"pop\",\n      from: {\n        scale: from,\n        opacity: from\n      },\n      to: {\n        scale: to,\n        opacity: to\n      },\n      duration: duration\n    });\n  },\n  _navigate: function _navigate(offset, value) {\n    if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\n      var newView = this._renderSpecificView(value);\n\n      if (offset > 0) {\n        this._afterView && this._afterView.$element().remove();\n        this._afterView = newView;\n      } else {\n        this._beforeView && this._beforeView.$element().remove();\n        this._beforeView = newView;\n      }\n\n      this._translateViews();\n    }\n\n    var rtlCorrection = this._getRtlCorrection();\n\n    var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\n\n    var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\n\n    var viewsWrapperPosition = this._$viewsWrapper.position().left;\n\n    if (viewsWrapperPosition !== endPosition) {\n      if (this._preventViewChangeAnimation) {\n        this._wrapperAnimationEndHandler(offset, value);\n      } else {\n        this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value));\n      }\n    }\n  },\n  _animateWrapper: function _animateWrapper(to, duration) {\n    return fx.animate(this._$viewsWrapper, {\n      type: \"slide\",\n      from: {\n        left: this._$viewsWrapper.position().left\n      },\n      to: {\n        left: to\n      },\n      duration: duration\n    });\n  },\n  _toTodayView: function _toTodayView() {\n    var today = new Date();\n\n    if (this._isMaxZoomLevel()) {\n      this._dateOption(\"value\", today);\n\n      return;\n    }\n\n    this._preventViewChangeAnimation = true;\n    this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\n\n    this._dateOption(\"value\", today);\n\n    this._animateShowView();\n\n    this._preventViewChangeAnimation = false;\n  },\n  _wrapperAnimationEndHandler: function _wrapperAnimationEndHandler(offset, newDate) {\n    this._rearrangeViews(offset);\n\n    this._translateViews();\n\n    this._resetLocation();\n\n    this._renderNavigator();\n\n    this._setViewContoured(newDate);\n\n    this._updateAriaId(newDate);\n  },\n  _rearrangeViews: function _rearrangeViews(offset) {\n    if (0 === offset) {\n      return;\n    }\n\n    var viewOffset;\n    var viewToCreateKey;\n    var viewToRemoveKey;\n\n    if (offset < 0) {\n      viewOffset = 1;\n      viewToCreateKey = \"_beforeView\";\n      viewToRemoveKey = \"_afterView\";\n    } else {\n      viewOffset = -1;\n      viewToCreateKey = \"_afterView\";\n      viewToRemoveKey = \"_beforeView\";\n    }\n\n    if (!this[viewToCreateKey]) {\n      return;\n    }\n\n    var destinationDate = this[viewToCreateKey].option(\"date\");\n\n    if (this[viewToRemoveKey]) {\n      this[viewToRemoveKey].$element().remove();\n    }\n\n    if (offset === viewOffset) {\n      this[viewToRemoveKey] = this._view;\n    } else {\n      this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\n\n      this._view.$element().remove();\n    }\n\n    this._view = this[viewToCreateKey];\n\n    var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\n\n    this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null;\n  },\n  _resetLocation: function _resetLocation() {\n    translator.move(this._$viewsWrapper, {\n      left: 0,\n      top: 0\n    });\n  },\n  _clean: function _clean() {\n    this.callBase();\n\n    this._clearViewWidthCache();\n\n    delete this._$viewsWrapper;\n    delete this._navigator;\n    delete this._$footer;\n  },\n  _clearViewWidthCache: function _clearViewWidthCache() {\n    delete this._viewWidthValue;\n  },\n  _disposeViews: function _disposeViews() {\n    this._view.$element().remove();\n\n    this._beforeView && this._beforeView.$element().remove();\n    this._afterView && this._afterView.$element().remove();\n    delete this._view;\n    delete this._beforeView;\n    delete this._afterView;\n  },\n  _refreshViews: function _refreshViews() {\n    this._disposeViews();\n\n    this._renderViews();\n  },\n  _visibilityChanged: function _visibilityChanged() {\n    this._translateViews();\n  },\n  _focusInHandler: function _focusInHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", this.option(\"currentDate\"));\n  },\n  _focusOutHandler: function _focusOutHandler() {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", null);\n  },\n  _updateViewsValue: function _updateViewsValue(value) {\n    var newValue = value ? new Date(value) : null;\n\n    this._view.option(\"value\", newValue);\n\n    this._beforeView && this._beforeView.option(\"value\", newValue);\n    this._afterView && this._afterView.option(\"value\", newValue);\n  },\n  _updateAriaSelected: function _updateAriaSelected(value, previousValue) {\n    value = value || this._dateOption(\"value\");\n\n    var $prevSelectedCell = this._view._getCellByDate(previousValue);\n\n    var $selectedCell = this._view._getCellByDate(value);\n\n    this.setAria(\"selected\", void 0, $prevSelectedCell);\n    this.setAria(\"selected\", true, $selectedCell);\n\n    if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\n      this._updateAriaId(value);\n    }\n  },\n  _updateAriaId: function _updateAriaId(value) {\n    value = value || this.option(\"currentDate\");\n    var ariaId = \"dx-\" + new Guid();\n\n    var $newCell = this._view._getCellByDate(value);\n\n    this.setAria(\"id\", ariaId, $newCell);\n    this.setAria(\"activedescendant\", ariaId);\n\n    this._onContouredChanged(ariaId);\n  },\n  _suppressingNavigation: function _suppressingNavigation(callback, args) {\n    this._suppressNavigation = true;\n    callback.apply(this, args);\n    delete this._suppressNavigation;\n  },\n  _optionChanged: function _optionChanged(args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n\n    switch (args.name) {\n      case \"width\":\n        this.callBase(args);\n\n        this._clearViewWidthCache();\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this.min = void 0;\n        this.max = void 0;\n\n        this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._refreshViews();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"currentDate\":\n        this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\n\n        this._updateCurrentDate(value);\n\n        break;\n\n      case \"zoomLevel\":\n        this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\n\n        this._correctZoomLevel();\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        this._updateAriaId();\n\n        break;\n\n      case \"minZoomLevel\":\n      case \"maxZoomLevel\":\n        this._correctZoomLevel();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"value\":\n        value = this._convertToDate(value);\n        previousValue = this._convertToDate(previousValue);\n\n        this._updateAriaSelected(value, previousValue);\n\n        this.option(\"currentDate\", typeUtils.isDefined(value) ? new Date(value) : new Date());\n\n        this._updateViewsValue(value);\n\n        this._setSubmitValue(value);\n\n        this.callBase(args);\n        break;\n\n      case \"disabled\":\n        this._view.option(\"disabled\", value);\n\n        this.callBase(args);\n        break;\n\n      case \"onCellClick\":\n        this._view.option(\"onCellClick\", value);\n\n        break;\n\n      case \"onContouredChanged\":\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n        break;\n\n      case \"disabledDates\":\n      case \"dateSerializationFormat\":\n      case \"cellTemplate\":\n      case \"showTodayButton\":\n        this._invalidate();\n\n        break;\n\n      case \"hasFocus\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxCalendar\", Calendar);\nmodule.exports = Calendar;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/calendar/ui.calendar.js"],"names":["$","require","Guid","registerComponent","noop","typeUtils","inRange","extend","Button","Editor","Swipeable","Navigator","Views","translator","browser","dateUtils","dateSerialization","devices","fx","windowUtils","messageLocalization","FunctionTemplate","CALENDAR_CLASS","CALENDAR_BODY_CLASS","CALENDAR_CELL_CLASS","CALENDAR_FOOTER_CLASS","CALENDAR_TODAY_BUTTON_CLASS","CALENDAR_HAS_FOOTER_CLASS","CALENDAR_VIEWS_WRAPPER_CLASS","CALENDAR_VIEW_CLASS","FOCUSED_STATE_CLASS","ANIMATION_DURATION_SHOW_VIEW","POP_ANIMATION_FROM","POP_ANIMATION_TO","CALENDAR_INPUT_STANDARD_PATTERN","CALENDAR_DATE_VALUE_KEY","LEVEL_COMPARE_MAP","month","year","decade","century","ZOOM_LEVEL","MONTH","YEAR","DECADE","CENTURY","Calendar","inherit","_activeStateUnit","_getDefaultOptions","callBase","hoverStateEnabled","activeStateEnabled","currentDate","Date","value","dateSerializationFormat","min","max","firstDayOfWeek","zoomLevel","maxZoomLevel","minZoomLevel","showTodayButton","cellTemplate","disabledDates","onCellClick","onContouredChanged","hasFocus","element","hasClass","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_supportedKeys","rightArrow","e","preventDefault","ctrlKey","_waitRenderView","_moveCurrentDate","_getRtlCorrection","leftArrow","upArrow","_navigateUp","isAnimating","_view","$element","option","downArrow","_navigateDown","home","_dateOption","date","sameView","getViewFirstCellDate","_moveToClosestAvailableDate","end","getViewLastCellDate","pageUp","pageDown","tab","enter","_isMaxZoomLevel","_updateTimeComponent","_dateValue","_getSerializationFormat","optionName","isNumeric","isString","getDateSerializationFormat","_convertToDate","deserializeDate","dxEvent","_saveValueChangeEvent","optionValue","arguments","length","serializationFormat","serializeDate","offset","baseDate","maxDate","_getMaxDate","minDate","_getMinDate","isCurrentDateInRange","dateForward","dateBackward","isDateForwardInRange","isDateBackwardInRange","step","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","isDateDisabled","_init","_correctZoomLevel","_initCurrentDate","_initActions","_getNormalizedDate","normalizeDate","isDefined","_cellClickAction","_createActionByOption","_onContouredChanged","_initTemplates","_defaultTemplates","cell","data","model","container","append","text","String","_updateCurrentDate","_$viewsWrapper","stop","normalizedDate","getTime","_getViewsOffset","_isOtherViewCellClicked","_suppressNavigation","_navigate","_renderNavigator","_setViewContoured","_updateAriaId","_focusTarget","startDate","endDate","_getMonthsOffset","zoomCorrection","parseInt","yearOffset","monthOffset","_alreadyViewRender","_getDateByOffset","setTimeout","bind","currentDay","difference","getDifferenceInMonth","lastDay","getLastMonthDate","_initMarkup","_renderSubmitElement","addClass","_renderBody","$body","_renderViews","_navigator","_renderSwipeable","_renderFooter","_updateAriaSelected","_render","_renderSpecificView","_viewKeyboardProcessor","hasWindow","beforeDate","_beforeView","_isViewAvailable","afterDate","_afterView","_translateViews","specificView","$view","appendTo","config","_viewConfig","isFunction","_injectComponent","rtlEnabled","disabled","tabIndex","_cellClickHandler","_getTemplateByOption","allowValueSelection","func","that","params","component","getViewMinBoundaryDate","getViewMaxBoundaryDate","dateInRange","move","left","top","_getViewPosition","coefficient","rtlCorrection","msie","nextView","getViewDown","isMaxZoomLevel","event","currentTarget","newValue","result","currentValue","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","newCurrentDate","_animateShowView","_navigatorConfig","getNavigatorCaption","_updateButtonsVisibility","onClick","_navigatorClickHandler","onCaptionClick","direction","_updateNavigatorCaption","getViewUp","_isMinZoomLevel","contouredDate","done","toggleButton","_getRequiredView","_swipeable","_createComponent","onStart","_swipeStartHandler","onUpdated","_swipeUpdateHandler","onEnd","_swipeEndHandler","itemSizeFunc","_viewWidth","maxLeftOffset","maxRightOffset","name","view","isRtl","targetOffset","moveOffset","Math","abs","_animateWrapper","_isDateInInvalidRange","_viewWidthValue","width","isBoundary","$todayButton","format","_toTodayView","integrationOptions","_$footer","toggleClass","_$submitElement","attr","_setSubmitValue","dateValue","_getSubmitElement","val","_popAnimationView","promise","from","to","duration","animate","type","scale","opacity","newView","remove","offsetSign","endPosition","viewsWrapperPosition","position","_preventViewChangeAnimation","_wrapperAnimationEndHandler","today","newDate","_rearrangeViews","_resetLocation","viewOffset","viewToCreateKey","viewToRemoveKey","destinationDate","dateByOffset","_clean","_clearViewWidthCache","_disposeViews","_refreshViews","_visibilityChanged","_focusInHandler","apply","_focusOutHandler","_updateViewsValue","previousValue","$prevSelectedCell","_getCellByDate","$selectedCell","setAria","ariaId","$newCell","_suppressingNavigation","callback","args","_optionChanged","removeClass","_invalidate","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar Guid = require(\"../../core/guid\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar inRange = require(\"../../core/utils/math\").inRange;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar Button = require(\"../button\");\r\nvar Editor = require(\"../editor/editor\");\r\nvar Swipeable = require(\"../../events/gesture/swipeable\");\r\nvar Navigator = require(\"./ui.calendar.navigator\");\r\nvar Views = require(\"./ui.calendar.views\");\r\nvar translator = require(\"../../animation/translator\");\r\nvar browser = require(\"../../core/utils/browser\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar dateSerialization = require(\"../../core/utils/date_serialization\");\r\nvar devices = require(\"../../core/devices\");\r\nvar fx = require(\"../../animation/fx\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar messageLocalization = require(\"../../localization/message\");\r\nvar FunctionTemplate = require(\"../../core/templates/function_template\").FunctionTemplate;\r\nvar CALENDAR_CLASS = \"dx-calendar\";\r\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\r\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\r\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\r\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\r\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\r\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\r\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\r\nvar POP_ANIMATION_FROM = .6;\r\nvar POP_ANIMATION_TO = 1;\r\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\r\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\r\nvar LEVEL_COMPARE_MAP = {\r\n    month: 3,\r\n    year: 2,\r\n    decade: 1,\r\n    century: 0\r\n};\r\nvar ZOOM_LEVEL = {\r\n    MONTH: \"month\",\r\n    YEAR: \"year\",\r\n    DECADE: \"decade\",\r\n    CENTURY: \"century\"\r\n};\r\nvar Calendar = Editor.inherit({\r\n    _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true,\r\n            currentDate: new Date,\r\n            value: null,\r\n            dateSerializationFormat: void 0,\r\n            min: new Date(1e3, 0),\r\n            max: new Date(3e3, 0),\r\n            firstDayOfWeek: void 0,\r\n            zoomLevel: ZOOM_LEVEL.MONTH,\r\n            maxZoomLevel: ZOOM_LEVEL.MONTH,\r\n            minZoomLevel: ZOOM_LEVEL.CENTURY,\r\n            showTodayButton: false,\r\n            cellTemplate: \"cell\",\r\n            disabledDates: null,\r\n            onCellClick: null,\r\n            onContouredChanged: null,\r\n            hasFocus: function(element) {\r\n                return element.hasClass(FOCUSED_STATE_CLASS)\r\n            }\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            rightArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(1)\r\n                } else {\r\n                    this._moveCurrentDate(1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            leftArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(-1)\r\n                } else {\r\n                    this._moveCurrentDate(-1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateUp()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDate(-1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    if (fx.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDate(1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            home: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var min = this._dateOption(\"min\");\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, min) ? min : dateUtils.getViewFirstCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date, 1)\r\n            },\r\n            end: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var max = this._dateOption(\"max\");\r\n                var date = dateUtils.sameView(zoomLevel, currentDate, max) ? max : dateUtils.getViewLastCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date, -1)\r\n            },\r\n            pageUp: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(-1)\r\n            },\r\n            pageDown: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(1)\r\n            },\r\n            tab: noop,\r\n            enter: function(e) {\r\n                if (!this._isMaxZoomLevel()) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    var value = this._updateTimeComponent(this.option(\"currentDate\"));\r\n                    this._dateValue(value, e)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this.option(optionName || \"value\");\r\n        if (this.option(\"dateSerializationFormat\")) {\r\n            return this.option(\"dateSerializationFormat\")\r\n        }\r\n        if (typeUtils.isNumeric(value)) {\r\n            return \"number\"\r\n        }\r\n        if (!typeUtils.isString(value)) {\r\n            return\r\n        }\r\n        return dateSerialization.getDateSerializationFormat(value)\r\n    },\r\n    _convertToDate: function(value, optionName) {\r\n        return dateSerialization.deserializeDate(value)\r\n    },\r\n    _dateValue: function(value, dxEvent) {\r\n        if (dxEvent) {\r\n            this._saveValueChangeEvent(dxEvent)\r\n        }\r\n        this._dateOption(\"value\", value)\r\n    },\r\n    _dateOption: function(optionName, optionValue) {\r\n        if (1 === arguments.length) {\r\n            return this._convertToDate(this.option(optionName), optionName)\r\n        }\r\n        var serializationFormat = this._getSerializationFormat(optionName);\r\n        this.option(optionName, dateSerialization.serializeDate(optionValue, serializationFormat))\r\n    },\r\n    _moveCurrentDate: function(offset, baseDate) {\r\n        var currentDate = baseDate || new Date(this.option(\"currentDate\"));\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var isCurrentDateInRange = inRange(currentDate, minDate, maxDate);\r\n        var dateForward = new Date(currentDate);\r\n        var dateBackward = new Date(currentDate);\r\n        var isDateForwardInRange = isCurrentDateInRange;\r\n        var isDateBackwardInRange = isCurrentDateInRange;\r\n        var step = offset || 1;\r\n        while (!offset && (isDateForwardInRange || isDateBackwardInRange) || offset && isDateForwardInRange) {\r\n            switch (zoomLevel) {\r\n                case ZOOM_LEVEL.MONTH:\r\n                    dateForward.setDate(dateForward.getDate() + step);\r\n                    dateBackward.setDate(dateBackward.getDate() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.YEAR:\r\n                    dateForward.setMonth(dateForward.getMonth() + step);\r\n                    dateBackward.setMonth(dateBackward.getMonth() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.DECADE:\r\n                    dateForward.setFullYear(dateForward.getFullYear() + step);\r\n                    dateBackward.setFullYear(dateBackward.getFullYear() - step);\r\n                    break;\r\n                case ZOOM_LEVEL.CENTURY:\r\n                    dateForward.setFullYear(dateForward.getFullYear() + 10 * step);\r\n                    dateBackward.setFullYear(dateBackward.getFullYear() - 10 * step)\r\n            }\r\n            if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            if (isDateBackwardInRange && !offset && !this._view.isDateDisabled(dateBackward)) {\r\n                currentDate = dateBackward;\r\n                break\r\n            }\r\n            isDateBackwardInRange = inRange(dateBackward, minDate, maxDate);\r\n            isDateForwardInRange = inRange(dateForward, minDate, maxDate)\r\n        }\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _moveToClosestAvailableDate: function(baseDate, offset) {\r\n        if (this._view.isDateDisabled(baseDate)) {\r\n            this._moveCurrentDate(offset, baseDate)\r\n        } else {\r\n            this.option(\"currentDate\", baseDate)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._correctZoomLevel();\r\n        this._initCurrentDate();\r\n        this._initActions()\r\n    },\r\n    _correctZoomLevel: function() {\r\n        var minZoomLevel = this.option(\"minZoomLevel\");\r\n        var maxZoomLevel = this.option(\"maxZoomLevel\");\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n            return\r\n        }\r\n        if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\r\n            this.option(\"zoomLevel\", maxZoomLevel)\r\n        } else {\r\n            if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n                this.option(\"zoomLevel\", minZoomLevel)\r\n            }\r\n        }\r\n    },\r\n    _initCurrentDate: function() {\r\n        var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _getNormalizedDate: function(date) {\r\n        date = dateUtils.normalizeDate(date, this._getMinDate(), this._getMaxDate());\r\n        return typeUtils.isDefined(date) ? new Date(date) : date\r\n    },\r\n    _initActions: function() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\");\r\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._defaultTemplates.cell = new FunctionTemplate(function(options) {\r\n            var data = options.model;\r\n            $(options.container).append($(\"<span>\").text(data && data.text || String(data)))\r\n        })\r\n    },\r\n    _updateCurrentDate: function(date) {\r\n        if (fx.isAnimating(this._$viewsWrapper)) {\r\n            fx.stop(this._$viewsWrapper, true)\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        if (min > max) {\r\n            this.option(\"currentDate\", new Date);\r\n            return\r\n        }\r\n        var normalizedDate = this._getNormalizedDate(date);\r\n        if (date.getTime() !== normalizedDate.getTime()) {\r\n            this.option(\"currentDate\", new Date(normalizedDate));\r\n            return\r\n        }\r\n        var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\r\n        if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\r\n            offset = 0\r\n        }\r\n        if (this._view && 0 !== offset && !this._suppressNavigation) {\r\n            this._navigate(offset, normalizedDate)\r\n        } else {\r\n            this._renderNavigator();\r\n            this._setViewContoured(normalizedDate);\r\n            this._updateAriaId(normalizedDate)\r\n        }\r\n    },\r\n    _setViewContoured: function(date) {\r\n        if (this.option(\"hasFocus\")(this._focusTarget())) {\r\n            this._view.option(\"contouredDate\", date)\r\n        }\r\n    },\r\n    _getMinDate: function() {\r\n        if (this.min) {\r\n            return this.min\r\n        }\r\n        this.min = this._dateOption(\"min\") || new Date(1e3, 0);\r\n        return this.min\r\n    },\r\n    _getMaxDate: function() {\r\n        if (this.max) {\r\n            return this.max\r\n        }\r\n        this.max = this._dateOption(\"max\") || new Date(3e3, 0);\r\n        return this.max\r\n    },\r\n    _getViewsOffset: function(startDate, endDate) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (zoomLevel === ZOOM_LEVEL.MONTH) {\r\n            return this._getMonthsOffset(startDate, endDate)\r\n        }\r\n        var zoomCorrection;\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.CENTURY:\r\n                zoomCorrection = 100;\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                zoomCorrection = 10;\r\n                break;\r\n            default:\r\n                zoomCorrection = 1\r\n        }\r\n        return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection)\r\n    },\r\n    _getMonthsOffset: function(startDate, endDate) {\r\n        var yearOffset = endDate.getFullYear() - startDate.getFullYear();\r\n        var monthOffset = endDate.getMonth() - startDate.getMonth();\r\n        return 12 * yearOffset + monthOffset\r\n    },\r\n    _waitRenderView: function(offset) {\r\n        if (this._alreadyViewRender) {\r\n            return\r\n        }\r\n        this._alreadyViewRender = true;\r\n        var date = this._getDateByOffset(offset * this._getRtlCorrection());\r\n        this._moveToClosestAvailableDate(date, offset);\r\n        setTimeout(function() {\r\n            this._alreadyViewRender = false\r\n        }.bind(this))\r\n    },\r\n    _getRtlCorrection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _getDateByOffset: function(offset, date) {\r\n        date = new Date(date || this.option(\"currentDate\"));\r\n        var currentDay = date.getDate();\r\n        var difference = dateUtils.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\r\n        date.setDate(1);\r\n        date.setMonth(date.getMonth() + difference);\r\n        var lastDay = dateUtils.getLastMonthDate(date).getDate();\r\n        date.setDate(currentDay > lastDay ? lastDay : currentDay);\r\n        return date\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        var $element = this.$element();\r\n        $element.addClass(CALENDAR_CLASS);\r\n        this._renderBody();\r\n        $element.append(this.$body);\r\n        this._renderViews();\r\n        this._renderNavigator();\r\n        $element.append(this._navigator.$element());\r\n        this._renderSwipeable();\r\n        this._renderFooter();\r\n        this._updateAriaSelected();\r\n        this._updateAriaId();\r\n        if (this._view.isDateDisabled(this.option(\"currentDate\"))) {\r\n            this._moveCurrentDate(0)\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._setViewContoured(this.option(\"currentDate\"))\r\n    },\r\n    _renderBody: function() {\r\n        if (!this._$viewsWrapper) {\r\n            this.$body = $(\"<div>\").addClass(CALENDAR_BODY_CLASS);\r\n            this._$viewsWrapper = $(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\r\n            this.$body.append(this._$viewsWrapper)\r\n        }\r\n    },\r\n    _renderViews: function() {\r\n        this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\r\n        var currentDate = this.option(\"currentDate\");\r\n        this._view = this._renderSpecificView(currentDate);\r\n        this._view.option(\"_keyboardProcessor\", this._viewKeyboardProcessor);\r\n        if (windowUtils.hasWindow()) {\r\n            var beforeDate = this._getDateByOffset(-1, currentDate);\r\n            this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\r\n            var afterDate = this._getDateByOffset(1, currentDate);\r\n            afterDate.setDate(1);\r\n            this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null\r\n        }\r\n        this._translateViews()\r\n    },\r\n    _renderSpecificView: function(date) {\r\n        var specificView = Views[this.option(\"zoomLevel\")];\r\n        var $view = $(\"<div>\").appendTo(this._$viewsWrapper);\r\n        var config = this._viewConfig(date);\r\n        return new specificView($view, config)\r\n    },\r\n    _viewConfig: function(date) {\r\n        var disabledDates = this.option(\"disabledDates\");\r\n        disabledDates = typeUtils.isFunction(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\r\n        return {\r\n            date: date,\r\n            min: this._getMinDate(),\r\n            max: this._getMaxDate(),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this._dateOption(\"value\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            disabled: this.option(\"disabled\"),\r\n            tabIndex: void 0,\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            disabledDates: disabledDates,\r\n            onCellClick: this._cellClickHandler.bind(this),\r\n            cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\r\n            allowValueSelection: this._isMaxZoomLevel()\r\n        }\r\n    },\r\n    _injectComponent: function(func) {\r\n        var that = this;\r\n        return function(params) {\r\n            extend(params, {\r\n                component: that\r\n            });\r\n            return func(params)\r\n        }\r\n    },\r\n    _isViewAvailable: function(date) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var min = dateUtils.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\r\n        var max = dateUtils.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\r\n        return dateUtils.dateInRange(date, min, max)\r\n    },\r\n    _translateViews: function() {\r\n        translator.move(this._view.$element(), {\r\n            left: 0,\r\n            top: 0\r\n        });\r\n        this._beforeView && translator.move(this._beforeView.$element(), {\r\n            left: this._getViewPosition(-1),\r\n            top: 0\r\n        });\r\n        this._afterView && translator.move(this._afterView.$element(), {\r\n            left: this._getViewPosition(1),\r\n            top: 0\r\n        })\r\n    },\r\n    _getViewPosition: function(coefficient) {\r\n        var rtlCorrection = this.option(\"rtlEnabled\") && !browser.msie ? -1 : 1;\r\n        return 100 * coefficient * rtlCorrection + \"%\"\r\n    },\r\n    _cellClickHandler: function(e) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        var isMaxZoomLevel = this._isMaxZoomLevel();\r\n        if (nextView && !isMaxZoomLevel) {\r\n            this._navigateDown(e.event.currentTarget)\r\n        } else {\r\n            var newValue = this._updateTimeComponent(e.value);\r\n            this._dateValue(newValue, e.event);\r\n            this._cellClickAction(e)\r\n        }\r\n    },\r\n    _updateTimeComponent: function(date) {\r\n        var result = new Date(date);\r\n        var currentValue = this._dateOption(\"value\");\r\n        if (currentValue) {\r\n            result.setHours(currentValue.getHours());\r\n            result.setMinutes(currentValue.getMinutes());\r\n            result.setSeconds(currentValue.getSeconds());\r\n            result.setMilliseconds(currentValue.getMilliseconds())\r\n        }\r\n        return result\r\n    },\r\n    _isMaxZoomLevel: function() {\r\n        return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\")\r\n    },\r\n    _navigateDown: function(cell) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (this._isMaxZoomLevel()) {\r\n            return\r\n        }\r\n        var nextView = dateUtils.getViewDown(zoomLevel);\r\n        if (!nextView) {\r\n            return\r\n        }\r\n        var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\r\n        if (cell) {\r\n            newCurrentDate = $(cell).data(CALENDAR_DATE_VALUE_KEY)\r\n        }\r\n        this._isOtherViewCellClicked = true;\r\n        this.option(\"currentDate\", newCurrentDate);\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._isOtherViewCellClicked = false;\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._setViewContoured(this._getNormalizedDate(newCurrentDate))\r\n    },\r\n    _renderNavigator: function() {\r\n        if (!this._navigator) {\r\n            this._navigator = new Navigator($(\"<div>\"), this._navigatorConfig())\r\n        }\r\n        this._navigator.option(\"text\", this._view.getNavigatorCaption());\r\n        this._updateButtonsVisibility()\r\n    },\r\n    _navigatorConfig: function() {\r\n        return {\r\n            text: this._view.getNavigatorCaption(),\r\n            onClick: this._navigatorClickHandler.bind(this),\r\n            onCaptionClick: this._navigateUp.bind(this),\r\n            rtlEnabled: this.option(\"rtlEnabled\")\r\n        }\r\n    },\r\n    _navigatorClickHandler: function(e) {\r\n        var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\r\n        this._moveToClosestAvailableDate(currentDate, 1 * e.direction);\r\n        this._updateNavigatorCaption(-e.direction * this._getRtlCorrection())\r\n    },\r\n    _navigateUp: function() {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = dateUtils.getViewUp(zoomLevel);\r\n        if (!nextView || this._isMinZoomLevel(zoomLevel)) {\r\n            return\r\n        }\r\n        var contouredDate = this._view.option(\"contouredDate\");\r\n        this.option(\"zoomLevel\", nextView);\r\n        this.option(\"currentDate\", contouredDate || this._view.option(\"date\"));\r\n        this._renderNavigator();\r\n        this._animateShowView().done(function() {\r\n            this._setViewContoured(contouredDate)\r\n        }.bind(this))\r\n    },\r\n    _isMinZoomLevel: function(zoomLevel) {\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        return dateUtils.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel\r\n    },\r\n    _updateButtonsVisibility: function() {\r\n        this._navigator.toggleButton(\"next\", !typeUtils.isDefined(this._getRequiredView(\"next\")));\r\n        this._navigator.toggleButton(\"prev\", !typeUtils.isDefined(this._getRequiredView(\"prev\")))\r\n    },\r\n    _renderSwipeable: function() {\r\n        if (!this._swipeable) {\r\n            this._swipeable = this._createComponent(this.$element(), Swipeable, {\r\n                onStart: this._swipeStartHandler.bind(this),\r\n                onUpdated: this._swipeUpdateHandler.bind(this),\r\n                onEnd: this._swipeEndHandler.bind(this),\r\n                itemSizeFunc: this._viewWidth.bind(this)\r\n            })\r\n        }\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        fx.stop(this._$viewsWrapper, true);\r\n        e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\r\n        e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0\r\n    },\r\n    _getRequiredView: function(name) {\r\n        var view;\r\n        var isRtl = this.option(\"rtlEnabled\");\r\n        if (\"next\" === name) {\r\n            view = isRtl ? this._beforeView : this._afterView\r\n        } else {\r\n            if (\"prev\" === name) {\r\n                view = isRtl ? this._afterView : this._beforeView\r\n            }\r\n        }\r\n        return view\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var offset = e.event.offset;\r\n        translator.move(this._$viewsWrapper, {\r\n            left: offset * this._viewWidth(),\r\n            top: 0\r\n        });\r\n        this._updateNavigatorCaption(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset;\r\n        var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\r\n        if (0 === moveOffset) {\r\n            this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\r\n            return\r\n        }\r\n        var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\r\n        if (this._isDateInInvalidRange(date)) {\r\n            if (moveOffset >= 0) {\r\n                date = new Date(this._getMinDate())\r\n            } else {\r\n                date = new Date(this._getMaxDate())\r\n            }\r\n        }\r\n        this.option(\"currentDate\", date)\r\n    },\r\n    _viewWidth: function() {\r\n        if (!this._viewWidthValue) {\r\n            this._viewWidthValue = this.$element().width()\r\n        }\r\n        return this._viewWidthValue\r\n    },\r\n    _updateNavigatorCaption: function(offset) {\r\n        offset *= this._getRtlCorrection();\r\n        var view = this._view;\r\n        if (offset > .5 && this._beforeView) {\r\n            view = this._beforeView\r\n        } else {\r\n            if (offset < -.5 && this._afterView) {\r\n                view = this._afterView\r\n            }\r\n        }\r\n        this._navigator.option(\"text\", view.getNavigatorCaption())\r\n    },\r\n    _isDateInInvalidRange: function(date) {\r\n        if (this._view.isBoundary(date)) {\r\n            return\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        var normalizedDate = dateUtils.normalizeDate(date, min, max);\r\n        return normalizedDate === min || normalizedDate === max\r\n    },\r\n    _renderFooter: function() {\r\n        var showTodayButton = this.option(\"showTodayButton\");\r\n        if (showTodayButton) {\r\n            var $todayButton = this._createComponent($(\"<a>\"), Button, {\r\n                focusStateEnabled: false,\r\n                text: messageLocalization.format(\"dxCalendar-todayButtonText\"),\r\n                onClick: function() {\r\n                    this._toTodayView()\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\r\n            this._$footer = $(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\r\n            this.$element().append(this._$footer)\r\n        }\r\n        this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton)\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = $(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        var dateValue = this._convertToDate(value);\r\n        this._getSubmitElement().val(dateSerialization.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN))\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _animateShowView: function() {\r\n        fx.stop(this._view.$element(), true);\r\n        return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise()\r\n    },\r\n    _popAnimationView: function(view, from, to, duration) {\r\n        return fx.animate(view.$element(), {\r\n            type: \"pop\",\r\n            from: {\r\n                scale: from,\r\n                opacity: from\r\n            },\r\n            to: {\r\n                scale: to,\r\n                opacity: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _navigate: function(offset, value) {\r\n        if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\r\n            var newView = this._renderSpecificView(value);\r\n            if (offset > 0) {\r\n                this._afterView && this._afterView.$element().remove();\r\n                this._afterView = newView\r\n            } else {\r\n                this._beforeView && this._beforeView.$element().remove();\r\n                this._beforeView = newView\r\n            }\r\n            this._translateViews()\r\n        }\r\n        var rtlCorrection = this._getRtlCorrection();\r\n        var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\r\n        var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\r\n        var viewsWrapperPosition = this._$viewsWrapper.position().left;\r\n        if (viewsWrapperPosition !== endPosition) {\r\n            if (this._preventViewChangeAnimation) {\r\n                this._wrapperAnimationEndHandler(offset, value)\r\n            } else {\r\n                this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value))\r\n            }\r\n        }\r\n    },\r\n    _animateWrapper: function(to, duration) {\r\n        return fx.animate(this._$viewsWrapper, {\r\n            type: \"slide\",\r\n            from: {\r\n                left: this._$viewsWrapper.position().left\r\n            },\r\n            to: {\r\n                left: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _toTodayView: function() {\r\n        var today = new Date;\r\n        if (this._isMaxZoomLevel()) {\r\n            this._dateOption(\"value\", today);\r\n            return\r\n        }\r\n        this._preventViewChangeAnimation = true;\r\n        this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\r\n        this._dateOption(\"value\", today);\r\n        this._animateShowView();\r\n        this._preventViewChangeAnimation = false\r\n    },\r\n    _wrapperAnimationEndHandler: function(offset, newDate) {\r\n        this._rearrangeViews(offset);\r\n        this._translateViews();\r\n        this._resetLocation();\r\n        this._renderNavigator();\r\n        this._setViewContoured(newDate);\r\n        this._updateAriaId(newDate)\r\n    },\r\n    _rearrangeViews: function(offset) {\r\n        if (0 === offset) {\r\n            return\r\n        }\r\n        var viewOffset;\r\n        var viewToCreateKey;\r\n        var viewToRemoveKey;\r\n        if (offset < 0) {\r\n            viewOffset = 1;\r\n            viewToCreateKey = \"_beforeView\";\r\n            viewToRemoveKey = \"_afterView\"\r\n        } else {\r\n            viewOffset = -1;\r\n            viewToCreateKey = \"_afterView\";\r\n            viewToRemoveKey = \"_beforeView\"\r\n        }\r\n        if (!this[viewToCreateKey]) {\r\n            return\r\n        }\r\n        var destinationDate = this[viewToCreateKey].option(\"date\");\r\n        if (this[viewToRemoveKey]) {\r\n            this[viewToRemoveKey].$element().remove()\r\n        }\r\n        if (offset === viewOffset) {\r\n            this[viewToRemoveKey] = this._view\r\n        } else {\r\n            this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\r\n            this._view.$element().remove()\r\n        }\r\n        this._view = this[viewToCreateKey];\r\n        var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\r\n        this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null\r\n    },\r\n    _resetLocation: function() {\r\n        translator.move(this._$viewsWrapper, {\r\n            left: 0,\r\n            top: 0\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._clearViewWidthCache();\r\n        delete this._$viewsWrapper;\r\n        delete this._navigator;\r\n        delete this._$footer\r\n    },\r\n    _clearViewWidthCache: function() {\r\n        delete this._viewWidthValue\r\n    },\r\n    _disposeViews: function() {\r\n        this._view.$element().remove();\r\n        this._beforeView && this._beforeView.$element().remove();\r\n        this._afterView && this._afterView.$element().remove();\r\n        delete this._view;\r\n        delete this._beforeView;\r\n        delete this._afterView\r\n    },\r\n    _refreshViews: function() {\r\n        this._disposeViews();\r\n        this._renderViews()\r\n    },\r\n    _visibilityChanged: function() {\r\n        this._translateViews()\r\n    },\r\n    _focusInHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", this.option(\"currentDate\"))\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", null)\r\n    },\r\n    _updateViewsValue: function(value) {\r\n        var newValue = value ? new Date(value) : null;\r\n        this._view.option(\"value\", newValue);\r\n        this._beforeView && this._beforeView.option(\"value\", newValue);\r\n        this._afterView && this._afterView.option(\"value\", newValue)\r\n    },\r\n    _updateAriaSelected: function(value, previousValue) {\r\n        value = value || this._dateOption(\"value\");\r\n        var $prevSelectedCell = this._view._getCellByDate(previousValue);\r\n        var $selectedCell = this._view._getCellByDate(value);\r\n        this.setAria(\"selected\", void 0, $prevSelectedCell);\r\n        this.setAria(\"selected\", true, $selectedCell);\r\n        if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\r\n            this._updateAriaId(value)\r\n        }\r\n    },\r\n    _updateAriaId: function(value) {\r\n        value = value || this.option(\"currentDate\");\r\n        var ariaId = \"dx-\" + new Guid;\r\n        var $newCell = this._view._getCellByDate(value);\r\n        this.setAria(\"id\", ariaId, $newCell);\r\n        this.setAria(\"activedescendant\", ariaId);\r\n        this._onContouredChanged(ariaId)\r\n    },\r\n    _suppressingNavigation: function(callback, args) {\r\n        this._suppressNavigation = true;\r\n        callback.apply(this, args);\r\n        delete this._suppressNavigation\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._clearViewWidthCache();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this.min = void 0;\r\n                this.max = void 0;\r\n                this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._refreshViews();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"currentDate\":\r\n                this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\r\n                this._updateCurrentDate(value);\r\n                break;\r\n            case \"zoomLevel\":\r\n                this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\r\n                this._correctZoomLevel();\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                this._updateAriaId();\r\n                break;\r\n            case \"minZoomLevel\":\r\n            case \"maxZoomLevel\":\r\n                this._correctZoomLevel();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"value\":\r\n                value = this._convertToDate(value);\r\n                previousValue = this._convertToDate(previousValue);\r\n                this._updateAriaSelected(value, previousValue);\r\n                this.option(\"currentDate\", typeUtils.isDefined(value) ? new Date(value) : new Date);\r\n                this._updateViewsValue(value);\r\n                this._setSubmitValue(value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"disabled\":\r\n                this._view.option(\"disabled\", value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"onCellClick\":\r\n                this._view.option(\"onCellClick\", value);\r\n                break;\r\n            case \"onContouredChanged\":\r\n                this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\r\n                break;\r\n            case \"disabledDates\":\r\n            case \"dateSerializationFormat\":\r\n            case \"cellTemplate\":\r\n            case \"showTodayButton\":\r\n                this._invalidate();\r\n                break;\r\n            case \"hasFocus\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nregisterComponent(\"dxCalendar\", Calendar);\r\nmodule.exports = Calendar;\r\n"]},"metadata":{},"sourceType":"script"}