{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_view.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar Editor = require(\"../editor/editor\");\n\nvar DateViewRoller = require(\"./ui.date_view_roller\");\n\nvar dateUtils = require(\"../../core/utils/date\");\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar uiDateUtils = require(\"./ui.date_utils\");\n\nvar registerComponent = require(\"../../core/component_registrator\");\n\nvar dateLocalization = require(\"../../localization/date\");\n\nvar DATEVIEW_CLASS = \"dx-dateview\";\nvar DATEVIEW_COMPACT_CLASS = \"dx-dateview-compact\";\nvar DATEVIEW_WRAPPER_CLASS = \"dx-dateview-wrapper\";\nvar DATEVIEW_ROLLER_CONTAINER_CLASS = \"dx-dateview-rollers\";\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\nvar TYPE = {\n  date: \"date\",\n  datetime: \"datetime\",\n  time: \"time\"\n};\nvar ROLLER_TYPE = {\n  year: \"year\",\n  month: \"month\",\n  day: \"day\",\n  hours: \"hours\"\n};\nvar DateView = Editor.inherit({\n  _valueOption: function _valueOption() {\n    var value = this.option(\"value\");\n    var date = new Date(value);\n    return !value || isNaN(date) ? this._getDefaultDate() : date;\n  },\n  _getDefaultDate: function _getDefaultDate() {\n    var date = new Date();\n\n    if (this.option(\"type\") === TYPE.date) {\n      return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n    return date;\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      minDate: uiDateUtils.MIN_DATEVIEW_DEFAULT_DATE,\n      maxDate: uiDateUtils.MAX_DATEVIEW_DEFAULT_DATE,\n      type: TYPE.date,\n      value: new Date(),\n      applyCompactClass: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device(_device) {\n        return \"desktop\" !== _device.deviceType;\n      },\n      options: {\n        applyCompactClass: true\n      }\n    }]);\n  },\n  _render: function _render() {\n    this.callBase();\n    this.$element().addClass(DATEVIEW_CLASS);\n\n    this._toggleFormatClasses(this.option(\"type\"));\n\n    this._toggleCompactClass();\n  },\n  _toggleFormatClasses: function _toggleFormatClasses(currentFormat, previousFormat) {\n    this.$element().addClass(DATEVIEW_CLASS + \"-\" + currentFormat);\n    previousFormat && this.$element().removeClass(DATEVIEW_CLASS + \"-\" + previousFormat);\n  },\n  _toggleCompactClass: function _toggleCompactClass() {\n    this.$element().toggleClass(DATEVIEW_COMPACT_CLASS, this.option(\"applyCompactClass\"));\n  },\n  _wrapper: function _wrapper() {\n    return this._$wrapper;\n  },\n  _renderContentImpl: function _renderContentImpl() {\n    this._$wrapper = $(\"<div>\").addClass(DATEVIEW_WRAPPER_CLASS);\n\n    this._renderRollers();\n\n    this._$wrapper.appendTo(this.$element());\n  },\n  _renderRollers: function _renderRollers() {\n    if (!this._$rollersContainer) {\n      this._$rollersContainer = $(\"<div>\").addClass(DATEVIEW_ROLLER_CONTAINER_CLASS);\n    }\n\n    this._$rollersContainer.empty();\n\n    this._createRollerConfigs();\n\n    this._rollers = {};\n    var that = this;\n    each(that._rollerConfigs, function (name) {\n      var $roller = $(\"<div>\").appendTo(that._$rollersContainer).addClass(DATEVIEW_ROLLER_CLASS + \"-\" + that._rollerConfigs[name].type);\n      that._rollers[that._rollerConfigs[name].type] = that._createComponent($roller, DateViewRoller, {\n        items: that._rollerConfigs[name].displayItems,\n        selectedIndex: that._rollerConfigs[name].selectedIndex,\n        showScrollbar: false,\n        onStart: function onStart(e) {\n          var roller = e.component;\n\n          roller._toggleActive(true);\n\n          that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n        },\n        onEnd: function onEnd(e) {\n          var roller = e.component;\n\n          roller._toggleActive(false);\n        },\n        onClick: function onClick(e) {\n          var roller = e.component;\n\n          roller._toggleActive(true);\n\n          that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n\n          that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n\n          roller._toggleActive(false);\n        },\n        onSelectedIndexChanged: function onSelectedIndexChanged(e) {\n          var roller = e.component;\n\n          that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\n        }\n      });\n    });\n\n    that._$rollersContainer.appendTo(that._wrapper());\n  },\n  _createRollerConfigs: function _createRollerConfigs(type) {\n    var that = this;\n    type = type || that.option(\"type\");\n    that._rollerConfigs = {};\n    dateLocalization.getFormatParts(uiDateUtils.FORMATS_MAP[type]).forEach(function (partName) {\n      that._createRollerConfig(partName);\n    });\n  },\n  _createRollerConfig: function _createRollerConfig(componentName) {\n    var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\n\n    var valueRange = this._calculateRollerConfigValueRange(componentName);\n\n    var startValue = valueRange.startValue;\n    var endValue = valueRange.endValue;\n    var formatter = componentInfo.formatter;\n\n    var curDate = this._getCurrentDate();\n\n    var config = {\n      type: componentName,\n      setValue: componentInfo.setter,\n      valueItems: [],\n      displayItems: [],\n      getIndex: function getIndex(value) {\n        return value[componentInfo.getter]() - startValue;\n      }\n    };\n\n    for (var i = startValue; i <= endValue; i++) {\n      config.valueItems.push(i);\n      config.displayItems.push(formatter(i, curDate));\n    }\n\n    config.selectedIndex = config.getIndex(curDate);\n    this._rollerConfigs[componentName] = config;\n  },\n  _setActiveRoller: function _setActiveRoller(currentRoller) {\n    var activeRoller = currentRoller && this._rollers[currentRoller.type];\n    each(this._rollers, function () {\n      this.toggleActiveState(this === activeRoller);\n    });\n  },\n  _updateRollersPosition: function _updateRollersPosition() {\n    var that = this;\n    each(this._rollers, function (type) {\n      var correctIndex = that._rollerConfigs[type].getIndex(that._getCurrentDate());\n\n      this.option(\"selectedIndex\", correctIndex);\n    });\n  },\n  _setRollerState: function _setRollerState(roller, selectedIndex) {\n    if (selectedIndex !== roller.selectedIndex) {\n      var rollerValue = roller.valueItems[selectedIndex];\n      var setValue = roller.setValue;\n      var currentValue = new Date(this._getCurrentDate());\n      var currentDate = currentValue.getDate();\n      var minDate = this.option(\"minDate\");\n      var maxDate = this.option(\"maxDate\");\n\n      if (roller.type === ROLLER_TYPE.month) {\n        currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(currentValue.getFullYear(), rollerValue));\n      } else {\n        if (roller.type === ROLLER_TYPE.year) {\n          currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(rollerValue, currentValue.getMonth()));\n        }\n      }\n\n      currentValue.setDate(currentDate);\n      currentValue[setValue](rollerValue);\n      var normalizedDate = dateUtils.normalizeDate(currentValue, minDate, maxDate);\n      currentValue = uiDateUtils.mergeDates(normalizedDate, currentValue, \"time\");\n      currentValue = dateUtils.normalizeDate(currentValue, minDate, maxDate);\n      this.option(\"value\", currentValue);\n      roller.selectedIndex = selectedIndex;\n    }\n\n    if (roller.type === ROLLER_TYPE.year) {\n      this._refreshRollers();\n    }\n\n    if (roller.type === ROLLER_TYPE.month) {\n      this._refreshRoller(ROLLER_TYPE.day);\n\n      this._refreshRoller(ROLLER_TYPE.hours);\n    }\n  },\n  _refreshRoller: function _refreshRoller(rollerType) {\n    var roller = this._rollers[rollerType];\n\n    if (roller) {\n      this._createRollerConfig(rollerType);\n\n      var rollerConfig = this._rollerConfigs[rollerType];\n\n      if (rollerType === ROLLER_TYPE.day || rollerConfig.displayItems.toString() !== roller.option(\"items\").toString()) {\n        roller.option({\n          items: rollerConfig.displayItems,\n          selectedIndex: rollerConfig.selectedIndex\n        });\n      }\n    }\n  },\n  _getCurrentDate: function _getCurrentDate() {\n    var curDate = this._valueOption();\n\n    var minDate = this.option(\"minDate\");\n    var maxDate = this.option(\"maxDate\");\n    return dateUtils.normalizeDate(curDate, minDate, maxDate);\n  },\n  _calculateRollerConfigValueRange: function _calculateRollerConfigValueRange(componentName) {\n    var curDate = this._getCurrentDate();\n\n    var minDate = this.option(\"minDate\");\n    var maxDate = this.option(\"maxDate\");\n    var minYear = dateUtils.sameYear(curDate, minDate);\n    var minMonth = minYear && curDate.getMonth() === minDate.getMonth();\n    var maxYear = dateUtils.sameYear(curDate, maxDate);\n    var maxMonth = maxYear && curDate.getMonth() === maxDate.getMonth();\n    var minHour = minMonth && curDate.getDate() === minDate.getDate();\n    var maxHour = maxMonth && curDate.getDate() === maxDate.getDate();\n    var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\n    var startValue = componentInfo.startValue;\n    var endValue = componentInfo.endValue;\n\n    if (componentName === ROLLER_TYPE.year) {\n      startValue = minDate.getFullYear();\n      endValue = maxDate.getFullYear();\n    }\n\n    if (componentName === ROLLER_TYPE.month) {\n      if (minYear) {\n        startValue = minDate.getMonth();\n      }\n\n      if (maxYear) {\n        endValue = maxDate.getMonth();\n      }\n    }\n\n    if (componentName === ROLLER_TYPE.day) {\n      endValue = uiDateUtils.getMaxMonthDay(curDate.getFullYear(), curDate.getMonth());\n\n      if (minYear && minMonth) {\n        startValue = minDate.getDate();\n      }\n\n      if (maxYear && maxMonth) {\n        endValue = maxDate.getDate();\n      }\n    }\n\n    if (componentName === ROLLER_TYPE.hours) {\n      startValue = minHour ? minDate.getHours() : startValue;\n      endValue = maxHour ? maxDate.getHours() : endValue;\n    }\n\n    return {\n      startValue: startValue,\n      endValue: endValue\n    };\n  },\n  _refreshRollers: function _refreshRollers() {\n    this._refreshRoller(ROLLER_TYPE.month);\n\n    this._refreshRoller(ROLLER_TYPE.day);\n\n    this._refreshRoller(ROLLER_TYPE.hours);\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"minDate\":\n      case \"maxDate\":\n      case \"type\":\n        this._renderRollers();\n\n        this._toggleFormatClasses(args.value, args.previousValue);\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (args.value) {\n          this._renderRollers();\n        }\n\n        break;\n\n      case \"value\":\n        this.option(\"value\", this._valueOption());\n\n        this._refreshRollers();\n\n        this._updateRollersPosition();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _clean: function _clean() {\n    this.callBase();\n    delete this._$rollersContainer;\n  },\n  _dispose: function _dispose() {\n    clearTimeout(this._deferredRenderDayTimeout);\n    clearTimeout(this._deferredRenderMonthTimeout);\n    this.callBase();\n  }\n});\nregisterComponent(\"dxDateView\", DateView);\nmodule.exports = DateView;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/date_box/ui.date_view.js"],"names":["$","require","Editor","DateViewRoller","dateUtils","each","extend","uiDateUtils","registerComponent","dateLocalization","DATEVIEW_CLASS","DATEVIEW_COMPACT_CLASS","DATEVIEW_WRAPPER_CLASS","DATEVIEW_ROLLER_CONTAINER_CLASS","DATEVIEW_ROLLER_CLASS","TYPE","date","datetime","time","ROLLER_TYPE","year","month","day","hours","DateView","inherit","_valueOption","value","option","Date","isNaN","_getDefaultDate","getFullYear","getMonth","getDate","_getDefaultOptions","callBase","minDate","MIN_DATEVIEW_DEFAULT_DATE","maxDate","MAX_DATEVIEW_DEFAULT_DATE","type","applyCompactClass","_defaultOptionsRules","concat","device","_device","deviceType","options","_render","$element","addClass","_toggleFormatClasses","_toggleCompactClass","currentFormat","previousFormat","removeClass","toggleClass","_wrapper","_$wrapper","_renderContentImpl","_renderRollers","appendTo","_$rollersContainer","empty","_createRollerConfigs","_rollers","that","_rollerConfigs","name","$roller","_createComponent","items","displayItems","selectedIndex","showScrollbar","onStart","e","roller","component","_toggleActive","_setActiveRoller","onEnd","onClick","_setRollerState","onSelectedIndexChanged","getFormatParts","FORMATS_MAP","forEach","partName","_createRollerConfig","componentName","componentInfo","DATE_COMPONENTS_INFO","valueRange","_calculateRollerConfigValueRange","startValue","endValue","formatter","curDate","_getCurrentDate","config","setValue","setter","valueItems","getIndex","getter","i","push","currentRoller","activeRoller","toggleActiveState","_updateRollersPosition","correctIndex","rollerValue","currentValue","currentDate","Math","min","getMaxMonthDay","setDate","normalizedDate","normalizeDate","mergeDates","_refreshRollers","_refreshRoller","rollerType","rollerConfig","toString","minYear","sameYear","minMonth","maxYear","maxMonth","minHour","maxHour","getHours","_optionChanged","args","previousValue","_clean","_dispose","clearTimeout","_deferredRenderDayTimeout","_deferredRenderMonthTimeout","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_view.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar Editor = require(\"../editor/editor\");\r\nvar DateViewRoller = require(\"./ui.date_view_roller\");\r\nvar dateUtils = require(\"../../core/utils/date\");\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar uiDateUtils = require(\"./ui.date_utils\");\r\nvar registerComponent = require(\"../../core/component_registrator\");\r\nvar dateLocalization = require(\"../../localization/date\");\r\nvar DATEVIEW_CLASS = \"dx-dateview\";\r\nvar DATEVIEW_COMPACT_CLASS = \"dx-dateview-compact\";\r\nvar DATEVIEW_WRAPPER_CLASS = \"dx-dateview-wrapper\";\r\nvar DATEVIEW_ROLLER_CONTAINER_CLASS = \"dx-dateview-rollers\";\r\nvar DATEVIEW_ROLLER_CLASS = \"dx-dateviewroller\";\r\nvar TYPE = {\r\n    date: \"date\",\r\n    datetime: \"datetime\",\r\n    time: \"time\"\r\n};\r\nvar ROLLER_TYPE = {\r\n    year: \"year\",\r\n    month: \"month\",\r\n    day: \"day\",\r\n    hours: \"hours\"\r\n};\r\nvar DateView = Editor.inherit({\r\n    _valueOption: function() {\r\n        var value = this.option(\"value\");\r\n        var date = new Date(value);\r\n        return !value || isNaN(date) ? this._getDefaultDate() : date\r\n    },\r\n    _getDefaultDate: function() {\r\n        var date = new Date;\r\n        if (this.option(\"type\") === TYPE.date) {\r\n            return new Date(date.getFullYear(), date.getMonth(), date.getDate())\r\n        }\r\n        return date\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            minDate: uiDateUtils.MIN_DATEVIEW_DEFAULT_DATE,\r\n            maxDate: uiDateUtils.MAX_DATEVIEW_DEFAULT_DATE,\r\n            type: TYPE.date,\r\n            value: new Date,\r\n            applyCompactClass: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                return \"desktop\" !== _device.deviceType\r\n            },\r\n            options: {\r\n                applyCompactClass: true\r\n            }\r\n        }])\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(DATEVIEW_CLASS);\r\n        this._toggleFormatClasses(this.option(\"type\"));\r\n        this._toggleCompactClass()\r\n    },\r\n    _toggleFormatClasses: function(currentFormat, previousFormat) {\r\n        this.$element().addClass(DATEVIEW_CLASS + \"-\" + currentFormat);\r\n        previousFormat && this.$element().removeClass(DATEVIEW_CLASS + \"-\" + previousFormat)\r\n    },\r\n    _toggleCompactClass: function() {\r\n        this.$element().toggleClass(DATEVIEW_COMPACT_CLASS, this.option(\"applyCompactClass\"))\r\n    },\r\n    _wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _renderContentImpl: function() {\r\n        this._$wrapper = $(\"<div>\").addClass(DATEVIEW_WRAPPER_CLASS);\r\n        this._renderRollers();\r\n        this._$wrapper.appendTo(this.$element())\r\n    },\r\n    _renderRollers: function() {\r\n        if (!this._$rollersContainer) {\r\n            this._$rollersContainer = $(\"<div>\").addClass(DATEVIEW_ROLLER_CONTAINER_CLASS)\r\n        }\r\n        this._$rollersContainer.empty();\r\n        this._createRollerConfigs();\r\n        this._rollers = {};\r\n        var that = this;\r\n        each(that._rollerConfigs, function(name) {\r\n            var $roller = $(\"<div>\").appendTo(that._$rollersContainer).addClass(DATEVIEW_ROLLER_CLASS + \"-\" + that._rollerConfigs[name].type);\r\n            that._rollers[that._rollerConfigs[name].type] = that._createComponent($roller, DateViewRoller, {\r\n                items: that._rollerConfigs[name].displayItems,\r\n                selectedIndex: that._rollerConfigs[name].selectedIndex,\r\n                showScrollbar: false,\r\n                onStart: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(true);\r\n                    that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"))\r\n                },\r\n                onEnd: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(false)\r\n                },\r\n                onClick: function(e) {\r\n                    var roller = e.component;\r\n                    roller._toggleActive(true);\r\n                    that._setActiveRoller(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\r\n                    that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"));\r\n                    roller._toggleActive(false)\r\n                },\r\n                onSelectedIndexChanged: function(e) {\r\n                    var roller = e.component;\r\n                    that._setRollerState(that._rollerConfigs[name], roller.option(\"selectedIndex\"))\r\n                }\r\n            })\r\n        });\r\n        that._$rollersContainer.appendTo(that._wrapper())\r\n    },\r\n    _createRollerConfigs: function(type) {\r\n        var that = this;\r\n        type = type || that.option(\"type\");\r\n        that._rollerConfigs = {};\r\n        dateLocalization.getFormatParts(uiDateUtils.FORMATS_MAP[type]).forEach(function(partName) {\r\n            that._createRollerConfig(partName)\r\n        })\r\n    },\r\n    _createRollerConfig: function(componentName) {\r\n        var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\r\n        var valueRange = this._calculateRollerConfigValueRange(componentName);\r\n        var startValue = valueRange.startValue;\r\n        var endValue = valueRange.endValue;\r\n        var formatter = componentInfo.formatter;\r\n        var curDate = this._getCurrentDate();\r\n        var config = {\r\n            type: componentName,\r\n            setValue: componentInfo.setter,\r\n            valueItems: [],\r\n            displayItems: [],\r\n            getIndex: function(value) {\r\n                return value[componentInfo.getter]() - startValue\r\n            }\r\n        };\r\n        for (var i = startValue; i <= endValue; i++) {\r\n            config.valueItems.push(i);\r\n            config.displayItems.push(formatter(i, curDate))\r\n        }\r\n        config.selectedIndex = config.getIndex(curDate);\r\n        this._rollerConfigs[componentName] = config\r\n    },\r\n    _setActiveRoller: function(currentRoller) {\r\n        var activeRoller = currentRoller && this._rollers[currentRoller.type];\r\n        each(this._rollers, function() {\r\n            this.toggleActiveState(this === activeRoller)\r\n        })\r\n    },\r\n    _updateRollersPosition: function() {\r\n        var that = this;\r\n        each(this._rollers, function(type) {\r\n            var correctIndex = that._rollerConfigs[type].getIndex(that._getCurrentDate());\r\n            this.option(\"selectedIndex\", correctIndex)\r\n        })\r\n    },\r\n    _setRollerState: function(roller, selectedIndex) {\r\n        if (selectedIndex !== roller.selectedIndex) {\r\n            var rollerValue = roller.valueItems[selectedIndex];\r\n            var setValue = roller.setValue;\r\n            var currentValue = new Date(this._getCurrentDate());\r\n            var currentDate = currentValue.getDate();\r\n            var minDate = this.option(\"minDate\");\r\n            var maxDate = this.option(\"maxDate\");\r\n            if (roller.type === ROLLER_TYPE.month) {\r\n                currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(currentValue.getFullYear(), rollerValue))\r\n            } else {\r\n                if (roller.type === ROLLER_TYPE.year) {\r\n                    currentDate = Math.min(currentDate, uiDateUtils.getMaxMonthDay(rollerValue, currentValue.getMonth()))\r\n                }\r\n            }\r\n            currentValue.setDate(currentDate);\r\n            currentValue[setValue](rollerValue);\r\n            var normalizedDate = dateUtils.normalizeDate(currentValue, minDate, maxDate);\r\n            currentValue = uiDateUtils.mergeDates(normalizedDate, currentValue, \"time\");\r\n            currentValue = dateUtils.normalizeDate(currentValue, minDate, maxDate);\r\n            this.option(\"value\", currentValue);\r\n            roller.selectedIndex = selectedIndex\r\n        }\r\n        if (roller.type === ROLLER_TYPE.year) {\r\n            this._refreshRollers()\r\n        }\r\n        if (roller.type === ROLLER_TYPE.month) {\r\n            this._refreshRoller(ROLLER_TYPE.day);\r\n            this._refreshRoller(ROLLER_TYPE.hours)\r\n        }\r\n    },\r\n    _refreshRoller: function(rollerType) {\r\n        var roller = this._rollers[rollerType];\r\n        if (roller) {\r\n            this._createRollerConfig(rollerType);\r\n            var rollerConfig = this._rollerConfigs[rollerType];\r\n            if (rollerType === ROLLER_TYPE.day || rollerConfig.displayItems.toString() !== roller.option(\"items\").toString()) {\r\n                roller.option({\r\n                    items: rollerConfig.displayItems,\r\n                    selectedIndex: rollerConfig.selectedIndex\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _getCurrentDate: function() {\r\n        var curDate = this._valueOption();\r\n        var minDate = this.option(\"minDate\");\r\n        var maxDate = this.option(\"maxDate\");\r\n        return dateUtils.normalizeDate(curDate, minDate, maxDate)\r\n    },\r\n    _calculateRollerConfigValueRange: function(componentName) {\r\n        var curDate = this._getCurrentDate();\r\n        var minDate = this.option(\"minDate\");\r\n        var maxDate = this.option(\"maxDate\");\r\n        var minYear = dateUtils.sameYear(curDate, minDate);\r\n        var minMonth = minYear && curDate.getMonth() === minDate.getMonth();\r\n        var maxYear = dateUtils.sameYear(curDate, maxDate);\r\n        var maxMonth = maxYear && curDate.getMonth() === maxDate.getMonth();\r\n        var minHour = minMonth && curDate.getDate() === minDate.getDate();\r\n        var maxHour = maxMonth && curDate.getDate() === maxDate.getDate();\r\n        var componentInfo = uiDateUtils.DATE_COMPONENTS_INFO[componentName];\r\n        var startValue = componentInfo.startValue;\r\n        var endValue = componentInfo.endValue;\r\n        if (componentName === ROLLER_TYPE.year) {\r\n            startValue = minDate.getFullYear();\r\n            endValue = maxDate.getFullYear()\r\n        }\r\n        if (componentName === ROLLER_TYPE.month) {\r\n            if (minYear) {\r\n                startValue = minDate.getMonth()\r\n            }\r\n            if (maxYear) {\r\n                endValue = maxDate.getMonth()\r\n            }\r\n        }\r\n        if (componentName === ROLLER_TYPE.day) {\r\n            endValue = uiDateUtils.getMaxMonthDay(curDate.getFullYear(), curDate.getMonth());\r\n            if (minYear && minMonth) {\r\n                startValue = minDate.getDate()\r\n            }\r\n            if (maxYear && maxMonth) {\r\n                endValue = maxDate.getDate()\r\n            }\r\n        }\r\n        if (componentName === ROLLER_TYPE.hours) {\r\n            startValue = minHour ? minDate.getHours() : startValue;\r\n            endValue = maxHour ? maxDate.getHours() : endValue\r\n        }\r\n        return {\r\n            startValue: startValue,\r\n            endValue: endValue\r\n        }\r\n    },\r\n    _refreshRollers: function() {\r\n        this._refreshRoller(ROLLER_TYPE.month);\r\n        this._refreshRoller(ROLLER_TYPE.day);\r\n        this._refreshRoller(ROLLER_TYPE.hours)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"minDate\":\r\n            case \"maxDate\":\r\n            case \"type\":\r\n                this._renderRollers();\r\n                this._toggleFormatClasses(args.value, args.previousValue);\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (args.value) {\r\n                    this._renderRollers()\r\n                }\r\n                break;\r\n            case \"value\":\r\n                this.option(\"value\", this._valueOption());\r\n                this._refreshRollers();\r\n                this._updateRollersPosition();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        delete this._$rollersContainer\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._deferredRenderDayTimeout);\r\n        clearTimeout(this._deferredRenderMonthTimeout);\r\n        this.callBase()\r\n    }\r\n});\r\nregisterComponent(\"dxDateView\", DateView);\r\nmodule.exports = DateView;\r\n"]},"metadata":{},"sourceType":"script"}