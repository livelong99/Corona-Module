{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/utils.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar mathUtils = require(\"../../core/utils/math\");\n\nvar dateToMilliseconds = require(\"../../core/utils/date\").dateToMilliseconds;\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar Color = require(\"../../color\");\n\nvar isDefined = typeUtils.isDefined;\nvar isNumber = typeUtils.isNumeric;\nvar isExponential = typeUtils.isExponential;\nvar _math = Math;\nvar _round = _math.round;\nvar _sqrt = Math.sqrt;\nvar PI = Math.PI;\nvar MAX_PIXEL_COUNT = 1e10;\nvar PI_DIV_180 = PI / 180;\nvar LN10 = Math.LN10;\nvar cosFunc = Math.cos;\nvar sinFunc = Math.sin;\nvar abs = Math.abs;\nvar log = Math.log;\nvar floor = Math.floor;\nvar ceil = Math.ceil;\nvar max = Math.max;\nvar _isNaN = isNaN;\nvar _Number = Number;\nvar _NaN = NaN;\nvar adjust = mathUtils.adjust,\n    sign = mathUtils.sign;\nvar PANE_PADDING = 10;\n\nvar getLog = function getLog(value, base) {\n  if (!value) {\n    return _NaN;\n  }\n\n  return Math.log(value) / Math.log(base);\n};\n\nvar getAdjustedLog10 = function getAdjustedLog10(value) {\n  return adjust(getLog(value, 10));\n};\n\nvar raiseTo = function raiseTo(power, base) {\n  return Math.pow(base, power);\n};\n\nvar normalizeAngle = function normalizeAngle(angle) {\n  return (angle % 360 + 360) % 360;\n};\n\nvar convertAngleToRendererSpace = function convertAngleToRendererSpace(angle) {\n  return 90 - angle;\n};\n\nvar degreesToRadians = function degreesToRadians(value) {\n  return PI * value / 180;\n};\n\nvar getCosAndSin = function getCosAndSin(angle) {\n  var angleInRadians = degreesToRadians(angle);\n  return {\n    cos: cosFunc(angleInRadians),\n    sin: sinFunc(angleInRadians)\n  };\n};\n\nvar DECIMAL_ORDER_THRESHOLD = 1e-14;\n\nvar getDistance = function getDistance(x1, y1, x2, y2) {\n  var diffX = x2 - x1;\n  var diffY = y2 - y1;\n  return Math.sqrt(diffY * diffY + diffX * diffX);\n};\n\nvar getDecimalOrder = function getDecimalOrder(number) {\n  var n = abs(number);\n  var cn;\n\n  if (!_isNaN(n)) {\n    if (n > 0) {\n      n = log(n) / LN10;\n      cn = ceil(n);\n      return cn - n < DECIMAL_ORDER_THRESHOLD ? cn : floor(n);\n    }\n\n    return 0;\n  }\n\n  return _NaN;\n};\n\nvar getAppropriateFormat = function getAppropriateFormat(start, end, count) {\n  var order = max(getDecimalOrder(start), getDecimalOrder(end));\n  var precision = -getDecimalOrder(abs(end - start) / count);\n  var format;\n\n  if (!_isNaN(order) && !_isNaN(precision)) {\n    if (abs(order) <= 4) {\n      format = \"fixedPoint\";\n      precision < 0 && (precision = 0);\n      precision > 4 && (precision = 4);\n    } else {\n      format = \"exponential\";\n      precision += order - 1;\n      precision > 3 && (precision = 3);\n    }\n\n    return {\n      type: format,\n      precision: precision\n    };\n  }\n\n  return null;\n};\n\nvar roundValue = function roundValue(value, precision) {\n  if (precision > 20) {\n    precision = 20;\n  }\n\n  if (isNumber(value)) {\n    if (isExponential(value)) {\n      return _Number(value.toExponential(precision));\n    } else {\n      return _Number(value.toFixed(precision));\n    }\n  }\n};\n\nvar getPower = function getPower(value) {\n  return value.toExponential().split(\"e\")[1];\n};\n\nfunction map(array, callback) {\n  var i = 0;\n  var len = array.length;\n  var result = [];\n  var value;\n\n  while (i < len) {\n    value = callback(array[i], i);\n\n    if (null !== value) {\n      result.push(value);\n    }\n\n    i++;\n  }\n\n  return result;\n}\n\nfunction selectByKeys(object, keys) {\n  return map(keys, function (key) {\n    return object[key] ? object[key] : null;\n  });\n}\n\nfunction decreaseFields(object, keys, eachDecrease, decrease) {\n  var dec = decrease;\n  each(keys, function (_, key) {\n    if (object[key]) {\n      object[key] -= eachDecrease;\n      dec -= eachDecrease;\n    }\n  });\n  return dec;\n}\n\nfunction normalizeEnum(value) {\n  return String(value).toLowerCase();\n}\n\nfunction setCanvasValues(canvas) {\n  if (canvas) {\n    canvas.originalTop = canvas.top;\n    canvas.originalBottom = canvas.bottom;\n    canvas.originalLeft = canvas.left;\n    canvas.originalRight = canvas.right;\n  }\n\n  return canvas;\n}\n\nfunction normalizeBBoxField(value) {\n  return -MAX_PIXEL_COUNT < value && value < +MAX_PIXEL_COUNT ? value : 0;\n}\n\nfunction normalizeBBox(bBox) {\n  var xl = normalizeBBoxField(floor(bBox.x));\n  var yt = normalizeBBoxField(floor(bBox.y));\n  var xr = normalizeBBoxField(ceil(bBox.width + bBox.x));\n  var yb = normalizeBBoxField(ceil(bBox.height + bBox.y));\n  var result = {\n    x: xl,\n    y: yt,\n    width: xr - xl,\n    height: yb - yt\n  };\n  result.isEmpty = !result.x && !result.y && !result.width && !result.height;\n  return result;\n}\n\nfunction rotateBBox(bBox, center, angle) {\n  var cos = _Number(cosFunc(angle * PI_DIV_180).toFixed(3));\n\n  var sin = _Number(sinFunc(angle * PI_DIV_180).toFixed(3));\n\n  var w2 = bBox.width / 2;\n  var h2 = bBox.height / 2;\n  var centerX = bBox.x + w2;\n  var centerY = bBox.y + h2;\n  var w2_ = abs(w2 * cos) + abs(h2 * sin);\n  var h2_ = abs(w2 * sin) + abs(h2 * cos);\n  var centerX_ = center[0] + (centerX - center[0]) * cos + (centerY - center[1]) * sin;\n  var centerY_ = center[1] - (centerX - center[0]) * sin + (centerY - center[1]) * cos;\n  return normalizeBBox({\n    x: centerX_ - w2_,\n    y: centerY_ - h2_,\n    width: 2 * w2_,\n    height: 2 * h2_\n  });\n}\n\nextend(exports, {\n  decreaseGaps: function decreaseGaps(object, keys, decrease) {\n    var arrayGaps;\n\n    do {\n      arrayGaps = selectByKeys(object, keys);\n      arrayGaps.push(_math.ceil(decrease / arrayGaps.length));\n      decrease = decreaseFields(object, keys, _math.min.apply(null, arrayGaps), decrease);\n    } while (decrease > 0 && arrayGaps.length > 1);\n\n    return decrease;\n  },\n  normalizeEnum: normalizeEnum,\n  parseScalar: function parseScalar(value, defaultValue) {\n    return void 0 !== value ? value : defaultValue;\n  },\n  enumParser: function enumParser(values) {\n    var stored = {};\n    var i;\n    var ii;\n\n    for (i = 0, ii = values.length; i < ii; ++i) {\n      stored[normalizeEnum(values[i])] = 1;\n    }\n\n    return function (value, defaultValue) {\n      var _value = normalizeEnum(value);\n\n      return stored[_value] ? _value : defaultValue;\n    };\n  },\n  patchFontOptions: function patchFontOptions(options) {\n    var fontOptions = {};\n    each(options || {}, function (key, value) {\n      if (/^(cursor)$/i.test(key)) {} else {\n        if (\"opacity\" === key) {\n          value = null;\n        } else {\n          if (\"color\" === key) {\n            key = \"fill\";\n\n            if (\"opacity\" in options) {\n              var color = new Color(value);\n              value = \"rgba(\".concat(color.r, \",\").concat(color.g, \",\").concat(color.b, \",\").concat(options.opacity, \")\");\n            }\n          } else {\n            key = \"font-\" + key;\n          }\n        }\n      }\n\n      fontOptions[key] = value;\n    });\n    return fontOptions;\n  },\n  checkElementHasPropertyFromStyleSheet: function checkElementHasPropertyFromStyleSheet(element, property) {\n    var slice = Array.prototype.slice;\n    var cssRules = slice.call(domAdapter.getDocument().styleSheets).reduce(function (rules, styleSheet) {\n      return rules.concat(slice.call(styleSheet.cssRules || styleSheet.rules));\n    }, []);\n    var elementRules = cssRules.filter(function (rule) {\n      try {\n        return domAdapter.elementMatches(element, rule.selectorText);\n      } catch (e) {\n        return false;\n      }\n    });\n    return elementRules.some(function (rule) {\n      return !!rule.style[property];\n    });\n  },\n  convertPolarToXY: function convertPolarToXY(centerCoords, startAngle, angle, radius) {\n    var shiftAngle = 90;\n    var normalizedRadius = radius > 0 ? radius : 0;\n    angle = isDefined(angle) ? angle + startAngle - shiftAngle : 0;\n    var cosSin = getCosAndSin(angle);\n    return {\n      x: _round(centerCoords.x + normalizedRadius * cosSin.cos),\n      y: _round(centerCoords.y + normalizedRadius * cosSin.sin)\n    };\n  },\n  convertXYToPolar: function convertXYToPolar(centerCoords, x, y) {\n    var radius = getDistance(centerCoords.x, centerCoords.y, x, y);\n\n    var angle = _math.atan2(y - centerCoords.y, x - centerCoords.x);\n\n    return {\n      phi: _round(normalizeAngle(180 * angle / _math.PI)),\n      r: _round(radius)\n    };\n  },\n  processSeriesTemplate: function processSeriesTemplate(seriesTemplate, items) {\n    var customizeSeries = typeUtils.isFunction(seriesTemplate.customizeSeries) ? seriesTemplate.customizeSeries : noop;\n    var nameField = seriesTemplate.nameField;\n    var generatedSeries = {};\n    var seriesOrder = [];\n    var series;\n    var i = 0;\n    var length;\n    var data;\n    items = items || [];\n\n    for (length = items.length; i < length; i++) {\n      data = items[i];\n\n      if (nameField in data) {\n        series = generatedSeries[data[nameField]];\n\n        if (!series) {\n          series = generatedSeries[data[nameField]] = {\n            name: data[nameField],\n            nameFieldValue: data[nameField]\n          };\n          seriesOrder.push(series.name);\n        }\n      }\n    }\n\n    return map(seriesOrder, function (orderedName) {\n      var group = generatedSeries[orderedName];\n      return extend(group, customizeSeries.call(null, group.name));\n    });\n  },\n  getCategoriesInfo: function getCategoriesInfo(categories, startValue, endValue) {\n    if (0 === categories.length) {\n      return {\n        categories: []\n      };\n    }\n\n    startValue = isDefined(startValue) ? startValue : categories[0];\n    endValue = isDefined(endValue) ? endValue : categories[categories.length - 1];\n    var categoriesValue = map(categories, function (category) {\n      return isDefined(category) ? category.valueOf() : null;\n    });\n    var indexStartValue = categoriesValue.indexOf(startValue.valueOf());\n    var indexEndValue = categoriesValue.indexOf(endValue.valueOf());\n    var swapBuf;\n    var inverted = false;\n    indexStartValue < 0 && (indexStartValue = 0);\n    indexEndValue < 0 && (indexEndValue = categories.length - 1);\n\n    if (indexEndValue < indexStartValue) {\n      swapBuf = indexEndValue;\n      indexEndValue = indexStartValue;\n      indexStartValue = swapBuf;\n      inverted = true;\n    }\n\n    var visibleCategories = categories.slice(indexStartValue, indexEndValue + 1);\n    var lastIdx = visibleCategories.length - 1;\n    return {\n      categories: visibleCategories,\n      start: visibleCategories[inverted ? lastIdx : 0],\n      end: visibleCategories[inverted ? 0 : lastIdx],\n      inverted: inverted\n    };\n  },\n  setCanvasValues: setCanvasValues,\n  normalizePanesHeight: function normalizePanesHeight(panes) {\n    panes.forEach(function (pane) {\n      var height = pane.height;\n      var unit = 0;\n      var parsedHeight = parseFloat(height) || void 0;\n\n      if (typeUtils.isString(height) && height.indexOf(\"px\") > -1 || typeUtils.isNumeric(height) && height > 1) {\n        parsedHeight = _round(parsedHeight);\n        unit = 1;\n      }\n\n      if (!unit && parsedHeight) {\n        if (typeUtils.isString(height) && height.indexOf(\"%\") > -1) {\n          parsedHeight /= 100;\n        } else {\n          if (parsedHeight < 0) {\n            parsedHeight = parsedHeight < -1 ? 1 : _math.abs(parsedHeight);\n          }\n        }\n      }\n\n      pane.height = parsedHeight;\n      pane.unit = unit;\n    });\n    var weightSum = panes.filter(function (pane) {\n      return !pane.unit;\n    }).reduce(function (prev, next) {\n      return prev + (next.height || 0);\n    }, 0);\n    var weightHeightCount = panes.filter(function (pane) {\n      return !pane.unit;\n    }).length;\n    var emptyHeightCount = panes.filter(function (pane) {\n      return !pane.unit && !pane.height;\n    }).length;\n\n    if (weightSum < 1 && emptyHeightCount) {\n      panes.filter(function (pane) {\n        return !pane.unit && !pane.height;\n      }).forEach(function (pane) {\n        return pane.height = (1 - weightSum) / emptyHeightCount;\n      });\n    } else {\n      if (weightSum > 1 || weightSum < 1 && !emptyHeightCount || 1 === weightSum && emptyHeightCount) {\n        if (emptyHeightCount) {\n          var weightForEmpty = weightSum / weightHeightCount;\n          var emptyWeightSum = emptyHeightCount * weightForEmpty;\n          panes.filter(function (pane) {\n            return !pane.unit && pane.height;\n          }).forEach(function (pane) {\n            return pane.height *= (weightSum - emptyWeightSum) / weightSum;\n          });\n          panes.filter(function (pane) {\n            return !pane.unit && !pane.height;\n          }).forEach(function (pane) {\n            return pane.height = weightForEmpty;\n          });\n        }\n\n        panes.forEach(function (pane) {\n          return !pane.unit && (pane.height *= 1 / weightSum);\n        });\n      }\n    }\n  },\n  updatePanesCanvases: function updatePanesCanvases(panes, canvas, rotated) {\n    var distributedSpace = 0;\n    var padding = PANE_PADDING;\n    var paneSpace = rotated ? canvas.width - canvas.left - canvas.right : canvas.height - canvas.top - canvas.bottom;\n    var usefulSpace = paneSpace - padding * (panes.length - 1);\n    var startName = rotated ? \"left\" : \"top\";\n    var endName = rotated ? \"right\" : \"bottom\";\n    var totalCustomSpace = panes.reduce(function (prev, cur) {\n      return prev + (cur.unit ? cur.height : 0);\n    }, 0);\n    usefulSpace -= totalCustomSpace;\n    panes.forEach(function (pane) {\n      var calcLength = pane.unit ? pane.height : _round(pane.height * usefulSpace);\n      pane.canvas = pane.canvas || {};\n      extend(pane.canvas, canvas);\n      pane.canvas[startName] = canvas[startName] + distributedSpace;\n      pane.canvas[endName] = canvas[endName] + (paneSpace - calcLength - distributedSpace);\n      distributedSpace = distributedSpace + calcLength + padding;\n      setCanvasValues(pane.canvas);\n    });\n  },\n  unique: function unique(array) {\n    var values = {};\n    return map(array, function (item) {\n      var result = !values[item] ? item : null;\n      values[item] = true;\n      return result;\n    });\n  },\n  map: map,\n  getVerticallyShiftedAngularCoords: function getVerticallyShiftedAngularCoords(bBox, dy, center) {\n    var isPositive = bBox.x + bBox.width / 2 >= center.x;\n    var horizontalOffset1 = (isPositive ? bBox.x : bBox.x + bBox.width) - center.x;\n    var verticalOffset1 = bBox.y - center.y;\n    var verticalOffset2 = verticalOffset1 + dy;\n\n    var horizontalOffset2 = _round(_sqrt(horizontalOffset1 * horizontalOffset1 + verticalOffset1 * verticalOffset1 - verticalOffset2 * verticalOffset2));\n\n    var dx = (isPositive ? +horizontalOffset2 : -horizontalOffset2) || horizontalOffset1;\n    return {\n      x: center.x + (isPositive ? dx : dx - bBox.width),\n      y: bBox.y + dy\n    };\n  },\n  mergeMarginOptions: function mergeMarginOptions(opt1, opt2) {\n    return {\n      checkInterval: opt1.checkInterval || opt2.checkInterval,\n      size: Math.max(opt1.size || 0, opt2.size || 0),\n      percentStick: opt1.percentStick || opt2.percentStick,\n      sizePointNormalState: Math.max(opt1.sizePointNormalState || 0, opt2.sizePointNormalState || 0)\n    };\n  }\n});\n\nfunction getVizRangeObject(value) {\n  if (Array.isArray(value)) {\n    return {\n      startValue: value[0],\n      endValue: value[1]\n    };\n  } else {\n    return value || {};\n  }\n}\n\nfunction convertVisualRangeObject(visualRange, convertToVisualRange) {\n  if (convertToVisualRange) {\n    return visualRange;\n  }\n\n  return [visualRange.startValue, visualRange.endValue];\n}\n\nfunction getAddFunction(range, correctZeroLevel) {\n  if (\"datetime\" === range.dataType) {\n    return function (rangeValue, marginValue) {\n      var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n      return new Date(rangeValue.getTime() + sign * marginValue);\n    };\n  }\n\n  if (\"logarithmic\" === range.axisType) {\n    return function (rangeValue, marginValue) {\n      var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n      var log = getLogExt(rangeValue, range.base) + sign * marginValue;\n      return raiseToExt(log, range.base);\n    };\n  }\n\n  return function (rangeValue, marginValue) {\n    var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\n    var newValue = rangeValue + sign * marginValue;\n    return correctZeroLevel && newValue * rangeValue <= 0 ? 0 : newValue;\n  };\n}\n\nfunction adjustVisualRange(options, visualRange, wholeRange, dataRange) {\n  var minDefined = typeUtils.isDefined(visualRange.startValue);\n  var maxDefined = typeUtils.isDefined(visualRange.endValue);\n  var nonDiscrete = \"discrete\" !== options.axisType;\n  dataRange = dataRange || wholeRange;\n  var add = getAddFunction(options, false);\n  var min = minDefined ? visualRange.startValue : dataRange.min;\n  var max = maxDefined ? visualRange.endValue : dataRange.max;\n  var rangeLength = visualRange.length;\n  var categories = dataRange.categories;\n\n  if (nonDiscrete && !typeUtils.isDefined(min) && !typeUtils.isDefined(max)) {\n    return {\n      startValue: min,\n      endValue: max\n    };\n  }\n\n  if (isDefined(rangeLength)) {\n    if (nonDiscrete) {\n      if (\"datetime\" === options.dataType && !isNumber(rangeLength)) {\n        rangeLength = dateToMilliseconds(rangeLength);\n      }\n\n      if (maxDefined && !minDefined || !maxDefined && !minDefined) {\n        isDefined(wholeRange.max) && (max = max > wholeRange.max ? wholeRange.max : max);\n        min = add(max, rangeLength, -1);\n      } else {\n        if (minDefined && !maxDefined) {\n          isDefined(wholeRange.min) && (min = min < wholeRange.min ? wholeRange.min : min);\n          max = add(min, rangeLength);\n        }\n      }\n    } else {\n      rangeLength = parseInt(rangeLength);\n\n      if (!isNaN(rangeLength) && isFinite(rangeLength)) {\n        rangeLength--;\n\n        if (!maxDefined && !minDefined) {\n          max = categories[categories.length - 1];\n          min = categories[categories.length - 1 - rangeLength];\n        } else {\n          if (minDefined && !maxDefined) {\n            var categoriesInfo = exports.getCategoriesInfo(categories, min, void 0);\n            max = categoriesInfo.categories[rangeLength];\n          } else {\n            if (!minDefined && maxDefined) {\n              var _categoriesInfo = exports.getCategoriesInfo(categories, void 0, max);\n\n              min = _categoriesInfo.categories[_categoriesInfo.categories.length - 1 - rangeLength];\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (nonDiscrete) {\n    if (isDefined(wholeRange.max) && max > wholeRange.max) {\n      max = wholeRange.max;\n    }\n\n    if (isDefined(wholeRange.min) && min < wholeRange.min) {\n      min = wholeRange.min;\n    }\n  }\n\n  return {\n    startValue: min,\n    endValue: max\n  };\n}\n\nfunction getLogExt(value, base) {\n  var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n  var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\n\n  if (!allowNegatives) {\n    return getLog(value, base);\n  }\n\n  if (0 === value) {\n    return 0;\n  }\n\n  var transformValue = getLog(Math.abs(value), base) - (linearThreshold - 1);\n\n  if (transformValue < 0) {\n    return 0;\n  }\n\n  return adjust(sign(value) * transformValue, Number(Math.pow(base, linearThreshold - 1).toFixed(Math.abs(linearThreshold))));\n}\n\nfunction raiseToExt(value, base) {\n  var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n  var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\n\n  if (!allowNegatives) {\n    return raiseTo(value, base);\n  }\n\n  if (0 === value) {\n    return 0;\n  }\n\n  var transformValue = raiseTo(Math.abs(value) + (linearThreshold - 1), base);\n\n  if (transformValue < 0) {\n    return 0;\n  }\n\n  return adjust(sign(value) * transformValue, Number(Math.pow(base, linearThreshold).toFixed(Math.abs(linearThreshold))));\n}\n\nfunction rangesAreEqual(range, rangeFromOptions) {\n  if (Array.isArray(rangeFromOptions)) {\n    return range.length === rangeFromOptions.length && range.every(function (item, i) {\n      return valueOf(item) === valueOf(rangeFromOptions[i]);\n    });\n  } else {\n    return valueOf(range.startValue) === valueOf(rangeFromOptions.startValue) && valueOf(range.endValue) === valueOf(rangeFromOptions.endValue);\n  }\n}\n\nfunction valueOf(value) {\n  return value && value.valueOf();\n}\n\nfunction pointInCanvas(canvas, x, y) {\n  return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom;\n}\n\nexports.getVizRangeObject = getVizRangeObject;\nexports.convertVisualRangeObject = convertVisualRangeObject;\nexports.adjustVisualRange = adjustVisualRange;\nexports.getAddFunction = getAddFunction;\nexports.getLog = getLog;\nexports.getLogExt = getLogExt;\nexports.getAdjustedLog10 = getAdjustedLog10;\nexports.raiseTo = raiseTo;\nexports.raiseToExt = raiseToExt;\nexports.normalizeAngle = normalizeAngle;\nexports.convertAngleToRendererSpace = convertAngleToRendererSpace;\nexports.degreesToRadians = degreesToRadians;\nexports.getCosAndSin = getCosAndSin;\nexports.getDecimalOrder = getDecimalOrder;\nexports.getAppropriateFormat = getAppropriateFormat;\nexports.getDistance = getDistance;\nexports.roundValue = roundValue;\nexports.getPower = getPower;\nexports.valueOf = valueOf;\nexports.rotateBBox = rotateBBox;\nexports.normalizeBBox = normalizeBBox;\nexports.PANE_PADDING = PANE_PADDING;\nexports.rangesAreEqual = rangesAreEqual;\nexports.pointInCanvas = pointInCanvas;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/viz/core/utils.js"],"names":["noop","require","typeUtils","extend","each","mathUtils","dateToMilliseconds","domAdapter","Color","isDefined","isNumber","isNumeric","isExponential","_math","Math","_round","round","_sqrt","sqrt","PI","MAX_PIXEL_COUNT","PI_DIV_180","LN10","cosFunc","cos","sinFunc","sin","abs","log","floor","ceil","max","_isNaN","isNaN","_Number","Number","_NaN","NaN","adjust","sign","PANE_PADDING","getLog","value","base","getAdjustedLog10","raiseTo","power","pow","normalizeAngle","angle","convertAngleToRendererSpace","degreesToRadians","getCosAndSin","angleInRadians","DECIMAL_ORDER_THRESHOLD","getDistance","x1","y1","x2","y2","diffX","diffY","getDecimalOrder","number","n","cn","getAppropriateFormat","start","end","count","order","precision","format","type","roundValue","toExponential","toFixed","getPower","split","map","array","callback","i","len","length","result","push","selectByKeys","object","keys","key","decreaseFields","eachDecrease","decrease","dec","_","normalizeEnum","String","toLowerCase","setCanvasValues","canvas","originalTop","top","originalBottom","bottom","originalLeft","left","originalRight","right","normalizeBBoxField","normalizeBBox","bBox","xl","x","yt","y","xr","width","yb","height","isEmpty","rotateBBox","center","w2","h2","centerX","centerY","w2_","h2_","centerX_","centerY_","exports","decreaseGaps","arrayGaps","min","apply","parseScalar","defaultValue","enumParser","values","stored","ii","_value","patchFontOptions","options","fontOptions","test","color","concat","r","g","b","opacity","checkElementHasPropertyFromStyleSheet","element","property","slice","Array","prototype","cssRules","call","getDocument","styleSheets","reduce","rules","styleSheet","elementRules","filter","rule","elementMatches","selectorText","e","some","style","convertPolarToXY","centerCoords","startAngle","radius","shiftAngle","normalizedRadius","cosSin","convertXYToPolar","atan2","phi","processSeriesTemplate","seriesTemplate","items","customizeSeries","isFunction","nameField","generatedSeries","seriesOrder","series","data","name","nameFieldValue","orderedName","group","getCategoriesInfo","categories","startValue","endValue","categoriesValue","category","valueOf","indexStartValue","indexOf","indexEndValue","swapBuf","inverted","visibleCategories","lastIdx","normalizePanesHeight","panes","forEach","pane","unit","parsedHeight","parseFloat","isString","weightSum","prev","next","weightHeightCount","emptyHeightCount","weightForEmpty","emptyWeightSum","updatePanesCanvases","rotated","distributedSpace","padding","paneSpace","usefulSpace","startName","endName","totalCustomSpace","cur","calcLength","unique","item","getVerticallyShiftedAngularCoords","dy","isPositive","horizontalOffset1","verticalOffset1","verticalOffset2","horizontalOffset2","dx","mergeMarginOptions","opt1","opt2","checkInterval","size","percentStick","sizePointNormalState","getVizRangeObject","isArray","convertVisualRangeObject","visualRange","convertToVisualRange","getAddFunction","range","correctZeroLevel","dataType","rangeValue","marginValue","arguments","Date","getTime","axisType","getLogExt","raiseToExt","newValue","adjustVisualRange","wholeRange","dataRange","minDefined","maxDefined","nonDiscrete","add","rangeLength","parseInt","isFinite","categoriesInfo","_categoriesInfo","allowNegatives","linearThreshold","transformValue","rangesAreEqual","rangeFromOptions","every","pointInCanvas"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/utils.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar mathUtils = require(\"../../core/utils/math\");\r\nvar dateToMilliseconds = require(\"../../core/utils/date\").dateToMilliseconds;\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar Color = require(\"../../color\");\r\nvar isDefined = typeUtils.isDefined;\r\nvar isNumber = typeUtils.isNumeric;\r\nvar isExponential = typeUtils.isExponential;\r\nvar _math = Math;\r\nvar _round = _math.round;\r\nvar _sqrt = Math.sqrt;\r\nvar PI = Math.PI;\r\nvar MAX_PIXEL_COUNT = 1e10;\r\nvar PI_DIV_180 = PI / 180;\r\nvar LN10 = Math.LN10;\r\nvar cosFunc = Math.cos;\r\nvar sinFunc = Math.sin;\r\nvar abs = Math.abs;\r\nvar log = Math.log;\r\nvar floor = Math.floor;\r\nvar ceil = Math.ceil;\r\nvar max = Math.max;\r\nvar _isNaN = isNaN;\r\nvar _Number = Number;\r\nvar _NaN = NaN;\r\nvar adjust = mathUtils.adjust,\r\n    sign = mathUtils.sign;\r\nvar PANE_PADDING = 10;\r\nvar getLog = function(value, base) {\r\n    if (!value) {\r\n        return _NaN\r\n    }\r\n    return Math.log(value) / Math.log(base)\r\n};\r\nvar getAdjustedLog10 = function(value) {\r\n    return adjust(getLog(value, 10))\r\n};\r\nvar raiseTo = function(power, base) {\r\n    return Math.pow(base, power)\r\n};\r\nvar normalizeAngle = function(angle) {\r\n    return (angle % 360 + 360) % 360\r\n};\r\nvar convertAngleToRendererSpace = function(angle) {\r\n    return 90 - angle\r\n};\r\nvar degreesToRadians = function(value) {\r\n    return PI * value / 180\r\n};\r\nvar getCosAndSin = function(angle) {\r\n    var angleInRadians = degreesToRadians(angle);\r\n    return {\r\n        cos: cosFunc(angleInRadians),\r\n        sin: sinFunc(angleInRadians)\r\n    }\r\n};\r\nvar DECIMAL_ORDER_THRESHOLD = 1e-14;\r\nvar getDistance = function(x1, y1, x2, y2) {\r\n    var diffX = x2 - x1;\r\n    var diffY = y2 - y1;\r\n    return Math.sqrt(diffY * diffY + diffX * diffX)\r\n};\r\nvar getDecimalOrder = function(number) {\r\n    var n = abs(number);\r\n    var cn;\r\n    if (!_isNaN(n)) {\r\n        if (n > 0) {\r\n            n = log(n) / LN10;\r\n            cn = ceil(n);\r\n            return cn - n < DECIMAL_ORDER_THRESHOLD ? cn : floor(n)\r\n        }\r\n        return 0\r\n    }\r\n    return _NaN\r\n};\r\nvar getAppropriateFormat = function(start, end, count) {\r\n    var order = max(getDecimalOrder(start), getDecimalOrder(end));\r\n    var precision = -getDecimalOrder(abs(end - start) / count);\r\n    var format;\r\n    if (!_isNaN(order) && !_isNaN(precision)) {\r\n        if (abs(order) <= 4) {\r\n            format = \"fixedPoint\";\r\n            precision < 0 && (precision = 0);\r\n            precision > 4 && (precision = 4)\r\n        } else {\r\n            format = \"exponential\";\r\n            precision += order - 1;\r\n            precision > 3 && (precision = 3)\r\n        }\r\n        return {\r\n            type: format,\r\n            precision: precision\r\n        }\r\n    }\r\n    return null\r\n};\r\nvar roundValue = function(value, precision) {\r\n    if (precision > 20) {\r\n        precision = 20\r\n    }\r\n    if (isNumber(value)) {\r\n        if (isExponential(value)) {\r\n            return _Number(value.toExponential(precision))\r\n        } else {\r\n            return _Number(value.toFixed(precision))\r\n        }\r\n    }\r\n};\r\nvar getPower = function(value) {\r\n    return value.toExponential().split(\"e\")[1]\r\n};\r\n\r\nfunction map(array, callback) {\r\n    var i = 0;\r\n    var len = array.length;\r\n    var result = [];\r\n    var value;\r\n    while (i < len) {\r\n        value = callback(array[i], i);\r\n        if (null !== value) {\r\n            result.push(value)\r\n        }\r\n        i++\r\n    }\r\n    return result\r\n}\r\n\r\nfunction selectByKeys(object, keys) {\r\n    return map(keys, function(key) {\r\n        return object[key] ? object[key] : null\r\n    })\r\n}\r\n\r\nfunction decreaseFields(object, keys, eachDecrease, decrease) {\r\n    var dec = decrease;\r\n    each(keys, function(_, key) {\r\n        if (object[key]) {\r\n            object[key] -= eachDecrease;\r\n            dec -= eachDecrease\r\n        }\r\n    });\r\n    return dec\r\n}\r\n\r\nfunction normalizeEnum(value) {\r\n    return String(value).toLowerCase()\r\n}\r\n\r\nfunction setCanvasValues(canvas) {\r\n    if (canvas) {\r\n        canvas.originalTop = canvas.top;\r\n        canvas.originalBottom = canvas.bottom;\r\n        canvas.originalLeft = canvas.left;\r\n        canvas.originalRight = canvas.right\r\n    }\r\n    return canvas\r\n}\r\n\r\nfunction normalizeBBoxField(value) {\r\n    return -MAX_PIXEL_COUNT < value && value < +MAX_PIXEL_COUNT ? value : 0\r\n}\r\n\r\nfunction normalizeBBox(bBox) {\r\n    var xl = normalizeBBoxField(floor(bBox.x));\r\n    var yt = normalizeBBoxField(floor(bBox.y));\r\n    var xr = normalizeBBoxField(ceil(bBox.width + bBox.x));\r\n    var yb = normalizeBBoxField(ceil(bBox.height + bBox.y));\r\n    var result = {\r\n        x: xl,\r\n        y: yt,\r\n        width: xr - xl,\r\n        height: yb - yt\r\n    };\r\n    result.isEmpty = !result.x && !result.y && !result.width && !result.height;\r\n    return result\r\n}\r\n\r\nfunction rotateBBox(bBox, center, angle) {\r\n    var cos = _Number(cosFunc(angle * PI_DIV_180).toFixed(3));\r\n    var sin = _Number(sinFunc(angle * PI_DIV_180).toFixed(3));\r\n    var w2 = bBox.width / 2;\r\n    var h2 = bBox.height / 2;\r\n    var centerX = bBox.x + w2;\r\n    var centerY = bBox.y + h2;\r\n    var w2_ = abs(w2 * cos) + abs(h2 * sin);\r\n    var h2_ = abs(w2 * sin) + abs(h2 * cos);\r\n    var centerX_ = center[0] + (centerX - center[0]) * cos + (centerY - center[1]) * sin;\r\n    var centerY_ = center[1] - (centerX - center[0]) * sin + (centerY - center[1]) * cos;\r\n    return normalizeBBox({\r\n        x: centerX_ - w2_,\r\n        y: centerY_ - h2_,\r\n        width: 2 * w2_,\r\n        height: 2 * h2_\r\n    })\r\n}\r\nextend(exports, {\r\n    decreaseGaps: function(object, keys, decrease) {\r\n        var arrayGaps;\r\n        do {\r\n            arrayGaps = selectByKeys(object, keys);\r\n            arrayGaps.push(_math.ceil(decrease / arrayGaps.length));\r\n            decrease = decreaseFields(object, keys, _math.min.apply(null, arrayGaps), decrease)\r\n        } while (decrease > 0 && arrayGaps.length > 1);\r\n        return decrease\r\n    },\r\n    normalizeEnum: normalizeEnum,\r\n    parseScalar: function(value, defaultValue) {\r\n        return void 0 !== value ? value : defaultValue\r\n    },\r\n    enumParser: function(values) {\r\n        var stored = {};\r\n        var i;\r\n        var ii;\r\n        for (i = 0, ii = values.length; i < ii; ++i) {\r\n            stored[normalizeEnum(values[i])] = 1\r\n        }\r\n        return function(value, defaultValue) {\r\n            var _value = normalizeEnum(value);\r\n            return stored[_value] ? _value : defaultValue\r\n        }\r\n    },\r\n    patchFontOptions: function(options) {\r\n        var fontOptions = {};\r\n        each(options || {}, function(key, value) {\r\n            if (/^(cursor)$/i.test(key)) {} else {\r\n                if (\"opacity\" === key) {\r\n                    value = null\r\n                } else {\r\n                    if (\"color\" === key) {\r\n                        key = \"fill\";\r\n                        if (\"opacity\" in options) {\r\n                            var color = new Color(value);\r\n                            value = \"rgba(\".concat(color.r, \",\").concat(color.g, \",\").concat(color.b, \",\").concat(options.opacity, \")\")\r\n                        }\r\n                    } else {\r\n                        key = \"font-\" + key\r\n                    }\r\n                }\r\n            }\r\n            fontOptions[key] = value\r\n        });\r\n        return fontOptions\r\n    },\r\n    checkElementHasPropertyFromStyleSheet: function(element, property) {\r\n        var slice = Array.prototype.slice;\r\n        var cssRules = slice.call(domAdapter.getDocument().styleSheets).reduce(function(rules, styleSheet) {\r\n            return rules.concat(slice.call(styleSheet.cssRules || styleSheet.rules))\r\n        }, []);\r\n        var elementRules = cssRules.filter(function(rule) {\r\n            try {\r\n                return domAdapter.elementMatches(element, rule.selectorText)\r\n            } catch (e) {\r\n                return false\r\n            }\r\n        });\r\n        return elementRules.some(function(rule) {\r\n            return !!rule.style[property]\r\n        })\r\n    },\r\n    convertPolarToXY: function(centerCoords, startAngle, angle, radius) {\r\n        var shiftAngle = 90;\r\n        var normalizedRadius = radius > 0 ? radius : 0;\r\n        angle = isDefined(angle) ? angle + startAngle - shiftAngle : 0;\r\n        var cosSin = getCosAndSin(angle);\r\n        return {\r\n            x: _round(centerCoords.x + normalizedRadius * cosSin.cos),\r\n            y: _round(centerCoords.y + normalizedRadius * cosSin.sin)\r\n        }\r\n    },\r\n    convertXYToPolar: function(centerCoords, x, y) {\r\n        var radius = getDistance(centerCoords.x, centerCoords.y, x, y);\r\n        var angle = _math.atan2(y - centerCoords.y, x - centerCoords.x);\r\n        return {\r\n            phi: _round(normalizeAngle(180 * angle / _math.PI)),\r\n            r: _round(radius)\r\n        }\r\n    },\r\n    processSeriesTemplate: function(seriesTemplate, items) {\r\n        var customizeSeries = typeUtils.isFunction(seriesTemplate.customizeSeries) ? seriesTemplate.customizeSeries : noop;\r\n        var nameField = seriesTemplate.nameField;\r\n        var generatedSeries = {};\r\n        var seriesOrder = [];\r\n        var series;\r\n        var i = 0;\r\n        var length;\r\n        var data;\r\n        items = items || [];\r\n        for (length = items.length; i < length; i++) {\r\n            data = items[i];\r\n            if (nameField in data) {\r\n                series = generatedSeries[data[nameField]];\r\n                if (!series) {\r\n                    series = generatedSeries[data[nameField]] = {\r\n                        name: data[nameField],\r\n                        nameFieldValue: data[nameField]\r\n                    };\r\n                    seriesOrder.push(series.name)\r\n                }\r\n            }\r\n        }\r\n        return map(seriesOrder, function(orderedName) {\r\n            var group = generatedSeries[orderedName];\r\n            return extend(group, customizeSeries.call(null, group.name))\r\n        })\r\n    },\r\n    getCategoriesInfo: function(categories, startValue, endValue) {\r\n        if (0 === categories.length) {\r\n            return {\r\n                categories: []\r\n            }\r\n        }\r\n        startValue = isDefined(startValue) ? startValue : categories[0];\r\n        endValue = isDefined(endValue) ? endValue : categories[categories.length - 1];\r\n        var categoriesValue = map(categories, function(category) {\r\n            return isDefined(category) ? category.valueOf() : null\r\n        });\r\n        var indexStartValue = categoriesValue.indexOf(startValue.valueOf());\r\n        var indexEndValue = categoriesValue.indexOf(endValue.valueOf());\r\n        var swapBuf;\r\n        var inverted = false;\r\n        indexStartValue < 0 && (indexStartValue = 0);\r\n        indexEndValue < 0 && (indexEndValue = categories.length - 1);\r\n        if (indexEndValue < indexStartValue) {\r\n            swapBuf = indexEndValue;\r\n            indexEndValue = indexStartValue;\r\n            indexStartValue = swapBuf;\r\n            inverted = true\r\n        }\r\n        var visibleCategories = categories.slice(indexStartValue, indexEndValue + 1);\r\n        var lastIdx = visibleCategories.length - 1;\r\n        return {\r\n            categories: visibleCategories,\r\n            start: visibleCategories[inverted ? lastIdx : 0],\r\n            end: visibleCategories[inverted ? 0 : lastIdx],\r\n            inverted: inverted\r\n        }\r\n    },\r\n    setCanvasValues: setCanvasValues,\r\n    normalizePanesHeight: function(panes) {\r\n        panes.forEach(function(pane) {\r\n            var height = pane.height;\r\n            var unit = 0;\r\n            var parsedHeight = parseFloat(height) || void 0;\r\n            if (typeUtils.isString(height) && height.indexOf(\"px\") > -1 || typeUtils.isNumeric(height) && height > 1) {\r\n                parsedHeight = _round(parsedHeight);\r\n                unit = 1\r\n            }\r\n            if (!unit && parsedHeight) {\r\n                if (typeUtils.isString(height) && height.indexOf(\"%\") > -1) {\r\n                    parsedHeight /= 100\r\n                } else {\r\n                    if (parsedHeight < 0) {\r\n                        parsedHeight = parsedHeight < -1 ? 1 : _math.abs(parsedHeight)\r\n                    }\r\n                }\r\n            }\r\n            pane.height = parsedHeight;\r\n            pane.unit = unit\r\n        });\r\n        var weightSum = panes.filter(function(pane) {\r\n            return !pane.unit\r\n        }).reduce(function(prev, next) {\r\n            return prev + (next.height || 0)\r\n        }, 0);\r\n        var weightHeightCount = panes.filter(function(pane) {\r\n            return !pane.unit\r\n        }).length;\r\n        var emptyHeightCount = panes.filter(function(pane) {\r\n            return !pane.unit && !pane.height\r\n        }).length;\r\n        if (weightSum < 1 && emptyHeightCount) {\r\n            panes.filter(function(pane) {\r\n                return !pane.unit && !pane.height\r\n            }).forEach(function(pane) {\r\n                return pane.height = (1 - weightSum) / emptyHeightCount\r\n            })\r\n        } else {\r\n            if (weightSum > 1 || weightSum < 1 && !emptyHeightCount || 1 === weightSum && emptyHeightCount) {\r\n                if (emptyHeightCount) {\r\n                    var weightForEmpty = weightSum / weightHeightCount;\r\n                    var emptyWeightSum = emptyHeightCount * weightForEmpty;\r\n                    panes.filter(function(pane) {\r\n                        return !pane.unit && pane.height\r\n                    }).forEach(function(pane) {\r\n                        return pane.height *= (weightSum - emptyWeightSum) / weightSum\r\n                    });\r\n                    panes.filter(function(pane) {\r\n                        return !pane.unit && !pane.height\r\n                    }).forEach(function(pane) {\r\n                        return pane.height = weightForEmpty\r\n                    })\r\n                }\r\n                panes.forEach(function(pane) {\r\n                    return !pane.unit && (pane.height *= 1 / weightSum)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    updatePanesCanvases: function(panes, canvas, rotated) {\r\n        var distributedSpace = 0;\r\n        var padding = PANE_PADDING;\r\n        var paneSpace = rotated ? canvas.width - canvas.left - canvas.right : canvas.height - canvas.top - canvas.bottom;\r\n        var usefulSpace = paneSpace - padding * (panes.length - 1);\r\n        var startName = rotated ? \"left\" : \"top\";\r\n        var endName = rotated ? \"right\" : \"bottom\";\r\n        var totalCustomSpace = panes.reduce(function(prev, cur) {\r\n            return prev + (cur.unit ? cur.height : 0)\r\n        }, 0);\r\n        usefulSpace -= totalCustomSpace;\r\n        panes.forEach(function(pane) {\r\n            var calcLength = pane.unit ? pane.height : _round(pane.height * usefulSpace);\r\n            pane.canvas = pane.canvas || {};\r\n            extend(pane.canvas, canvas);\r\n            pane.canvas[startName] = canvas[startName] + distributedSpace;\r\n            pane.canvas[endName] = canvas[endName] + (paneSpace - calcLength - distributedSpace);\r\n            distributedSpace = distributedSpace + calcLength + padding;\r\n            setCanvasValues(pane.canvas)\r\n        })\r\n    },\r\n    unique: function(array) {\r\n        var values = {};\r\n        return map(array, function(item) {\r\n            var result = !values[item] ? item : null;\r\n            values[item] = true;\r\n            return result\r\n        })\r\n    },\r\n    map: map,\r\n    getVerticallyShiftedAngularCoords: function(bBox, dy, center) {\r\n        var isPositive = bBox.x + bBox.width / 2 >= center.x;\r\n        var horizontalOffset1 = (isPositive ? bBox.x : bBox.x + bBox.width) - center.x;\r\n        var verticalOffset1 = bBox.y - center.y;\r\n        var verticalOffset2 = verticalOffset1 + dy;\r\n        var horizontalOffset2 = _round(_sqrt(horizontalOffset1 * horizontalOffset1 + verticalOffset1 * verticalOffset1 - verticalOffset2 * verticalOffset2));\r\n        var dx = (isPositive ? +horizontalOffset2 : -horizontalOffset2) || horizontalOffset1;\r\n        return {\r\n            x: center.x + (isPositive ? dx : dx - bBox.width),\r\n            y: bBox.y + dy\r\n        }\r\n    },\r\n    mergeMarginOptions: function(opt1, opt2) {\r\n        return {\r\n            checkInterval: opt1.checkInterval || opt2.checkInterval,\r\n            size: Math.max(opt1.size || 0, opt2.size || 0),\r\n            percentStick: opt1.percentStick || opt2.percentStick,\r\n            sizePointNormalState: Math.max(opt1.sizePointNormalState || 0, opt2.sizePointNormalState || 0)\r\n        }\r\n    }\r\n});\r\n\r\nfunction getVizRangeObject(value) {\r\n    if (Array.isArray(value)) {\r\n        return {\r\n            startValue: value[0],\r\n            endValue: value[1]\r\n        }\r\n    } else {\r\n        return value || {}\r\n    }\r\n}\r\n\r\nfunction convertVisualRangeObject(visualRange, convertToVisualRange) {\r\n    if (convertToVisualRange) {\r\n        return visualRange\r\n    }\r\n    return [visualRange.startValue, visualRange.endValue]\r\n}\r\n\r\nfunction getAddFunction(range, correctZeroLevel) {\r\n    if (\"datetime\" === range.dataType) {\r\n        return function(rangeValue, marginValue) {\r\n            var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n            return new Date(rangeValue.getTime() + sign * marginValue)\r\n        }\r\n    }\r\n    if (\"logarithmic\" === range.axisType) {\r\n        return function(rangeValue, marginValue) {\r\n            var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n            var log = getLogExt(rangeValue, range.base) + sign * marginValue;\r\n            return raiseToExt(log, range.base)\r\n        }\r\n    }\r\n    return function(rangeValue, marginValue) {\r\n        var sign = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;\r\n        var newValue = rangeValue + sign * marginValue;\r\n        return correctZeroLevel && newValue * rangeValue <= 0 ? 0 : newValue\r\n    }\r\n}\r\n\r\nfunction adjustVisualRange(options, visualRange, wholeRange, dataRange) {\r\n    var minDefined = typeUtils.isDefined(visualRange.startValue);\r\n    var maxDefined = typeUtils.isDefined(visualRange.endValue);\r\n    var nonDiscrete = \"discrete\" !== options.axisType;\r\n    dataRange = dataRange || wholeRange;\r\n    var add = getAddFunction(options, false);\r\n    var min = minDefined ? visualRange.startValue : dataRange.min;\r\n    var max = maxDefined ? visualRange.endValue : dataRange.max;\r\n    var rangeLength = visualRange.length;\r\n    var categories = dataRange.categories;\r\n    if (nonDiscrete && !typeUtils.isDefined(min) && !typeUtils.isDefined(max)) {\r\n        return {\r\n            startValue: min,\r\n            endValue: max\r\n        }\r\n    }\r\n    if (isDefined(rangeLength)) {\r\n        if (nonDiscrete) {\r\n            if (\"datetime\" === options.dataType && !isNumber(rangeLength)) {\r\n                rangeLength = dateToMilliseconds(rangeLength)\r\n            }\r\n            if (maxDefined && !minDefined || !maxDefined && !minDefined) {\r\n                isDefined(wholeRange.max) && (max = max > wholeRange.max ? wholeRange.max : max);\r\n                min = add(max, rangeLength, -1)\r\n            } else {\r\n                if (minDefined && !maxDefined) {\r\n                    isDefined(wholeRange.min) && (min = min < wholeRange.min ? wholeRange.min : min);\r\n                    max = add(min, rangeLength)\r\n                }\r\n            }\r\n        } else {\r\n            rangeLength = parseInt(rangeLength);\r\n            if (!isNaN(rangeLength) && isFinite(rangeLength)) {\r\n                rangeLength--;\r\n                if (!maxDefined && !minDefined) {\r\n                    max = categories[categories.length - 1];\r\n                    min = categories[categories.length - 1 - rangeLength]\r\n                } else {\r\n                    if (minDefined && !maxDefined) {\r\n                        var categoriesInfo = exports.getCategoriesInfo(categories, min, void 0);\r\n                        max = categoriesInfo.categories[rangeLength]\r\n                    } else {\r\n                        if (!minDefined && maxDefined) {\r\n                            var _categoriesInfo = exports.getCategoriesInfo(categories, void 0, max);\r\n                            min = _categoriesInfo.categories[_categoriesInfo.categories.length - 1 - rangeLength]\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (nonDiscrete) {\r\n        if (isDefined(wholeRange.max) && max > wholeRange.max) {\r\n            max = wholeRange.max\r\n        }\r\n        if (isDefined(wholeRange.min) && min < wholeRange.min) {\r\n            min = wholeRange.min\r\n        }\r\n    }\r\n    return {\r\n        startValue: min,\r\n        endValue: max\r\n    }\r\n}\r\n\r\nfunction getLogExt(value, base) {\r\n    var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n    var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\r\n    if (!allowNegatives) {\r\n        return getLog(value, base)\r\n    }\r\n    if (0 === value) {\r\n        return 0\r\n    }\r\n    var transformValue = getLog(Math.abs(value), base) - (linearThreshold - 1);\r\n    if (transformValue < 0) {\r\n        return 0\r\n    }\r\n    return adjust(sign(value) * transformValue, Number(Math.pow(base, linearThreshold - 1).toFixed(Math.abs(linearThreshold))))\r\n}\r\n\r\nfunction raiseToExt(value, base) {\r\n    var allowNegatives = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n    var linearThreshold = arguments.length > 3 ? arguments[3] : void 0;\r\n    if (!allowNegatives) {\r\n        return raiseTo(value, base)\r\n    }\r\n    if (0 === value) {\r\n        return 0\r\n    }\r\n    var transformValue = raiseTo(Math.abs(value) + (linearThreshold - 1), base);\r\n    if (transformValue < 0) {\r\n        return 0\r\n    }\r\n    return adjust(sign(value) * transformValue, Number(Math.pow(base, linearThreshold).toFixed(Math.abs(linearThreshold))))\r\n}\r\n\r\nfunction rangesAreEqual(range, rangeFromOptions) {\r\n    if (Array.isArray(rangeFromOptions)) {\r\n        return range.length === rangeFromOptions.length && range.every(function(item, i) {\r\n            return valueOf(item) === valueOf(rangeFromOptions[i])\r\n        })\r\n    } else {\r\n        return valueOf(range.startValue) === valueOf(rangeFromOptions.startValue) && valueOf(range.endValue) === valueOf(rangeFromOptions.endValue)\r\n    }\r\n}\r\n\r\nfunction valueOf(value) {\r\n    return value && value.valueOf()\r\n}\r\n\r\nfunction pointInCanvas(canvas, x, y) {\r\n    return x >= canvas.left && x <= canvas.right && y >= canvas.top && y <= canvas.bottom\r\n}\r\nexports.getVizRangeObject = getVizRangeObject;\r\nexports.convertVisualRangeObject = convertVisualRangeObject;\r\nexports.adjustVisualRange = adjustVisualRange;\r\nexports.getAddFunction = getAddFunction;\r\nexports.getLog = getLog;\r\nexports.getLogExt = getLogExt;\r\nexports.getAdjustedLog10 = getAdjustedLog10;\r\nexports.raiseTo = raiseTo;\r\nexports.raiseToExt = raiseToExt;\r\nexports.normalizeAngle = normalizeAngle;\r\nexports.convertAngleToRendererSpace = convertAngleToRendererSpace;\r\nexports.degreesToRadians = degreesToRadians;\r\nexports.getCosAndSin = getCosAndSin;\r\nexports.getDecimalOrder = getDecimalOrder;\r\nexports.getAppropriateFormat = getAppropriateFormat;\r\nexports.getDistance = getDistance;\r\nexports.roundValue = roundValue;\r\nexports.getPower = getPower;\r\nexports.valueOf = valueOf;\r\nexports.rotateBBox = rotateBBox;\r\nexports.normalizeBBox = normalizeBBox;\r\nexports.PANE_PADDING = PANE_PADDING;\r\nexports.rangesAreEqual = rangesAreEqual;\r\nexports.pointInCanvas = pointInCanvas;\r\n"]},"metadata":{},"sourceType":"script"}