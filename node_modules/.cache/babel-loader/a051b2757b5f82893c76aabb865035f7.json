{"ast":null,"code":"/**\r\n * DevExtreme (events/core/events_engine.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar registerEventCallbacks = require(\"./event_registrator_callbacks\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar windowUtils = require(\"../../core/utils/window\");\n\nvar window = windowUtils.getWindow();\n\nvar injector = require(\"../../core/utils/dependency_injector\");\n\nvar typeUtils = require(\"../../core/utils/type\");\n\nvar Callbacks = require(\"../../core/utils/callbacks\");\n\nvar isWindow = typeUtils.isWindow;\nvar isFunction = typeUtils.isFunction;\nvar isString = typeUtils.isString;\n\nvar errors = require(\"../../core/errors\");\n\nvar WeakMap = require(\"../../core/polyfills/weak_map\");\n\nvar hookTouchProps = require(\"../../events/core/hook_touch_props\");\n\nvar callOnce = require(\"../../core/utils/call_once\");\n\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\n  mouseenter: \"mouseover\",\n  mouseleave: \"mouseout\",\n  pointerenter: \"pointerover\",\n  pointerleave: \"pointerout\"\n};\nvar NATIVE_EVENTS_TO_TRIGGER = {\n  focusin: \"focus\",\n  focusout: \"blur\"\n};\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\n\nvar matchesSafe = function matchesSafe(target, selector) {\n  return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector);\n};\n\nvar elementDataMap = new WeakMap();\nvar guid = 0;\nvar skipEvent;\n\nvar special = function () {\n  var specialData = {};\n  registerEventCallbacks.add(function (eventName, eventObject) {\n    specialData[eventName] = eventObject;\n  });\n  return {\n    getField: function getField(eventName, field) {\n      return specialData[eventName] && specialData[eventName][field];\n    },\n    callMethod: function callMethod(eventName, methodName, context, args) {\n      return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args);\n    }\n  };\n}();\n\nvar applyForEach = function applyForEach(args, method) {\n  var element = args[0];\n\n  if (!element) {\n    return;\n  }\n\n  if (domAdapter.isNode(element) || isWindow(element)) {\n    method.apply(eventsEngine, args);\n  } else {\n    if (!isString(element) && \"length\" in element) {\n      var itemArgs = Array.prototype.slice.call(args, 0);\n      Array.prototype.forEach.call(element, function (itemElement) {\n        itemArgs[0] = itemElement;\n        applyForEach(itemArgs, method);\n      });\n    } else {\n      throw errors.Error(\"E0025\");\n    }\n  }\n};\n\nvar getHandler = function getHandler(method) {\n  return function () {\n    applyForEach(arguments, method);\n  };\n};\n\nvar detectPassiveEventHandlersSupport = function detectPassiveEventHandlersSupport() {\n  var isSupported = false;\n\n  try {\n    var options = Object.defineProperty({}, \"passive\", {\n      get: function get() {\n        isSupported = true;\n        return true;\n      }\n    });\n    window.addEventListener(\"test\", null, options);\n  } catch (e) {}\n\n  return isSupported;\n};\n\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\n\nvar getHandlersController = function getHandlersController(element, eventName) {\n  var elementData = elementDataMap.get(element);\n  eventName = eventName || \"\";\n  var eventNameParts = eventName.split(\".\");\n  var namespaces = eventNameParts.slice(1);\n  var eventNameIsDefined = !!eventNameParts[0];\n  eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\n\n  if (!elementData) {\n    elementData = {};\n    elementDataMap.set(element, elementData);\n  }\n\n  if (!elementData[eventName]) {\n    elementData[eventName] = {\n      handleObjects: [],\n      nativeHandler: null\n    };\n  }\n\n  var eventData = elementData[eventName];\n  return {\n    addHandler: function addHandler(handler, selector, data) {\n      var callHandler = function callHandler(e, extraParameters) {\n        var handlerArgs = [e];\n        var target = e.currentTarget;\n        var relatedTarget = e.relatedTarget;\n        var secondaryTargetIsInside;\n        var result;\n\n        if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\n          secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || target.contains(relatedTarget));\n        }\n\n        if (void 0 !== extraParameters) {\n          handlerArgs.push(extraParameters);\n        }\n\n        special.callMethod(eventName, \"handle\", element, [e, data]);\n\n        if (!secondaryTargetIsInside) {\n          result = handler.apply(target, handlerArgs);\n        }\n\n        if (false === result) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      };\n\n      var wrappedHandler = function wrappedHandler(e, extraParameters) {\n        if (skipEvent && e.type === skipEvent) {\n          return;\n        }\n\n        e.data = data;\n        e.delegateTarget = element;\n\n        if (selector) {\n          var currentTarget = e.target;\n\n          while (currentTarget && currentTarget !== element) {\n            if (matchesSafe(currentTarget, selector)) {\n              e.currentTarget = currentTarget;\n              callHandler(e, extraParameters);\n            }\n\n            currentTarget = currentTarget.parentNode;\n          }\n        } else {\n          e.currentTarget = e.delegateTarget || e.target;\n          callHandler(e, extraParameters);\n        }\n      };\n\n      var handleObject = {\n        handler: handler,\n        wrappedHandler: wrappedHandler,\n        selector: selector,\n        type: eventName,\n        data: data,\n        namespace: namespaces.join(\".\"),\n        namespaces: namespaces,\n        guid: ++guid\n      };\n      eventData.handleObjects.push(handleObject);\n      var firstHandlerForTheType = 1 === eventData.handleObjects.length;\n      var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\n      var nativeListenerOptions;\n\n      if (shouldAddNativeListener) {\n        shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler]);\n      }\n\n      if (shouldAddNativeListener) {\n        eventData.nativeHandler = getNativeHandler(eventName);\n\n        if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\n          nativeListenerOptions = {\n            passive: false\n          };\n        }\n\n        eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions);\n      }\n\n      special.callMethod(eventName, \"add\", element, [handleObject]);\n    },\n    removeHandler: function removeHandler(handler, selector) {\n      var removeByEventName = function removeByEventName(eventName) {\n        var eventData = elementData[eventName];\n\n        if (!eventData.handleObjects.length) {\n          delete elementData[eventName];\n          return;\n        }\n\n        var removedHandler;\n        eventData.handleObjects = eventData.handleObjects.filter(function (handleObject) {\n          var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\n\n          if (!skip) {\n            removedHandler = handleObject.handler;\n            special.callMethod(eventName, \"remove\", element, [handleObject]);\n          }\n\n          return skip;\n        });\n        var lastHandlerForTheType = !eventData.handleObjects.length;\n        var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\n\n        if (shouldRemoveNativeListener) {\n          special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\n\n          if (eventData.nativeHandler) {\n            eventData.removeListener();\n          }\n\n          delete elementData[eventName];\n        }\n      };\n\n      if (eventNameIsDefined) {\n        removeByEventName(eventName);\n      } else {\n        for (var name in elementData) {\n          removeByEventName(name);\n        }\n      }\n\n      var elementDataIsEmpty = 0 === Object.keys(elementData).length;\n\n      if (elementDataIsEmpty) {\n        elementDataMap.delete(element);\n      }\n    },\n    callHandlers: function callHandlers(event, extraParameters) {\n      var forceStop = false;\n\n      var handleCallback = function handleCallback(handleObject) {\n        if (forceStop) {\n          return;\n        }\n\n        if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\n          handleObject.wrappedHandler(event, extraParameters);\n          forceStop = event.isImmediatePropagationStopped();\n        }\n      };\n\n      eventData.handleObjects.forEach(handleCallback);\n\n      if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\n        elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback);\n      }\n    }\n  };\n};\n\nvar getNativeHandler = function getNativeHandler(subscribeName) {\n  return function (event, extraParameters) {\n    var handlersController = getHandlersController(this, subscribeName);\n    event = eventsEngine.Event(event);\n    handlersController.callHandlers(event, extraParameters);\n  };\n};\n\nvar isSubset = function isSubset(original, checked) {\n  for (var i = 0; i < checked.length; i++) {\n    if (original.indexOf(checked[i]) < 0) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar normalizeOnArguments = function normalizeOnArguments(callback) {\n  return function (element, eventName, selector, data, handler) {\n    if (!handler) {\n      handler = data;\n      data = void 0;\n    }\n\n    if (\"string\" !== typeof selector) {\n      data = selector;\n      selector = void 0;\n    }\n\n    if (!handler && \"string\" === typeof eventName) {\n      handler = data || selector;\n      selector = void 0;\n      data = void 0;\n    }\n\n    callback(element, eventName, selector, data, handler);\n  };\n};\n\nvar normalizeOffArguments = function normalizeOffArguments(callback) {\n  return function (element, eventName, selector, handler) {\n    if (\"function\" === typeof selector) {\n      handler = selector;\n      selector = void 0;\n    }\n\n    callback(element, eventName, selector, handler);\n  };\n};\n\nvar normalizeTriggerArguments = function normalizeTriggerArguments(callback) {\n  return function (element, src, extraParameters) {\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!src.target) {\n      src.target = element;\n    }\n\n    src.currentTarget = element;\n\n    if (!src.delegateTarget) {\n      src.delegateTarget = element;\n    }\n\n    if (!src.type && src.originalEvent) {\n      src.type = src.originalEvent.type;\n    }\n\n    callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters);\n  };\n};\n\nvar normalizeEventArguments = function normalizeEventArguments(callback) {\n  return function (src, config) {\n    if (!(this instanceof eventsEngine.Event)) {\n      return new eventsEngine.Event(src, config);\n    }\n\n    if (!src) {\n      src = {};\n    }\n\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!config) {\n      config = {};\n    }\n\n    callback.call(this, src, config);\n  };\n};\n\nvar iterate = function iterate(callback) {\n  var iterateEventNames = function iterateEventNames(element, eventName) {\n    if (eventName && eventName.indexOf(\" \") > -1) {\n      var args = Array.prototype.slice.call(arguments, 0);\n      eventName.split(\" \").forEach(function (eventName) {\n        args[1] = eventName;\n        callback.apply(this, args);\n      });\n    } else {\n      callback.apply(this, arguments);\n    }\n  };\n\n  return function (element, eventName) {\n    if (\"object\" === _typeof(eventName)) {\n      var args = Array.prototype.slice.call(arguments, 0);\n\n      for (var name in eventName) {\n        args[1] = name;\n        args[args.length - 1] = eventName[name];\n        iterateEventNames.apply(this, args);\n      }\n    } else {\n      iterateEventNames.apply(this, arguments);\n    }\n  };\n};\n\nvar callNativeMethod = function callNativeMethod(eventName, element) {\n  var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\n\n  var isLinkClickEvent = function isLinkClickEvent(eventName, element) {\n    return \"click\" === eventName && \"a\" === element.localName;\n  };\n\n  if (isLinkClickEvent(eventName, element)) {\n    return;\n  }\n\n  if (isFunction(element[nativeMethodName])) {\n    skipEvent = eventName;\n    element[nativeMethodName]();\n    skipEvent = void 0;\n  }\n};\n\nvar calculateWhich = function calculateWhich(event) {\n  var setForMouseEvent = function setForMouseEvent(event) {\n    var mouseEventRegex = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n    return !event.which && void 0 !== event.button && mouseEventRegex.test(event.type);\n  };\n\n  var setForKeyEvent = function setForKeyEvent(event) {\n    return null == event.which && 0 === event.type.indexOf(\"key\");\n  };\n\n  if (setForKeyEvent(event)) {\n    return null != event.charCode ? event.charCode : event.keyCode;\n  }\n\n  if (setForMouseEvent(event)) {\n    var whichByButton = {\n      1: 1,\n      2: 3,\n      3: 1,\n      4: 2\n    };\n    return whichByButton[event.button];\n  }\n\n  return event.which;\n};\n\nvar eventsEngine = injector({\n  on: getHandler(normalizeOnArguments(iterate(function (element, eventName, selector, data, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.addHandler(handler, selector, data);\n  }))),\n  one: getHandler(normalizeOnArguments(function (element, eventName, selector, data, handler) {\n    var oneTimeHandler = function oneTimeHandler() {\n      eventsEngine.off(element, eventName, selector, oneTimeHandler);\n      handler.apply(this, arguments);\n    };\n\n    eventsEngine.on(element, eventName, selector, data, oneTimeHandler);\n  })),\n  off: getHandler(normalizeOffArguments(iterate(function (element, eventName, selector, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.removeHandler(handler, selector);\n  }))),\n  trigger: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var eventName = event.type;\n    var handlersController = getHandlersController(element, event.type);\n    special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\n    handlersController.callHandlers(event, extraParameters);\n    var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || NO_BUBBLE_EVENTS.indexOf(eventName) !== -1;\n\n    if (!noBubble) {\n      var parents = [];\n\n      var getParents = function getParents(element) {\n        var parent = element.parentNode;\n\n        if (parent) {\n          parents.push(parent);\n          getParents(parent);\n        }\n      };\n\n      getParents(element);\n      parents.push(window);\n      var i = 0;\n\n      while (parents[i] && !event.isPropagationStopped()) {\n        var parentDataByEvent = getHandlersController(parents[i], event.type);\n        parentDataByEvent.callHandlers(extend(event, {\n          currentTarget: parents[i]\n        }), extraParameters);\n        i++;\n      }\n    }\n\n    if (element.nodeType || isWindow(element)) {\n      special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\n      callNativeMethod(eventName, element);\n    }\n  })),\n  triggerHandler: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var handlersController = getHandlersController(element, event.type);\n    handlersController.callHandlers(event, extraParameters);\n  }))\n});\n\nvar initEvent = function initEvent(EventClass) {\n  if (EventClass) {\n    eventsEngine.Event = EventClass;\n    eventsEngine.Event.prototype = EventClass.prototype;\n  }\n};\n\ninitEvent(normalizeEventArguments(function (src, config) {\n  var that = this;\n  var propagationStopped = false;\n  var immediatePropagationStopped = false;\n  var defaultPrevented = false;\n  extend(that, src);\n\n  if (src instanceof eventsEngine.Event || windowUtils.hasWindow() && src instanceof window.Event) {\n    that.originalEvent = src;\n    that.currentTarget = void 0;\n  }\n\n  if (!(src instanceof eventsEngine.Event)) {\n    extend(that, {\n      isPropagationStopped: function isPropagationStopped() {\n        return !!(propagationStopped || that.originalEvent && that.originalEvent.propagationStopped);\n      },\n      stopPropagation: function stopPropagation() {\n        propagationStopped = true;\n        that.originalEvent && that.originalEvent.stopPropagation();\n      },\n      isImmediatePropagationStopped: function isImmediatePropagationStopped() {\n        return immediatePropagationStopped;\n      },\n      stopImmediatePropagation: function stopImmediatePropagation() {\n        this.stopPropagation();\n        immediatePropagationStopped = true;\n        that.originalEvent && that.originalEvent.stopImmediatePropagation();\n      },\n      isDefaultPrevented: function isDefaultPrevented() {\n        return !!(defaultPrevented || that.originalEvent && that.originalEvent.defaultPrevented);\n      },\n      preventDefault: function preventDefault() {\n        defaultPrevented = true;\n        that.originalEvent && that.originalEvent.preventDefault();\n      }\n    });\n  }\n\n  addProperty(\"which\", calculateWhich, that);\n\n  if (0 === src.type.indexOf(\"touch\")) {\n    delete config.pageX;\n    delete config.pageY;\n  }\n\n  extend(that, config);\n  that.guid = ++guid;\n}));\n\nvar addProperty = function addProperty(propName, hook, eventInstance) {\n  Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\n    enumerable: true,\n    configurable: true,\n    get: function get() {\n      return this.originalEvent && hook(this.originalEvent);\n    },\n    set: function set(value) {\n      Object.defineProperty(this, propName, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    }\n  });\n};\n\nhookTouchProps(addProperty);\nvar beforeSetStrategy = Callbacks();\nvar afterSetStrategy = Callbacks();\n\neventsEngine.set = function (engine) {\n  beforeSetStrategy.fire();\n  eventsEngine.inject(engine);\n  initEvent(engine.Event);\n  afterSetStrategy.fire();\n};\n\neventsEngine.subscribeGlobal = function () {\n  applyForEach(arguments, normalizeOnArguments(function () {\n    var args = arguments;\n    eventsEngine.on.apply(this, args);\n    beforeSetStrategy.add(function () {\n      var offArgs = Array.prototype.slice.call(args, 0);\n      offArgs.splice(3, 1);\n      eventsEngine.off.apply(this, offArgs);\n    });\n    afterSetStrategy.add(function () {\n      eventsEngine.on.apply(this, args);\n    });\n  }));\n};\n\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\nmodule.exports = eventsEngine;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/events/core/events_engine.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","registerEventCallbacks","require","extend","domAdapter","windowUtils","window","getWindow","injector","typeUtils","Callbacks","isWindow","isFunction","isString","errors","WeakMap","hookTouchProps","callOnce","EMPTY_EVENT_NAME","NATIVE_EVENTS_TO_SUBSCRIBE","mouseenter","mouseleave","pointerenter","pointerleave","NATIVE_EVENTS_TO_TRIGGER","focusin","focusout","NO_BUBBLE_EVENTS","forcePassiveFalseEventNames","matchesSafe","target","selector","nodeName","elementMatches","elementDataMap","guid","skipEvent","special","specialData","add","eventName","eventObject","getField","field","callMethod","methodName","context","args","apply","applyForEach","method","element","isNode","eventsEngine","itemArgs","Array","slice","call","forEach","itemElement","Error","getHandler","arguments","detectPassiveEventHandlersSupport","isSupported","options","Object","defineProperty","get","addEventListener","e","passiveEventHandlersSupported","getHandlersController","elementData","eventNameParts","split","namespaces","eventNameIsDefined","set","handleObjects","nativeHandler","eventData","addHandler","handler","data","callHandler","extraParameters","handlerArgs","currentTarget","relatedTarget","secondaryTargetIsInside","result","contains","push","preventDefault","stopPropagation","wrappedHandler","type","delegateTarget","parentNode","handleObject","namespace","join","firstHandlerForTheType","length","shouldAddNativeListener","nativeListenerOptions","getNativeHandler","indexOf","passive","removeListener","listen","removeHandler","removeByEventName","removedHandler","filter","skip","isSubset","lastHandlerForTheType","shouldRemoveNativeListener","name","elementDataIsEmpty","keys","delete","callHandlers","event","forceStop","handleCallback","isImmediatePropagationStopped","subscribeName","handlersController","Event","original","checked","i","normalizeOnArguments","callback","normalizeOffArguments","normalizeTriggerArguments","src","originalEvent","normalizeEventArguments","config","iterate","iterateEventNames","callNativeMethod","nativeMethodName","isLinkClickEvent","localName","calculateWhich","setForMouseEvent","mouseEventRegex","which","button","test","setForKeyEvent","charCode","keyCode","whichByButton","on","one","oneTimeHandler","off","trigger","noBubble","isPropagationStopped","parents","getParents","parent","parentDataByEvent","nodeType","triggerHandler","initEvent","EventClass","that","propagationStopped","immediatePropagationStopped","defaultPrevented","hasWindow","stopImmediatePropagation","isDefaultPrevented","addProperty","pageX","pageY","propName","hook","eventInstance","enumerable","configurable","value","writable","beforeSetStrategy","afterSetStrategy","engine","fire","inject","subscribeGlobal","offArgs","splice","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (events/core/events_engine.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar registerEventCallbacks = require(\"./event_registrator_callbacks\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar windowUtils = require(\"../../core/utils/window\");\r\nvar window = windowUtils.getWindow();\r\nvar injector = require(\"../../core/utils/dependency_injector\");\r\nvar typeUtils = require(\"../../core/utils/type\");\r\nvar Callbacks = require(\"../../core/utils/callbacks\");\r\nvar isWindow = typeUtils.isWindow;\r\nvar isFunction = typeUtils.isFunction;\r\nvar isString = typeUtils.isString;\r\nvar errors = require(\"../../core/errors\");\r\nvar WeakMap = require(\"../../core/polyfills/weak_map\");\r\nvar hookTouchProps = require(\"../../events/core/hook_touch_props\");\r\nvar callOnce = require(\"../../core/utils/call_once\");\r\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\r\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\r\n    mouseenter: \"mouseover\",\r\n    mouseleave: \"mouseout\",\r\n    pointerenter: \"pointerover\",\r\n    pointerleave: \"pointerout\"\r\n};\r\nvar NATIVE_EVENTS_TO_TRIGGER = {\r\n    focusin: \"focus\",\r\n    focusout: \"blur\"\r\n};\r\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\r\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\r\nvar matchesSafe = function(target, selector) {\r\n    return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector)\r\n};\r\nvar elementDataMap = new WeakMap;\r\nvar guid = 0;\r\nvar skipEvent;\r\nvar special = function() {\r\n    var specialData = {};\r\n    registerEventCallbacks.add(function(eventName, eventObject) {\r\n        specialData[eventName] = eventObject\r\n    });\r\n    return {\r\n        getField: function(eventName, field) {\r\n            return specialData[eventName] && specialData[eventName][field]\r\n        },\r\n        callMethod: function(eventName, methodName, context, args) {\r\n            return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args)\r\n        }\r\n    }\r\n}();\r\nvar applyForEach = function applyForEach(args, method) {\r\n    var element = args[0];\r\n    if (!element) {\r\n        return\r\n    }\r\n    if (domAdapter.isNode(element) || isWindow(element)) {\r\n        method.apply(eventsEngine, args)\r\n    } else {\r\n        if (!isString(element) && \"length\" in element) {\r\n            var itemArgs = Array.prototype.slice.call(args, 0);\r\n            Array.prototype.forEach.call(element, function(itemElement) {\r\n                itemArgs[0] = itemElement;\r\n                applyForEach(itemArgs, method)\r\n            })\r\n        } else {\r\n            throw errors.Error(\"E0025\")\r\n        }\r\n    }\r\n};\r\nvar getHandler = function(method) {\r\n    return function() {\r\n        applyForEach(arguments, method)\r\n    }\r\n};\r\nvar detectPassiveEventHandlersSupport = function() {\r\n    var isSupported = false;\r\n    try {\r\n        var options = Object.defineProperty({}, \"passive\", {\r\n            get: function() {\r\n                isSupported = true;\r\n                return true\r\n            }\r\n        });\r\n        window.addEventListener(\"test\", null, options)\r\n    } catch (e) {}\r\n    return isSupported\r\n};\r\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\r\nvar getHandlersController = function(element, eventName) {\r\n    var elementData = elementDataMap.get(element);\r\n    eventName = eventName || \"\";\r\n    var eventNameParts = eventName.split(\".\");\r\n    var namespaces = eventNameParts.slice(1);\r\n    var eventNameIsDefined = !!eventNameParts[0];\r\n    eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\r\n    if (!elementData) {\r\n        elementData = {};\r\n        elementDataMap.set(element, elementData)\r\n    }\r\n    if (!elementData[eventName]) {\r\n        elementData[eventName] = {\r\n            handleObjects: [],\r\n            nativeHandler: null\r\n        }\r\n    }\r\n    var eventData = elementData[eventName];\r\n    return {\r\n        addHandler: function(handler, selector, data) {\r\n            var callHandler = function(e, extraParameters) {\r\n                var handlerArgs = [e];\r\n                var target = e.currentTarget;\r\n                var relatedTarget = e.relatedTarget;\r\n                var secondaryTargetIsInside;\r\n                var result;\r\n                if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\r\n                    secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || target.contains(relatedTarget))\r\n                }\r\n                if (void 0 !== extraParameters) {\r\n                    handlerArgs.push(extraParameters)\r\n                }\r\n                special.callMethod(eventName, \"handle\", element, [e, data]);\r\n                if (!secondaryTargetIsInside) {\r\n                    result = handler.apply(target, handlerArgs)\r\n                }\r\n                if (false === result) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation()\r\n                }\r\n            };\r\n            var wrappedHandler = function(e, extraParameters) {\r\n                if (skipEvent && e.type === skipEvent) {\r\n                    return\r\n                }\r\n                e.data = data;\r\n                e.delegateTarget = element;\r\n                if (selector) {\r\n                    var currentTarget = e.target;\r\n                    while (currentTarget && currentTarget !== element) {\r\n                        if (matchesSafe(currentTarget, selector)) {\r\n                            e.currentTarget = currentTarget;\r\n                            callHandler(e, extraParameters)\r\n                        }\r\n                        currentTarget = currentTarget.parentNode\r\n                    }\r\n                } else {\r\n                    e.currentTarget = e.delegateTarget || e.target;\r\n                    callHandler(e, extraParameters)\r\n                }\r\n            };\r\n            var handleObject = {\r\n                handler: handler,\r\n                wrappedHandler: wrappedHandler,\r\n                selector: selector,\r\n                type: eventName,\r\n                data: data,\r\n                namespace: namespaces.join(\".\"),\r\n                namespaces: namespaces,\r\n                guid: ++guid\r\n            };\r\n            eventData.handleObjects.push(handleObject);\r\n            var firstHandlerForTheType = 1 === eventData.handleObjects.length;\r\n            var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\r\n            var nativeListenerOptions;\r\n            if (shouldAddNativeListener) {\r\n                shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler])\r\n            }\r\n            if (shouldAddNativeListener) {\r\n                eventData.nativeHandler = getNativeHandler(eventName);\r\n                if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\r\n                    nativeListenerOptions = {\r\n                        passive: false\r\n                    }\r\n                }\r\n                eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions)\r\n            }\r\n            special.callMethod(eventName, \"add\", element, [handleObject])\r\n        },\r\n        removeHandler: function(handler, selector) {\r\n            var removeByEventName = function(eventName) {\r\n                var eventData = elementData[eventName];\r\n                if (!eventData.handleObjects.length) {\r\n                    delete elementData[eventName];\r\n                    return\r\n                }\r\n                var removedHandler;\r\n                eventData.handleObjects = eventData.handleObjects.filter(function(handleObject) {\r\n                    var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\r\n                    if (!skip) {\r\n                        removedHandler = handleObject.handler;\r\n                        special.callMethod(eventName, \"remove\", element, [handleObject])\r\n                    }\r\n                    return skip\r\n                });\r\n                var lastHandlerForTheType = !eventData.handleObjects.length;\r\n                var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\r\n                if (shouldRemoveNativeListener) {\r\n                    special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\r\n                    if (eventData.nativeHandler) {\r\n                        eventData.removeListener()\r\n                    }\r\n                    delete elementData[eventName]\r\n                }\r\n            };\r\n            if (eventNameIsDefined) {\r\n                removeByEventName(eventName)\r\n            } else {\r\n                for (var name in elementData) {\r\n                    removeByEventName(name)\r\n                }\r\n            }\r\n            var elementDataIsEmpty = 0 === Object.keys(elementData).length;\r\n            if (elementDataIsEmpty) {\r\n                elementDataMap.delete(element)\r\n            }\r\n        },\r\n        callHandlers: function(event, extraParameters) {\r\n            var forceStop = false;\r\n            var handleCallback = function(handleObject) {\r\n                if (forceStop) {\r\n                    return\r\n                }\r\n                if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\r\n                    handleObject.wrappedHandler(event, extraParameters);\r\n                    forceStop = event.isImmediatePropagationStopped()\r\n                }\r\n            };\r\n            eventData.handleObjects.forEach(handleCallback);\r\n            if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\r\n                elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback)\r\n            }\r\n        }\r\n    }\r\n};\r\nvar getNativeHandler = function(subscribeName) {\r\n    return function(event, extraParameters) {\r\n        var handlersController = getHandlersController(this, subscribeName);\r\n        event = eventsEngine.Event(event);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    }\r\n};\r\nvar isSubset = function(original, checked) {\r\n    for (var i = 0; i < checked.length; i++) {\r\n        if (original.indexOf(checked[i]) < 0) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n};\r\nvar normalizeOnArguments = function(callback) {\r\n    return function(element, eventName, selector, data, handler) {\r\n        if (!handler) {\r\n            handler = data;\r\n            data = void 0\r\n        }\r\n        if (\"string\" !== typeof selector) {\r\n            data = selector;\r\n            selector = void 0\r\n        }\r\n        if (!handler && \"string\" === typeof eventName) {\r\n            handler = data || selector;\r\n            selector = void 0;\r\n            data = void 0\r\n        }\r\n        callback(element, eventName, selector, data, handler)\r\n    }\r\n};\r\nvar normalizeOffArguments = function(callback) {\r\n    return function(element, eventName, selector, handler) {\r\n        if (\"function\" === typeof selector) {\r\n            handler = selector;\r\n            selector = void 0\r\n        }\r\n        callback(element, eventName, selector, handler)\r\n    }\r\n};\r\nvar normalizeTriggerArguments = function(callback) {\r\n    return function(element, src, extraParameters) {\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!src.target) {\r\n            src.target = element\r\n        }\r\n        src.currentTarget = element;\r\n        if (!src.delegateTarget) {\r\n            src.delegateTarget = element\r\n        }\r\n        if (!src.type && src.originalEvent) {\r\n            src.type = src.originalEvent.type\r\n        }\r\n        callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters)\r\n    }\r\n};\r\nvar normalizeEventArguments = function(callback) {\r\n    return function(src, config) {\r\n        if (!(this instanceof eventsEngine.Event)) {\r\n            return new eventsEngine.Event(src, config)\r\n        }\r\n        if (!src) {\r\n            src = {}\r\n        }\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!config) {\r\n            config = {}\r\n        }\r\n        callback.call(this, src, config)\r\n    }\r\n};\r\nvar iterate = function(callback) {\r\n    var iterateEventNames = function(element, eventName) {\r\n        if (eventName && eventName.indexOf(\" \") > -1) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            eventName.split(\" \").forEach(function(eventName) {\r\n                args[1] = eventName;\r\n                callback.apply(this, args)\r\n            })\r\n        } else {\r\n            callback.apply(this, arguments)\r\n        }\r\n    };\r\n    return function(element, eventName) {\r\n        if (\"object\" === _typeof(eventName)) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            for (var name in eventName) {\r\n                args[1] = name;\r\n                args[args.length - 1] = eventName[name];\r\n                iterateEventNames.apply(this, args)\r\n            }\r\n        } else {\r\n            iterateEventNames.apply(this, arguments)\r\n        }\r\n    }\r\n};\r\nvar callNativeMethod = function(eventName, element) {\r\n    var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\r\n    var isLinkClickEvent = function(eventName, element) {\r\n        return \"click\" === eventName && \"a\" === element.localName\r\n    };\r\n    if (isLinkClickEvent(eventName, element)) {\r\n        return\r\n    }\r\n    if (isFunction(element[nativeMethodName])) {\r\n        skipEvent = eventName;\r\n        element[nativeMethodName]();\r\n        skipEvent = void 0\r\n    }\r\n};\r\nvar calculateWhich = function(event) {\r\n    var setForMouseEvent = function(event) {\r\n        var mouseEventRegex = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\r\n        return !event.which && void 0 !== event.button && mouseEventRegex.test(event.type)\r\n    };\r\n    var setForKeyEvent = function(event) {\r\n        return null == event.which && 0 === event.type.indexOf(\"key\")\r\n    };\r\n    if (setForKeyEvent(event)) {\r\n        return null != event.charCode ? event.charCode : event.keyCode\r\n    }\r\n    if (setForMouseEvent(event)) {\r\n        var whichByButton = {\r\n            1: 1,\r\n            2: 3,\r\n            3: 1,\r\n            4: 2\r\n        };\r\n        return whichByButton[event.button]\r\n    }\r\n    return event.which\r\n};\r\nvar eventsEngine = injector({\r\n    on: getHandler(normalizeOnArguments(iterate(function(element, eventName, selector, data, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.addHandler(handler, selector, data)\r\n    }))),\r\n    one: getHandler(normalizeOnArguments(function(element, eventName, selector, data, handler) {\r\n        var oneTimeHandler = function oneTimeHandler() {\r\n            eventsEngine.off(element, eventName, selector, oneTimeHandler);\r\n            handler.apply(this, arguments)\r\n        };\r\n        eventsEngine.on(element, eventName, selector, data, oneTimeHandler)\r\n    })),\r\n    off: getHandler(normalizeOffArguments(iterate(function(element, eventName, selector, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.removeHandler(handler, selector)\r\n    }))),\r\n    trigger: getHandler(normalizeTriggerArguments(function(element, event, extraParameters) {\r\n        var eventName = event.type;\r\n        var handlersController = getHandlersController(element, event.type);\r\n        special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\r\n        handlersController.callHandlers(event, extraParameters);\r\n        var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || NO_BUBBLE_EVENTS.indexOf(eventName) !== -1;\r\n        if (!noBubble) {\r\n            var parents = [];\r\n            var getParents = function getParents(element) {\r\n                var parent = element.parentNode;\r\n                if (parent) {\r\n                    parents.push(parent);\r\n                    getParents(parent)\r\n                }\r\n            };\r\n            getParents(element);\r\n            parents.push(window);\r\n            var i = 0;\r\n            while (parents[i] && !event.isPropagationStopped()) {\r\n                var parentDataByEvent = getHandlersController(parents[i], event.type);\r\n                parentDataByEvent.callHandlers(extend(event, {\r\n                    currentTarget: parents[i]\r\n                }), extraParameters);\r\n                i++\r\n            }\r\n        }\r\n        if (element.nodeType || isWindow(element)) {\r\n            special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\r\n            callNativeMethod(eventName, element)\r\n        }\r\n    })),\r\n    triggerHandler: getHandler(normalizeTriggerArguments(function(element, event, extraParameters) {\r\n        var handlersController = getHandlersController(element, event.type);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    }))\r\n});\r\nvar initEvent = function(EventClass) {\r\n    if (EventClass) {\r\n        eventsEngine.Event = EventClass;\r\n        eventsEngine.Event.prototype = EventClass.prototype\r\n    }\r\n};\r\ninitEvent(normalizeEventArguments(function(src, config) {\r\n    var that = this;\r\n    var propagationStopped = false;\r\n    var immediatePropagationStopped = false;\r\n    var defaultPrevented = false;\r\n    extend(that, src);\r\n    if (src instanceof eventsEngine.Event || windowUtils.hasWindow() && src instanceof window.Event) {\r\n        that.originalEvent = src;\r\n        that.currentTarget = void 0\r\n    }\r\n    if (!(src instanceof eventsEngine.Event)) {\r\n        extend(that, {\r\n            isPropagationStopped: function() {\r\n                return !!(propagationStopped || that.originalEvent && that.originalEvent.propagationStopped)\r\n            },\r\n            stopPropagation: function() {\r\n                propagationStopped = true;\r\n                that.originalEvent && that.originalEvent.stopPropagation()\r\n            },\r\n            isImmediatePropagationStopped: function() {\r\n                return immediatePropagationStopped\r\n            },\r\n            stopImmediatePropagation: function() {\r\n                this.stopPropagation();\r\n                immediatePropagationStopped = true;\r\n                that.originalEvent && that.originalEvent.stopImmediatePropagation()\r\n            },\r\n            isDefaultPrevented: function() {\r\n                return !!(defaultPrevented || that.originalEvent && that.originalEvent.defaultPrevented)\r\n            },\r\n            preventDefault: function() {\r\n                defaultPrevented = true;\r\n                that.originalEvent && that.originalEvent.preventDefault()\r\n            }\r\n        })\r\n    }\r\n    addProperty(\"which\", calculateWhich, that);\r\n    if (0 === src.type.indexOf(\"touch\")) {\r\n        delete config.pageX;\r\n        delete config.pageY\r\n    }\r\n    extend(that, config);\r\n    that.guid = ++guid\r\n}));\r\nvar addProperty = function(propName, hook, eventInstance) {\r\n    Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: function() {\r\n            return this.originalEvent && hook(this.originalEvent)\r\n        },\r\n        set: function(value) {\r\n            Object.defineProperty(this, propName, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true,\r\n                value: value\r\n            })\r\n        }\r\n    })\r\n};\r\nhookTouchProps(addProperty);\r\nvar beforeSetStrategy = Callbacks();\r\nvar afterSetStrategy = Callbacks();\r\neventsEngine.set = function(engine) {\r\n    beforeSetStrategy.fire();\r\n    eventsEngine.inject(engine);\r\n    initEvent(engine.Event);\r\n    afterSetStrategy.fire()\r\n};\r\neventsEngine.subscribeGlobal = function() {\r\n    applyForEach(arguments, normalizeOnArguments(function() {\r\n        var args = arguments;\r\n        eventsEngine.on.apply(this, args);\r\n        beforeSetStrategy.add(function() {\r\n            var offArgs = Array.prototype.slice.call(args, 0);\r\n            offArgs.splice(3, 1);\r\n            eventsEngine.off.apply(this, offArgs)\r\n        });\r\n        afterSetStrategy.add(function() {\r\n            eventsEngine.on.apply(this, args)\r\n        })\r\n    }))\r\n};\r\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\r\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\r\nmodule.exports = eventsEngine;\r\n"]},"metadata":{},"sourceType":"script"}