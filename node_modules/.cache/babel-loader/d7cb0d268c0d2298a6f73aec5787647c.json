{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/tracker.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar domAdapter = require(\"../../core/dom_adapter\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar clickEvent = require(\"../../events/click\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar each = require(\"../../core/utils/iterator\").each;\n\nvar consts = require(\"../components/consts\");\n\nvar eventsConsts = consts.events;\n\nvar vizUtils = require(\"../core/utils\");\n\nvar pointerEvents = require(\"../../events/pointer\");\n\nvar holdEvent = require(\"../../events/hold\");\n\nvar addNamespace = require(\"../../events/utils\").addNamespace;\n\nvar isDefined = require(\"../../core/utils/type\").isDefined;\n\nvar _normalizeEnum = vizUtils.normalizeEnum;\nvar inCanvas = vizUtils.pointInCanvas;\nvar _floor = Math.floor;\nvar _each = each;\n\nvar _noop = require(\"../../core/utils/common\").noop;\n\nvar HOVER_STATE = consts.states.hoverMark;\nvar NORMAL_STATE = consts.states.normalMark;\nvar EVENT_NS = \"dxChartTracker\";\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\nvar LEGEND_CLICK = \"legendClick\";\nvar SERIES_CLICK = \"seriesClick\";\nvar POINT_CLICK = \"pointClick\";\nvar POINT_DATA = \"chart-data-point\";\nvar SERIES_DATA = \"chart-data-series\";\nvar ARG_DATA = \"chart-data-argument\";\nvar DELAY = 100;\nvar NONE_MODE = \"none\";\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\nvar INCLUDE_POINTS_MODE = \"includepoints\";\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\n\nfunction getData(event, dataKey) {\n  var target = event.target;\n  return (\"tspan\" === target.tagName ? target.parentNode : target)[dataKey];\n}\n\nfunction eventCanceled(event, target) {\n  return event.cancel || !target.getOptions();\n}\n\nfunction correctLegendHoverMode(mode) {\n  if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\n    return mode;\n  } else {\n    return INCLUDE_POINTS_MODE;\n  }\n}\n\nfunction correctHoverMode(target) {\n  var mode = target.getOptions().hoverMode;\n  return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE;\n}\n\nvar baseTrackerPrototype = {\n  ctor: function ctor(options) {\n    var that = this;\n    var data = {\n      tracker: that\n    };\n    that._renderer = options.renderer;\n    that._legend = options.legend;\n    that._tooltip = options.tooltip;\n    that._eventTrigger = options.eventTrigger;\n    that._seriesGroup = options.seriesGroup;\n    options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\n\n    that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(clickEvent.name, EVENT_NS), data, that._clickHandler).on(addNamespace(holdEvent.name, EVENT_NS), {\n      timeout: 300\n    }, _noop);\n  },\n  update: function update(options) {\n    this._chart = options.chart;\n  },\n  updateSeries: function updateSeries(series, resetDecorations) {\n    var that = this;\n    var noHoveredSeries = !(series && series.some(function (s) {\n      return s === that.hoveredSeries;\n    }) || that._hoveredPoint && that._hoveredPoint.series);\n\n    if (that._storedSeries !== series) {\n      that._storedSeries = series || [];\n    }\n\n    if (noHoveredSeries) {\n      that._clean();\n\n      that._renderer.initHatching();\n    }\n\n    if (resetDecorations) {\n      that.clearSelection();\n\n      if (!noHoveredSeries) {\n        that._hideTooltip(that.pointAtShownTooltip);\n\n        that.clearHover();\n      }\n    }\n  },\n  setCanvases: function setCanvases(mainCanvas, paneCanvases) {\n    this._mainCanvas = mainCanvas;\n    this._canvases = paneCanvases;\n  },\n  repairTooltip: function repairTooltip() {\n    var point = this.pointAtShownTooltip;\n\n    if (!point || !point.series || !point.isVisible()) {\n      this._hideTooltip(point, true);\n    } else {\n      this._showTooltip(point);\n    }\n  },\n  _setHoveredPoint: function _setHoveredPoint(point) {\n    if (point === this._hoveredPoint) {\n      return;\n    }\n\n    this._releaseHoveredPoint();\n\n    point.hover();\n    this._hoveredPoint = point;\n  },\n  _releaseHoveredPoint: function _releaseHoveredPoint() {\n    if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\n      this._hoveredPoint.clearHover();\n\n      this._hoveredPoint = null;\n\n      if (this._tooltip.isEnabled()) {\n        this._hideTooltip(this._hoveredPoint);\n      }\n    }\n  },\n  _setHoveredSeries: function _setHoveredSeries(series, mode) {\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n\n    series.hover(mode);\n    this.hoveredSeries = series;\n  },\n  _releaseHoveredSeries: function _releaseHoveredSeries(needSetHoverView, hoveredPoint) {\n    if (this.hoveredSeries) {\n      this.hoveredSeries.clearHover();\n      this.hoveredSeries = null;\n    }\n  },\n  clearSelection: function clearSelection() {\n    this._storedSeries.forEach(function (series) {\n      if (series) {\n        series.clearSelection();\n        series.getPoints().forEach(function (point) {\n          point.clearSelection();\n        });\n      }\n    });\n  },\n  _clean: function _clean() {\n    var that = this;\n    that.hoveredPoint = that.hoveredSeries = that._hoveredArgumentPoints = null;\n\n    that._hideTooltip(that.pointAtShownTooltip);\n  },\n  clearHover: function clearHover() {\n    this._resetHoveredArgument();\n\n    this._releaseHoveredSeries();\n\n    this._releaseHoveredPoint();\n  },\n  _hideTooltip: function _hideTooltip(point, silent) {\n    var that = this;\n\n    if (!that._tooltip || point && that.pointAtShownTooltip !== point) {\n      return;\n    }\n\n    if (!silent && that.pointAtShownTooltip) {\n      that.pointAtShownTooltip = null;\n    }\n\n    that._tooltip.hide();\n  },\n  _showTooltip: function _showTooltip(point) {\n    var that = this;\n    var tooltipFormatObject;\n    var eventData;\n\n    if (point && point.getOptions()) {\n      tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\n\n      if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\n        return;\n      }\n\n      if (!that.pointAtShownTooltip || that.pointAtShownTooltip !== point) {\n        eventData = {\n          target: point\n        };\n      }\n\n      var coords = point.getTooltipParams(that._tooltip.getLocation());\n\n      var rootOffset = that._renderer.getRootOffset();\n\n      coords.x += rootOffset.left;\n      coords.y += rootOffset.top;\n\n      if (!that._tooltip.show(tooltipFormatObject, coords, eventData)) {\n        return;\n      }\n\n      that.pointAtShownTooltip = point;\n    }\n  },\n  _showPointTooltip: function _showPointTooltip(event, point) {\n    var that = event.data.tracker;\n    var pointWithTooltip = that.pointAtShownTooltip;\n\n    if (pointWithTooltip && pointWithTooltip !== point) {\n      that._hideTooltip(pointWithTooltip);\n    }\n\n    that._showTooltip(point);\n  },\n  _hidePointTooltip: function _hidePointTooltip(event, point) {\n    event.data.tracker._hideTooltip(point);\n  },\n  _enableOutHandler: function _enableOutHandler() {\n    if (this._outHandler) {\n      return;\n    }\n\n    var that = this;\n\n    var handler = function handler(e) {\n      var rootOffset = that._renderer.getRootOffset();\n\n      var x = _floor(e.pageX - rootOffset.left);\n\n      var y = _floor(e.pageY - rootOffset.top);\n\n      if (!inCanvas(that._mainCanvas, x, y)) {\n        that._pointerOut();\n\n        that._disableOutHandler();\n      }\n    };\n\n    eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\n    this._outHandler = handler;\n  },\n  _disableOutHandler: function _disableOutHandler() {\n    this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\n    this._outHandler = null;\n  },\n  stopCurrentHandling: function stopCurrentHandling() {\n    this._pointerOut(true);\n  },\n  _pointerOut: function _pointerOut(force) {\n    this.clearHover();\n    (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip);\n  },\n  _triggerLegendClick: function _triggerLegendClick(eventArgs, elementClick) {\n    var eventTrigger = this._eventTrigger;\n    eventTrigger(LEGEND_CLICK, eventArgs, function () {\n      !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs);\n    });\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    var that = this;\n\n    var item = that._legend.getItemByCoord(x, y);\n\n    var series;\n    var legendHoverMode = correctLegendHoverMode(that._legend.getOptions().hoverMode);\n\n    if (item) {\n      series = that._storedSeries[item.id];\n\n      if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\n        that._setHoveredSeries(series, legendHoverMode);\n      }\n\n      that._tooltip.isEnabled() && that._hideTooltip(that.pointAtShownTooltip);\n    } else {\n      that.clearHover();\n    }\n  },\n  _hoverArgument: function _hoverArgument(argument, argumentIndex) {\n    var that = this;\n\n    var hoverMode = that._getArgumentHoverMode();\n\n    if (isDefined(argument)) {\n      that._releaseHoveredPoint();\n\n      that._hoveredArgument = argument;\n      that._argumentIndex = argumentIndex;\n\n      that._notifySeries({\n        action: \"pointHover\",\n        notifyLegend: that._notifyLegendOnHoverArgument,\n        target: {\n          argument: argument,\n          fullState: HOVER_STATE,\n          argumentIndex: argumentIndex,\n          getOptions: function getOptions() {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n    }\n  },\n  _resetHoveredArgument: function _resetHoveredArgument() {\n    var that = this;\n    var hoverMode;\n\n    if (isDefined(that._hoveredArgument)) {\n      hoverMode = that._getArgumentHoverMode();\n\n      that._notifySeries({\n        action: \"clearPointHover\",\n        notifyLegend: that._notifyLegendOnHoverArgument,\n        target: {\n          fullState: NORMAL_STATE,\n          argumentIndex: that._argumentIndex,\n          argument: that._hoveredArgument,\n          getOptions: function getOptions() {\n            return {\n              hoverMode: hoverMode\n            };\n          }\n        }\n      });\n\n      that._hoveredArgument = null;\n    }\n  },\n  _notifySeries: function _notifySeries(data) {\n    this._storedSeries.forEach(function (series) {\n      series.notify(data);\n    });\n  },\n  _pointerHandler: function _pointerHandler(e) {\n    var that = e.data.tracker;\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var canvas = that._getCanvas(x, y);\n\n    var series = getData(e, SERIES_DATA);\n    var point = getData(e, POINT_DATA) || series && series.getPointByCoord(x, y);\n\n    if (point && !point.getMarkerVisibility()) {\n      point = void 0;\n    }\n\n    that._enableOutHandler();\n\n    if (that._legend.coordsIn(x, y)) {\n      that._hoverLegendItem(x, y);\n\n      return;\n    }\n\n    if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\n      that._releaseHoveredSeries();\n    }\n\n    if (that._hoverArgumentAxis(x, y, e)) {\n      return;\n    }\n\n    if (that._isPointerOut(canvas, point)) {\n      that._pointerOut();\n    }\n\n    if (!canvas && !point) {\n      return;\n    }\n\n    if (series && !point) {\n      point = series.getNeighborPoint(x, y);\n\n      if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\n        point = null;\n      }\n\n      if (series !== that.hoveredSeries) {\n        that._setTimeout(function () {\n          that._setHoveredSeries(series);\n\n          that._setStuckSeries(e, series, x, y);\n\n          that._pointerComplete(point, x, y);\n        }, series);\n\n        return;\n      }\n    } else {\n      if (point) {\n        if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\n          return;\n        }\n\n        if (that.hoveredSeries) {\n          that._setTimeout(function () {\n            that._pointerOnPoint(point, x, y, e);\n          }, point);\n        } else {\n          that._pointerOnPoint(point, x, y, e);\n        }\n\n        return;\n      } else {\n        if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\n          series = that._stuckSeries;\n          point = series.getNeighborPoint(x, y);\n\n          that._releaseHoveredSeries();\n\n          point && point.getMarkerVisibility() && that._setHoveredPoint(point);\n        } else {\n          if (!that._stickyHovering) {\n            that._pointerOut();\n          }\n        }\n      }\n    }\n\n    that._pointerComplete(point, x, y);\n  },\n  _pointerOnPoint: function _pointerOnPoint(point, x, y) {\n    this._resetHoveredArgument();\n\n    this._setHoveredPoint(point);\n\n    this._pointerComplete(point, x, y);\n  },\n  _pointerComplete: function _pointerComplete(point) {\n    this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point);\n  },\n  _clickHandler: function _clickHandler(e) {\n    var that = e.data.tracker;\n\n    var rootOffset = that._renderer.getRootOffset();\n\n    var x = _floor(e.pageX - rootOffset.left);\n\n    var y = _floor(e.pageY - rootOffset.top);\n\n    var point = getData(e, POINT_DATA);\n    var series = that._stuckSeries || getData(e, SERIES_DATA) || point && point.series;\n    var axis = that._argumentAxis;\n\n    if (that._legend.coordsIn(x, y)) {\n      var item = that._legend.getItemByCoord(x, y);\n\n      if (item) {\n        that._legendClick(item, e);\n      }\n    } else {\n      if (axis && axis.coordsIn(x, y)) {\n        var argument = getData(e, ARG_DATA);\n\n        if (isDefined(argument)) {\n          that._eventTrigger(\"argumentAxisClick\", {\n            argument: argument,\n            event: e\n          });\n        }\n      } else {\n        if (series) {\n          point = point || series.getPointByCoord(x, y);\n\n          if (point && point.getMarkerVisibility()) {\n            that._pointClick(point, e);\n          } else {\n            getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\n              target: series,\n              event: e\n            });\n          }\n        }\n      }\n    }\n  },\n  dispose: function dispose() {\n    var that = this;\n\n    that._disableOutHandler();\n\n    that._renderer.root.off(DOT_EVENT_NS);\n\n    that._seriesGroup.off(DOT_EVENT_NS);\n  }\n};\n\nvar ChartTracker = function ChartTracker(options) {\n  this.ctor(options);\n};\n\nextend(ChartTracker.prototype, baseTrackerPrototype, {\n  _pointClick: function _pointClick(point, event) {\n    var that = this;\n    var eventTrigger = that._eventTrigger;\n    var series = point.series;\n    eventTrigger(POINT_CLICK, {\n      target: point,\n      event: event\n    }, function () {\n      !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\n        target: series,\n        event: event\n      });\n    });\n  },\n  update: function update(options) {\n    var that = this;\n    baseTrackerPrototype.update.call(this, options);\n    that._argumentAxis = options.argumentAxis || {};\n    that._axisHoverEnabled = that._argumentAxis && _normalizeEnum(that._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\n    that._rotated = options.rotated;\n    that._crosshair = options.crosshair;\n    that._stickyHovering = options.stickyHovering;\n  },\n  _getCanvas: function _getCanvas(x, y) {\n    var that = this;\n    var canvases = that._canvases || [];\n\n    for (var i = 0; i < canvases.length; i++) {\n      var c = canvases[i];\n\n      if (inCanvas(c, x, y)) {\n        return c;\n      }\n    }\n\n    return null;\n  },\n  _isPointerOut: function _isPointerOut(canvas) {\n    return !canvas && this._stuckSeries;\n  },\n  _hideCrosshair: function _hideCrosshair() {\n    this._crosshair && this._crosshair.hide();\n  },\n  _moveCrosshair: function _moveCrosshair(point, x, y) {\n    if (point && this._crosshair && point.isVisible()) {\n      this._crosshair.show({\n        point: point,\n        x: x,\n        y: y\n      });\n    }\n  },\n  _clean: function _clean() {\n    var that = this;\n\n    baseTrackerPrototype._clean.call(that);\n\n    that._resetTimer();\n\n    that._stuckSeries = null;\n  },\n  _getSeriesForShared: function _getSeriesForShared(x, y) {\n    var that = this;\n    var points = [];\n    var point = null;\n    var distance = 1 / 0;\n\n    if (that._tooltip.isShared() && !that.hoveredSeries) {\n      _each(that._storedSeries, function (_, series) {\n        var point = series.getNeighborPoint(x, y);\n        point && points.push(point);\n      });\n\n      _each(points, function (_, p) {\n        var coords = p.getCrosshairData(x, y);\n        var d = vizUtils.getDistance(x, y, coords.x, coords.y);\n\n        if (d < distance) {\n          point = p;\n          distance = d;\n        }\n      });\n    }\n\n    return point && point.series;\n  },\n  _setTimeout: function _setTimeout(callback, keeper) {\n    var that = this;\n\n    if (that._timeoutKeeper !== keeper) {\n      that._resetTimer();\n\n      that._hoverTimeout = setTimeout(function () {\n        callback();\n        that._timeoutKeeper = null;\n      }, DELAY);\n      that._timeoutKeeper = keeper;\n    }\n  },\n  _resetTimer: function _resetTimer() {\n    clearTimeout(this._hoverTimeout);\n    this._timeoutKeeper = this._hoverTimeout = null;\n  },\n  _stopEvent: function _stopEvent(e) {\n    if (!isDefined(e.cancelable) || e.cancelable) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  },\n  _setStuckSeries: function _setStuckSeries(e, series, x, y) {\n    if (\"mouse\" !== e.pointerType) {\n      this._stuckSeries = null;\n    } else {\n      this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y);\n    }\n\n    return !!this._stuckSeries;\n  },\n  _pointerOut: function _pointerOut() {\n    var that = this;\n    that._stuckSeries = null;\n\n    that._hideCrosshair();\n\n    that._resetTimer();\n\n    baseTrackerPrototype._pointerOut.apply(that, arguments);\n  },\n  _hoverArgumentAxis: function _hoverArgumentAxis(x, y, e) {\n    var that = this;\n\n    that._resetHoveredArgument();\n\n    if (that._axisHoverEnabled && that._argumentAxis.coordsIn(x, y)) {\n      that._hoverArgument(getData(e, ARG_DATA));\n\n      return true;\n    }\n  },\n  _pointerComplete: function _pointerComplete(point, x, y) {\n    var that = this;\n    that.hoveredSeries && that.hoveredSeries.updateHover(x, y);\n\n    that._resetTimer();\n\n    that._moveCrosshair(point, x, y);\n\n    baseTrackerPrototype._pointerComplete.call(that, point);\n  },\n  _legendClick: function _legendClick(item, e) {\n    var series = this._storedSeries[item.id];\n\n    this._triggerLegendClick({\n      target: series,\n      event: e\n    }, SERIES_CLICK);\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    this._stuckSeries = null;\n\n    this._hideCrosshair();\n\n    baseTrackerPrototype._hoverLegendItem.call(this, x, y);\n  },\n  _pointerOnPoint: function _pointerOnPoint(point, x, y, e) {\n    this._setStuckSeries(e, point.series, x, y);\n\n    this._releaseHoveredSeries();\n\n    baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e);\n  },\n  _notifyLegendOnHoverArgument: false,\n  _getArgumentHoverMode: function _getArgumentHoverMode() {\n    return correctHoverMode(this._argumentAxis);\n  },\n  dispose: function dispose() {\n    this._resetTimer();\n\n    baseTrackerPrototype.dispose.call(this);\n  }\n});\n\nvar PieTracker = function PieTracker(options) {\n  this.ctor(options);\n};\n\nextend(PieTracker.prototype, baseTrackerPrototype, {\n  _isPointerOut: function _isPointerOut(_, point) {\n    return !point;\n  },\n  _legendClick: function _legendClick(item, e) {\n    var that = this;\n    var points = [];\n\n    that._storedSeries.forEach(function (s) {\n      return points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex));\n    });\n\n    that._eventTrigger(LEGEND_CLICK, {\n      target: item.argument,\n      points: points,\n      event: e\n    });\n  },\n  _pointClick: function _pointClick(point, e) {\n    this._eventTrigger(POINT_CLICK, {\n      target: point,\n      event: e\n    });\n  },\n  _hoverLegendItem: function _hoverLegendItem(x, y) {\n    var that = this;\n\n    var item = that._legend.getItemByCoord(x, y);\n\n    if (item && that._hoveredArgument !== item.argument) {\n      that._resetHoveredArgument();\n\n      that._hoverArgument(item.argument, item.argumentIndex);\n    } else {\n      if (!item) {\n        that.clearHover();\n      }\n    }\n  },\n  _getArgumentHoverMode: function _getArgumentHoverMode() {\n    return correctHoverMode(this._legend);\n  },\n  _hoverArgumentAxis: _noop,\n  _setStuckSeries: _noop,\n  _getCanvas: _noop,\n  _notifyLegendOnHoverArgument: true\n});\nexports.ChartTracker = ChartTracker;\nexports.PieTracker = PieTracker;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/viz/chart_components/tracker.js"],"names":["domAdapter","require","eventsEngine","clickEvent","extend","each","consts","eventsConsts","events","vizUtils","pointerEvents","holdEvent","addNamespace","isDefined","_normalizeEnum","normalizeEnum","inCanvas","pointInCanvas","_floor","Math","floor","_each","_noop","noop","HOVER_STATE","states","hoverMark","NORMAL_STATE","normalMark","EVENT_NS","DOT_EVENT_NS","POINTER_ACTION","down","move","LEGEND_CLICK","SERIES_CLICK","POINT_CLICK","POINT_DATA","SERIES_DATA","ARG_DATA","DELAY","NONE_MODE","ALL_ARGUMENT_POINTS_MODE","INCLUDE_POINTS_MODE","EXLUDE_POINTS_MODE","LEGEND_HOVER_MODES","getData","event","dataKey","target","tagName","parentNode","eventCanceled","cancel","getOptions","correctLegendHoverMode","mode","indexOf","correctHoverMode","hoverMode","baseTrackerPrototype","ctor","options","that","data","tracker","_renderer","renderer","_legend","legend","_tooltip","tooltip","_eventTrigger","eventTrigger","_seriesGroup","seriesGroup","off","on","showPointTooltip","_showPointTooltip","hidePointTooltip","_hidePointTooltip","root","_pointerHandler","name","_clickHandler","timeout","update","_chart","chart","updateSeries","series","resetDecorations","noHoveredSeries","some","s","hoveredSeries","_hoveredPoint","_storedSeries","_clean","initHatching","clearSelection","_hideTooltip","pointAtShownTooltip","clearHover","setCanvases","mainCanvas","paneCanvases","_mainCanvas","_canvases","repairTooltip","point","isVisible","_showTooltip","_setHoveredPoint","_releaseHoveredPoint","hover","isEnabled","_setHoveredSeries","_releaseHoveredSeries","needSetHoverView","hoveredPoint","forEach","getPoints","_hoveredArgumentPoints","_resetHoveredArgument","silent","hide","tooltipFormatObject","eventData","getTooltipFormatObject","isShared","getStackedPoints","valueText","points","coords","getTooltipParams","getLocation","rootOffset","getRootOffset","x","left","y","top","show","pointWithTooltip","_enableOutHandler","_outHandler","handler","e","pageX","pageY","_pointerOut","_disableOutHandler","getDocument","stopCurrentHandling","force","_triggerLegendClick","eventArgs","elementClick","_hoverLegendItem","item","getItemByCoord","legendHoverMode","id","isHovered","lastHoverMode","_hoverArgument","argument","argumentIndex","_getArgumentHoverMode","_hoveredArgument","_argumentIndex","_notifySeries","action","notifyLegend","_notifyLegendOnHoverArgument","fullState","notify","canvas","_getCanvas","getPointByCoord","getMarkerVisibility","coordsIn","_stuckSeries","_hoverArgumentAxis","_isPointerOut","getNeighborPoint","_stickyHovering","_setTimeout","_setStuckSeries","_pointerComplete","type","pointerType","_pointerOnPoint","axis","_argumentAxis","_legendClick","_pointClick","dispose","ChartTracker","prototype","call","argumentAxis","_axisHoverEnabled","_rotated","rotated","_crosshair","crosshair","stickyHovering","canvases","i","length","c","_hideCrosshair","_moveCrosshair","_resetTimer","_getSeriesForShared","distance","_","push","p","getCrosshairData","d","getDistance","callback","keeper","_timeoutKeeper","_hoverTimeout","setTimeout","clearTimeout","_stopEvent","cancelable","preventDefault","stopPropagation","apply","arguments","updateHover","PieTracker","getPointsByKeys","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/tracker.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar domAdapter = require(\"../../core/dom_adapter\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar clickEvent = require(\"../../events/click\");\r\nvar extend = require(\"../../core/utils/extend\").extend;\r\nvar each = require(\"../../core/utils/iterator\").each;\r\nvar consts = require(\"../components/consts\");\r\nvar eventsConsts = consts.events;\r\nvar vizUtils = require(\"../core/utils\");\r\nvar pointerEvents = require(\"../../events/pointer\");\r\nvar holdEvent = require(\"../../events/hold\");\r\nvar addNamespace = require(\"../../events/utils\").addNamespace;\r\nvar isDefined = require(\"../../core/utils/type\").isDefined;\r\nvar _normalizeEnum = vizUtils.normalizeEnum;\r\nvar inCanvas = vizUtils.pointInCanvas;\r\nvar _floor = Math.floor;\r\nvar _each = each;\r\nvar _noop = require(\"../../core/utils/common\").noop;\r\nvar HOVER_STATE = consts.states.hoverMark;\r\nvar NORMAL_STATE = consts.states.normalMark;\r\nvar EVENT_NS = \"dxChartTracker\";\r\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\r\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\r\nvar LEGEND_CLICK = \"legendClick\";\r\nvar SERIES_CLICK = \"seriesClick\";\r\nvar POINT_CLICK = \"pointClick\";\r\nvar POINT_DATA = \"chart-data-point\";\r\nvar SERIES_DATA = \"chart-data-series\";\r\nvar ARG_DATA = \"chart-data-argument\";\r\nvar DELAY = 100;\r\nvar NONE_MODE = \"none\";\r\nvar ALL_ARGUMENT_POINTS_MODE = \"allargumentpoints\";\r\nvar INCLUDE_POINTS_MODE = \"includepoints\";\r\nvar EXLUDE_POINTS_MODE = \"excludepoints\";\r\nvar LEGEND_HOVER_MODES = [INCLUDE_POINTS_MODE, EXLUDE_POINTS_MODE, NONE_MODE];\r\n\r\nfunction getData(event, dataKey) {\r\n    var target = event.target;\r\n    return (\"tspan\" === target.tagName ? target.parentNode : target)[dataKey]\r\n}\r\n\r\nfunction eventCanceled(event, target) {\r\n    return event.cancel || !target.getOptions()\r\n}\r\n\r\nfunction correctLegendHoverMode(mode) {\r\n    if (LEGEND_HOVER_MODES.indexOf(mode) > -1) {\r\n        return mode\r\n    } else {\r\n        return INCLUDE_POINTS_MODE\r\n    }\r\n}\r\n\r\nfunction correctHoverMode(target) {\r\n    var mode = target.getOptions().hoverMode;\r\n    return mode === NONE_MODE ? mode : ALL_ARGUMENT_POINTS_MODE\r\n}\r\nvar baseTrackerPrototype = {\r\n    ctor: function(options) {\r\n        var that = this;\r\n        var data = {\r\n            tracker: that\r\n        };\r\n        that._renderer = options.renderer;\r\n        that._legend = options.legend;\r\n        that._tooltip = options.tooltip;\r\n        that._eventTrigger = options.eventTrigger;\r\n        that._seriesGroup = options.seriesGroup;\r\n        options.seriesGroup.off(DOT_EVENT_NS).on(addNamespace(eventsConsts.showPointTooltip, EVENT_NS), data, that._showPointTooltip).on(addNamespace(eventsConsts.hidePointTooltip, EVENT_NS), data, that._hidePointTooltip);\r\n        that._renderer.root.off(DOT_EVENT_NS).on(POINTER_ACTION, data, that._pointerHandler).on(addNamespace(clickEvent.name, EVENT_NS), data, that._clickHandler).on(addNamespace(holdEvent.name, EVENT_NS), {\r\n            timeout: 300\r\n        }, _noop)\r\n    },\r\n    update: function(options) {\r\n        this._chart = options.chart\r\n    },\r\n    updateSeries: function(series, resetDecorations) {\r\n        var that = this;\r\n        var noHoveredSeries = !(series && series.some(function(s) {\r\n            return s === that.hoveredSeries\r\n        }) || that._hoveredPoint && that._hoveredPoint.series);\r\n        if (that._storedSeries !== series) {\r\n            that._storedSeries = series || []\r\n        }\r\n        if (noHoveredSeries) {\r\n            that._clean();\r\n            that._renderer.initHatching()\r\n        }\r\n        if (resetDecorations) {\r\n            that.clearSelection();\r\n            if (!noHoveredSeries) {\r\n                that._hideTooltip(that.pointAtShownTooltip);\r\n                that.clearHover()\r\n            }\r\n        }\r\n    },\r\n    setCanvases: function(mainCanvas, paneCanvases) {\r\n        this._mainCanvas = mainCanvas;\r\n        this._canvases = paneCanvases\r\n    },\r\n    repairTooltip: function() {\r\n        var point = this.pointAtShownTooltip;\r\n        if (!point || !point.series || !point.isVisible()) {\r\n            this._hideTooltip(point, true)\r\n        } else {\r\n            this._showTooltip(point)\r\n        }\r\n    },\r\n    _setHoveredPoint: function(point) {\r\n        if (point === this._hoveredPoint) {\r\n            return\r\n        }\r\n        this._releaseHoveredPoint();\r\n        point.hover();\r\n        this._hoveredPoint = point\r\n    },\r\n    _releaseHoveredPoint: function() {\r\n        if (this._hoveredPoint && this._hoveredPoint.getOptions()) {\r\n            this._hoveredPoint.clearHover();\r\n            this._hoveredPoint = null;\r\n            if (this._tooltip.isEnabled()) {\r\n                this._hideTooltip(this._hoveredPoint)\r\n            }\r\n        }\r\n    },\r\n    _setHoveredSeries: function(series, mode) {\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint();\r\n        series.hover(mode);\r\n        this.hoveredSeries = series\r\n    },\r\n    _releaseHoveredSeries: function(needSetHoverView, hoveredPoint) {\r\n        if (this.hoveredSeries) {\r\n            this.hoveredSeries.clearHover();\r\n            this.hoveredSeries = null\r\n        }\r\n    },\r\n    clearSelection: function() {\r\n        this._storedSeries.forEach(function(series) {\r\n            if (series) {\r\n                series.clearSelection();\r\n                series.getPoints().forEach(function(point) {\r\n                    point.clearSelection()\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _clean: function() {\r\n        var that = this;\r\n        that.hoveredPoint = that.hoveredSeries = that._hoveredArgumentPoints = null;\r\n        that._hideTooltip(that.pointAtShownTooltip)\r\n    },\r\n    clearHover: function() {\r\n        this._resetHoveredArgument();\r\n        this._releaseHoveredSeries();\r\n        this._releaseHoveredPoint()\r\n    },\r\n    _hideTooltip: function(point, silent) {\r\n        var that = this;\r\n        if (!that._tooltip || point && that.pointAtShownTooltip !== point) {\r\n            return\r\n        }\r\n        if (!silent && that.pointAtShownTooltip) {\r\n            that.pointAtShownTooltip = null\r\n        }\r\n        that._tooltip.hide()\r\n    },\r\n    _showTooltip: function(point) {\r\n        var that = this;\r\n        var tooltipFormatObject;\r\n        var eventData;\r\n        if (point && point.getOptions()) {\r\n            tooltipFormatObject = point.getTooltipFormatObject(that._tooltip, that._tooltip.isShared() && that._chart.getStackedPoints(point));\r\n            if (!isDefined(tooltipFormatObject.valueText) && !tooltipFormatObject.points || !point.isVisible()) {\r\n                return\r\n            }\r\n            if (!that.pointAtShownTooltip || that.pointAtShownTooltip !== point) {\r\n                eventData = {\r\n                    target: point\r\n                }\r\n            }\r\n            var coords = point.getTooltipParams(that._tooltip.getLocation());\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            coords.x += rootOffset.left;\r\n            coords.y += rootOffset.top;\r\n            if (!that._tooltip.show(tooltipFormatObject, coords, eventData)) {\r\n                return\r\n            }\r\n            that.pointAtShownTooltip = point\r\n        }\r\n    },\r\n    _showPointTooltip: function(event, point) {\r\n        var that = event.data.tracker;\r\n        var pointWithTooltip = that.pointAtShownTooltip;\r\n        if (pointWithTooltip && pointWithTooltip !== point) {\r\n            that._hideTooltip(pointWithTooltip)\r\n        }\r\n        that._showTooltip(point)\r\n    },\r\n    _hidePointTooltip: function(event, point) {\r\n        event.data.tracker._hideTooltip(point)\r\n    },\r\n    _enableOutHandler: function() {\r\n        if (this._outHandler) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var handler = function(e) {\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            var x = _floor(e.pageX - rootOffset.left);\r\n            var y = _floor(e.pageY - rootOffset.top);\r\n            if (!inCanvas(that._mainCanvas, x, y)) {\r\n                that._pointerOut();\r\n                that._disableOutHandler()\r\n            }\r\n        };\r\n        eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\r\n        this._outHandler = handler\r\n    },\r\n    _disableOutHandler: function() {\r\n        this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\r\n        this._outHandler = null\r\n    },\r\n    stopCurrentHandling: function() {\r\n        this._pointerOut(true)\r\n    },\r\n    _pointerOut: function(force) {\r\n        this.clearHover();\r\n        (force || this._tooltip.isEnabled()) && this._hideTooltip(this.pointAtShownTooltip)\r\n    },\r\n    _triggerLegendClick: function(eventArgs, elementClick) {\r\n        var eventTrigger = this._eventTrigger;\r\n        eventTrigger(LEGEND_CLICK, eventArgs, function() {\r\n            !eventCanceled(eventArgs.event, eventArgs.target) && eventTrigger(elementClick, eventArgs)\r\n        })\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var that = this;\r\n        var item = that._legend.getItemByCoord(x, y);\r\n        var series;\r\n        var legendHoverMode = correctLegendHoverMode(that._legend.getOptions().hoverMode);\r\n        if (item) {\r\n            series = that._storedSeries[item.id];\r\n            if (!series.isHovered() || series.lastHoverMode !== legendHoverMode) {\r\n                that._setHoveredSeries(series, legendHoverMode)\r\n            }\r\n            that._tooltip.isEnabled() && that._hideTooltip(that.pointAtShownTooltip)\r\n        } else {\r\n            that.clearHover()\r\n        }\r\n    },\r\n    _hoverArgument: function(argument, argumentIndex) {\r\n        var that = this;\r\n        var hoverMode = that._getArgumentHoverMode();\r\n        if (isDefined(argument)) {\r\n            that._releaseHoveredPoint();\r\n            that._hoveredArgument = argument;\r\n            that._argumentIndex = argumentIndex;\r\n            that._notifySeries({\r\n                action: \"pointHover\",\r\n                notifyLegend: that._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    argument: argument,\r\n                    fullState: HOVER_STATE,\r\n                    argumentIndex: argumentIndex,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _resetHoveredArgument: function() {\r\n        var that = this;\r\n        var hoverMode;\r\n        if (isDefined(that._hoveredArgument)) {\r\n            hoverMode = that._getArgumentHoverMode();\r\n            that._notifySeries({\r\n                action: \"clearPointHover\",\r\n                notifyLegend: that._notifyLegendOnHoverArgument,\r\n                target: {\r\n                    fullState: NORMAL_STATE,\r\n                    argumentIndex: that._argumentIndex,\r\n                    argument: that._hoveredArgument,\r\n                    getOptions: function() {\r\n                        return {\r\n                            hoverMode: hoverMode\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            that._hoveredArgument = null\r\n        }\r\n    },\r\n    _notifySeries: function(data) {\r\n        this._storedSeries.forEach(function(series) {\r\n            series.notify(data)\r\n        })\r\n    },\r\n    _pointerHandler: function(e) {\r\n        var that = e.data.tracker;\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var canvas = that._getCanvas(x, y);\r\n        var series = getData(e, SERIES_DATA);\r\n        var point = getData(e, POINT_DATA) || series && series.getPointByCoord(x, y);\r\n        if (point && !point.getMarkerVisibility()) {\r\n            point = void 0\r\n        }\r\n        that._enableOutHandler();\r\n        if (that._legend.coordsIn(x, y)) {\r\n            that._hoverLegendItem(x, y);\r\n            return\r\n        }\r\n        if (that.hoveredSeries && that.hoveredSeries !== that._stuckSeries) {\r\n            that._releaseHoveredSeries()\r\n        }\r\n        if (that._hoverArgumentAxis(x, y, e)) {\r\n            return\r\n        }\r\n        if (that._isPointerOut(canvas, point)) {\r\n            that._pointerOut()\r\n        }\r\n        if (!canvas && !point) {\r\n            return\r\n        }\r\n        if (series && !point) {\r\n            point = series.getNeighborPoint(x, y);\r\n            if (!that._stickyHovering && point && !point.coordsIn(x, y)) {\r\n                point = null\r\n            }\r\n            if (series !== that.hoveredSeries) {\r\n                that._setTimeout(function() {\r\n                    that._setHoveredSeries(series);\r\n                    that._setStuckSeries(e, series, x, y);\r\n                    that._pointerComplete(point, x, y)\r\n                }, series);\r\n                return\r\n            }\r\n        } else {\r\n            if (point) {\r\n                if (e.type !== pointerEvents.move && \"touch\" !== e.pointerType) {\r\n                    return\r\n                }\r\n                if (that.hoveredSeries) {\r\n                    that._setTimeout(function() {\r\n                        that._pointerOnPoint(point, x, y, e)\r\n                    }, point)\r\n                } else {\r\n                    that._pointerOnPoint(point, x, y, e)\r\n                }\r\n                return\r\n            } else {\r\n                if (that._setStuckSeries(e, void 0, x, y) && that._stickyHovering) {\r\n                    series = that._stuckSeries;\r\n                    point = series.getNeighborPoint(x, y);\r\n                    that._releaseHoveredSeries();\r\n                    point && point.getMarkerVisibility() && that._setHoveredPoint(point)\r\n                } else {\r\n                    if (!that._stickyHovering) {\r\n                        that._pointerOut()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        that._pointerComplete(point, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y) {\r\n        this._resetHoveredArgument();\r\n        this._setHoveredPoint(point);\r\n        this._pointerComplete(point, x, y)\r\n    },\r\n    _pointerComplete: function(point) {\r\n        this.pointAtShownTooltip !== point && this._tooltip.isEnabled() && this._showTooltip(point)\r\n    },\r\n    _clickHandler: function(e) {\r\n        var that = e.data.tracker;\r\n        var rootOffset = that._renderer.getRootOffset();\r\n        var x = _floor(e.pageX - rootOffset.left);\r\n        var y = _floor(e.pageY - rootOffset.top);\r\n        var point = getData(e, POINT_DATA);\r\n        var series = that._stuckSeries || getData(e, SERIES_DATA) || point && point.series;\r\n        var axis = that._argumentAxis;\r\n        if (that._legend.coordsIn(x, y)) {\r\n            var item = that._legend.getItemByCoord(x, y);\r\n            if (item) {\r\n                that._legendClick(item, e)\r\n            }\r\n        } else {\r\n            if (axis && axis.coordsIn(x, y)) {\r\n                var argument = getData(e, ARG_DATA);\r\n                if (isDefined(argument)) {\r\n                    that._eventTrigger(\"argumentAxisClick\", {\r\n                        argument: argument,\r\n                        event: e\r\n                    })\r\n                }\r\n            } else {\r\n                if (series) {\r\n                    point = point || series.getPointByCoord(x, y);\r\n                    if (point && point.getMarkerVisibility()) {\r\n                        that._pointClick(point, e)\r\n                    } else {\r\n                        getData(e, SERIES_DATA) && that._eventTrigger(SERIES_CLICK, {\r\n                            target: series,\r\n                            event: e\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dispose: function() {\r\n        var that = this;\r\n        that._disableOutHandler();\r\n        that._renderer.root.off(DOT_EVENT_NS);\r\n        that._seriesGroup.off(DOT_EVENT_NS)\r\n    }\r\n};\r\nvar ChartTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(ChartTracker.prototype, baseTrackerPrototype, {\r\n    _pointClick: function(point, event) {\r\n        var that = this;\r\n        var eventTrigger = that._eventTrigger;\r\n        var series = point.series;\r\n        eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: event\r\n        }, function() {\r\n            !eventCanceled(event, series) && eventTrigger(SERIES_CLICK, {\r\n                target: series,\r\n                event: event\r\n            })\r\n        })\r\n    },\r\n    update: function(options) {\r\n        var that = this;\r\n        baseTrackerPrototype.update.call(this, options);\r\n        that._argumentAxis = options.argumentAxis || {};\r\n        that._axisHoverEnabled = that._argumentAxis && _normalizeEnum(that._argumentAxis.getOptions().hoverMode) === ALL_ARGUMENT_POINTS_MODE;\r\n        that._rotated = options.rotated;\r\n        that._crosshair = options.crosshair;\r\n        that._stickyHovering = options.stickyHovering\r\n    },\r\n    _getCanvas: function(x, y) {\r\n        var that = this;\r\n        var canvases = that._canvases || [];\r\n        for (var i = 0; i < canvases.length; i++) {\r\n            var c = canvases[i];\r\n            if (inCanvas(c, x, y)) {\r\n                return c\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    _isPointerOut: function(canvas) {\r\n        return !canvas && this._stuckSeries\r\n    },\r\n    _hideCrosshair: function() {\r\n        this._crosshair && this._crosshair.hide()\r\n    },\r\n    _moveCrosshair: function(point, x, y) {\r\n        if (point && this._crosshair && point.isVisible()) {\r\n            this._crosshair.show({\r\n                point: point,\r\n                x: x,\r\n                y: y\r\n            })\r\n        }\r\n    },\r\n    _clean: function() {\r\n        var that = this;\r\n        baseTrackerPrototype._clean.call(that);\r\n        that._resetTimer();\r\n        that._stuckSeries = null\r\n    },\r\n    _getSeriesForShared: function(x, y) {\r\n        var that = this;\r\n        var points = [];\r\n        var point = null;\r\n        var distance = 1 / 0;\r\n        if (that._tooltip.isShared() && !that.hoveredSeries) {\r\n            _each(that._storedSeries, function(_, series) {\r\n                var point = series.getNeighborPoint(x, y);\r\n                point && points.push(point)\r\n            });\r\n            _each(points, function(_, p) {\r\n                var coords = p.getCrosshairData(x, y);\r\n                var d = vizUtils.getDistance(x, y, coords.x, coords.y);\r\n                if (d < distance) {\r\n                    point = p;\r\n                    distance = d\r\n                }\r\n            })\r\n        }\r\n        return point && point.series\r\n    },\r\n    _setTimeout: function(callback, keeper) {\r\n        var that = this;\r\n        if (that._timeoutKeeper !== keeper) {\r\n            that._resetTimer();\r\n            that._hoverTimeout = setTimeout(function() {\r\n                callback();\r\n                that._timeoutKeeper = null\r\n            }, DELAY);\r\n            that._timeoutKeeper = keeper\r\n        }\r\n    },\r\n    _resetTimer: function() {\r\n        clearTimeout(this._hoverTimeout);\r\n        this._timeoutKeeper = this._hoverTimeout = null\r\n    },\r\n    _stopEvent: function(e) {\r\n        if (!isDefined(e.cancelable) || e.cancelable) {\r\n            e.preventDefault();\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _setStuckSeries: function(e, series, x, y) {\r\n        if (\"mouse\" !== e.pointerType) {\r\n            this._stuckSeries = null\r\n        } else {\r\n            this._stuckSeries = series || this._stuckSeries || this._getSeriesForShared(x, y)\r\n        }\r\n        return !!this._stuckSeries\r\n    },\r\n    _pointerOut: function() {\r\n        var that = this;\r\n        that._stuckSeries = null;\r\n        that._hideCrosshair();\r\n        that._resetTimer();\r\n        baseTrackerPrototype._pointerOut.apply(that, arguments)\r\n    },\r\n    _hoverArgumentAxis: function(x, y, e) {\r\n        var that = this;\r\n        that._resetHoveredArgument();\r\n        if (that._axisHoverEnabled && that._argumentAxis.coordsIn(x, y)) {\r\n            that._hoverArgument(getData(e, ARG_DATA));\r\n            return true\r\n        }\r\n    },\r\n    _pointerComplete: function(point, x, y) {\r\n        var that = this;\r\n        that.hoveredSeries && that.hoveredSeries.updateHover(x, y);\r\n        that._resetTimer();\r\n        that._moveCrosshair(point, x, y);\r\n        baseTrackerPrototype._pointerComplete.call(that, point)\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var series = this._storedSeries[item.id];\r\n        this._triggerLegendClick({\r\n            target: series,\r\n            event: e\r\n        }, SERIES_CLICK)\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        this._stuckSeries = null;\r\n        this._hideCrosshair();\r\n        baseTrackerPrototype._hoverLegendItem.call(this, x, y)\r\n    },\r\n    _pointerOnPoint: function(point, x, y, e) {\r\n        this._setStuckSeries(e, point.series, x, y);\r\n        this._releaseHoveredSeries();\r\n        baseTrackerPrototype._pointerOnPoint.call(this, point, x, y, e)\r\n    },\r\n    _notifyLegendOnHoverArgument: false,\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._argumentAxis)\r\n    },\r\n    dispose: function() {\r\n        this._resetTimer();\r\n        baseTrackerPrototype.dispose.call(this)\r\n    }\r\n});\r\nvar PieTracker = function(options) {\r\n    this.ctor(options)\r\n};\r\nextend(PieTracker.prototype, baseTrackerPrototype, {\r\n    _isPointerOut: function(_, point) {\r\n        return !point\r\n    },\r\n    _legendClick: function(item, e) {\r\n        var that = this;\r\n        var points = [];\r\n        that._storedSeries.forEach(function(s) {\r\n            return points.push.apply(points, s.getPointsByKeys(item.argument, item.argumentIndex))\r\n        });\r\n        that._eventTrigger(LEGEND_CLICK, {\r\n            target: item.argument,\r\n            points: points,\r\n            event: e\r\n        })\r\n    },\r\n    _pointClick: function(point, e) {\r\n        this._eventTrigger(POINT_CLICK, {\r\n            target: point,\r\n            event: e\r\n        })\r\n    },\r\n    _hoverLegendItem: function(x, y) {\r\n        var that = this;\r\n        var item = that._legend.getItemByCoord(x, y);\r\n        if (item && that._hoveredArgument !== item.argument) {\r\n            that._resetHoveredArgument();\r\n            that._hoverArgument(item.argument, item.argumentIndex)\r\n        } else {\r\n            if (!item) {\r\n                that.clearHover()\r\n            }\r\n        }\r\n    },\r\n    _getArgumentHoverMode: function() {\r\n        return correctHoverMode(this._legend)\r\n    },\r\n    _hoverArgumentAxis: _noop,\r\n    _setStuckSeries: _noop,\r\n    _getCanvas: _noop,\r\n    _notifyLegendOnHoverArgument: true\r\n});\r\nexports.ChartTracker = ChartTracker;\r\nexports.PieTracker = PieTracker;\r\n"]},"metadata":{},"sourceType":"script"}