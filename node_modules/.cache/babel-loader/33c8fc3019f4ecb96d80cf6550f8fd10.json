{"ast":null,"code":"/**\r\n * DevExtreme (core/dom_component_with_template.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"./renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"./utils/type\");\n\nvar _common = require(\"./utils/common\");\n\nvar _extend = require(\"./utils/extend\");\n\nvar _errors = require(\"./errors\");\n\nvar _dom = require(\"./utils/dom\");\n\nvar _devices = require(\"./devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _dom_component = require(\"./dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _template = require(\"./templates/template\");\n\nvar _template_base = require(\"./templates/template_base\");\n\nvar _function_template = require(\"./templates/function_template\");\n\nvar _empty_template = require(\"./templates/empty_template\");\n\nvar _child_default_template = require(\"./templates/child_default_template\");\n\nvar _inflector = require(\"./utils/inflector\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TEXT_NODE = 3;\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\nvar TEMPLATE_SELECTOR = \"[data-options*='dxTemplate']\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function (options) {\n  var widgetName = options.model.widget;\n\n  if (widgetName) {\n    var widgetElement = (0, _renderer2.default)(\"<div>\");\n    var widgetOptions = options.model.options || {};\n\n    if (\"button\" === widgetName || \"tabs\" === widgetName || \"dropDownMenu\" === widgetName) {\n      var deprecatedName = widgetName;\n      widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\n      (0, _errors.log)(\"W0001\", \"dxToolbar - 'widget' item field\", deprecatedName, \"16.1\", \"Use: '\" + widgetName + \"' instead\");\n    }\n\n    if (options.parent) {\n      options.parent._createComponent(widgetElement, widgetName, widgetOptions);\n    } else {\n      widgetElement[widgetName](widgetOptions);\n    }\n\n    return widgetElement;\n  }\n\n  return (0, _renderer2.default)();\n});\n\nvar DOMComponentWithTemplate = _dom_component2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      integrationOptions: {\n        watchMethod: function watchMethod(fn, callback, options) {\n          options = options || {};\n\n          if (!options.skipImmediate) {\n            callback(fn());\n          }\n\n          return _common.noop;\n        },\n        templates: {\n          \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\n        },\n        createTemplate: function createTemplate(element) {\n          return new _template.Template(element);\n        }\n      }\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n    this._tempTemplates = [];\n    this._defaultTemplates = {};\n\n    this._initTemplates();\n  },\n  _dispose: function _dispose() {\n    this._cleanTemplates();\n\n    this.callBase();\n  },\n  _cleanTemplates: function _cleanTemplates() {\n    this._tempTemplates.forEach(function (t) {\n      t.template.dispose && t.template.dispose();\n    });\n\n    this._tempTemplates = [];\n  },\n  _initTemplates: function _initTemplates() {\n    this._extractTemplates();\n\n    this._extractAnonymousTemplate();\n  },\n  _extractTemplates: function _extractTemplates() {\n    var templateElements = this.$element().contents().filter(TEMPLATE_SELECTOR);\n    var templatesMap = {};\n    templateElements.each(function (_, template) {\n      var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\n\n      if (!templateOptions) {\n        return;\n      }\n\n      if (!templateOptions.name) {\n        throw (0, _errors.Error)(\"E0023\");\n      }\n\n      (0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\n      templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\n      templatesMap[templateOptions.name].push(template);\n    });\n\n    for (var templateName in templatesMap) {\n      var deviceTemplate = this._findTemplateByDevice(templatesMap[templateName]);\n\n      if (deviceTemplate) {\n        this._saveTemplate(templateName, deviceTemplate);\n      }\n    }\n  },\n  _saveTemplate: function _saveTemplate(name, template) {\n    var templates = this.option(\"integrationOptions.templates\");\n    templates[name] = this._createTemplate(template);\n  },\n  _findTemplateByDevice: function _findTemplateByDevice(templates) {\n    var suitableTemplate = (0, _common.findBestMatches)(_devices2.default.current(), templates, function (template) {\n      return (0, _dom.getElementOptions)(template).dxTemplate;\n    })[0];\n    templates.forEach(function (template) {\n      if (template !== suitableTemplate) {\n        (0, _renderer2.default)(template).remove();\n      }\n    });\n    return suitableTemplate;\n  },\n  _extractAnonymousTemplate: function _extractAnonymousTemplate() {\n    var templates = this.option(\"integrationOptions.templates\");\n\n    var anonymousTemplateName = this._getAnonymousTemplateName();\n\n    var $anonymousTemplate = this.$element().contents().detach();\n    var $notJunkTemplateContent = $anonymousTemplate.filter(function (_, element) {\n      var isTextNode = element.nodeType === TEXT_NODE;\n      var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\n      return !(isTextNode && isEmptyText);\n    });\n    var onlyJunkTemplateContent = $notJunkTemplateContent.length < 1;\n\n    if (!templates[anonymousTemplateName] && !onlyJunkTemplateContent) {\n      templates[anonymousTemplateName] = this._createTemplate($anonymousTemplate);\n    }\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _createTemplateIfNeeded: function _createTemplateIfNeeded(templateSource) {\n    var templateKey = function templateKey(templateSource) {\n      return (0, _type.isRenderer)(templateSource) && templateSource[0] || templateSource;\n    };\n\n    var cachedTemplate = this._tempTemplates.filter(function (t) {\n      templateSource = templateKey(templateSource);\n      return t.source === templateSource;\n    })[0];\n\n    if (cachedTemplate) {\n      return cachedTemplate.template;\n    }\n\n    var template = this._createTemplate(templateSource);\n\n    this._tempTemplates.push({\n      template: template,\n      source: templateKey(templateSource)\n    });\n\n    return template;\n  },\n  _createTemplate: function _createTemplate(templateSource) {\n    templateSource = \"string\" === typeof templateSource ? (0, _dom.normalizeTemplateElement)(templateSource) : templateSource;\n    return this.option(\"integrationOptions.createTemplate\")(templateSource);\n  },\n  _getTemplateByOption: function _getTemplateByOption(optionName) {\n    return this._getTemplate(this.option(optionName));\n  },\n  _getTemplate: function _getTemplate(templateSource) {\n    if ((0, _type.isFunction)(templateSource)) {\n      return new _function_template.FunctionTemplate(function (options) {\n        var templateSourceResult = templateSource.apply(this, this._getNormalizedTemplateArgs(options));\n\n        if (!(0, _type.isDefined)(templateSourceResult)) {\n          return new _empty_template.EmptyTemplate();\n        }\n\n        var dispose = false;\n\n        var template = this._acquireTemplate(templateSourceResult, function (templateSource) {\n          if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\n            return new _function_template.FunctionTemplate(function () {\n              return templateSource;\n            });\n          }\n\n          dispose = true;\n          return this._createTemplate(templateSource);\n        }.bind(this));\n\n        var result = template.render(options);\n        dispose && template.dispose && template.dispose();\n        return result;\n      }.bind(this));\n    }\n\n    return this._acquireTemplate(templateSource, this._createTemplateIfNeeded.bind(this));\n  },\n  _acquireTemplate: function _acquireTemplate(templateSource, createTemplate) {\n    if (null == templateSource) {\n      return new _empty_template.EmptyTemplate();\n    }\n\n    if (templateSource instanceof _child_default_template.ChildDefaultTemplate) {\n      return this._defaultTemplates[templateSource.name];\n    }\n\n    if (templateSource instanceof _template_base.TemplateBase) {\n      return templateSource;\n    }\n\n    if ((0, _type.isFunction)(templateSource.render) && !(0, _type.isRenderer)(templateSource)) {\n      return this._addOneRenderedCall(templateSource);\n    }\n\n    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource)) {\n      return createTemplate((0, _renderer2.default)(templateSource));\n    }\n\n    if (\"string\" === typeof templateSource) {\n      var nonIntegrationTemplates = this.option(\"integrationOptions.skipTemplates\") || [];\n      var integrationTemplate = null;\n\n      if (nonIntegrationTemplates.indexOf(templateSource) === -1) {\n        integrationTemplate = this._renderIntegrationTemplate(templateSource);\n      }\n\n      return integrationTemplate || this._defaultTemplates[templateSource] || createTemplate(templateSource);\n    }\n\n    return this._acquireTemplate(templateSource.toString(), createTemplate);\n  },\n  _getNormalizedTemplateArgs: function _getNormalizedTemplateArgs(options) {\n    var args = [];\n\n    if (\"model\" in options) {\n      args.push(options.model);\n    }\n\n    if (\"index\" in options) {\n      args.push(options.index);\n    }\n\n    args.push(options.container);\n    return args;\n  },\n  _addOneRenderedCall: function _addOneRenderedCall(template) {\n    var _render = template.render.bind(template);\n\n    return (0, _extend.extend)({}, template, {\n      render: function render(options) {\n        var templateResult = _render(options);\n\n        options && options.onRendered && options.onRendered();\n        return templateResult;\n      }\n    });\n  },\n  _renderIntegrationTemplate: function _renderIntegrationTemplate(templateSource) {\n    var integrationTemplate = this.option(\"integrationOptions.templates\")[templateSource];\n\n    if (integrationTemplate && !(integrationTemplate instanceof _template_base.TemplateBase)) {\n      var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\n\n      if (!isAsyncTemplate) {\n        return this._addOneRenderedCall(integrationTemplate);\n      }\n    }\n\n    return integrationTemplate;\n  }\n});\n\nmodule.exports = DOMComponentWithTemplate;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/core/dom_component_with_template.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_type","_common","_extend","_errors","_dom","_devices","_devices2","_dom_component","_dom_component2","_template","_template_base","_function_template","_empty_template","_child_default_template","_inflector","obj","__esModule","TEXT_NODE","ANONYMOUS_TEMPLATE_NAME","TEMPLATE_SELECTOR","TEMPLATE_WRAPPER_CLASS","DX_POLYMORPH_WIDGET_TEMPLATE","FunctionTemplate","options","widgetName","model","widget","widgetElement","default","widgetOptions","deprecatedName","camelize","log","parent","_createComponent","DOMComponentWithTemplate","inherit","_getDefaultOptions","extend","callBase","integrationOptions","watchMethod","fn","callback","skipImmediate","noop","templates","createTemplate","element","Template","_init","_tempTemplates","_defaultTemplates","_initTemplates","_dispose","_cleanTemplates","forEach","t","template","dispose","_extractTemplates","_extractAnonymousTemplate","templateElements","$element","contents","filter","templatesMap","each","_","templateOptions","getElementOptions","dxTemplate","name","Error","addClass","detach","push","templateName","deviceTemplate","_findTemplateByDevice","_saveTemplate","option","_createTemplate","suitableTemplate","findBestMatches","current","remove","anonymousTemplateName","_getAnonymousTemplateName","$anonymousTemplate","$notJunkTemplateContent","isTextNode","nodeType","isEmptyText","text","trim","length","onlyJunkTemplateContent","_createTemplateIfNeeded","templateSource","templateKey","isRenderer","cachedTemplate","source","normalizeTemplateElement","_getTemplateByOption","optionName","_getTemplate","isFunction","templateSourceResult","apply","_getNormalizedTemplateArgs","isDefined","EmptyTemplate","_acquireTemplate","is","bind","result","render","ChildDefaultTemplate","TemplateBase","_addOneRenderedCall","nonIntegrationTemplates","integrationTemplate","indexOf","_renderIntegrationTemplate","toString","args","index","container","_render","templateResult","onRendered","isAsyncTemplate","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/dom_component_with_template.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"./renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _type = require(\"./utils/type\");\r\nvar _common = require(\"./utils/common\");\r\nvar _extend = require(\"./utils/extend\");\r\nvar _errors = require(\"./errors\");\r\nvar _dom = require(\"./utils/dom\");\r\nvar _devices = require(\"./devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _dom_component = require(\"./dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _template = require(\"./templates/template\");\r\nvar _template_base = require(\"./templates/template_base\");\r\nvar _function_template = require(\"./templates/function_template\");\r\nvar _empty_template = require(\"./templates/empty_template\");\r\nvar _child_default_template = require(\"./templates/child_default_template\");\r\nvar _inflector = require(\"./utils/inflector\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TEXT_NODE = 3;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\r\nvar TEMPLATE_SELECTOR = \"[data-options*='dxTemplate']\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function(options) {\r\n    var widgetName = options.model.widget;\r\n    if (widgetName) {\r\n        var widgetElement = (0, _renderer2.default)(\"<div>\");\r\n        var widgetOptions = options.model.options || {};\r\n        if (\"button\" === widgetName || \"tabs\" === widgetName || \"dropDownMenu\" === widgetName) {\r\n            var deprecatedName = widgetName;\r\n            widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\r\n            (0, _errors.log)(\"W0001\", \"dxToolbar - 'widget' item field\", deprecatedName, \"16.1\", \"Use: '\" + widgetName + \"' instead\")\r\n        }\r\n        if (options.parent) {\r\n            options.parent._createComponent(widgetElement, widgetName, widgetOptions)\r\n        } else {\r\n            widgetElement[widgetName](widgetOptions)\r\n        }\r\n        return widgetElement\r\n    }\r\n    return (0, _renderer2.default)()\r\n});\r\nvar DOMComponentWithTemplate = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            integrationOptions: {\r\n                watchMethod: function(fn, callback, options) {\r\n                    options = options || {};\r\n                    if (!options.skipImmediate) {\r\n                        callback(fn())\r\n                    }\r\n                    return _common.noop\r\n                },\r\n                templates: {\r\n                    \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\r\n                },\r\n                createTemplate: function(element) {\r\n                    return new _template.Template(element)\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._tempTemplates = [];\r\n        this._defaultTemplates = {};\r\n        this._initTemplates()\r\n    },\r\n    _dispose: function() {\r\n        this._cleanTemplates();\r\n        this.callBase()\r\n    },\r\n    _cleanTemplates: function() {\r\n        this._tempTemplates.forEach(function(t) {\r\n            t.template.dispose && t.template.dispose()\r\n        });\r\n        this._tempTemplates = []\r\n    },\r\n    _initTemplates: function() {\r\n        this._extractTemplates();\r\n        this._extractAnonymousTemplate()\r\n    },\r\n    _extractTemplates: function() {\r\n        var templateElements = this.$element().contents().filter(TEMPLATE_SELECTOR);\r\n        var templatesMap = {};\r\n        templateElements.each(function(_, template) {\r\n            var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\r\n            if (!templateOptions) {\r\n                return\r\n            }\r\n            if (!templateOptions.name) {\r\n                throw (0, _errors.Error)(\"E0023\")\r\n            }(0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\r\n            templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\r\n            templatesMap[templateOptions.name].push(template)\r\n        });\r\n        for (var templateName in templatesMap) {\r\n            var deviceTemplate = this._findTemplateByDevice(templatesMap[templateName]);\r\n            if (deviceTemplate) {\r\n                this._saveTemplate(templateName, deviceTemplate)\r\n            }\r\n        }\r\n    },\r\n    _saveTemplate: function(name, template) {\r\n        var templates = this.option(\"integrationOptions.templates\");\r\n        templates[name] = this._createTemplate(template)\r\n    },\r\n    _findTemplateByDevice: function(templates) {\r\n        var suitableTemplate = (0, _common.findBestMatches)(_devices2.default.current(), templates, function(template) {\r\n            return (0, _dom.getElementOptions)(template).dxTemplate\r\n        })[0];\r\n        templates.forEach(function(template) {\r\n            if (template !== suitableTemplate) {\r\n                (0, _renderer2.default)(template).remove()\r\n            }\r\n        });\r\n        return suitableTemplate\r\n    },\r\n    _extractAnonymousTemplate: function() {\r\n        var templates = this.option(\"integrationOptions.templates\");\r\n        var anonymousTemplateName = this._getAnonymousTemplateName();\r\n        var $anonymousTemplate = this.$element().contents().detach();\r\n        var $notJunkTemplateContent = $anonymousTemplate.filter(function(_, element) {\r\n            var isTextNode = element.nodeType === TEXT_NODE;\r\n            var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\r\n            return !(isTextNode && isEmptyText)\r\n        });\r\n        var onlyJunkTemplateContent = $notJunkTemplateContent.length < 1;\r\n        if (!templates[anonymousTemplateName] && !onlyJunkTemplateContent) {\r\n            templates[anonymousTemplateName] = this._createTemplate($anonymousTemplate)\r\n        }\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _createTemplateIfNeeded: function(templateSource) {\r\n        var templateKey = function(templateSource) {\r\n            return (0, _type.isRenderer)(templateSource) && templateSource[0] || templateSource\r\n        };\r\n        var cachedTemplate = this._tempTemplates.filter(function(t) {\r\n            templateSource = templateKey(templateSource);\r\n            return t.source === templateSource\r\n        })[0];\r\n        if (cachedTemplate) {\r\n            return cachedTemplate.template\r\n        }\r\n        var template = this._createTemplate(templateSource);\r\n        this._tempTemplates.push({\r\n            template: template,\r\n            source: templateKey(templateSource)\r\n        });\r\n        return template\r\n    },\r\n    _createTemplate: function(templateSource) {\r\n        templateSource = \"string\" === typeof templateSource ? (0, _dom.normalizeTemplateElement)(templateSource) : templateSource;\r\n        return this.option(\"integrationOptions.createTemplate\")(templateSource)\r\n    },\r\n    _getTemplateByOption: function(optionName) {\r\n        return this._getTemplate(this.option(optionName))\r\n    },\r\n    _getTemplate: function(templateSource) {\r\n        if ((0, _type.isFunction)(templateSource)) {\r\n            return new _function_template.FunctionTemplate(function(options) {\r\n                var templateSourceResult = templateSource.apply(this, this._getNormalizedTemplateArgs(options));\r\n                if (!(0, _type.isDefined)(templateSourceResult)) {\r\n                    return new _empty_template.EmptyTemplate\r\n                }\r\n                var dispose = false;\r\n                var template = this._acquireTemplate(templateSourceResult, function(templateSource) {\r\n                    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\r\n                        return new _function_template.FunctionTemplate(function() {\r\n                            return templateSource\r\n                        })\r\n                    }\r\n                    dispose = true;\r\n                    return this._createTemplate(templateSource)\r\n                }.bind(this));\r\n                var result = template.render(options);\r\n                dispose && template.dispose && template.dispose();\r\n                return result\r\n            }.bind(this))\r\n        }\r\n        return this._acquireTemplate(templateSource, this._createTemplateIfNeeded.bind(this))\r\n    },\r\n    _acquireTemplate: function(templateSource, createTemplate) {\r\n        if (null == templateSource) {\r\n            return new _empty_template.EmptyTemplate\r\n        }\r\n        if (templateSource instanceof _child_default_template.ChildDefaultTemplate) {\r\n            return this._defaultTemplates[templateSource.name]\r\n        }\r\n        if (templateSource instanceof _template_base.TemplateBase) {\r\n            return templateSource\r\n        }\r\n        if ((0, _type.isFunction)(templateSource.render) && !(0, _type.isRenderer)(templateSource)) {\r\n            return this._addOneRenderedCall(templateSource)\r\n        }\r\n        if (templateSource.nodeType || (0, _type.isRenderer)(templateSource)) {\r\n            return createTemplate((0, _renderer2.default)(templateSource))\r\n        }\r\n        if (\"string\" === typeof templateSource) {\r\n            var nonIntegrationTemplates = this.option(\"integrationOptions.skipTemplates\") || [];\r\n            var integrationTemplate = null;\r\n            if (nonIntegrationTemplates.indexOf(templateSource) === -1) {\r\n                integrationTemplate = this._renderIntegrationTemplate(templateSource)\r\n            }\r\n            return integrationTemplate || this._defaultTemplates[templateSource] || createTemplate(templateSource)\r\n        }\r\n        return this._acquireTemplate(templateSource.toString(), createTemplate)\r\n    },\r\n    _getNormalizedTemplateArgs: function(options) {\r\n        var args = [];\r\n        if (\"model\" in options) {\r\n            args.push(options.model)\r\n        }\r\n        if (\"index\" in options) {\r\n            args.push(options.index)\r\n        }\r\n        args.push(options.container);\r\n        return args\r\n    },\r\n    _addOneRenderedCall: function(template) {\r\n        var _render = template.render.bind(template);\r\n        return (0, _extend.extend)({}, template, {\r\n            render: function(options) {\r\n                var templateResult = _render(options);\r\n                options && options.onRendered && options.onRendered();\r\n                return templateResult\r\n            }\r\n        })\r\n    },\r\n    _renderIntegrationTemplate: function(templateSource) {\r\n        var integrationTemplate = this.option(\"integrationOptions.templates\")[templateSource];\r\n        if (integrationTemplate && !(integrationTemplate instanceof _template_base.TemplateBase)) {\r\n            var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\r\n            if (!isAsyncTemplate) {\r\n                return this._addOneRenderedCall(integrationTemplate)\r\n            }\r\n        }\r\n        return integrationTemplate\r\n    }\r\n});\r\nmodule.exports = DOMComponentWithTemplate;\r\n"]},"metadata":{},"sourceType":"script"}