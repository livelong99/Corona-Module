{"ast":null,"code":"/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar eventsEngine = require(\"../events/core/events_engine\");\n\nvar Promise = require(\"../core/polyfills/promise\");\n\nvar fromPromise = require(\"../core/utils/deferred\").fromPromise;\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar errors = require(\"./widget/ui.errors\");\n\nvar devices = require(\"../core/devices\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar inflector = require(\"../core/utils/inflector\");\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar inArray = require(\"../core/utils/array\").inArray;\n\nvar isNumeric = require(\"../core/utils/type\").isNumeric;\n\nvar eventUtils = require(\"../events/utils\");\n\nvar pointerEvents = require(\"../events/pointer\");\n\nvar wrapToArray = require(\"../core/utils/array\").wrapToArray;\n\nvar PROVIDERS = {\n  googleStatic: require(\"./map/provider.google_static\"),\n  google: require(\"./map/provider.dynamic.google\"),\n  bing: require(\"./map/provider.dynamic.bing\")\n};\nvar MAP_CLASS = \"dx-map\";\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\nvar Map = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      bounds: {\n        northEast: null,\n        southWest: null\n      },\n      center: {\n        lat: 0,\n        lng: 0\n      },\n      zoom: 1,\n      width: 300,\n      height: 300,\n      type: \"roadmap\",\n      provider: \"google\",\n      autoAdjust: true,\n      markers: [],\n      markerIconSrc: null,\n      onMarkerAdded: null,\n      onMarkerRemoved: null,\n      routes: [],\n      onRouteAdded: null,\n      onRouteRemoved: null,\n      key: {\n        bing: \"\",\n        google: \"\",\n        googleStatic: \"\"\n      },\n      controls: false,\n      onReady: null,\n      onUpdated: null,\n      onClick: null\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\n    this._lastAsyncAction = Promise.resolve();\n\n    this._checkOption(\"provider\");\n\n    this._checkOption(\"markers\");\n\n    this._checkOption(\"routes\");\n\n    this._initContainer();\n\n    this._grabEvents();\n\n    this._rendered = {};\n  },\n  _checkOption: function _checkOption(option) {\n    var value = this.option(option);\n\n    if (\"markers\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1022\");\n    }\n\n    if (\"routes\" === option && !Array.isArray(value)) {\n      throw errors.Error(\"E1023\");\n    }\n  },\n  _initContainer: function _initContainer() {\n    this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\n    this.$element().append(this._$container);\n  },\n  _grabEvents: function _grabEvents() {\n    var eventName = eventUtils.addNamespace(pointerEvents.down, this.NAME);\n    eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this));\n  },\n  _cancelEvent: function _cancelEvent(e) {\n    var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\n\n    if (cancelByProvider) {\n      e.stopPropagation();\n    }\n  },\n  _saveRendered: function _saveRendered(option) {\n    var value = this.option(option);\n    this._rendered[option] = value.slice();\n  },\n  _render: function _render() {\n    this.callBase();\n\n    this._renderShield();\n\n    this._saveRendered(\"markers\");\n\n    this._saveRendered(\"routes\");\n\n    this._provider = new PROVIDERS[this.option(\"provider\")](this, this._$container);\n\n    this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes);\n  },\n  _renderShield: function _renderShield() {\n    var $shield;\n\n    if (this.option(\"disabled\")) {\n      $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\n      this.$element().append($shield);\n    } else {\n      $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\n      $shield.remove();\n    }\n  },\n  _clean: function _clean() {\n    this._cleanFocusState();\n\n    if (this._provider) {\n      this._provider.clean();\n    }\n\n    this._provider = null;\n    this._lastAsyncAction = Promise.resolve();\n    this.setOptionSilent(\"bounds\", {\n      northEast: null,\n      southWest: null\n    });\n    delete this._suppressAsyncAction;\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var changeBag = this._optionChangeBag;\n    this._optionChangeBag = null;\n\n    switch (name) {\n      case \"disabled\":\n        this._renderShield();\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"provider\":\n        this._suppressAsyncAction = true;\n\n        this._invalidate();\n\n        break;\n\n      case \"key\":\n        errors.log(\"W1001\");\n        break;\n\n      case \"bounds\":\n        this._queueAsyncAction(\"updateBounds\");\n\n        break;\n\n      case \"center\":\n        this._queueAsyncAction(\"updateCenter\");\n\n        break;\n\n      case \"zoom\":\n        this._queueAsyncAction(\"updateZoom\");\n\n        break;\n\n      case \"type\":\n        this._queueAsyncAction(\"updateMapType\");\n\n        break;\n\n      case \"controls\":\n        this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\n\n        break;\n\n      case \"autoAdjust\":\n        this._queueAsyncAction(\"adjustViewport\");\n\n        break;\n\n      case \"markers\":\n      case \"routes\":\n        this._checkOption(name);\n\n        var prevValue = this._rendered[name];\n\n        this._saveRendered(name);\n\n        this._queueAsyncAction(\"update\" + inflector.titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function (result) {\n          if (changeBag) {\n            changeBag.resolve(result);\n          }\n        });\n\n        break;\n\n      case \"markerIconSrc\":\n        this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\n\n        break;\n\n      case \"onReady\":\n      case \"onUpdated\":\n      case \"onMarkerAdded\":\n      case \"onMarkerRemoved\":\n      case \"onRouteAdded\":\n      case \"onRouteRemoved\":\n      case \"onClick\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    this._queueAsyncAction(\"updateDimensions\");\n  },\n  _queueAsyncAction: function _queueAsyncAction(name) {\n    var options = [].slice.call(arguments).slice(1);\n    var isActionSuppressed = this._suppressAsyncAction;\n    this._lastAsyncAction = this._lastAsyncAction.then(function () {\n      if (!this._provider || isActionSuppressed) {\n        return Promise.resolve();\n      }\n\n      return this._provider[name].apply(this._provider, options).then(function (result) {\n        result = wrapToArray(result);\n        var mapRefreshed = result[0];\n\n        if (mapRefreshed) {\n          this._triggerReadyAction();\n        }\n\n        return result[1];\n      }.bind(this));\n    }.bind(this));\n    return this._lastAsyncAction;\n  },\n  _triggerReadyAction: function _triggerReadyAction() {\n    this._createActionByOption(\"onReady\")({\n      originalMap: this._provider.map()\n    });\n  },\n  _triggerUpdateAction: function _triggerUpdateAction() {\n    this._createActionByOption(\"onUpdated\")();\n  },\n  setOptionSilent: function setOptionSilent(name, value) {\n    this._setOptionSilent(name, value);\n  },\n  addMarker: function addMarker(marker) {\n    return this._addFunction(\"markers\", marker);\n  },\n  removeMarker: function removeMarker(marker) {\n    return this._removeFunction(\"markers\", marker);\n  },\n  addRoute: function addRoute(route) {\n    return this._addFunction(\"routes\", route);\n  },\n  removeRoute: function removeRoute(route) {\n    return this._removeFunction(\"routes\", route);\n  },\n  _addFunction: function _addFunction(optionName, addingValue) {\n    var optionValue = this.option(optionName);\n    var addingValues = wrapToArray(addingValue);\n    optionValue.push.apply(optionValue, addingValues);\n    return this._partialArrayOptionChange(optionName, optionValue, addingValues, []);\n  },\n  _removeFunction: function _removeFunction(optionName, removingValue) {\n    var optionValue = this.option(optionName);\n    var removingValues = wrapToArray(removingValue);\n    each(removingValues, function (removingIndex, removingValue) {\n      var index = isNumeric(removingValue) ? removingValue : inArray(removingValue, optionValue);\n\n      if (index !== -1) {\n        var removing = optionValue.splice(index, 1)[0];\n        removingValues.splice(removingIndex, 1, removing);\n      } else {\n        throw errors.log(\"E1021\", inflector.titleize(optionName.substring(0, optionName.length - 1)), removingValue);\n      }\n    });\n    return this._partialArrayOptionChange(optionName, optionValue, [], removingValues);\n  },\n  _partialArrayOptionChange: function _partialArrayOptionChange(optionName, optionValue, addingValues, removingValues) {\n    return fromPromise(new Promise(function (resolve) {\n      this._optionChangeBag = {\n        resolve: resolve,\n        added: addingValues,\n        removed: removingValues\n      };\n      this.option(optionName, optionValue);\n    }.bind(this)).then(function (result) {\n      return result && 1 === result.length ? result[0] : result;\n    }), this);\n  }\n});\nregisterComponent(\"dxMap\", Map);\nmodule.exports = Map;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/map.js"],"names":["$","require","eventsEngine","Promise","fromPromise","registerComponent","errors","devices","Widget","inflector","each","extend","inArray","isNumeric","eventUtils","pointerEvents","wrapToArray","PROVIDERS","googleStatic","google","bing","MAP_CLASS","MAP_CONTAINER_CLASS","MAP_SHIELD_CLASS","NATIVE_CLICK_CLASS","Map","inherit","_getDefaultOptions","callBase","bounds","northEast","southWest","center","lat","lng","zoom","width","height","type","provider","autoAdjust","markers","markerIconSrc","onMarkerAdded","onMarkerRemoved","routes","onRouteAdded","onRouteRemoved","key","controls","onReady","onUpdated","onClick","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_init","$element","addClass","_lastAsyncAction","resolve","_checkOption","_initContainer","_grabEvents","_rendered","option","value","Array","isArray","Error","_$container","append","eventName","addNamespace","down","NAME","on","_cancelEvent","bind","e","cancelByProvider","_provider","isEventsCanceled","stopPropagation","_saveRendered","slice","_render","_renderShield","_queueAsyncAction","$shield","find","remove","_clean","_cleanFocusState","clean","setOptionSilent","_suppressAsyncAction","_optionChanged","args","name","changeBag","_optionChangeBag","_dimensionChanged","_invalidate","log","prevValue","titleize","removed","added","then","result","apply","arguments","_visibilityChanged","visible","call","isActionSuppressed","mapRefreshed","_triggerReadyAction","_createActionByOption","originalMap","map","_triggerUpdateAction","_setOptionSilent","addMarker","marker","_addFunction","removeMarker","_removeFunction","addRoute","route","removeRoute","optionName","addingValue","optionValue","addingValues","push","_partialArrayOptionChange","removingValue","removingValues","removingIndex","index","removing","splice","substring","length","module","exports","default"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/map.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../core/renderer\");\r\nvar eventsEngine = require(\"../events/core/events_engine\");\r\nvar Promise = require(\"../core/polyfills/promise\");\r\nvar fromPromise = require(\"../core/utils/deferred\").fromPromise;\r\nvar registerComponent = require(\"../core/component_registrator\");\r\nvar errors = require(\"./widget/ui.errors\");\r\nvar devices = require(\"../core/devices\");\r\nvar Widget = require(\"./widget/ui.widget\");\r\nvar inflector = require(\"../core/utils/inflector\");\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar extend = require(\"../core/utils/extend\").extend;\r\nvar inArray = require(\"../core/utils/array\").inArray;\r\nvar isNumeric = require(\"../core/utils/type\").isNumeric;\r\nvar eventUtils = require(\"../events/utils\");\r\nvar pointerEvents = require(\"../events/pointer\");\r\nvar wrapToArray = require(\"../core/utils/array\").wrapToArray;\r\nvar PROVIDERS = {\r\n    googleStatic: require(\"./map/provider.google_static\"),\r\n    google: require(\"./map/provider.dynamic.google\"),\r\n    bing: require(\"./map/provider.dynamic.bing\")\r\n};\r\nvar MAP_CLASS = \"dx-map\";\r\nvar MAP_CONTAINER_CLASS = \"dx-map-container\";\r\nvar MAP_SHIELD_CLASS = \"dx-map-shield\";\r\nvar NATIVE_CLICK_CLASS = \"dx-native-click\";\r\nvar Map = Widget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            bounds: {\r\n                northEast: null,\r\n                southWest: null\r\n            },\r\n            center: {\r\n                lat: 0,\r\n                lng: 0\r\n            },\r\n            zoom: 1,\r\n            width: 300,\r\n            height: 300,\r\n            type: \"roadmap\",\r\n            provider: \"google\",\r\n            autoAdjust: true,\r\n            markers: [],\r\n            markerIconSrc: null,\r\n            onMarkerAdded: null,\r\n            onMarkerRemoved: null,\r\n            routes: [],\r\n            onRouteAdded: null,\r\n            onRouteRemoved: null,\r\n            key: {\r\n                bing: \"\",\r\n                google: \"\",\r\n                googleStatic: \"\"\r\n            },\r\n            controls: false,\r\n            onReady: null,\r\n            onUpdated: null,\r\n            onClick: null\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(MAP_CLASS).addClass(NATIVE_CLICK_CLASS);\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this._checkOption(\"provider\");\r\n        this._checkOption(\"markers\");\r\n        this._checkOption(\"routes\");\r\n        this._initContainer();\r\n        this._grabEvents();\r\n        this._rendered = {}\r\n    },\r\n    _checkOption: function(option) {\r\n        var value = this.option(option);\r\n        if (\"markers\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1022\")\r\n        }\r\n        if (\"routes\" === option && !Array.isArray(value)) {\r\n            throw errors.Error(\"E1023\")\r\n        }\r\n    },\r\n    _initContainer: function() {\r\n        this._$container = $(\"<div>\").addClass(MAP_CONTAINER_CLASS);\r\n        this.$element().append(this._$container)\r\n    },\r\n    _grabEvents: function() {\r\n        var eventName = eventUtils.addNamespace(pointerEvents.down, this.NAME);\r\n        eventsEngine.on(this.$element(), eventName, this._cancelEvent.bind(this))\r\n    },\r\n    _cancelEvent: function(e) {\r\n        var cancelByProvider = this._provider && this._provider.isEventsCanceled(e) && !this.option(\"disabled\");\r\n        if (cancelByProvider) {\r\n            e.stopPropagation()\r\n        }\r\n    },\r\n    _saveRendered: function(option) {\r\n        var value = this.option(option);\r\n        this._rendered[option] = value.slice()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderShield();\r\n        this._saveRendered(\"markers\");\r\n        this._saveRendered(\"routes\");\r\n        this._provider = new(PROVIDERS[this.option(\"provider\")])(this, this._$container);\r\n        this._queueAsyncAction(\"render\", this._rendered.markers, this._rendered.routes)\r\n    },\r\n    _renderShield: function() {\r\n        var $shield;\r\n        if (this.option(\"disabled\")) {\r\n            $shield = $(\"<div>\").addClass(MAP_SHIELD_CLASS);\r\n            this.$element().append($shield)\r\n        } else {\r\n            $shield = this.$element().find(\".\" + MAP_SHIELD_CLASS);\r\n            $shield.remove()\r\n        }\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        if (this._provider) {\r\n            this._provider.clean()\r\n        }\r\n        this._provider = null;\r\n        this._lastAsyncAction = Promise.resolve();\r\n        this.setOptionSilent(\"bounds\", {\r\n            northEast: null,\r\n            southWest: null\r\n        });\r\n        delete this._suppressAsyncAction\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var changeBag = this._optionChangeBag;\r\n        this._optionChangeBag = null;\r\n        switch (name) {\r\n            case \"disabled\":\r\n                this._renderShield();\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"provider\":\r\n                this._suppressAsyncAction = true;\r\n                this._invalidate();\r\n                break;\r\n            case \"key\":\r\n                errors.log(\"W1001\");\r\n                break;\r\n            case \"bounds\":\r\n                this._queueAsyncAction(\"updateBounds\");\r\n                break;\r\n            case \"center\":\r\n                this._queueAsyncAction(\"updateCenter\");\r\n                break;\r\n            case \"zoom\":\r\n                this._queueAsyncAction(\"updateZoom\");\r\n                break;\r\n            case \"type\":\r\n                this._queueAsyncAction(\"updateMapType\");\r\n                break;\r\n            case \"controls\":\r\n                this._queueAsyncAction(\"updateControls\", this._rendered.markers, this._rendered.routes);\r\n                break;\r\n            case \"autoAdjust\":\r\n                this._queueAsyncAction(\"adjustViewport\");\r\n                break;\r\n            case \"markers\":\r\n            case \"routes\":\r\n                this._checkOption(name);\r\n                var prevValue = this._rendered[name];\r\n                this._saveRendered(name);\r\n                this._queueAsyncAction(\"update\" + inflector.titleize(name), changeBag ? changeBag.removed : prevValue, changeBag ? changeBag.added : this._rendered[name]).then(function(result) {\r\n                    if (changeBag) {\r\n                        changeBag.resolve(result)\r\n                    }\r\n                });\r\n                break;\r\n            case \"markerIconSrc\":\r\n                this._queueAsyncAction(\"updateMarkers\", this._rendered.markers, this._rendered.markers);\r\n                break;\r\n            case \"onReady\":\r\n            case \"onUpdated\":\r\n            case \"onMarkerAdded\":\r\n            case \"onMarkerRemoved\":\r\n            case \"onRouteAdded\":\r\n            case \"onRouteRemoved\":\r\n            case \"onClick\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._queueAsyncAction(\"updateDimensions\")\r\n    },\r\n    _queueAsyncAction: function(name) {\r\n        var options = [].slice.call(arguments).slice(1);\r\n        var isActionSuppressed = this._suppressAsyncAction;\r\n        this._lastAsyncAction = this._lastAsyncAction.then(function() {\r\n            if (!this._provider || isActionSuppressed) {\r\n                return Promise.resolve()\r\n            }\r\n            return this._provider[name].apply(this._provider, options).then(function(result) {\r\n                result = wrapToArray(result);\r\n                var mapRefreshed = result[0];\r\n                if (mapRefreshed) {\r\n                    this._triggerReadyAction()\r\n                }\r\n                return result[1]\r\n            }.bind(this))\r\n        }.bind(this));\r\n        return this._lastAsyncAction\r\n    },\r\n    _triggerReadyAction: function() {\r\n        this._createActionByOption(\"onReady\")({\r\n            originalMap: this._provider.map()\r\n        })\r\n    },\r\n    _triggerUpdateAction: function() {\r\n        this._createActionByOption(\"onUpdated\")()\r\n    },\r\n    setOptionSilent: function(name, value) {\r\n        this._setOptionSilent(name, value)\r\n    },\r\n    addMarker: function(marker) {\r\n        return this._addFunction(\"markers\", marker)\r\n    },\r\n    removeMarker: function(marker) {\r\n        return this._removeFunction(\"markers\", marker)\r\n    },\r\n    addRoute: function(route) {\r\n        return this._addFunction(\"routes\", route)\r\n    },\r\n    removeRoute: function(route) {\r\n        return this._removeFunction(\"routes\", route)\r\n    },\r\n    _addFunction: function(optionName, addingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var addingValues = wrapToArray(addingValue);\r\n        optionValue.push.apply(optionValue, addingValues);\r\n        return this._partialArrayOptionChange(optionName, optionValue, addingValues, [])\r\n    },\r\n    _removeFunction: function(optionName, removingValue) {\r\n        var optionValue = this.option(optionName);\r\n        var removingValues = wrapToArray(removingValue);\r\n        each(removingValues, function(removingIndex, removingValue) {\r\n            var index = isNumeric(removingValue) ? removingValue : inArray(removingValue, optionValue);\r\n            if (index !== -1) {\r\n                var removing = optionValue.splice(index, 1)[0];\r\n                removingValues.splice(removingIndex, 1, removing)\r\n            } else {\r\n                throw errors.log(\"E1021\", inflector.titleize(optionName.substring(0, optionName.length - 1)), removingValue)\r\n            }\r\n        });\r\n        return this._partialArrayOptionChange(optionName, optionValue, [], removingValues)\r\n    },\r\n    _partialArrayOptionChange: function(optionName, optionValue, addingValues, removingValues) {\r\n        return fromPromise(new Promise(function(resolve) {\r\n            this._optionChangeBag = {\r\n                resolve: resolve,\r\n                added: addingValues,\r\n                removed: removingValues\r\n            };\r\n            this.option(optionName, optionValue)\r\n        }.bind(this)).then(function(result) {\r\n            return result && 1 === result.length ? result[0] : result\r\n        }), this)\r\n    }\r\n});\r\nregisterComponent(\"dxMap\", Map);\r\nmodule.exports = Map;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}