{"ast":null,"code":"/**\r\n * DevExtreme (ui/diagram/ui.diagram.toolbar.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _diagram = require(\"./diagram.panel\");\n\nvar _diagram2 = _interopRequireDefault(_diagram);\n\nvar _toolbar = require(\"../toolbar\");\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nvar _context_menu = require(\"../context_menu\");\n\nvar _context_menu2 = _interopRequireDefault(_context_menu);\n\nvar _uiDiagram = require(\"./ui.diagram.commands\");\n\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\n\nvar _diagram_bar = require(\"./diagram_bar\");\n\nvar _diagram_bar2 = _interopRequireDefault(_diagram_bar);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nrequire(\"../select_box\");\n\nrequire(\"../color_box\");\n\nrequire(\"../check_box\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\nvar TOOLBAR_CLASS = \"dx-diagram-toolbar\";\nvar WIDGET_COMMANDS = [{\n  command: \"options\",\n  icon: \"preferences\",\n  hint: _message2.default.format(\"dxDiagram-commandProperties\"),\n  text: _message2.default.format(\"dxDiagram-commandProperties\")\n}];\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-diagram-toolbar-separator\";\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-diagram-toolbar-menu-separator\";\n\nvar DiagramToolbar = function (_DiagramPanel) {\n  _inherits(DiagramToolbar, _DiagramPanel);\n\n  var _super = _createSuper(DiagramToolbar);\n\n  function DiagramToolbar() {\n    _classCallCheck(this, DiagramToolbar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DiagramToolbar, [{\n    key: \"_init\",\n    value: function value() {\n      this.bar = new ToolbarDiagramBar(this);\n      this._itemHelpers = {};\n      this._contextMenus = [];\n\n      this._createOnWidgetCommand();\n\n      _get(_getPrototypeOf(DiagramToolbar.prototype), \"_init\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(DiagramToolbar.prototype), \"_initMarkup\", this).call(this);\n\n      var $toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(this._$element);\n\n      this._renderToolbar($toolbar);\n    }\n  }, {\n    key: \"_renderToolbar\",\n    value: function value($toolbar) {\n      var commands = _uiDiagram2.default.getToolbarCommands(this.option(\"commands\"));\n\n      var widgetCommandNames = this.option(\"widgetCommandNames\") || [];\n      var widgetCommands = WIDGET_COMMANDS.filter(function (c) {\n        return widgetCommandNames.indexOf(c.command) > -1;\n      });\n\n      var dataSource = this._prepareToolbarItems(commands, \"before\", this._execDiagramCommand);\n\n      dataSource = dataSource.concat(this._prepareToolbarItems(widgetCommands, \"after\", this._execWidgetCommand));\n      this._toolbarInstance = this._createComponent($toolbar, _toolbar2.default, {\n        dataSource: dataSource\n      });\n    }\n  }, {\n    key: \"_prepareToolbarItems\",\n    value: function value(items, location, actionHandler) {\n      var _this = this;\n\n      return items.map(function (item) {\n        return (0, _extend.extend)(true, {\n          location: location,\n          locateInMenu: \"auto\"\n        }, _this._createItem(item, location, actionHandler), _this._createItemOptions(item), _this._createItemActionOptions(item, actionHandler));\n      });\n    }\n  }, {\n    key: \"_createItem\",\n    value: function value(item, location, actionHandler) {\n      var _this2 = this;\n\n      if (\"separator\" === item.widget) {\n        return {\n          template: function template(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS);\n          },\n          menuItemTemplate: function menuItemTemplate(data, index, element) {\n            (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS);\n          }\n        };\n      }\n\n      return {\n        widget: item.widget || \"dxButton\",\n        cssClass: item.cssClass,\n        options: {\n          stylingMode: \"text\",\n          text: item.text,\n          hint: item.hint,\n          icon: item.icon,\n          onInitialized: function onInitialized(e) {\n            return _this2._onItemInitialized(e.component, item);\n          },\n          onContentReady: function onContentReady(e) {\n            return _this2._onItemContentReady(e.component, item, actionHandler);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"_createItemOptions\",\n    value: function value(_ref) {\n      var widget = _ref.widget,\n          items = _ref.items,\n          valueExpr = _ref.valueExpr,\n          displayExpr = _ref.displayExpr,\n          showText = _ref.showText,\n          hint = _ref.hint,\n          icon = _ref.icon;\n\n      if (\"dxSelectBox\" === widget) {\n        return this._createSelectBoxItemOptions(hint, items, valueExpr, displayExpr);\n      } else {\n        if (\"dxColorBox\" === widget) {\n          return this._createColorBoxItemOptions(hint, icon);\n        } else {\n          if (!widget || \"dxButton\" === widget) {\n            return {\n              showText: showText || \"inMenu\"\n            };\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_createSelectBoxItemOptions\",\n    value: function value(hint, items, valueExpr, displayExpr) {\n      var options = this._createSelectBoxBaseItemOptions(hint);\n\n      if (items) {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            items: items,\n            displayExpr: displayExpr,\n            valueExpr: valueExpr\n          }\n        });\n      } else {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            dataSource: items,\n            displayExpr: \"title\",\n            valueExpr: \"value\"\n          }\n        });\n      }\n\n      var isSelectButton = items && items.every(function (i) {\n        return void 0 !== i.icon;\n      });\n\n      if (isSelectButton) {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            fieldTemplate: function fieldTemplate(data, container) {\n              (0, _renderer2.default)(\"<i>\").addClass(data && data.icon).appendTo(container);\n              (0, _renderer2.default)(\"<div>\").dxTextBox({\n                readOnly: true,\n                stylingMode: \"outlined\"\n              }).appendTo(container);\n            },\n            itemTemplate: function itemTemplate(data) {\n              return '<i class=\"'.concat(data.icon, '\"').concat(data.hint && ' title=\"'.concat(data.hint), '\"}></i>');\n            }\n          }\n        });\n      }\n\n      return options;\n    }\n  }, {\n    key: \"_createColorBoxItemOptions\",\n    value: function value(hint, icon) {\n      var options = this._createSelectBoxBaseItemOptions(hint);\n\n      if (icon) {\n        options = (0, _extend.extend)(true, options, {\n          options: {\n            openOnFieldClick: true,\n            fieldTemplate: function fieldTemplate(data, container) {\n              (0, _renderer2.default)(\"<i>\").addClass(icon).css(\"borderBottomColor\", data).appendTo(container);\n              (0, _renderer2.default)(\"<div>\").dxTextBox({\n                readOnly: true,\n                stylingMode: \"outlined\"\n              }).appendTo(container);\n            }\n          }\n        });\n      }\n\n      return options;\n    }\n  }, {\n    key: \"_createSelectBoxBaseItemOptions\",\n    value: function value(hint) {\n      return {\n        options: {\n          stylingMode: \"filled\",\n          hint: hint\n        }\n      };\n    }\n  }, {\n    key: \"_createItemActionOptions\",\n    value: function value(item, handler) {\n      var _this3 = this;\n\n      switch (item.widget) {\n        case \"dxSelectBox\":\n        case \"dxColorBox\":\n        case \"dxCheckBox\":\n          return {\n            options: {\n              onValueChanged: function onValueChanged(e) {\n                var parameter = _this3._getExecCommandParameter(item, e.component.option(\"value\"));\n\n                handler.call(_this3, item.command, parameter);\n              }\n            }\n          };\n\n        default:\n          if (!item.items) {\n            return {\n              options: {\n                onClick: function onClick(e) {\n                  var parameter = _this3._getExecCommandParameter(item);\n\n                  handler.call(_this3, item.command, parameter);\n                }\n              }\n            };\n          }\n\n      }\n    }\n  }, {\n    key: \"_getExecCommandParameter\",\n    value: function value(item, widgetValue) {\n      if (item.getParameter) {\n        return item.getParameter(this, widgetValue);\n      }\n\n      return widgetValue;\n    }\n  }, {\n    key: \"_onItemInitialized\",\n    value: function value(widget, item) {\n      if (void 0 !== item.command) {\n        this._itemHelpers[item.command] = new ToolbarItemHelper(widget);\n      }\n    }\n  }, {\n    key: \"_onItemContentReady\",\n    value: function value(widget, item, actionHandler) {\n      var _this4 = this;\n\n      if (\"dxButton\" === widget.NAME && item.items) {\n        var $menuContainer = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n\n        this._createComponent($menuContainer, _context_menu2.default, {\n          dataSource: item.items,\n          displayExpr: \"text\",\n          valueExpr: \"command\",\n          target: widget.$element(),\n          showEvent: \"dxclick\",\n          position: {\n            at: \"left bottom\"\n          },\n          onItemClick: function onItemClick(_ref2) {\n            var itemData = _ref2.itemData;\n\n            if (void 0 !== itemData.command) {\n              var parameter = _this4._getExecCommandParameter(itemData);\n\n              actionHandler.call(_this4, itemData.command, parameter);\n            }\n          },\n          onInitialized: function onInitialized(_ref3) {\n            var component = _ref3.component;\n            return _this4._onContextMenuInitialized(component, item, widget);\n          },\n          onDisposing: function onDisposing(_ref4) {\n            var component = _ref4.component;\n            return _this4._onContextMenuDisposing(component, item);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onContextMenuInitialized\",\n    value: function value(widget, item, rootButton) {\n      this._contextMenus.push(widget);\n\n      this._addContextMenuHelper(item.items, widget, [], rootButton);\n    }\n  }, {\n    key: \"_addContextMenuHelper\",\n    value: function value(items, widget, indexPath, rootButton) {\n      var _this5 = this;\n\n      if (items) {\n        items.forEach(function (item, index) {\n          var itemIndexPath = indexPath.concat(index);\n          _this5._itemHelpers[item.command] = new ContextMenuItemHelper(widget, itemIndexPath, rootButton);\n\n          _this5._addContextMenuHelper(item.items, widget, itemIndexPath, rootButton);\n        });\n      }\n    }\n  }, {\n    key: \"_onContextMenuDisposing\",\n    value: function value(widget, item) {\n      this._contextMenus = this._contextMenus.filter(function (cm) {\n        return cm !== widget;\n      });\n    }\n  }, {\n    key: \"_execDiagramCommand\",\n    value: function value(command, _value) {\n      if (!this._updateLocked) {\n        this.bar.raiseBarCommandExecuted(command, _value);\n      }\n    }\n  }, {\n    key: \"_execWidgetCommand\",\n    value: function value(command) {\n      if (!this._updateLocked) {\n        this._onWidgetCommandAction({\n          name: command\n        });\n      }\n    }\n  }, {\n    key: \"_createOnWidgetCommand\",\n    value: function value() {\n      this._onWidgetCommandAction = this._createActionByOption(\"onWidgetCommand\");\n    }\n  }, {\n    key: \"_setItemEnabled\",\n    value: function value(command, enabled) {\n      if (command in this._itemHelpers) {\n        this._itemHelpers[command].setEnabled(enabled);\n      }\n    }\n  }, {\n    key: \"_setEnabled\",\n    value: function value(enabled) {\n      this._toolbarInstance.option(\"disabled\", !enabled);\n\n      this._contextMenus.forEach(function (cm) {\n        return cm.option(\"disabled\", !enabled);\n      });\n    }\n  }, {\n    key: \"_setItemValue\",\n    value: function value(command, _value2) {\n      try {\n        this._updateLocked = true;\n\n        if (command in this._itemHelpers) {\n          this._itemHelpers[command].setValue(_value2);\n        }\n      } finally {\n        this._updateLocked = false;\n      }\n    }\n  }, {\n    key: \"_setItemSubItems\",\n    value: function value(command, items) {\n      this._updateLocked = true;\n\n      if (command in this._itemHelpers) {\n        this._itemHelpers[command].setItems(items);\n      }\n\n      this._updateLocked = false;\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      switch (args.name) {\n        case \"onWidgetCommand\":\n          this._createOnWidgetCommand();\n\n          break;\n\n        case \"commands\":\n          this._invalidate();\n\n          break;\n\n        case \"export\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(DiagramToolbar.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(DiagramToolbar.prototype), \"_getDefaultOptions\", this).call(this), {\n        \"export\": {\n          fileName: \"Diagram\",\n          proxyUrl: void 0\n        }\n      });\n    }\n  }]);\n\n  return DiagramToolbar;\n}(_diagram2.default);\n\nvar ToolbarDiagramBar = function (_DiagramBar) {\n  _inherits(ToolbarDiagramBar, _DiagramBar);\n\n  var _super2 = _createSuper(ToolbarDiagramBar);\n\n  function ToolbarDiagramBar() {\n    _classCallCheck(this, ToolbarDiagramBar);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(ToolbarDiagramBar, [{\n    key: \"getCommandKeys\",\n    value: function value() {\n      return this.getKeys(_uiDiagram2.default.getToolbarCommands());\n    }\n  }, {\n    key: \"getKeys\",\n    value: function value(items) {\n      var _this6 = this;\n\n      return items.reduce(function (commands, item) {\n        if (void 0 !== item.command) {\n          commands.push(item.command);\n        }\n\n        if (item.items) {\n          commands = commands.concat(_this6.getKeys(item.items));\n        }\n\n        return commands;\n      }, []);\n    }\n  }, {\n    key: \"setItemValue\",\n    value: function value(key, _value3) {\n      this._owner._setItemValue(key, _value3);\n    }\n  }, {\n    key: \"setItemEnabled\",\n    value: function value(key, enabled) {\n      this._owner._setItemEnabled(key, enabled);\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function value(enabled) {\n      this._owner._setEnabled(enabled);\n    }\n  }, {\n    key: \"setItemSubItems\",\n    value: function value(key, items) {\n      this._owner._setItemSubItems(key, items);\n    }\n  }]);\n\n  return ToolbarDiagramBar;\n}(_diagram_bar2.default);\n\nvar ToolbarItemHelper = function () {\n  function ToolbarItemHelper(widget) {\n    _classCallCheck(this, ToolbarItemHelper);\n\n    this._widget = widget;\n  }\n\n  _createClass(ToolbarItemHelper, [{\n    key: \"setEnabled\",\n    value: function value(enabled) {\n      this._widget.option(\"disabled\", !enabled);\n    }\n  }, {\n    key: \"setValue\",\n    value: function value(_value4) {\n      if (\"value\" in this._widget.option()) {\n        this._widget.option(\"value\", _value4);\n      } else {\n        if (void 0 !== _value4) {\n          this._widget.$element().toggleClass(ACTIVE_FORMAT_CLASS, _value4);\n        }\n      }\n    }\n  }, {\n    key: \"setItems\",\n    value: function value(items) {\n      if (\"items\" in this._widget.option()) {\n        this._widget.option(\"items\", items.map(function (item) {\n          var value = \"object\" === _typeof(item.value) ? JSON.stringify(item.value) : item.value;\n          return {\n            value: value,\n            title: item.text\n          };\n        }));\n      }\n    }\n  }]);\n\n  return ToolbarItemHelper;\n}();\n\nvar ContextMenuItemHelper = function (_ToolbarItemHelper) {\n  _inherits(ContextMenuItemHelper, _ToolbarItemHelper);\n\n  var _super3 = _createSuper(ContextMenuItemHelper);\n\n  function ContextMenuItemHelper(widget, indexPath, rootButton) {\n    var _this7;\n\n    _classCallCheck(this, ContextMenuItemHelper);\n\n    _this7 = _super3.call(this, widget);\n    _this7._indexPath = indexPath;\n    _this7._rootButton = rootButton;\n    return _this7;\n  }\n\n  _createClass(ContextMenuItemHelper, [{\n    key: \"setEnabled\",\n    value: function value(enabled) {\n      var optionText = this._indexPath.reduce(function (r, i) {\n        return r + \"items[\".concat(i, \"].\");\n      }, \"\") + \"disabled\";\n\n      this._widget.option(optionText, !enabled);\n\n      var rootEnabled = this._hasEnabledCommandItems(this._widget.option(\"items\"));\n\n      this._rootButton.option(\"disabled\", !rootEnabled);\n    }\n  }, {\n    key: \"_hasEnabledCommandItems\",\n    value: function value(items) {\n      var _this8 = this;\n\n      if (items) {\n        return items.some(function (item) {\n          return void 0 !== item.command && !item.disabled || _this8._hasEnabledCommandItems(item.items);\n        });\n      }\n\n      return false;\n    }\n  }, {\n    key: \"setValue\",\n    value: function value(_value5) {}\n  }]);\n\n  return ContextMenuItemHelper;\n}(ToolbarItemHelper);\n\nmodule.exports = DiagramToolbar;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/diagram/ui.diagram.toolbar.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_diagram","_diagram2","_toolbar","_toolbar2","_context_menu","_context_menu2","_uiDiagram","_uiDiagram2","_diagram_bar","_diagram_bar2","_extend","_message","_message2","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_createSuper","Derived","result","Super","_isNativeReflectConstruct","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","ACTIVE_FORMAT_CLASS","TOOLBAR_CLASS","WIDGET_COMMANDS","command","icon","hint","default","format","text","TOOLBAR_SEPARATOR_CLASS","TOOLBAR_MENU_SEPARATOR_CLASS","DiagramToolbar","_DiagramPanel","_super","bar","ToolbarDiagramBar","_itemHelpers","_contextMenus","_createOnWidgetCommand","$toolbar","addClass","appendTo","_$element","_renderToolbar","commands","getToolbarCommands","option","widgetCommandNames","widgetCommands","filter","c","indexOf","dataSource","_prepareToolbarItems","_execDiagramCommand","concat","_execWidgetCommand","_toolbarInstance","_createComponent","items","location","actionHandler","_this","map","item","extend","locateInMenu","_createItem","_createItemOptions","_createItemActionOptions","_this2","widget","template","data","index","element","menuItemTemplate","cssClass","options","stylingMode","onInitialized","_onItemInitialized","component","onContentReady","_onItemContentReady","_ref","valueExpr","displayExpr","showText","_createSelectBoxItemOptions","_createColorBoxItemOptions","_createSelectBoxBaseItemOptions","isSelectButton","every","fieldTemplate","container","dxTextBox","readOnly","itemTemplate","openOnFieldClick","css","handler","_this3","onValueChanged","parameter","_getExecCommandParameter","onClick","widgetValue","getParameter","ToolbarItemHelper","_this4","NAME","$menuContainer","$element","showEvent","position","at","onItemClick","_ref2","itemData","_ref3","_onContextMenuInitialized","onDisposing","_ref4","_onContextMenuDisposing","rootButton","push","_addContextMenuHelper","indexPath","_this5","forEach","itemIndexPath","ContextMenuItemHelper","cm","_updateLocked","raiseBarCommandExecuted","_onWidgetCommandAction","name","_createActionByOption","enabled","setEnabled","setValue","setItems","args","_invalidate","fileName","proxyUrl","_DiagramBar","_super2","getKeys","_this6","reduce","_owner","_setItemValue","_setItemEnabled","_setEnabled","_setItemSubItems","_widget","toggleClass","JSON","stringify","title","_ToolbarItemHelper","_super3","_this7","_indexPath","_rootButton","optionText","r","rootEnabled","_hasEnabledCommandItems","_this8","some","disabled","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/diagram/ui.diagram.toolbar.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _diagram = require(\"./diagram.panel\");\r\nvar _diagram2 = _interopRequireDefault(_diagram);\r\nvar _toolbar = require(\"../toolbar\");\r\nvar _toolbar2 = _interopRequireDefault(_toolbar);\r\nvar _context_menu = require(\"../context_menu\");\r\nvar _context_menu2 = _interopRequireDefault(_context_menu);\r\nvar _uiDiagram = require(\"./ui.diagram.commands\");\r\nvar _uiDiagram2 = _interopRequireDefault(_uiDiagram);\r\nvar _diagram_bar = require(\"./diagram_bar\");\r\nvar _diagram_bar2 = _interopRequireDefault(_diagram_bar);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nrequire(\"../select_box\");\r\nrequire(\"../color_box\");\r\nrequire(\"../check_box\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (_isNativeReflectConstruct()) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\nvar TOOLBAR_CLASS = \"dx-diagram-toolbar\";\r\nvar WIDGET_COMMANDS = [{\r\n    command: \"options\",\r\n    icon: \"preferences\",\r\n    hint: _message2.default.format(\"dxDiagram-commandProperties\"),\r\n    text: _message2.default.format(\"dxDiagram-commandProperties\")\r\n}];\r\nvar TOOLBAR_SEPARATOR_CLASS = \"dx-diagram-toolbar-separator\";\r\nvar TOOLBAR_MENU_SEPARATOR_CLASS = \"dx-diagram-toolbar-menu-separator\";\r\nvar DiagramToolbar = function(_DiagramPanel) {\r\n    _inherits(DiagramToolbar, _DiagramPanel);\r\n    var _super = _createSuper(DiagramToolbar);\r\n\r\n    function DiagramToolbar() {\r\n        _classCallCheck(this, DiagramToolbar);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(DiagramToolbar, [{\r\n        key: \"_init\",\r\n        value: function() {\r\n            this.bar = new ToolbarDiagramBar(this);\r\n            this._itemHelpers = {};\r\n            this._contextMenus = [];\r\n            this._createOnWidgetCommand();\r\n            _get(_getPrototypeOf(DiagramToolbar.prototype), \"_init\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(DiagramToolbar.prototype), \"_initMarkup\", this).call(this);\r\n            var $toolbar = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_CLASS).appendTo(this._$element);\r\n            this._renderToolbar($toolbar)\r\n        }\r\n    }, {\r\n        key: \"_renderToolbar\",\r\n        value: function($toolbar) {\r\n            var commands = _uiDiagram2.default.getToolbarCommands(this.option(\"commands\"));\r\n            var widgetCommandNames = this.option(\"widgetCommandNames\") || [];\r\n            var widgetCommands = WIDGET_COMMANDS.filter(function(c) {\r\n                return widgetCommandNames.indexOf(c.command) > -1\r\n            });\r\n            var dataSource = this._prepareToolbarItems(commands, \"before\", this._execDiagramCommand);\r\n            dataSource = dataSource.concat(this._prepareToolbarItems(widgetCommands, \"after\", this._execWidgetCommand));\r\n            this._toolbarInstance = this._createComponent($toolbar, _toolbar2.default, {\r\n                dataSource: dataSource\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_prepareToolbarItems\",\r\n        value: function(items, location, actionHandler) {\r\n            var _this = this;\r\n            return items.map(function(item) {\r\n                return (0, _extend.extend)(true, {\r\n                    location: location,\r\n                    locateInMenu: \"auto\"\r\n                }, _this._createItem(item, location, actionHandler), _this._createItemOptions(item), _this._createItemActionOptions(item, actionHandler))\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_createItem\",\r\n        value: function(item, location, actionHandler) {\r\n            var _this2 = this;\r\n            if (\"separator\" === item.widget) {\r\n                return {\r\n                    template: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_SEPARATOR_CLASS)\r\n                    },\r\n                    menuItemTemplate: function(data, index, element) {\r\n                        (0, _renderer2.default)(element).addClass(TOOLBAR_MENU_SEPARATOR_CLASS)\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                widget: item.widget || \"dxButton\",\r\n                cssClass: item.cssClass,\r\n                options: {\r\n                    stylingMode: \"text\",\r\n                    text: item.text,\r\n                    hint: item.hint,\r\n                    icon: item.icon,\r\n                    onInitialized: function(e) {\r\n                        return _this2._onItemInitialized(e.component, item)\r\n                    },\r\n                    onContentReady: function(e) {\r\n                        return _this2._onItemContentReady(e.component, item, actionHandler)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemOptions\",\r\n        value: function(_ref) {\r\n            var widget = _ref.widget,\r\n                items = _ref.items,\r\n                valueExpr = _ref.valueExpr,\r\n                displayExpr = _ref.displayExpr,\r\n                showText = _ref.showText,\r\n                hint = _ref.hint,\r\n                icon = _ref.icon;\r\n            if (\"dxSelectBox\" === widget) {\r\n                return this._createSelectBoxItemOptions(hint, items, valueExpr, displayExpr)\r\n            } else {\r\n                if (\"dxColorBox\" === widget) {\r\n                    return this._createColorBoxItemOptions(hint, icon)\r\n                } else {\r\n                    if (!widget || \"dxButton\" === widget) {\r\n                        return {\r\n                            showText: showText || \"inMenu\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createSelectBoxItemOptions\",\r\n        value: function(hint, items, valueExpr, displayExpr) {\r\n            var options = this._createSelectBoxBaseItemOptions(hint);\r\n            if (items) {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        items: items,\r\n                        displayExpr: displayExpr,\r\n                        valueExpr: valueExpr\r\n                    }\r\n                })\r\n            } else {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        dataSource: items,\r\n                        displayExpr: \"title\",\r\n                        valueExpr: \"value\"\r\n                    }\r\n                })\r\n            }\r\n            var isSelectButton = items && items.every(function(i) {\r\n                return void 0 !== i.icon\r\n            });\r\n            if (isSelectButton) {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        fieldTemplate: function(data, container) {\r\n                            (0, _renderer2.default)(\"<i>\").addClass(data && data.icon).appendTo(container);\r\n                            (0, _renderer2.default)(\"<div>\").dxTextBox({\r\n                                readOnly: true,\r\n                                stylingMode: \"outlined\"\r\n                            }).appendTo(container)\r\n                        },\r\n                        itemTemplate: function(data) {\r\n                            return '<i class=\"'.concat(data.icon, '\"').concat(data.hint && ' title=\"'.concat(data.hint), '\"}></i>')\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            return options\r\n        }\r\n    }, {\r\n        key: \"_createColorBoxItemOptions\",\r\n        value: function(hint, icon) {\r\n            var options = this._createSelectBoxBaseItemOptions(hint);\r\n            if (icon) {\r\n                options = (0, _extend.extend)(true, options, {\r\n                    options: {\r\n                        openOnFieldClick: true,\r\n                        fieldTemplate: function(data, container) {\r\n                            (0, _renderer2.default)(\"<i>\").addClass(icon).css(\"borderBottomColor\", data).appendTo(container);\r\n                            (0, _renderer2.default)(\"<div>\").dxTextBox({\r\n                                readOnly: true,\r\n                                stylingMode: \"outlined\"\r\n                            }).appendTo(container)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            return options\r\n        }\r\n    }, {\r\n        key: \"_createSelectBoxBaseItemOptions\",\r\n        value: function(hint) {\r\n            return {\r\n                options: {\r\n                    stylingMode: \"filled\",\r\n                    hint: hint\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createItemActionOptions\",\r\n        value: function(item, handler) {\r\n            var _this3 = this;\r\n            switch (item.widget) {\r\n                case \"dxSelectBox\":\r\n                case \"dxColorBox\":\r\n                case \"dxCheckBox\":\r\n                    return {\r\n                        options: {\r\n                            onValueChanged: function(e) {\r\n                                var parameter = _this3._getExecCommandParameter(item, e.component.option(\"value\"));\r\n                                handler.call(_this3, item.command, parameter)\r\n                            }\r\n                        }\r\n                    };\r\n                default:\r\n                    if (!item.items) {\r\n                        return {\r\n                            options: {\r\n                                onClick: function(e) {\r\n                                    var parameter = _this3._getExecCommandParameter(item);\r\n                                    handler.call(_this3, item.command, parameter)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getExecCommandParameter\",\r\n        value: function(item, widgetValue) {\r\n            if (item.getParameter) {\r\n                return item.getParameter(this, widgetValue)\r\n            }\r\n            return widgetValue\r\n        }\r\n    }, {\r\n        key: \"_onItemInitialized\",\r\n        value: function(widget, item) {\r\n            if (void 0 !== item.command) {\r\n                this._itemHelpers[item.command] = new ToolbarItemHelper(widget)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onItemContentReady\",\r\n        value: function(widget, item, actionHandler) {\r\n            var _this4 = this;\r\n            if (\"dxButton\" === widget.NAME && item.items) {\r\n                var $menuContainer = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n                this._createComponent($menuContainer, _context_menu2.default, {\r\n                    dataSource: item.items,\r\n                    displayExpr: \"text\",\r\n                    valueExpr: \"command\",\r\n                    target: widget.$element(),\r\n                    showEvent: \"dxclick\",\r\n                    position: {\r\n                        at: \"left bottom\"\r\n                    },\r\n                    onItemClick: function(_ref2) {\r\n                        var itemData = _ref2.itemData;\r\n                        if (void 0 !== itemData.command) {\r\n                            var parameter = _this4._getExecCommandParameter(itemData);\r\n                            actionHandler.call(_this4, itemData.command, parameter)\r\n                        }\r\n                    },\r\n                    onInitialized: function(_ref3) {\r\n                        var component = _ref3.component;\r\n                        return _this4._onContextMenuInitialized(component, item, widget)\r\n                    },\r\n                    onDisposing: function(_ref4) {\r\n                        var component = _ref4.component;\r\n                        return _this4._onContextMenuDisposing(component, item)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenuInitialized\",\r\n        value: function(widget, item, rootButton) {\r\n            this._contextMenus.push(widget);\r\n            this._addContextMenuHelper(item.items, widget, [], rootButton)\r\n        }\r\n    }, {\r\n        key: \"_addContextMenuHelper\",\r\n        value: function(items, widget, indexPath, rootButton) {\r\n            var _this5 = this;\r\n            if (items) {\r\n                items.forEach(function(item, index) {\r\n                    var itemIndexPath = indexPath.concat(index);\r\n                    _this5._itemHelpers[item.command] = new ContextMenuItemHelper(widget, itemIndexPath, rootButton);\r\n                    _this5._addContextMenuHelper(item.items, widget, itemIndexPath, rootButton)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_onContextMenuDisposing\",\r\n        value: function(widget, item) {\r\n            this._contextMenus = this._contextMenus.filter(function(cm) {\r\n                return cm !== widget\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_execDiagramCommand\",\r\n        value: function(command, value) {\r\n            if (!this._updateLocked) {\r\n                this.bar.raiseBarCommandExecuted(command, value)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_execWidgetCommand\",\r\n        value: function(command) {\r\n            if (!this._updateLocked) {\r\n                this._onWidgetCommandAction({\r\n                    name: command\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createOnWidgetCommand\",\r\n        value: function() {\r\n            this._onWidgetCommandAction = this._createActionByOption(\"onWidgetCommand\")\r\n        }\r\n    }, {\r\n        key: \"_setItemEnabled\",\r\n        value: function(command, enabled) {\r\n            if (command in this._itemHelpers) {\r\n                this._itemHelpers[command].setEnabled(enabled)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setEnabled\",\r\n        value: function(enabled) {\r\n            this._toolbarInstance.option(\"disabled\", !enabled);\r\n            this._contextMenus.forEach(function(cm) {\r\n                return cm.option(\"disabled\", !enabled)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setItemValue\",\r\n        value: function(command, value) {\r\n            try {\r\n                this._updateLocked = true;\r\n                if (command in this._itemHelpers) {\r\n                    this._itemHelpers[command].setValue(value)\r\n                }\r\n            } finally {\r\n                this._updateLocked = false\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_setItemSubItems\",\r\n        value: function(command, items) {\r\n            this._updateLocked = true;\r\n            if (command in this._itemHelpers) {\r\n                this._itemHelpers[command].setItems(items)\r\n            }\r\n            this._updateLocked = false\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            switch (args.name) {\r\n                case \"onWidgetCommand\":\r\n                    this._createOnWidgetCommand();\r\n                    break;\r\n                case \"commands\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"export\":\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(DiagramToolbar.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(DiagramToolbar.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                \"export\": {\r\n                    fileName: \"Diagram\",\r\n                    proxyUrl: void 0\r\n                }\r\n            })\r\n        }\r\n    }]);\r\n    return DiagramToolbar\r\n}(_diagram2.default);\r\nvar ToolbarDiagramBar = function(_DiagramBar) {\r\n    _inherits(ToolbarDiagramBar, _DiagramBar);\r\n    var _super2 = _createSuper(ToolbarDiagramBar);\r\n\r\n    function ToolbarDiagramBar() {\r\n        _classCallCheck(this, ToolbarDiagramBar);\r\n        return _super2.apply(this, arguments)\r\n    }\r\n    _createClass(ToolbarDiagramBar, [{\r\n        key: \"getCommandKeys\",\r\n        value: function() {\r\n            return this.getKeys(_uiDiagram2.default.getToolbarCommands())\r\n        }\r\n    }, {\r\n        key: \"getKeys\",\r\n        value: function(items) {\r\n            var _this6 = this;\r\n            return items.reduce(function(commands, item) {\r\n                if (void 0 !== item.command) {\r\n                    commands.push(item.command)\r\n                }\r\n                if (item.items) {\r\n                    commands = commands.concat(_this6.getKeys(item.items))\r\n                }\r\n                return commands\r\n            }, [])\r\n        }\r\n    }, {\r\n        key: \"setItemValue\",\r\n        value: function(key, value) {\r\n            this._owner._setItemValue(key, value)\r\n        }\r\n    }, {\r\n        key: \"setItemEnabled\",\r\n        value: function(key, enabled) {\r\n            this._owner._setItemEnabled(key, enabled)\r\n        }\r\n    }, {\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._owner._setEnabled(enabled)\r\n        }\r\n    }, {\r\n        key: \"setItemSubItems\",\r\n        value: function(key, items) {\r\n            this._owner._setItemSubItems(key, items)\r\n        }\r\n    }]);\r\n    return ToolbarDiagramBar\r\n}(_diagram_bar2.default);\r\nvar ToolbarItemHelper = function() {\r\n    function ToolbarItemHelper(widget) {\r\n        _classCallCheck(this, ToolbarItemHelper);\r\n        this._widget = widget\r\n    }\r\n    _createClass(ToolbarItemHelper, [{\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            this._widget.option(\"disabled\", !enabled)\r\n        }\r\n    }, {\r\n        key: \"setValue\",\r\n        value: function(value) {\r\n            if (\"value\" in this._widget.option()) {\r\n                this._widget.option(\"value\", value)\r\n            } else {\r\n                if (void 0 !== value) {\r\n                    this._widget.$element().toggleClass(ACTIVE_FORMAT_CLASS, value)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"setItems\",\r\n        value: function(items) {\r\n            if (\"items\" in this._widget.option()) {\r\n                this._widget.option(\"items\", items.map(function(item) {\r\n                    var value = \"object\" === _typeof(item.value) ? JSON.stringify(item.value) : item.value;\r\n                    return {\r\n                        value: value,\r\n                        title: item.text\r\n                    }\r\n                }))\r\n            }\r\n        }\r\n    }]);\r\n    return ToolbarItemHelper\r\n}();\r\nvar ContextMenuItemHelper = function(_ToolbarItemHelper) {\r\n    _inherits(ContextMenuItemHelper, _ToolbarItemHelper);\r\n    var _super3 = _createSuper(ContextMenuItemHelper);\r\n\r\n    function ContextMenuItemHelper(widget, indexPath, rootButton) {\r\n        var _this7;\r\n        _classCallCheck(this, ContextMenuItemHelper);\r\n        _this7 = _super3.call(this, widget);\r\n        _this7._indexPath = indexPath;\r\n        _this7._rootButton = rootButton;\r\n        return _this7\r\n    }\r\n    _createClass(ContextMenuItemHelper, [{\r\n        key: \"setEnabled\",\r\n        value: function(enabled) {\r\n            var optionText = this._indexPath.reduce(function(r, i) {\r\n                return r + \"items[\".concat(i, \"].\")\r\n            }, \"\") + \"disabled\";\r\n            this._widget.option(optionText, !enabled);\r\n            var rootEnabled = this._hasEnabledCommandItems(this._widget.option(\"items\"));\r\n            this._rootButton.option(\"disabled\", !rootEnabled)\r\n        }\r\n    }, {\r\n        key: \"_hasEnabledCommandItems\",\r\n        value: function(items) {\r\n            var _this8 = this;\r\n            if (items) {\r\n                return items.some(function(item) {\r\n                    return void 0 !== item.command && !item.disabled || _this8._hasEnabledCommandItems(item.items)\r\n                })\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"setValue\",\r\n        value: function(value) {}\r\n    }]);\r\n    return ContextMenuItemHelper\r\n}(ToolbarItemHelper);\r\nmodule.exports = DiagramToolbar;\r\n"]},"metadata":{},"sourceType":"script"}