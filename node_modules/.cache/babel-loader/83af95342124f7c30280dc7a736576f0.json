{"ast":null,"code":"/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _guid = require(\"../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _window = require(\"../core/utils/window\");\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _callbacks = require(\"../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _type = require(\"../core/utils/type\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _ajax = require(\"../core/utils/ajax\");\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _editor = require(\"./editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _button = require(\"./button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _progress_bar = require(\"./progress_bar\");\n\nvar _progress_bar2 = _interopRequireDefault(_progress_bar);\n\nvar _browser = require(\"../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _devices = require(\"../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _utils = require(\"../events/utils\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _click = require(\"../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _message = require(\"../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _themes = require(\"./themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar window = (0, _window.getWindow)();\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\n\nvar renderFileUploaderInput = function renderFileUploaderInput() {\n  return (0, _renderer2.default)(\"<input>\").attr(\"type\", \"file\");\n};\n\nvar isFormDataSupported = function isFormDataSupported() {\n  return !!window.FormData;\n};\n\nvar FileUploader = function (_Editor) {\n  _inherits(FileUploader, _Editor);\n\n  var _super = _createSuper(FileUploader);\n\n  function FileUploader() {\n    _classCallCheck(this, FileUploader);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileUploader, [{\n    key: \"_supportedKeys\",\n    value: function value() {\n      var _this = this;\n\n      var click = function click(e) {\n        e.preventDefault();\n\n        var $selectButton = _this._selectButton.$element();\n\n        _events_engine2.default.trigger($selectButton, _click2.default.name);\n      };\n\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\n        space: click,\n        enter: click\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\n\n      (0, _extend.extend)(this._optionsByReference, {\n        value: true\n      });\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function value() {\n      return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\n        chunkSize: 0,\n        value: [],\n        selectButtonText: _message2.default.format(\"dxFileUploader-selectFile\"),\n        uploadButtonText: _message2.default.format(\"dxFileUploader-upload\"),\n        labelText: _message2.default.format(\"dxFileUploader-dropFile\"),\n        name: \"files[]\",\n        multiple: false,\n        accept: \"\",\n        uploadUrl: \"/\",\n        allowCanceling: true,\n        showFileList: true,\n        progress: 0,\n        readyToUploadMessage: _message2.default.format(\"dxFileUploader-readyToUpload\"),\n        uploadedMessage: _message2.default.format(\"dxFileUploader-uploaded\"),\n        uploadFailedMessage: _message2.default.format(\"dxFileUploader-uploadFailedMessage\"),\n        uploadMode: \"instantly\",\n        uploadMethod: \"POST\",\n        uploadHeaders: {},\n        onUploadStarted: null,\n        onUploaded: null,\n        onProgress: null,\n        onUploadError: null,\n        onUploadAborted: null,\n        allowedFileExtensions: [],\n        maxFileSize: 0,\n        minFileSize: 0,\n        invalidFileExtensionMessage: _message2.default.format(\"dxFileUploader-invalidFileExtension\"),\n        invalidMaxFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMaxFileSize\"),\n        invalidMinFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMinFileSize\"),\n        extendSelection: true,\n        validationMessageMode: \"always\",\n        uploadFile: null,\n        uploadChunk: null,\n        abortUpload: null,\n        validationMessageOffset: {\n          h: 0,\n          v: 0\n        },\n        useNativeInputClick: false,\n        useDragOver: true,\n        nativeDropSupported: true,\n        _uploadButtonType: \"normal\"\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function value() {\n      return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function device() {\n          return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n        },\n        options: {\n          focusStateEnabled: true\n        }\n      }, {\n        device: [{\n          platform: \"android\"\n        }],\n        options: {\n          validationMessageOffset: {\n            v: 0\n          }\n        }\n      }, {\n        device: function device() {\n          return \"desktop\" !== _devices2.default.real().deviceType;\n        },\n        options: {\n          useDragOver: false\n        }\n      }, {\n        device: function device() {\n          return !isFormDataSupported();\n        },\n        options: {\n          uploadMode: \"useForm\"\n        }\n      }, {\n        device: function device() {\n          return _browser2.default.msie || \"desktop\" !== _devices2.default.real().deviceType;\n        },\n        options: {\n          nativeDropSupported: false\n        }\n      }, {\n        device: function device() {\n          return _themes2.default.isMaterial();\n        },\n        options: {\n          _uploadButtonType: \"default\"\n        }\n      }]);\n    }\n  }, {\n    key: \"_init\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\n\n      this._initFileInput();\n\n      this._initLabel();\n\n      this._setUploadStrategy();\n\n      this._createFiles();\n\n      this._createUploadStartedAction();\n\n      this._createUploadedAction();\n\n      this._createProgressAction();\n\n      this._createUploadErrorAction();\n\n      this._createUploadAbortedAction();\n    }\n  }, {\n    key: \"_setUploadStrategy\",\n    value: function value() {\n      var strategy = null;\n\n      if (this.option(\"chunkSize\") > 0) {\n        var uploadChunk = this.option(\"uploadChunk\");\n        strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this);\n      } else {\n        var uploadFile = this.option(\"uploadFile\");\n        strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this);\n      }\n\n      this._uploadStrategy = strategy;\n    }\n  }, {\n    key: \"_initFileInput\",\n    value: function value() {\n      var _this2 = this;\n\n      this._isCustomClickEvent = false;\n\n      if (!this._$fileInput) {\n        this._$fileInput = renderFileUploaderInput();\n\n        _events_engine2.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\n\n        _events_engine2.default.on(this._$fileInput, \"click\", function (e) {\n          e.stopPropagation();\n          return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent;\n        });\n      }\n\n      this._$fileInput.prop({\n        multiple: this.option(\"multiple\"),\n        accept: this.option(\"accept\"),\n        tabIndex: -1\n      });\n    }\n  }, {\n    key: \"_inputChangeHandler\",\n    value: function value() {\n      if (this._doPreventInputChange) {\n        return;\n      }\n\n      var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\n\n      var files = this._$fileInput.prop(\"files\");\n\n      if (files && !files.length) {\n        return;\n      }\n\n      var value = files ? this._getFiles(files) : [{\n        name: fileName\n      }];\n\n      this._changeValue(value);\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_shouldFileListBeExtended\",\n    value: function value() {\n      return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\");\n    }\n  }, {\n    key: \"_removeDuplicates\",\n    value: function value(files, _value) {\n      var result = [];\n\n      for (var i = 0; i < _value.length; i++) {\n        if (!this._isFileInArray(files, _value[i])) {\n          result.push(_value[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_isFileInArray\",\n    value: function value(files, file) {\n      for (var i = 0; i < files.length; i++) {\n        var item = files[i];\n\n        if (item.size === file.size && item.name === file.name) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_changeValue\",\n    value: function value(_value2) {\n      var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\n\n      if (\"instantly\" !== this.option(\"uploadMode\")) {\n        _value2 = this._removeDuplicates(files, _value2);\n      }\n\n      this.option(\"value\", files.concat(_value2));\n    }\n  }, {\n    key: \"_getFiles\",\n    value: function value(fileList) {\n      var values = [];\n      (0, _iterator.each)(fileList, function (_, value) {\n        return values.push(value);\n      });\n      return values;\n    }\n  }, {\n    key: \"_initLabel\",\n    value: function value() {\n      if (!this._$inputLabel) {\n        this._$inputLabel = (0, _renderer2.default)(\"<div>\");\n      }\n\n      this._$inputLabel.text(this.option(\"labelText\"));\n    }\n  }, {\n    key: \"_focusTarget\",\n    value: function value() {\n      return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS);\n    }\n  }, {\n    key: \"_getSubmitElement\",\n    value: function value() {\n      return this._$fileInput;\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function value() {\n      _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\n\n      this.$element().addClass(FILEUPLOADER_CLASS);\n\n      this._renderWrapper();\n\n      this._renderInputWrapper();\n\n      this._renderSelectButton();\n\n      this._renderInputContainer();\n\n      this._renderUploadButton();\n\n      this._preventRecreatingFiles = true;\n    }\n  }, {\n    key: \"_render\",\n    value: function value() {\n      this._preventRecreatingFiles = false;\n\n      this._renderDragEvents();\n\n      this._renderFiles();\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this);\n    }\n  }, {\n    key: \"_createFileProgressBar\",\n    value: function value(file) {\n      file.progressBar = this._createProgressBar(file.value.size);\n      file.progressBar.$element().appendTo(file.$file);\n\n      this._initStatusMessage(file);\n\n      this._initCancelButton(file);\n    }\n  }, {\n    key: \"_setStatusMessage\",\n    value: function value(file, key) {\n      var _this3 = this;\n\n      setTimeout(function () {\n        if (_this3.option(\"showFileList\")) {\n          if (file.$statusMessage) {\n            file.$statusMessage.text(_this3.option(key));\n            file.$statusMessage.css(\"display\", \"\");\n            file.progressBar.$element().remove();\n          }\n        }\n      }, FILEUPLOADER_AFTER_LOAD_DELAY);\n    }\n  }, {\n    key: \"_createFiles\",\n    value: function value() {\n      var _this4 = this;\n\n      var value = this.option(\"value\");\n\n      if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\n        this._preventFilesUploading(this._files);\n\n        this._files = null;\n      }\n\n      if (!this._files) {\n        this._files = [];\n      }\n\n      (0, _iterator.each)(value.slice(this._files.length), function (_, value) {\n        var file = _this4._createFile(value);\n\n        _this4._validateFile(file);\n\n        _this4._files.push(file);\n      });\n    }\n  }, {\n    key: \"_preventFilesUploading\",\n    value: function value(files) {\n      var _this5 = this;\n\n      files.forEach(function (file) {\n        return _this5._uploadStrategy.abortUpload(file);\n      });\n    }\n  }, {\n    key: \"_validateFile\",\n    value: function value(file) {\n      file.isValidFileExtension = this._validateFileExtension(file);\n      file.isValidMinSize = this._validateMinFileSize(file);\n      file.isValidMaxSize = this._validateMaxFileSize(file);\n    }\n  }, {\n    key: \"_validateFileExtension\",\n    value: function value(file) {\n      var allowedExtensions = this.option(\"allowedFileExtensions\");\n      var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\n\n      if (0 === allowedExtensions.length) {\n        return true;\n      }\n\n      for (var i = 0; i < allowedExtensions.length; i++) {\n        if (fileExtension === allowedExtensions[i].toLowerCase()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_validateMaxFileSize\",\n    value: function value(file) {\n      var fileSize = file.value.size;\n      var maxFileSize = this.option(\"maxFileSize\");\n      return maxFileSize > 0 ? fileSize <= maxFileSize : true;\n    }\n  }, {\n    key: \"_validateMinFileSize\",\n    value: function value(file) {\n      var fileSize = file.value.size;\n      var minFileSize = this.option(\"minFileSize\");\n      return minFileSize > 0 ? fileSize >= minFileSize : true;\n    }\n  }, {\n    key: \"_createUploadStartedAction\",\n    value: function value() {\n      this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\");\n    }\n  }, {\n    key: \"_createUploadedAction\",\n    value: function value() {\n      this._uploadedAction = this._createActionByOption(\"onUploaded\");\n    }\n  }, {\n    key: \"_createProgressAction\",\n    value: function value() {\n      this._progressAction = this._createActionByOption(\"onProgress\");\n    }\n  }, {\n    key: \"_createUploadAbortedAction\",\n    value: function value() {\n      this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\");\n    }\n  }, {\n    key: \"_createUploadErrorAction\",\n    value: function value() {\n      this._uploadErrorAction = this._createActionByOption(\"onUploadError\");\n    }\n  }, {\n    key: \"_createFile\",\n    value: function value(_value3) {\n      return {\n        value: _value3,\n        loadedSize: 0,\n        onProgress: (0, _callbacks2.default)(),\n        onAbort: (0, _callbacks2.default)(),\n        onLoad: (0, _callbacks2.default)(),\n        onError: (0, _callbacks2.default)(),\n        onLoadStart: (0, _callbacks2.default)(),\n        isValidFileExtension: true,\n        isValidMaxSize: true,\n        isValidMinSize: true,\n        isValid: function isValid() {\n          return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize;\n        }\n      };\n    }\n  }, {\n    key: \"_renderFiles\",\n    value: function value() {\n      var _this6 = this;\n\n      var value = this.option(\"value\");\n\n      if (!this._$filesContainer) {\n        this._$filesContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content);\n      } else {\n        if (!this._shouldFileListBeExtended() || 0 === value.length) {\n          this._$filesContainer.empty();\n        }\n      }\n\n      var showFileList = this.option(\"showFileList\");\n\n      if (showFileList) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          if (!file.$file) {\n            _this6._renderFile(file);\n          }\n        });\n      }\n\n      this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._updateFileNameMaxWidth();\n\n      this._$validationMessage && this._$validationMessage.dxOverlay(\"instance\").repaint();\n    }\n  }, {\n    key: \"_renderFile\",\n    value: function value(file) {\n      var value = file.value;\n      var $fileContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\n\n      this._renderFileButtons(file, $fileContainer);\n\n      file.$file = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\n      var $fileInfo = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\n      file.$statusMessage = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\n      (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\n\n      if ((0, _type.isDefined)(value.size)) {\n        (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo);\n      }\n\n      if (file.isValid()) {\n        file.$statusMessage.text(this.option(\"readyToUploadMessage\"));\n      } else {\n        if (!file.isValidFileExtension) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"));\n        }\n\n        if (!file.isValidMaxSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"));\n        }\n\n        if (!file.isValidMinSize) {\n          file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"));\n        }\n\n        $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS);\n      }\n    }\n  }, {\n    key: \"_createValidationElement\",\n    value: function value(key) {\n      return (0, _renderer2.default)(\"<span>\").text(this.option(key));\n    }\n  }, {\n    key: \"_updateFileNameMaxWidth\",\n    value: function value() {\n      var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\n      var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\n\n      var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\n\n      var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\n\n      var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\n\n      var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\n\n      var prevFileSize = $fileSize.text();\n      $fileSize.text(\"1000 Mb\");\n      var fileSizeWidth = $fileSize.width();\n      $fileSize.text(prevFileSize);\n\n      this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth);\n    }\n  }, {\n    key: \"_renderFileButtons\",\n    value: function value(file, $container) {\n      var $cancelButton = this._getCancelButton(file);\n\n      $cancelButton && $container.append($cancelButton);\n\n      var $uploadButton = this._getUploadButton(file);\n\n      $uploadButton && $container.append($uploadButton);\n    }\n  }, {\n    key: \"_getCancelButton\",\n    value: function value(file) {\n      var _this7 = this;\n\n      if (\"useForm\" === this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.cancelButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button2.default, {\n        onClick: function onClick() {\n          return _this7._removeFile(file);\n        },\n        icon: \"close\",\n        visible: this.option(\"allowCanceling\"),\n        integrationOptions: {}\n      });\n      return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element());\n    }\n  }, {\n    key: \"_getUploadButton\",\n    value: function value(file) {\n      var _this8 = this;\n\n      if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\n        return null;\n      }\n\n      file.uploadButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button2.default, {\n        onClick: function onClick() {\n          return _this8._uploadFile(file);\n        },\n        icon: \"upload\"\n      });\n      file.onLoadStart.add(function () {\n        return file.uploadButton.$element().remove();\n      });\n      return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element());\n    }\n  }, {\n    key: \"_removeFile\",\n    value: function value(file) {\n      file.$file.parent().remove();\n\n      this._files.splice((0, _array.inArray)(file, this._files), 1);\n\n      var value = this.option(\"value\").slice();\n      value.splice((0, _array.inArray)(file.value, value), 1);\n      this._preventRecreatingFiles = true;\n      this.option(\"value\", value);\n      this._preventRecreatingFiles = false;\n\n      this._toggleFileUploaderEmptyClassName();\n\n      this._doPreventInputChange = true;\n\n      this._$fileInput.val(\"\");\n\n      this._doPreventInputChange = false;\n    }\n  }, {\n    key: \"_toggleFileUploaderEmptyClassName\",\n    value: function value() {\n      this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files));\n    }\n  }, {\n    key: \"_hasInvalidFile\",\n    value: function value(files) {\n      for (var i = 0; i < files.length; i++) {\n        if (!files[i].isValid()) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getFileSize\",\n    value: function value(size) {\n      var i = 0;\n      var labels = [_message2.default.format(\"dxFileUploader-bytes\"), _message2.default.format(\"dxFileUploader-kb\"), _message2.default.format(\"dxFileUploader-Mb\"), _message2.default.format(\"dxFileUploader-Gb\")];\n      var count = labels.length - 1;\n\n      while (i < count && size >= 1024) {\n        size /= 1024;\n        i++;\n      }\n\n      return Math.round(size) + \" \" + labels[i];\n    }\n  }, {\n    key: \"_renderSelectButton\",\n    value: function value() {\n      var $button = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\n      this._selectButton = this._createComponent($button, _button2.default, {\n        text: this.option(\"selectButtonText\"),\n        focusStateEnabled: false,\n        integrationOptions: {}\n      });\n\n      if (\"desktop\" === _devices2.default.real().deviceType) {\n        this._selectButton.option(\"onClick\", this._selectButtonClickHandler.bind(this));\n      } else {\n        _events_engine2.default.off($button, \"click\");\n\n        _events_engine2.default.on($button, \"click\", this._selectButtonClickHandler.bind(this));\n      }\n    }\n  }, {\n    key: \"_selectButtonClickHandler\",\n    value: function value() {\n      if (this.option(\"useNativeInputClick\")) {\n        return;\n      }\n\n      if (this.option(\"disabled\")) {\n        return false;\n      }\n\n      this._isCustomClickEvent = true;\n\n      _events_engine2.default.trigger(this._$fileInput, \"click\");\n\n      this._isCustomClickEvent = false;\n    }\n  }, {\n    key: \"_renderUploadButton\",\n    value: function value() {\n      if (\"useButtons\" !== this.option(\"uploadMode\")) {\n        return;\n      }\n\n      var $uploadButton = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\n      this._uploadButton = this._createComponent($uploadButton, _button2.default, {\n        text: this.option(\"uploadButtonText\"),\n        onClick: this._uploadButtonClickHandler.bind(this),\n        type: this.option(\"_uploadButtonType\"),\n        integrationOptions: {}\n      });\n    }\n  }, {\n    key: \"_uploadButtonClickHandler\",\n    value: function value() {\n      this._uploadFiles();\n    }\n  }, {\n    key: \"_shouldDragOverBeRendered\",\n    value: function value() {\n      return \"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\");\n    }\n  }, {\n    key: \"_renderInputContainer\",\n    value: function value() {\n      this._$inputContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\n\n      if (!this._shouldDragOverBeRendered()) {\n        this._$inputContainer.css(\"display\", \"none\");\n      }\n\n      this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\n\n      this._renderInput();\n\n      this._$inputLabel.addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer);\n    }\n  }, {\n    key: \"_renderInput\",\n    value: function value() {\n      if (this.option(\"useNativeInputClick\")) {\n        this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this));\n      } else {\n        this._$fileInput.appendTo(this._$inputContainer);\n\n        this._selectButton.option(\"template\", \"content\");\n      }\n    }\n  }, {\n    key: \"_selectButtonInputTemplate\",\n    value: function value(data, content) {\n      var $content = (0, _renderer2.default)(content);\n      var $text = (0, _renderer2.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\n      $content.append($text).append(this._$fileInput);\n      return $content;\n    }\n  }, {\n    key: \"_renderInputWrapper\",\n    value: function value() {\n      this._$inputWrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content);\n    }\n  }, {\n    key: \"_renderDragEvents\",\n    value: function value() {\n      _events_engine2.default.off(this._$inputWrapper, \".\" + this.NAME);\n\n      if (!this._shouldDragOverBeRendered()) {\n        return;\n      }\n\n      this._dragEventsTargets = [];\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this));\n\n      _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"drop\", this.NAME), this._dropHandler.bind(this));\n    }\n  }, {\n    key: \"_useInputForDrop\",\n    value: function value() {\n      return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\");\n    }\n  }, {\n    key: \"_dragEnterHandler\",\n    value: function value(e) {\n      if (this.option(\"disabled\")) {\n        return false;\n      }\n\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._updateEventTargets(e);\n\n      this.$element().addClass(FILEUPLOADER_DRAGOVER_CLASS);\n    }\n  }, {\n    key: \"_dragOverHandler\",\n    value: function value(e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      e.originalEvent.dataTransfer.dropEffect = \"copy\";\n    }\n  }, {\n    key: \"_dragLeaveHandler\",\n    value: function value(e) {\n      if (!this._useInputForDrop()) {\n        e.preventDefault();\n      }\n\n      this._updateEventTargets(e);\n\n      if (!this._dragEventsTargets.length) {\n        this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\n      }\n    }\n  }, {\n    key: \"_updateEventTargets\",\n    value: function value(e) {\n      var targetIndex = this._dragEventsTargets.indexOf(e.target);\n\n      var isTargetExists = targetIndex !== -1;\n\n      if (\"dragenter\" === e.type) {\n        !isTargetExists && this._dragEventsTargets.push(e.target);\n      } else {\n        isTargetExists && this._dragEventsTargets.splice(targetIndex, 1);\n      }\n    }\n  }, {\n    key: \"_dropHandler\",\n    value: function value(e) {\n      this._dragEventsTargets = [];\n      this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\n\n      if (this._useInputForDrop()) {\n        return;\n      }\n\n      e.preventDefault();\n      var fileList = e.originalEvent.dataTransfer.files;\n\n      var files = this._getFiles(fileList);\n\n      if (!this.option(\"multiple\") && files.length > 1) {\n        return;\n      }\n\n      this._changeValue(this._filterFiles(files));\n\n      if (\"instantly\" === this.option(\"uploadMode\")) {\n        this._uploadFiles();\n      }\n    }\n  }, {\n    key: \"_filterFiles\",\n    value: function value(files) {\n      if (!files.length) {\n        return files;\n      }\n\n      var accept = this.option(\"accept\");\n\n      if (!accept.length) {\n        return files;\n      }\n\n      var result = [];\n\n      var allowedTypes = this._getAllowedFileTypes(accept);\n\n      for (var i = 0, n = files.length; i < n; i++) {\n        if (this._isFileTypeAllowed(files[i], allowedTypes)) {\n          result.push(files[i]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_getAllowedFileTypes\",\n    value: function value(acceptSting) {\n      if (!acceptSting.length) {\n        return [];\n      }\n\n      return acceptSting.split(\",\").map(function (item) {\n        return item.trim();\n      });\n    }\n  }, {\n    key: \"_isFileTypeAllowed\",\n    value: function value(file, allowedTypes) {\n      for (var i = 0, n = allowedTypes.length; i < n; i++) {\n        var allowedType = allowedTypes[i];\n\n        if (\".\" === allowedType[0]) {\n          allowedType = allowedType.replace(\".\", \"\\\\.\");\n\n          if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\n            return true;\n          }\n        } else {\n          allowedType = allowedType.replace(\"*\", \"\");\n\n          if (file.type.match(new RegExp(allowedType, \"i\"))) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_renderWrapper\",\n    value: function value() {\n      var $wrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\n      var $container = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\n      this._$content = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container);\n    }\n  }, {\n    key: \"_clean\",\n    value: function value() {\n      this._$fileInput.detach();\n\n      delete this._$filesContainer;\n\n      if (this._files) {\n        this._files.forEach(function (file) {\n          file.$file = null;\n          file.$statusMessage = null;\n        });\n      }\n\n      _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_uploadFiles\",\n    value: function value() {\n      var _this9 = this;\n\n      if (isFormDataSupported()) {\n        (0, _iterator.each)(this._files, function (_, file) {\n          return _this9._uploadFile(file);\n        });\n      }\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function value(file) {\n      this._uploadStrategy.upload(file);\n    }\n  }, {\n    key: \"_updateProgressBar\",\n    value: function value(file, loadedFileData) {\n      file.progressBar && file.progressBar.option({\n        value: loadedFileData.loaded,\n        showStatus: true\n      });\n\n      this._progressAction({\n        file: file.value,\n        segmentSize: loadedFileData.currentSegmentSize,\n        bytesLoaded: loadedFileData.loaded,\n        bytesTotal: loadedFileData.total,\n        event: loadedFileData.event,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_updateTotalProgress\",\n    value: function value(totalFilesSize, totalLoadedFilesSize) {\n      var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\n      this.option(\"progress\", progress);\n\n      this._setLoadedSize(totalLoadedFilesSize);\n    }\n  }, {\n    key: \"_getProgressValue\",\n    value: function value(ratio) {\n      return Math.floor(100 * ratio);\n    }\n  }, {\n    key: \"_initStatusMessage\",\n    value: function value(file) {\n      file.$statusMessage.css(\"display\", \"none\");\n    }\n  }, {\n    key: \"_initCancelButton\",\n    value: function value(file) {\n      var _this10 = this;\n\n      file.cancelButton.option(\"onClick\", function () {\n        _this10._preventFilesUploading([file]);\n\n        _this10._removeFile(file);\n      });\n\n      var hideCancelButton = function hideCancelButton() {\n        setTimeout(function () {\n          file.cancelButton.option({\n            visible: false\n          });\n        }, FILEUPLOADER_AFTER_LOAD_DELAY);\n      };\n\n      file.onLoad.add(hideCancelButton);\n      file.onError.add(hideCancelButton);\n    }\n  }, {\n    key: \"_createProgressBar\",\n    value: function value(fileSize) {\n      var _this11 = this;\n\n      return this._createComponent((0, _renderer2.default)(\"<div>\"), _progress_bar2.default, {\n        value: void 0,\n        min: 0,\n        max: fileSize,\n        statusFormat: function statusFormat(ratio) {\n          return _this11._getProgressValue(ratio) + \"%\";\n        },\n        showStatus: false,\n        statusPosition: \"right\"\n      });\n    }\n  }, {\n    key: \"_getTotalFilesSize\",\n    value: function value() {\n      var _this12 = this;\n\n      if (!this._totalFilesSize) {\n        this._totalFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this12._totalFilesSize += file.value.size;\n        });\n      }\n\n      return this._totalFilesSize;\n    }\n  }, {\n    key: \"_getTotalLoadedFilesSize\",\n    value: function value() {\n      var _this13 = this;\n\n      if (!this._totalLoadedFilesSize) {\n        this._totalLoadedFilesSize = 0;\n        (0, _iterator.each)(this._files, function (_, file) {\n          _this13._totalLoadedFilesSize += file.loadedSize;\n        });\n      }\n\n      return this._totalLoadedFilesSize;\n    }\n  }, {\n    key: \"_setLoadedSize\",\n    value: function value(_value4) {\n      this._totalLoadedFilesSize = _value4;\n    }\n  }, {\n    key: \"_recalculateProgress\",\n    value: function value() {\n      this._totalFilesSize = 0;\n      this._totalLoadedFilesSize = 0;\n\n      this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize());\n    }\n  }, {\n    key: \"_getValidationMessageTarget\",\n    value: function value() {\n      return this._$inputWrapper;\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function value(args) {\n      var value = args.value;\n\n      switch (args.name) {\n        case \"height\":\n        case \"width\":\n          this._updateFileNameMaxWidth();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"value\":\n          !value.length && this._$fileInput.val(\"\");\n\n          if (!this._preventRecreatingFiles) {\n            this._createFiles();\n\n            this._renderFiles();\n          }\n\n          this._recalculateProgress();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"name\":\n          this._initFileInput();\n\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n          break;\n\n        case \"accept\":\n          this._initFileInput();\n\n          break;\n\n        case \"multiple\":\n          this._initFileInput();\n\n          if (!args.value) {\n            this.reset();\n          }\n\n          break;\n\n        case \"selectButtonText\":\n          this._selectButton.option(\"text\", value);\n\n          break;\n\n        case \"uploadButtonText\":\n          this._uploadButton && this._uploadButton.option(\"text\", value);\n          break;\n\n        case \"_uploadButtonType\":\n          this._uploadButton && this._uploadButton.option(\"type\", value);\n          break;\n\n        case \"maxFileSize\":\n        case \"minFileSize\":\n        case \"allowedFileExtensions\":\n        case \"invalidFileExtensionMessage\":\n        case \"invalidMaxFileSizeMessage\":\n        case \"invalidMinFileSizeMessage\":\n        case \"readyToUploadMessage\":\n        case \"uploadedMessage\":\n        case \"uploadFailedMessage\":\n          this._invalidate();\n\n          break;\n\n        case \"labelText\":\n          this._$inputLabel.text(value);\n\n          break;\n\n        case \"showFileList\":\n          if (!this._preventRecreatingFiles) {\n            this._renderFiles();\n          }\n\n          break;\n\n        case \"uploadFile\":\n        case \"uploadChunk\":\n        case \"chunkSize\":\n          this._setUploadStrategy();\n\n          break;\n\n        case \"abortUpload\":\n        case \"uploadUrl\":\n        case \"progress\":\n        case \"uploadMethod\":\n        case \"uploadHeaders\":\n        case \"extendSelection\":\n          break;\n\n        case \"allowCanceling\":\n        case \"uploadMode\":\n          this.reset();\n\n          this._invalidate();\n\n          break;\n\n        case \"onUploadStarted\":\n          this._createUploadStartedAction();\n\n          break;\n\n        case \"onUploaded\":\n          this._createUploadedAction();\n\n          break;\n\n        case \"onProgress\":\n          this._createProgressAction();\n\n          break;\n\n        case \"onUploadError\":\n          this._createUploadErrorAction();\n\n          break;\n\n        case \"onUploadAborted\":\n          this._createUploadAbortedAction();\n\n          break;\n\n        case \"useNativeInputClick\":\n          this._renderInput();\n\n          break;\n\n        case \"useDragOver\":\n          this._renderDragEvents();\n\n          break;\n\n        case \"nativeDropSupported\":\n          this._invalidate();\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function value() {\n      this.option(\"value\", []);\n    }\n  }]);\n\n  return FileUploader;\n}(_editor2.default);\n\nvar FileBlobReader = function () {\n  function FileBlobReader(file, chunkSize) {\n    _classCallCheck(this, FileBlobReader);\n\n    this.file = file;\n    this.chunkSize = chunkSize;\n    this.index = 0;\n  }\n\n  _createClass(FileBlobReader, [{\n    key: \"read\",\n    value: function value() {\n      if (!this.file) {\n        return null;\n      }\n\n      var result = this.createBlobResult(this.file, this.index, this.chunkSize);\n\n      if (result.isCompleted) {\n        this.file = null;\n      }\n\n      this.index++;\n      return result;\n    }\n  }, {\n    key: \"createBlobResult\",\n    value: function value(file, index, chunkSize) {\n      var currentPosition = index * chunkSize;\n      return {\n        blob: this.sliceFile(file, currentPosition, chunkSize),\n        index: index,\n        isCompleted: currentPosition + chunkSize >= file.size\n      };\n    }\n  }, {\n    key: \"sliceFile\",\n    value: function value(file, startPos, length) {\n      if (file.slice) {\n        return file.slice(startPos, startPos + length);\n      }\n\n      if (file.webkitSlice) {\n        return file.webkitSlice(startPos, startPos + length);\n      }\n\n      return null;\n    }\n  }]);\n\n  return FileBlobReader;\n}();\n\nvar FileUploadStrategyBase = function () {\n  function FileUploadStrategyBase(fileUploader) {\n    _classCallCheck(this, FileUploadStrategyBase);\n\n    this.fileUploader = fileUploader;\n  }\n\n  _createClass(FileUploadStrategyBase, [{\n    key: \"upload\",\n    value: function value(file) {\n      if (file.isValid() && !file.uploadStarted) {\n        this._prepareFileBeforeUpload(file);\n\n        this._uploadCore(file);\n      }\n    }\n  }, {\n    key: \"abortUpload\",\n    value: function abortUpload(file) {\n      var _this14 = this;\n\n      if (file._isError || file._isLoaded || file.isAborted) {\n        return;\n      }\n\n      file.request && file.request.abort();\n      file.isAborted = true;\n\n      if (this._isCustomAbortUpload()) {\n        var abortUpload = this.fileUploader.option(\"abortUpload\");\n\n        var arg = this._createAbortUploadArgument(file);\n\n        var deferred = null;\n\n        try {\n          var result = abortUpload(file.value, arg);\n          deferred = (0, _deferred.when)(result);\n        } catch (error) {\n          deferred = new _deferred.Deferred().reject(error).promise();\n        }\n\n        deferred.done(function () {\n          return file.onAbort.fire();\n        }).fail(function (error) {\n          return _this14._handleFileError(file, error);\n        });\n      }\n    }\n  }, {\n    key: \"_createAbortUploadArgument\",\n    value: function value(file) {}\n  }, {\n    key: \"_uploadCore\",\n    value: function value(file) {}\n  }, {\n    key: \"_isCustomAbortUpload\",\n    value: function value() {\n      var callback = this.fileUploader.option(\"abortUpload\");\n      return callback && (0, _type.isFunction)(callback);\n    }\n  }, {\n    key: \"_handleFileError\",\n    value: function value(file, error) {\n      file._isError = true;\n      file.onError.fire(error);\n    }\n  }, {\n    key: \"_prepareFileBeforeUpload\",\n    value: function value(file) {\n      if (file.$file) {\n        this.fileUploader._createFileProgressBar(file);\n      }\n\n      file.onLoadStart.add(this._onUploadStarted.bind(this, file));\n      file.onLoad.add(this._onLoadedHandler.bind(this, file));\n      file.onError.add(this._onErrorHandler.bind(this, file));\n      file.onAbort.add(this._onAbortHandler.bind(this, file));\n      file.onProgress.add(this._onProgressHandler.bind(this, file));\n    }\n  }, {\n    key: \"_isStatusError\",\n    value: function value(status) {\n      return 400 <= status && status < 500 || 500 <= status && status < 600;\n    }\n  }, {\n    key: \"_onUploadStarted\",\n    value: function value(file, e) {\n      file.uploadStarted = true;\n\n      this.fileUploader._uploadStartedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onAbortHandler\",\n    value: function value(file, e) {\n      this.fileUploader._uploadAbortedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onErrorHandler\",\n    value: function value(file, error) {\n      this.fileUploader._setStatusMessage(file, \"uploadFailedMessage\");\n\n      this.fileUploader._uploadErrorAction({\n        file: file.value,\n        event: void 0,\n        request: file.request,\n        error: error\n      });\n    }\n  }, {\n    key: \"_onLoadedHandler\",\n    value: function value(file, e) {\n      file._isLoaded = true;\n\n      this.fileUploader._setStatusMessage(file, \"uploadedMessage\");\n\n      this.fileUploader._uploadedAction({\n        file: file.value,\n        event: e,\n        request: file.request\n      });\n    }\n  }, {\n    key: \"_onProgressHandler\",\n    value: function value(file, e) {\n      if (file) {\n        var totalFilesSize = this.fileUploader._getTotalFilesSize();\n\n        var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\n\n        var loadedSize = Math.min(e.loaded, file.value.size);\n        var segmentSize = loadedSize - file.loadedSize;\n        file.loadedSize = loadedSize;\n\n        this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\n\n        this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e));\n      }\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function value(loaded, total, currentSegmentSize, event) {\n      return {\n        loaded: loaded,\n        total: total,\n        currentSegmentSize: currentSegmentSize\n      };\n    }\n  }]);\n\n  return FileUploadStrategyBase;\n}();\n\nvar ChunksFileUploadStrategyBase = function (_FileUploadStrategyBa) {\n  _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\n\n  var _super2 = _createSuper(ChunksFileUploadStrategyBase);\n\n  function ChunksFileUploadStrategyBase(fileUploader) {\n    var _this15;\n\n    _classCallCheck(this, ChunksFileUploadStrategyBase);\n\n    _this15 = _super2.call(this, fileUploader);\n    _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\n    return _this15;\n  }\n\n  _createClass(ChunksFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function value(file) {\n      var realFile = file.value;\n      var chunksData = {\n        name: realFile.name,\n        loadedBytes: 0,\n        type: realFile.type,\n        blobReader: new FileBlobReader(realFile, this.chunkSize),\n        guid: new _guid2.default(),\n        fileSize: realFile.size,\n        count: Math.ceil(realFile.size / this.chunkSize),\n        customData: {}\n      };\n      file.chunksData = chunksData;\n\n      this._sendChunk(file, chunksData);\n    }\n  }, {\n    key: \"_sendChunk\",\n    value: function value(file, chunksData) {\n      var _this16 = this;\n\n      var chunk = chunksData.blobReader.read();\n      chunksData.currentChunk = chunk;\n\n      if (chunk) {\n        this._sendChunkCore(file, chunksData, chunk).done(function () {\n          if (file.isAborted) {\n            return;\n          }\n\n          chunksData.loadedBytes += chunk.blob.size;\n          file.onProgress.fire({\n            loaded: chunksData.loadedBytes,\n            total: file.value.size\n          });\n\n          if (chunk.isCompleted) {\n            file.onLoad.fire();\n          }\n\n          _this16._sendChunk(file, chunksData);\n        }).fail(function (error) {\n          if (_this16._shouldHandleError(error)) {\n            _this16._handleFileError(file, error);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData, chunk) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(error) {}\n  }, {\n    key: \"_tryRaiseStartLoad\",\n    value: function value(file) {\n      if (!file.isStartLoad) {\n        file.isStartLoad = true;\n        file.onLoadStart.fire();\n      }\n    }\n  }, {\n    key: \"_getEvent\",\n    value: function value(e) {\n      return null;\n    }\n  }]);\n\n  return ChunksFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultChunksFileUploadStrategy = function (_ChunksFileUploadStra) {\n  _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\n\n  var _super3 = _createSuper(DefaultChunksFileUploadStrategy);\n\n  function DefaultChunksFileUploadStrategy() {\n    _classCallCheck(this, DefaultChunksFileUploadStrategy);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(DefaultChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData, chunk) {\n      var _this17 = this;\n\n      return _ajax2.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function beforeSend(xhr) {\n          file.request = xhr;\n        },\n        upload: {\n          onloadstart: function onloadstart() {\n            return _this17._tryRaiseStartLoad(file);\n          },\n          onabort: function onabort() {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData({\n          fileName: chunksData.name,\n          blobName: this.fileUploader.option(\"name\"),\n          blob: chunk.blob,\n          index: chunk.index,\n          count: chunksData.count,\n          type: chunksData.type,\n          guid: chunksData.guid,\n          size: chunksData.fileSize\n        })\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(e) {\n      return this._isStatusError(e.status);\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function value(options) {\n      var formData = new window.FormData();\n      formData.append(options.blobName, options.blob);\n      formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\n        FileName: options.fileName,\n        Index: options.index,\n        TotalCount: options.count,\n        FileSize: options.size,\n        FileType: options.type,\n        FileGuid: options.guid\n      }));\n      return formData;\n    }\n  }]);\n\n  return DefaultChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar CustomChunksFileUploadStrategy = function (_ChunksFileUploadStra2) {\n  _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\n\n  var _super4 = _createSuper(CustomChunksFileUploadStrategy);\n\n  function CustomChunksFileUploadStrategy() {\n    _classCallCheck(this, CustomChunksFileUploadStrategy);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(CustomChunksFileUploadStrategy, [{\n    key: \"_sendChunkCore\",\n    value: function value(file, chunksData) {\n      this._tryRaiseStartLoad(file);\n\n      var chunksInfo = this._createChunksInfo(chunksData);\n\n      var uploadChunk = this.fileUploader.option(\"uploadChunk\");\n\n      try {\n        var result = uploadChunk(file.value, chunksInfo);\n        return (0, _deferred.when)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_createAbortUploadArgument\",\n    value: function value(file) {\n      return this._createChunksInfo(file.chunksData);\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(e) {\n      return true;\n    }\n  }, {\n    key: \"_createChunksInfo\",\n    value: function value(chunksData) {\n      return {\n        bytesUploaded: chunksData.loadedBytes,\n        chunkCount: chunksData.count,\n        customData: chunksData.customData,\n        chunkBlob: chunksData.currentChunk.blob,\n        chunkIndex: chunksData.currentChunk.index\n      };\n    }\n  }]);\n\n  return CustomChunksFileUploadStrategy;\n}(ChunksFileUploadStrategyBase);\n\nvar WholeFileUploadStrategyBase = function (_FileUploadStrategyBa2) {\n  _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\n\n  var _super5 = _createSuper(WholeFileUploadStrategyBase);\n\n  function WholeFileUploadStrategyBase() {\n    _classCallCheck(this, WholeFileUploadStrategyBase);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(WholeFileUploadStrategyBase, [{\n    key: \"_uploadCore\",\n    value: function value(file) {\n      var _this18 = this;\n\n      file.loadedSize = 0;\n\n      this._uploadFile(file).done(function () {\n        if (!file.isAborted) {\n          file.onLoad.fire();\n        }\n      }).fail(function (error) {\n        if (_this18._shouldHandleError(file, error)) {\n          _this18._handleFileError(file, error);\n        }\n      });\n    }\n  }, {\n    key: \"_uploadFile\",\n    value: function value(file) {}\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {}\n  }, {\n    key: \"_handleProgress\",\n    value: function value(file, e) {\n      if (file._isError) {\n        return;\n      }\n\n      file._isProgressStarted = true;\n      file.onProgress.fire(e);\n    }\n  }, {\n    key: \"_getLoadedData\",\n    value: function value(loaded, total, segmentSize, event) {\n      var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\n\n      result.event = event;\n      return result;\n    }\n  }]);\n\n  return WholeFileUploadStrategyBase;\n}(FileUploadStrategyBase);\n\nvar DefaultWholeFileUploadStrategy = function (_WholeFileUploadStrat) {\n  _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\n\n  var _super6 = _createSuper(DefaultWholeFileUploadStrategy);\n\n  function DefaultWholeFileUploadStrategy() {\n    _classCallCheck(this, DefaultWholeFileUploadStrategy);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(DefaultWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function value(file) {\n      var _this19 = this;\n\n      return _ajax2.default.sendRequest({\n        url: this.fileUploader.option(\"uploadUrl\"),\n        method: this.fileUploader.option(\"uploadMethod\"),\n        headers: this.fileUploader.option(\"uploadHeaders\"),\n        beforeSend: function beforeSend(xhr) {\n          file.request = xhr;\n        },\n        upload: {\n          onprogress: function onprogress(e) {\n            return _this19._handleProgress(file, e);\n          },\n          onloadstart: function onloadstart() {\n            return file.onLoadStart.fire();\n          },\n          onabort: function onabort() {\n            return file.onAbort.fire();\n          }\n        },\n        data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\n      });\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {\n      return this._isStatusError(e.status) || !file._isProgressStarted;\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function value(fieldName, fieldValue) {\n      var formData = new window.FormData();\n      formData.append(fieldName, fieldValue, fieldValue.name);\n      return formData;\n    }\n  }]);\n\n  return DefaultWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\nvar CustomWholeFileUploadStrategy = function (_WholeFileUploadStrat2) {\n  _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\n\n  var _super7 = _createSuper(CustomWholeFileUploadStrategy);\n\n  function CustomWholeFileUploadStrategy() {\n    _classCallCheck(this, CustomWholeFileUploadStrategy);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(CustomWholeFileUploadStrategy, [{\n    key: \"_uploadFile\",\n    value: function value(file) {\n      var _this20 = this;\n\n      file.onLoadStart.fire();\n\n      var progressCallback = function progressCallback(loadedBytes) {\n        var arg = {\n          loaded: loadedBytes,\n          total: file.size\n        };\n\n        _this20._handleProgress(file, arg);\n      };\n\n      var uploadFile = this.fileUploader.option(\"uploadFile\");\n\n      try {\n        var result = uploadFile(file, progressCallback);\n        return (0, _deferred.when)(result);\n      } catch (error) {\n        return new _deferred.Deferred().reject(error).promise();\n      }\n    }\n  }, {\n    key: \"_shouldHandleError\",\n    value: function value(file, e) {\n      return true;\n    }\n  }]);\n\n  return CustomWholeFileUploadStrategy;\n}(WholeFileUploadStrategyBase);\n\n(0, _component_registrator2.default)(\"dxFileUploader\", FileUploader);\nmodule.exports = FileUploader;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/file_uploader.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_guid","_guid2","_window","_events_engine","_events_engine2","_component_registrator","_component_registrator2","_callbacks","_callbacks2","_type","_iterator","_extend","_array","_deferred","_ajax","_ajax2","_editor","_editor2","_button","_button2","_progress_bar","_progress_bar2","_browser","_browser2","_devices","_devices2","_utils","_utils2","_click","_click2","_message","_message2","_themes","_themes2","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","value","object","hasOwnProperty","_getPrototypeOf","_createSuper","Derived","result","Super","_isNativeReflectConstruct","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","window","getWindow","FILEUPLOADER_CLASS","FILEUPLOADER_EMPTY_CLASS","FILEUPLOADER_SHOW_FILE_LIST_CLASS","FILEUPLOADER_DRAGOVER_CLASS","FILEUPLOADER_WRAPPER_CLASS","FILEUPLOADER_CONTAINER_CLASS","FILEUPLOADER_CONTENT_CLASS","FILEUPLOADER_INPUT_WRAPPER_CLASS","FILEUPLOADER_INPUT_CONTAINER_CLASS","FILEUPLOADER_INPUT_LABEL_CLASS","FILEUPLOADER_INPUT_CLASS","FILEUPLOADER_FILES_CONTAINER_CLASS","FILEUPLOADER_FILE_CONTAINER_CLASS","FILEUPLOADER_FILE_INFO_CLASS","FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS","FILEUPLOADER_FILE_CLASS","FILEUPLOADER_FILE_NAME_CLASS","FILEUPLOADER_FILE_SIZE_CLASS","FILEUPLOADER_BUTTON_CLASS","FILEUPLOADER_BUTTON_CONTAINER_CLASS","FILEUPLOADER_CANCEL_BUTTON_CLASS","FILEUPLOADER_UPLOAD_BUTTON_CLASS","FILEUPLOADER_INVALID_CLASS","FILEUPLOADER_AFTER_LOAD_DELAY","FILEUPLOADER_CHUNK_META_DATA_NAME","renderFileUploaderInput","default","attr","isFormDataSupported","FormData","FileUploader","_Editor","_super","_this","click","preventDefault","$selectButton","_selectButton","$element","trigger","name","extend","space","enter","_optionsByReference","chunkSize","selectButtonText","format","uploadButtonText","labelText","multiple","accept","uploadUrl","allowCanceling","showFileList","progress","readyToUploadMessage","uploadedMessage","uploadFailedMessage","uploadMode","uploadMethod","uploadHeaders","onUploadStarted","onUploaded","onProgress","onUploadError","onUploadAborted","allowedFileExtensions","maxFileSize","minFileSize","invalidFileExtensionMessage","invalidMaxFileSizeMessage","invalidMinFileSizeMessage","extendSelection","validationMessageMode","uploadFile","uploadChunk","abortUpload","validationMessageOffset","h","v","useNativeInputClick","useDragOver","nativeDropSupported","_uploadButtonType","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","platform","msie","isMaterial","_initFileInput","_initLabel","_setUploadStrategy","_createFiles","_createUploadStartedAction","_createUploadedAction","_createProgressAction","_createUploadErrorAction","_createUploadAbortedAction","strategy","option","isFunction","CustomChunksFileUploadStrategy","DefaultChunksFileUploadStrategy","CustomWholeFileUploadStrategy","DefaultWholeFileUploadStrategy","_uploadStrategy","_this2","_isCustomClickEvent","_$fileInput","on","_inputChangeHandler","bind","stopPropagation","prop","tabIndex","_doPreventInputChange","fileName","val","replace","files","_getFiles","_changeValue","_uploadFiles","_isFileInArray","push","file","item","size","_shouldFileListBeExtended","slice","_removeDuplicates","fileList","values","each","_","_$inputLabel","text","find","addClass","_renderWrapper","_renderInputWrapper","_renderSelectButton","_renderInputContainer","_renderUploadButton","_preventRecreatingFiles","_renderDragEvents","_renderFiles","progressBar","_createProgressBar","appendTo","$file","_initStatusMessage","_initCancelButton","_this3","setTimeout","$statusMessage","css","remove","_this4","_files","_preventFilesUploading","_createFile","_validateFile","_this5","forEach","isValidFileExtension","_validateFileExtension","isValidMinSize","_validateMinFileSize","isValidMaxSize","_validateMaxFileSize","allowedExtensions","fileExtension","substring","lastIndexOf","toLowerCase","fileSize","_uploadStartedAction","_createActionByOption","_uploadedAction","_progressAction","_uploadAbortedAction","_uploadErrorAction","loadedSize","onAbort","onLoad","onError","onLoadStart","isValid","_this6","_$filesContainer","_$content","empty","_renderFile","toggleClass","_toggleFileUploaderEmptyClassName","_updateFileNameMaxWidth","_$validationMessage","dxOverlay","repaint","$fileContainer","_renderFileButtons","$fileInfo","isDefined","_getFileSize","append","_createValidationElement","cancelButtonsCount","uploadButtonsCount","filesContainerWidth","first","width","$buttonContainer","eq","buttonsWidth","$fileSize","prevFileSize","fileSizeWidth","$container","$cancelButton","_getCancelButton","$uploadButton","_getUploadButton","_this7","cancelButton","_createComponent","onClick","_removeFile","icon","visible","integrationOptions","_this8","uploadButton","_uploadFile","add","parent","splice","inArray","_hasInvalidFile","labels","count","Math","round","$button","_$inputWrapper","_selectButtonClickHandler","off","_uploadButton","_uploadButtonClickHandler","type","_$inputContainer","_shouldDragOverBeRendered","_renderInput","_selectButtonInputTemplate","data","content","$content","$text","NAME","_dragEventsTargets","addNamespace","_dragEnterHandler","_dragOverHandler","_dragLeaveHandler","_dropHandler","_useInputForDrop","_updateEventTargets","originalEvent","dataTransfer","dropEffect","removeClass","targetIndex","indexOf","isTargetExists","_filterFiles","allowedTypes","_getAllowedFileTypes","n","_isFileTypeAllowed","acceptSting","split","map","trim","allowedType","match","RegExp","$wrapper","detach","_this9","upload","loadedFileData","loaded","showStatus","segmentSize","currentSegmentSize","bytesLoaded","bytesTotal","total","event","request","totalFilesSize","totalLoadedFilesSize","_getProgressValue","_setLoadedSize","ratio","floor","_this10","hideCancelButton","_this11","min","max","statusFormat","statusPosition","_this12","_totalFilesSize","_this13","_totalLoadedFilesSize","_updateTotalProgress","_getTotalFilesSize","_getTotalLoadedFilesSize","args","_recalculateProgress","reset","_invalidate","FileBlobReader","index","createBlobResult","isCompleted","currentPosition","blob","sliceFile","startPos","webkitSlice","FileUploadStrategyBase","fileUploader","uploadStarted","_prepareFileBeforeUpload","_uploadCore","_this14","_isError","_isLoaded","isAborted","abort","_isCustomAbortUpload","arg","_createAbortUploadArgument","deferred","when","error","Deferred","reject","promise","done","fire","fail","_handleFileError","callback","_createFileProgressBar","_onUploadStarted","_onLoadedHandler","_onErrorHandler","_onAbortHandler","_onProgressHandler","status","_setStatusMessage","_updateProgressBar","_getLoadedData","ChunksFileUploadStrategyBase","_FileUploadStrategyBa","_super2","_this15","realFile","chunksData","loadedBytes","blobReader","guid","ceil","customData","_sendChunk","_this16","chunk","read","currentChunk","_sendChunkCore","_shouldHandleError","isStartLoad","_ChunksFileUploadStra","_super3","_this17","sendRequest","url","method","headers","beforeSend","xhr","onloadstart","_tryRaiseStartLoad","onabort","_createFormData","blobName","_isStatusError","formData","JSON","stringify","FileName","Index","TotalCount","FileSize","FileType","FileGuid","_ChunksFileUploadStra2","_super4","chunksInfo","_createChunksInfo","bytesUploaded","chunkCount","chunkBlob","chunkIndex","WholeFileUploadStrategyBase","_FileUploadStrategyBa2","_super5","_this18","_isProgressStarted","_WholeFileUploadStrat","_super6","_this19","onprogress","_handleProgress","fieldName","fieldValue","_WholeFileUploadStrat2","_super7","_this20","progressCallback","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/file_uploader.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _guid = require(\"../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _window = require(\"../core/utils/window\");\r\nvar _events_engine = require(\"../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _component_registrator = require(\"../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _callbacks = require(\"../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _type = require(\"../core/utils/type\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _ajax = require(\"../core/utils/ajax\");\r\nvar _ajax2 = _interopRequireDefault(_ajax);\r\nvar _editor = require(\"./editor/editor\");\r\nvar _editor2 = _interopRequireDefault(_editor);\r\nvar _button = require(\"./button\");\r\nvar _button2 = _interopRequireDefault(_button);\r\nvar _progress_bar = require(\"./progress_bar\");\r\nvar _progress_bar2 = _interopRequireDefault(_progress_bar);\r\nvar _browser = require(\"../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _devices = require(\"../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _utils = require(\"../events/utils\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _click = require(\"../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _message = require(\"../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _themes = require(\"./themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\n\r\nfunction _get(target, property, receiver) {\r\n    if (\"undefined\" !== typeof Reflect && Reflect.get) {\r\n        _get = Reflect.get\r\n    } else {\r\n        _get = function(target, property, receiver) {\r\n            var base = _superPropBase(target, property);\r\n            if (!base) {\r\n                return\r\n            }\r\n            var desc = Object.getOwnPropertyDescriptor(base, property);\r\n            if (desc.get) {\r\n                return desc.get.call(receiver)\r\n            }\r\n            return desc.value\r\n        }\r\n    }\r\n    return _get(target, property, receiver || target)\r\n}\r\n\r\nfunction _superPropBase(object, property) {\r\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\r\n        object = _getPrototypeOf(object);\r\n        if (null === object) {\r\n            break\r\n        }\r\n    }\r\n    return object\r\n}\r\n\r\nfunction _createSuper(Derived) {\r\n    return function() {\r\n        var result, Super = _getPrototypeOf(Derived);\r\n        if (_isNativeReflectConstruct()) {\r\n            var NewTarget = _getPrototypeOf(this).constructor;\r\n            result = Reflect.construct(Super, arguments, NewTarget)\r\n        } else {\r\n            result = Super.apply(this, arguments)\r\n        }\r\n        return _possibleConstructorReturn(this, result)\r\n    }\r\n}\r\n\r\nfunction _possibleConstructorReturn(self, call) {\r\n    if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\r\n        return call\r\n    }\r\n    return _assertThisInitialized(self)\r\n}\r\n\r\nfunction _assertThisInitialized(self) {\r\n    if (void 0 === self) {\r\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\r\n    }\r\n    return self\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n    if (\"undefined\" === typeof Reflect || !Reflect.construct) {\r\n        return false\r\n    }\r\n    if (Reflect.construct.sham) {\r\n        return false\r\n    }\r\n    if (\"function\" === typeof Proxy) {\r\n        return true\r\n    }\r\n    try {\r\n        Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\r\n        return true\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\r\n        return o.__proto__ || Object.getPrototypeOf(o)\r\n    };\r\n    return _getPrototypeOf(o)\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n    if (\"function\" !== typeof superClass && null !== superClass) {\r\n        throw new TypeError(\"Super expression must either be null or a function\")\r\n    }\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n        constructor: {\r\n            value: subClass,\r\n            writable: true,\r\n            configurable: true\r\n        }\r\n    });\r\n    if (superClass) {\r\n        _setPrototypeOf(subClass, superClass)\r\n    }\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar FILEUPLOADER_CLASS = \"dx-fileuploader\";\r\nvar FILEUPLOADER_EMPTY_CLASS = \"dx-fileuploader-empty\";\r\nvar FILEUPLOADER_SHOW_FILE_LIST_CLASS = \"dx-fileuploader-show-file-list\";\r\nvar FILEUPLOADER_DRAGOVER_CLASS = \"dx-fileuploader-dragover\";\r\nvar FILEUPLOADER_WRAPPER_CLASS = \"dx-fileuploader-wrapper\";\r\nvar FILEUPLOADER_CONTAINER_CLASS = \"dx-fileuploader-container\";\r\nvar FILEUPLOADER_CONTENT_CLASS = \"dx-fileuploader-content\";\r\nvar FILEUPLOADER_INPUT_WRAPPER_CLASS = \"dx-fileuploader-input-wrapper\";\r\nvar FILEUPLOADER_INPUT_CONTAINER_CLASS = \"dx-fileuploader-input-container\";\r\nvar FILEUPLOADER_INPUT_LABEL_CLASS = \"dx-fileuploader-input-label\";\r\nvar FILEUPLOADER_INPUT_CLASS = \"dx-fileuploader-input\";\r\nvar FILEUPLOADER_FILES_CONTAINER_CLASS = \"dx-fileuploader-files-container\";\r\nvar FILEUPLOADER_FILE_CONTAINER_CLASS = \"dx-fileuploader-file-container\";\r\nvar FILEUPLOADER_FILE_INFO_CLASS = \"dx-fileuploader-file-info\";\r\nvar FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS = \"dx-fileuploader-file-status-message\";\r\nvar FILEUPLOADER_FILE_CLASS = \"dx-fileuploader-file\";\r\nvar FILEUPLOADER_FILE_NAME_CLASS = \"dx-fileuploader-file-name\";\r\nvar FILEUPLOADER_FILE_SIZE_CLASS = \"dx-fileuploader-file-size\";\r\nvar FILEUPLOADER_BUTTON_CLASS = \"dx-fileuploader-button\";\r\nvar FILEUPLOADER_BUTTON_CONTAINER_CLASS = \"dx-fileuploader-button-container\";\r\nvar FILEUPLOADER_CANCEL_BUTTON_CLASS = \"dx-fileuploader-cancel-button\";\r\nvar FILEUPLOADER_UPLOAD_BUTTON_CLASS = \"dx-fileuploader-upload-button\";\r\nvar FILEUPLOADER_INVALID_CLASS = \"dx-fileuploader-invalid\";\r\nvar FILEUPLOADER_AFTER_LOAD_DELAY = 400;\r\nvar FILEUPLOADER_CHUNK_META_DATA_NAME = \"chunkMetadata\";\r\nvar renderFileUploaderInput = function() {\r\n    return (0, _renderer2.default)(\"<input>\").attr(\"type\", \"file\")\r\n};\r\nvar isFormDataSupported = function() {\r\n    return !!window.FormData\r\n};\r\nvar FileUploader = function(_Editor) {\r\n    _inherits(FileUploader, _Editor);\r\n    var _super = _createSuper(FileUploader);\r\n\r\n    function FileUploader() {\r\n        _classCallCheck(this, FileUploader);\r\n        return _super.apply(this, arguments)\r\n    }\r\n    _createClass(FileUploader, [{\r\n        key: \"_supportedKeys\",\r\n        value: function() {\r\n            var _this = this;\r\n            var click = function(e) {\r\n                e.preventDefault();\r\n                var $selectButton = _this._selectButton.$element();\r\n                _events_engine2.default.trigger($selectButton, _click2.default.name)\r\n            };\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_supportedKeys\", this).call(this), {\r\n                space: click,\r\n                enter: click\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_setOptionsByReference\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_setOptionsByReference\", this).call(this);\r\n            (0, _extend.extend)(this._optionsByReference, {\r\n                value: true\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getDefaultOptions\",\r\n        value: function() {\r\n            return (0, _extend.extend)(_get(_getPrototypeOf(FileUploader.prototype), \"_getDefaultOptions\", this).call(this), {\r\n                chunkSize: 0,\r\n                value: [],\r\n                selectButtonText: _message2.default.format(\"dxFileUploader-selectFile\"),\r\n                uploadButtonText: _message2.default.format(\"dxFileUploader-upload\"),\r\n                labelText: _message2.default.format(\"dxFileUploader-dropFile\"),\r\n                name: \"files[]\",\r\n                multiple: false,\r\n                accept: \"\",\r\n                uploadUrl: \"/\",\r\n                allowCanceling: true,\r\n                showFileList: true,\r\n                progress: 0,\r\n                readyToUploadMessage: _message2.default.format(\"dxFileUploader-readyToUpload\"),\r\n                uploadedMessage: _message2.default.format(\"dxFileUploader-uploaded\"),\r\n                uploadFailedMessage: _message2.default.format(\"dxFileUploader-uploadFailedMessage\"),\r\n                uploadMode: \"instantly\",\r\n                uploadMethod: \"POST\",\r\n                uploadHeaders: {},\r\n                onUploadStarted: null,\r\n                onUploaded: null,\r\n                onProgress: null,\r\n                onUploadError: null,\r\n                onUploadAborted: null,\r\n                allowedFileExtensions: [],\r\n                maxFileSize: 0,\r\n                minFileSize: 0,\r\n                invalidFileExtensionMessage: _message2.default.format(\"dxFileUploader-invalidFileExtension\"),\r\n                invalidMaxFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMaxFileSize\"),\r\n                invalidMinFileSizeMessage: _message2.default.format(\"dxFileUploader-invalidMinFileSize\"),\r\n                extendSelection: true,\r\n                validationMessageMode: \"always\",\r\n                uploadFile: null,\r\n                uploadChunk: null,\r\n                abortUpload: null,\r\n                validationMessageOffset: {\r\n                    h: 0,\r\n                    v: 0\r\n                },\r\n                useNativeInputClick: false,\r\n                useDragOver: true,\r\n                nativeDropSupported: true,\r\n                _uploadButtonType: \"normal\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_defaultOptionsRules\",\r\n        value: function() {\r\n            return _get(_getPrototypeOf(FileUploader.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\r\n                device: function() {\r\n                    return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator()\r\n                },\r\n                options: {\r\n                    focusStateEnabled: true\r\n                }\r\n            }, {\r\n                device: [{\r\n                    platform: \"android\"\r\n                }],\r\n                options: {\r\n                    validationMessageOffset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return \"desktop\" !== _devices2.default.real().deviceType\r\n                },\r\n                options: {\r\n                    useDragOver: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return !isFormDataSupported()\r\n                },\r\n                options: {\r\n                    uploadMode: \"useForm\"\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _browser2.default.msie || \"desktop\" !== _devices2.default.real().deviceType\r\n                },\r\n                options: {\r\n                    nativeDropSupported: false\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _themes2.default.isMaterial()\r\n                },\r\n                options: {\r\n                    _uploadButtonType: \"default\"\r\n                }\r\n            }])\r\n        }\r\n    }, {\r\n        key: \"_init\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_init\", this).call(this);\r\n            this._initFileInput();\r\n            this._initLabel();\r\n            this._setUploadStrategy();\r\n            this._createFiles();\r\n            this._createUploadStartedAction();\r\n            this._createUploadedAction();\r\n            this._createProgressAction();\r\n            this._createUploadErrorAction();\r\n            this._createUploadAbortedAction()\r\n        }\r\n    }, {\r\n        key: \"_setUploadStrategy\",\r\n        value: function() {\r\n            var strategy = null;\r\n            if (this.option(\"chunkSize\") > 0) {\r\n                var uploadChunk = this.option(\"uploadChunk\");\r\n                strategy = uploadChunk && (0, _type.isFunction)(uploadChunk) ? new CustomChunksFileUploadStrategy(this) : new DefaultChunksFileUploadStrategy(this)\r\n            } else {\r\n                var uploadFile = this.option(\"uploadFile\");\r\n                strategy = uploadFile && (0, _type.isFunction)(uploadFile) ? new CustomWholeFileUploadStrategy(this) : new DefaultWholeFileUploadStrategy(this)\r\n            }\r\n            this._uploadStrategy = strategy\r\n        }\r\n    }, {\r\n        key: \"_initFileInput\",\r\n        value: function() {\r\n            var _this2 = this;\r\n            this._isCustomClickEvent = false;\r\n            if (!this._$fileInput) {\r\n                this._$fileInput = renderFileUploaderInput();\r\n                _events_engine2.default.on(this._$fileInput, \"change\", this._inputChangeHandler.bind(this));\r\n                _events_engine2.default.on(this._$fileInput, \"click\", function(e) {\r\n                    e.stopPropagation();\r\n                    return _this2.option(\"useNativeInputClick\") || _this2._isCustomClickEvent\r\n                })\r\n            }\r\n            this._$fileInput.prop({\r\n                multiple: this.option(\"multiple\"),\r\n                accept: this.option(\"accept\"),\r\n                tabIndex: -1\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_inputChangeHandler\",\r\n        value: function() {\r\n            if (this._doPreventInputChange) {\r\n                return\r\n            }\r\n            var fileName = this._$fileInput.val().replace(/^.*\\\\/, \"\");\r\n            var files = this._$fileInput.prop(\"files\");\r\n            if (files && !files.length) {\r\n                return\r\n            }\r\n            var value = files ? this._getFiles(files) : [{\r\n                name: fileName\r\n            }];\r\n            this._changeValue(value);\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldFileListBeExtended\",\r\n        value: function() {\r\n            return \"useForm\" !== this.option(\"uploadMode\") && this.option(\"extendSelection\") && this.option(\"multiple\")\r\n        }\r\n    }, {\r\n        key: \"_removeDuplicates\",\r\n        value: function(files, value) {\r\n            var result = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                if (!this._isFileInArray(files, value[i])) {\r\n                    result.push(value[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_isFileInArray\",\r\n        value: function(files, file) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                var item = files[i];\r\n                if (item.size === file.size && item.name === file.name) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_changeValue\",\r\n        value: function(value) {\r\n            var files = this._shouldFileListBeExtended() ? this.option(\"value\").slice() : [];\r\n            if (\"instantly\" !== this.option(\"uploadMode\")) {\r\n                value = this._removeDuplicates(files, value)\r\n            }\r\n            this.option(\"value\", files.concat(value))\r\n        }\r\n    }, {\r\n        key: \"_getFiles\",\r\n        value: function(fileList) {\r\n            var values = [];\r\n            (0, _iterator.each)(fileList, function(_, value) {\r\n                return values.push(value)\r\n            });\r\n            return values\r\n        }\r\n    }, {\r\n        key: \"_initLabel\",\r\n        value: function() {\r\n            if (!this._$inputLabel) {\r\n                this._$inputLabel = (0, _renderer2.default)(\"<div>\")\r\n            }\r\n            this._$inputLabel.text(this.option(\"labelText\"))\r\n        }\r\n    }, {\r\n        key: \"_focusTarget\",\r\n        value: function() {\r\n            return this.$element().find(\".\" + FILEUPLOADER_BUTTON_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_getSubmitElement\",\r\n        value: function() {\r\n            return this._$fileInput\r\n        }\r\n    }, {\r\n        key: \"_initMarkup\",\r\n        value: function() {\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_initMarkup\", this).call(this);\r\n            this.$element().addClass(FILEUPLOADER_CLASS);\r\n            this._renderWrapper();\r\n            this._renderInputWrapper();\r\n            this._renderSelectButton();\r\n            this._renderInputContainer();\r\n            this._renderUploadButton();\r\n            this._preventRecreatingFiles = true\r\n        }\r\n    }, {\r\n        key: \"_render\",\r\n        value: function() {\r\n            this._preventRecreatingFiles = false;\r\n            this._renderDragEvents();\r\n            this._renderFiles();\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_render\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_createFileProgressBar\",\r\n        value: function(file) {\r\n            file.progressBar = this._createProgressBar(file.value.size);\r\n            file.progressBar.$element().appendTo(file.$file);\r\n            this._initStatusMessage(file);\r\n            this._initCancelButton(file)\r\n        }\r\n    }, {\r\n        key: \"_setStatusMessage\",\r\n        value: function(file, key) {\r\n            var _this3 = this;\r\n            setTimeout(function() {\r\n                if (_this3.option(\"showFileList\")) {\r\n                    if (file.$statusMessage) {\r\n                        file.$statusMessage.text(_this3.option(key));\r\n                        file.$statusMessage.css(\"display\", \"\");\r\n                        file.progressBar.$element().remove()\r\n                    }\r\n                }\r\n            }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n        }\r\n    }, {\r\n        key: \"_createFiles\",\r\n        value: function() {\r\n            var _this4 = this;\r\n            var value = this.option(\"value\");\r\n            if (this._files && (0 === value.length || !this._shouldFileListBeExtended())) {\r\n                this._preventFilesUploading(this._files);\r\n                this._files = null\r\n            }\r\n            if (!this._files) {\r\n                this._files = []\r\n            }(0, _iterator.each)(value.slice(this._files.length), function(_, value) {\r\n                var file = _this4._createFile(value);\r\n                _this4._validateFile(file);\r\n                _this4._files.push(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_preventFilesUploading\",\r\n        value: function(files) {\r\n            var _this5 = this;\r\n            files.forEach(function(file) {\r\n                return _this5._uploadStrategy.abortUpload(file)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_validateFile\",\r\n        value: function(file) {\r\n            file.isValidFileExtension = this._validateFileExtension(file);\r\n            file.isValidMinSize = this._validateMinFileSize(file);\r\n            file.isValidMaxSize = this._validateMaxFileSize(file)\r\n        }\r\n    }, {\r\n        key: \"_validateFileExtension\",\r\n        value: function(file) {\r\n            var allowedExtensions = this.option(\"allowedFileExtensions\");\r\n            var fileExtension = file.value.name.substring(file.value.name.lastIndexOf(\".\")).toLowerCase();\r\n            if (0 === allowedExtensions.length) {\r\n                return true\r\n            }\r\n            for (var i = 0; i < allowedExtensions.length; i++) {\r\n                if (fileExtension === allowedExtensions[i].toLowerCase()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_validateMaxFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var maxFileSize = this.option(\"maxFileSize\");\r\n            return maxFileSize > 0 ? fileSize <= maxFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_validateMinFileSize\",\r\n        value: function(file) {\r\n            var fileSize = file.value.size;\r\n            var minFileSize = this.option(\"minFileSize\");\r\n            return minFileSize > 0 ? fileSize >= minFileSize : true\r\n        }\r\n    }, {\r\n        key: \"_createUploadStartedAction\",\r\n        value: function() {\r\n            this._uploadStartedAction = this._createActionByOption(\"onUploadStarted\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadedAction\",\r\n        value: function() {\r\n            this._uploadedAction = this._createActionByOption(\"onUploaded\")\r\n        }\r\n    }, {\r\n        key: \"_createProgressAction\",\r\n        value: function() {\r\n            this._progressAction = this._createActionByOption(\"onProgress\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadAbortedAction\",\r\n        value: function() {\r\n            this._uploadAbortedAction = this._createActionByOption(\"onUploadAborted\")\r\n        }\r\n    }, {\r\n        key: \"_createUploadErrorAction\",\r\n        value: function() {\r\n            this._uploadErrorAction = this._createActionByOption(\"onUploadError\")\r\n        }\r\n    }, {\r\n        key: \"_createFile\",\r\n        value: function(value) {\r\n            return {\r\n                value: value,\r\n                loadedSize: 0,\r\n                onProgress: (0, _callbacks2.default)(),\r\n                onAbort: (0, _callbacks2.default)(),\r\n                onLoad: (0, _callbacks2.default)(),\r\n                onError: (0, _callbacks2.default)(),\r\n                onLoadStart: (0, _callbacks2.default)(),\r\n                isValidFileExtension: true,\r\n                isValidMaxSize: true,\r\n                isValidMinSize: true,\r\n                isValid: function() {\r\n                    return this.isValidFileExtension && this.isValidMaxSize && this.isValidMinSize\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_renderFiles\",\r\n        value: function() {\r\n            var _this6 = this;\r\n            var value = this.option(\"value\");\r\n            if (!this._$filesContainer) {\r\n                this._$filesContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILES_CONTAINER_CLASS).appendTo(this._$content)\r\n            } else {\r\n                if (!this._shouldFileListBeExtended() || 0 === value.length) {\r\n                    this._$filesContainer.empty()\r\n                }\r\n            }\r\n            var showFileList = this.option(\"showFileList\");\r\n            if (showFileList) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    if (!file.$file) {\r\n                        _this6._renderFile(file)\r\n                    }\r\n                })\r\n            }\r\n            this.$element().toggleClass(FILEUPLOADER_SHOW_FILE_LIST_CLASS, showFileList);\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._updateFileNameMaxWidth();\r\n            this._$validationMessage && this._$validationMessage.dxOverlay(\"instance\").repaint()\r\n        }\r\n    }, {\r\n        key: \"_renderFile\",\r\n        value: function(file) {\r\n            var value = file.value;\r\n            var $fileContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CONTAINER_CLASS).appendTo(this._$filesContainer);\r\n            this._renderFileButtons(file, $fileContainer);\r\n            file.$file = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_CLASS).appendTo($fileContainer);\r\n            var $fileInfo = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_INFO_CLASS).appendTo(file.$file);\r\n            file.$statusMessage = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_STATUS_MESSAGE_CLASS).appendTo(file.$file);\r\n            (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_NAME_CLASS).text(value.name).appendTo($fileInfo);\r\n            if ((0, _type.isDefined)(value.size)) {\r\n                (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_FILE_SIZE_CLASS).text(this._getFileSize(value.size)).appendTo($fileInfo)\r\n            }\r\n            if (file.isValid()) {\r\n                file.$statusMessage.text(this.option(\"readyToUploadMessage\"))\r\n            } else {\r\n                if (!file.isValidFileExtension) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidFileExtensionMessage\"))\r\n                }\r\n                if (!file.isValidMaxSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMaxFileSizeMessage\"))\r\n                }\r\n                if (!file.isValidMinSize) {\r\n                    file.$statusMessage.append(this._createValidationElement(\"invalidMinFileSizeMessage\"))\r\n                }\r\n                $fileContainer.addClass(FILEUPLOADER_INVALID_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createValidationElement\",\r\n        value: function(key) {\r\n            return (0, _renderer2.default)(\"<span>\").text(this.option(key))\r\n        }\r\n    }, {\r\n        key: \"_updateFileNameMaxWidth\",\r\n        value: function() {\r\n            var cancelButtonsCount = this.option(\"allowCanceling\") && \"useForm\" !== this.option(\"uploadMode\") ? 1 : 0;\r\n            var uploadButtonsCount = \"useButtons\" === this.option(\"uploadMode\") ? 1 : 0;\r\n            var filesContainerWidth = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_CONTAINER_CLASS).first().width() || this._$filesContainer.width();\r\n            var $buttonContainer = this._$filesContainer.find(\".\" + FILEUPLOADER_BUTTON_CONTAINER_CLASS).eq(0);\r\n            var buttonsWidth = $buttonContainer.width() * (cancelButtonsCount + uploadButtonsCount);\r\n            var $fileSize = this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_SIZE_CLASS).eq(0);\r\n            var prevFileSize = $fileSize.text();\r\n            $fileSize.text(\"1000 Mb\");\r\n            var fileSizeWidth = $fileSize.width();\r\n            $fileSize.text(prevFileSize);\r\n            this._$filesContainer.find(\".\" + FILEUPLOADER_FILE_NAME_CLASS).css(\"maxWidth\", filesContainerWidth - buttonsWidth - fileSizeWidth)\r\n        }\r\n    }, {\r\n        key: \"_renderFileButtons\",\r\n        value: function(file, $container) {\r\n            var $cancelButton = this._getCancelButton(file);\r\n            $cancelButton && $container.append($cancelButton);\r\n            var $uploadButton = this._getUploadButton(file);\r\n            $uploadButton && $container.append($uploadButton)\r\n        }\r\n    }, {\r\n        key: \"_getCancelButton\",\r\n        value: function(file) {\r\n            var _this7 = this;\r\n            if (\"useForm\" === this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.cancelButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_CANCEL_BUTTON_CLASS), _button2.default, {\r\n                onClick: function() {\r\n                    return _this7._removeFile(file)\r\n                },\r\n                icon: \"close\",\r\n                visible: this.option(\"allowCanceling\"),\r\n                integrationOptions: {}\r\n            });\r\n            return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.cancelButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_getUploadButton\",\r\n        value: function(file) {\r\n            var _this8 = this;\r\n            if (!file.isValid() || \"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return null\r\n            }\r\n            file.uploadButton = this._createComponent((0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS + \" \" + FILEUPLOADER_UPLOAD_BUTTON_CLASS), _button2.default, {\r\n                onClick: function() {\r\n                    return _this8._uploadFile(file)\r\n                },\r\n                icon: \"upload\"\r\n            });\r\n            file.onLoadStart.add(function() {\r\n                return file.uploadButton.$element().remove()\r\n            });\r\n            return (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CONTAINER_CLASS).append(file.uploadButton.$element())\r\n        }\r\n    }, {\r\n        key: \"_removeFile\",\r\n        value: function(file) {\r\n            file.$file.parent().remove();\r\n            this._files.splice((0, _array.inArray)(file, this._files), 1);\r\n            var value = this.option(\"value\").slice();\r\n            value.splice((0, _array.inArray)(file.value, value), 1);\r\n            this._preventRecreatingFiles = true;\r\n            this.option(\"value\", value);\r\n            this._preventRecreatingFiles = false;\r\n            this._toggleFileUploaderEmptyClassName();\r\n            this._doPreventInputChange = true;\r\n            this._$fileInput.val(\"\");\r\n            this._doPreventInputChange = false\r\n        }\r\n    }, {\r\n        key: \"_toggleFileUploaderEmptyClassName\",\r\n        value: function() {\r\n            this.$element().toggleClass(FILEUPLOADER_EMPTY_CLASS, !this._files.length || this._hasInvalidFile(this._files))\r\n        }\r\n    }, {\r\n        key: \"_hasInvalidFile\",\r\n        value: function(files) {\r\n            for (var i = 0; i < files.length; i++) {\r\n                if (!files[i].isValid()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_getFileSize\",\r\n        value: function(size) {\r\n            var i = 0;\r\n            var labels = [_message2.default.format(\"dxFileUploader-bytes\"), _message2.default.format(\"dxFileUploader-kb\"), _message2.default.format(\"dxFileUploader-Mb\"), _message2.default.format(\"dxFileUploader-Gb\")];\r\n            var count = labels.length - 1;\r\n            while (i < count && size >= 1024) {\r\n                size /= 1024;\r\n                i++\r\n            }\r\n            return Math.round(size) + \" \" + labels[i]\r\n        }\r\n    }, {\r\n        key: \"_renderSelectButton\",\r\n        value: function() {\r\n            var $button = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).appendTo(this._$inputWrapper);\r\n            this._selectButton = this._createComponent($button, _button2.default, {\r\n                text: this.option(\"selectButtonText\"),\r\n                focusStateEnabled: false,\r\n                integrationOptions: {}\r\n            });\r\n            if (\"desktop\" === _devices2.default.real().deviceType) {\r\n                this._selectButton.option(\"onClick\", this._selectButtonClickHandler.bind(this))\r\n            } else {\r\n                _events_engine2.default.off($button, \"click\");\r\n                _events_engine2.default.on($button, \"click\", this._selectButtonClickHandler.bind(this))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectButtonClickHandler\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                return\r\n            }\r\n            if (this.option(\"disabled\")) {\r\n                return false\r\n            }\r\n            this._isCustomClickEvent = true;\r\n            _events_engine2.default.trigger(this._$fileInput, \"click\");\r\n            this._isCustomClickEvent = false\r\n        }\r\n    }, {\r\n        key: \"_renderUploadButton\",\r\n        value: function() {\r\n            if (\"useButtons\" !== this.option(\"uploadMode\")) {\r\n                return\r\n            }\r\n            var $uploadButton = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_BUTTON_CLASS).addClass(FILEUPLOADER_UPLOAD_BUTTON_CLASS).appendTo(this._$content);\r\n            this._uploadButton = this._createComponent($uploadButton, _button2.default, {\r\n                text: this.option(\"uploadButtonText\"),\r\n                onClick: this._uploadButtonClickHandler.bind(this),\r\n                type: this.option(\"_uploadButtonType\"),\r\n                integrationOptions: {}\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadButtonClickHandler\",\r\n        value: function() {\r\n            this._uploadFiles()\r\n        }\r\n    }, {\r\n        key: \"_shouldDragOverBeRendered\",\r\n        value: function() {\r\n            return \"useForm\" !== this.option(\"uploadMode\") || this.option(\"nativeDropSupported\")\r\n        }\r\n    }, {\r\n        key: \"_renderInputContainer\",\r\n        value: function() {\r\n            this._$inputContainer = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_CONTAINER_CLASS).appendTo(this._$inputWrapper);\r\n            if (!this._shouldDragOverBeRendered()) {\r\n                this._$inputContainer.css(\"display\", \"none\")\r\n            }\r\n            this._$fileInput.addClass(FILEUPLOADER_INPUT_CLASS);\r\n            this._renderInput();\r\n            this._$inputLabel.addClass(FILEUPLOADER_INPUT_LABEL_CLASS).appendTo(this._$inputContainer)\r\n        }\r\n    }, {\r\n        key: \"_renderInput\",\r\n        value: function() {\r\n            if (this.option(\"useNativeInputClick\")) {\r\n                this._selectButton.option(\"template\", this._selectButtonInputTemplate.bind(this))\r\n            } else {\r\n                this._$fileInput.appendTo(this._$inputContainer);\r\n                this._selectButton.option(\"template\", \"content\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_selectButtonInputTemplate\",\r\n        value: function(data, content) {\r\n            var $content = (0, _renderer2.default)(content);\r\n            var $text = (0, _renderer2.default)(\"<span>\").addClass(\"dx-button-text\").text(data.text);\r\n            $content.append($text).append(this._$fileInput);\r\n            return $content\r\n        }\r\n    }, {\r\n        key: \"_renderInputWrapper\",\r\n        value: function() {\r\n            this._$inputWrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_INPUT_WRAPPER_CLASS).appendTo(this._$content)\r\n        }\r\n    }, {\r\n        key: \"_renderDragEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this._$inputWrapper, \".\" + this.NAME);\r\n            if (!this._shouldDragOverBeRendered()) {\r\n                return\r\n            }\r\n            this._dragEventsTargets = [];\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragenter\", this.NAME), this._dragEnterHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragover\", this.NAME), this._dragOverHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"dragleave\", this.NAME), this._dragLeaveHandler.bind(this));\r\n            _events_engine2.default.on(this._$inputWrapper, _utils2.default.addNamespace(\"drop\", this.NAME), this._dropHandler.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_useInputForDrop\",\r\n        value: function() {\r\n            return this.option(\"nativeDropSupported\") && \"useForm\" === this.option(\"uploadMode\")\r\n        }\r\n    }, {\r\n        key: \"_dragEnterHandler\",\r\n        value: function(e) {\r\n            if (this.option(\"disabled\")) {\r\n                return false\r\n            }\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._updateEventTargets(e);\r\n            this.$element().addClass(FILEUPLOADER_DRAGOVER_CLASS)\r\n        }\r\n    }, {\r\n        key: \"_dragOverHandler\",\r\n        value: function(e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            e.originalEvent.dataTransfer.dropEffect = \"copy\"\r\n        }\r\n    }, {\r\n        key: \"_dragLeaveHandler\",\r\n        value: function(e) {\r\n            if (!this._useInputForDrop()) {\r\n                e.preventDefault()\r\n            }\r\n            this._updateEventTargets(e);\r\n            if (!this._dragEventsTargets.length) {\r\n                this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_updateEventTargets\",\r\n        value: function(e) {\r\n            var targetIndex = this._dragEventsTargets.indexOf(e.target);\r\n            var isTargetExists = targetIndex !== -1;\r\n            if (\"dragenter\" === e.type) {\r\n                !isTargetExists && this._dragEventsTargets.push(e.target)\r\n            } else {\r\n                isTargetExists && this._dragEventsTargets.splice(targetIndex, 1)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_dropHandler\",\r\n        value: function(e) {\r\n            this._dragEventsTargets = [];\r\n            this.$element().removeClass(FILEUPLOADER_DRAGOVER_CLASS);\r\n            if (this._useInputForDrop()) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            var fileList = e.originalEvent.dataTransfer.files;\r\n            var files = this._getFiles(fileList);\r\n            if (!this.option(\"multiple\") && files.length > 1) {\r\n                return\r\n            }\r\n            this._changeValue(this._filterFiles(files));\r\n            if (\"instantly\" === this.option(\"uploadMode\")) {\r\n                this._uploadFiles()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_filterFiles\",\r\n        value: function(files) {\r\n            if (!files.length) {\r\n                return files\r\n            }\r\n            var accept = this.option(\"accept\");\r\n            if (!accept.length) {\r\n                return files\r\n            }\r\n            var result = [];\r\n            var allowedTypes = this._getAllowedFileTypes(accept);\r\n            for (var i = 0, n = files.length; i < n; i++) {\r\n                if (this._isFileTypeAllowed(files[i], allowedTypes)) {\r\n                    result.push(files[i])\r\n                }\r\n            }\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"_getAllowedFileTypes\",\r\n        value: function(acceptSting) {\r\n            if (!acceptSting.length) {\r\n                return []\r\n            }\r\n            return acceptSting.split(\",\").map(function(item) {\r\n                return item.trim()\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_isFileTypeAllowed\",\r\n        value: function(file, allowedTypes) {\r\n            for (var i = 0, n = allowedTypes.length; i < n; i++) {\r\n                var allowedType = allowedTypes[i];\r\n                if (\".\" === allowedType[0]) {\r\n                    allowedType = allowedType.replace(\".\", \"\\\\.\");\r\n                    if (file.name.match(new RegExp(allowedType + \"$\", \"i\"))) {\r\n                        return true\r\n                    }\r\n                } else {\r\n                    allowedType = allowedType.replace(\"*\", \"\");\r\n                    if (file.type.match(new RegExp(allowedType, \"i\"))) {\r\n                        return true\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        }\r\n    }, {\r\n        key: \"_renderWrapper\",\r\n        value: function() {\r\n            var $wrapper = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_WRAPPER_CLASS).appendTo(this.$element());\r\n            var $container = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTAINER_CLASS).appendTo($wrapper);\r\n            this._$content = (0, _renderer2.default)(\"<div>\").addClass(FILEUPLOADER_CONTENT_CLASS).appendTo($container)\r\n        }\r\n    }, {\r\n        key: \"_clean\",\r\n        value: function() {\r\n            this._$fileInput.detach();\r\n            delete this._$filesContainer;\r\n            if (this._files) {\r\n                this._files.forEach(function(file) {\r\n                    file.$file = null;\r\n                    file.$statusMessage = null\r\n                })\r\n            }\r\n            _get(_getPrototypeOf(FileUploader.prototype), \"_clean\", this).call(this)\r\n        }\r\n    }, {\r\n        key: \"_uploadFiles\",\r\n        value: function() {\r\n            var _this9 = this;\r\n            if (isFormDataSupported()) {\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    return _this9._uploadFile(file)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            this._uploadStrategy.upload(file)\r\n        }\r\n    }, {\r\n        key: \"_updateProgressBar\",\r\n        value: function(file, loadedFileData) {\r\n            file.progressBar && file.progressBar.option({\r\n                value: loadedFileData.loaded,\r\n                showStatus: true\r\n            });\r\n            this._progressAction({\r\n                file: file.value,\r\n                segmentSize: loadedFileData.currentSegmentSize,\r\n                bytesLoaded: loadedFileData.loaded,\r\n                bytesTotal: loadedFileData.total,\r\n                event: loadedFileData.event,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_updateTotalProgress\",\r\n        value: function(totalFilesSize, totalLoadedFilesSize) {\r\n            var progress = totalFilesSize ? this._getProgressValue(totalLoadedFilesSize / totalFilesSize) : 0;\r\n            this.option(\"progress\", progress);\r\n            this._setLoadedSize(totalLoadedFilesSize)\r\n        }\r\n    }, {\r\n        key: \"_getProgressValue\",\r\n        value: function(ratio) {\r\n            return Math.floor(100 * ratio)\r\n        }\r\n    }, {\r\n        key: \"_initStatusMessage\",\r\n        value: function(file) {\r\n            file.$statusMessage.css(\"display\", \"none\")\r\n        }\r\n    }, {\r\n        key: \"_initCancelButton\",\r\n        value: function(file) {\r\n            var _this10 = this;\r\n            file.cancelButton.option(\"onClick\", function() {\r\n                _this10._preventFilesUploading([file]);\r\n                _this10._removeFile(file)\r\n            });\r\n            var hideCancelButton = function() {\r\n                setTimeout(function() {\r\n                    file.cancelButton.option({\r\n                        visible: false\r\n                    })\r\n                }, FILEUPLOADER_AFTER_LOAD_DELAY)\r\n            };\r\n            file.onLoad.add(hideCancelButton);\r\n            file.onError.add(hideCancelButton)\r\n        }\r\n    }, {\r\n        key: \"_createProgressBar\",\r\n        value: function(fileSize) {\r\n            var _this11 = this;\r\n            return this._createComponent((0, _renderer2.default)(\"<div>\"), _progress_bar2.default, {\r\n                value: void 0,\r\n                min: 0,\r\n                max: fileSize,\r\n                statusFormat: function(ratio) {\r\n                    return _this11._getProgressValue(ratio) + \"%\"\r\n                },\r\n                showStatus: false,\r\n                statusPosition: \"right\"\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getTotalFilesSize\",\r\n        value: function() {\r\n            var _this12 = this;\r\n            if (!this._totalFilesSize) {\r\n                this._totalFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this12._totalFilesSize += file.value.size\r\n                })\r\n            }\r\n            return this._totalFilesSize\r\n        }\r\n    }, {\r\n        key: \"_getTotalLoadedFilesSize\",\r\n        value: function() {\r\n            var _this13 = this;\r\n            if (!this._totalLoadedFilesSize) {\r\n                this._totalLoadedFilesSize = 0;\r\n                (0, _iterator.each)(this._files, function(_, file) {\r\n                    _this13._totalLoadedFilesSize += file.loadedSize\r\n                })\r\n            }\r\n            return this._totalLoadedFilesSize\r\n        }\r\n    }, {\r\n        key: \"_setLoadedSize\",\r\n        value: function(value) {\r\n            this._totalLoadedFilesSize = value\r\n        }\r\n    }, {\r\n        key: \"_recalculateProgress\",\r\n        value: function() {\r\n            this._totalFilesSize = 0;\r\n            this._totalLoadedFilesSize = 0;\r\n            this._updateTotalProgress(this._getTotalFilesSize(), this._getTotalLoadedFilesSize())\r\n        }\r\n    }, {\r\n        key: \"_getValidationMessageTarget\",\r\n        value: function() {\r\n            return this._$inputWrapper\r\n        }\r\n    }, {\r\n        key: \"_optionChanged\",\r\n        value: function(args) {\r\n            var value = args.value;\r\n            switch (args.name) {\r\n                case \"height\":\r\n                case \"width\":\r\n                    this._updateFileNameMaxWidth();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"value\":\r\n                    !value.length && this._$fileInput.val(\"\");\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._createFiles();\r\n                        this._renderFiles()\r\n                    }\r\n                    this._recalculateProgress();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"name\":\r\n                    this._initFileInput();\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args);\r\n                    break;\r\n                case \"accept\":\r\n                    this._initFileInput();\r\n                    break;\r\n                case \"multiple\":\r\n                    this._initFileInput();\r\n                    if (!args.value) {\r\n                        this.reset()\r\n                    }\r\n                    break;\r\n                case \"selectButtonText\":\r\n                    this._selectButton.option(\"text\", value);\r\n                    break;\r\n                case \"uploadButtonText\":\r\n                    this._uploadButton && this._uploadButton.option(\"text\", value);\r\n                    break;\r\n                case \"_uploadButtonType\":\r\n                    this._uploadButton && this._uploadButton.option(\"type\", value);\r\n                    break;\r\n                case \"maxFileSize\":\r\n                case \"minFileSize\":\r\n                case \"allowedFileExtensions\":\r\n                case \"invalidFileExtensionMessage\":\r\n                case \"invalidMaxFileSizeMessage\":\r\n                case \"invalidMinFileSizeMessage\":\r\n                case \"readyToUploadMessage\":\r\n                case \"uploadedMessage\":\r\n                case \"uploadFailedMessage\":\r\n                    this._invalidate();\r\n                    break;\r\n                case \"labelText\":\r\n                    this._$inputLabel.text(value);\r\n                    break;\r\n                case \"showFileList\":\r\n                    if (!this._preventRecreatingFiles) {\r\n                        this._renderFiles()\r\n                    }\r\n                    break;\r\n                case \"uploadFile\":\r\n                case \"uploadChunk\":\r\n                case \"chunkSize\":\r\n                    this._setUploadStrategy();\r\n                    break;\r\n                case \"abortUpload\":\r\n                case \"uploadUrl\":\r\n                case \"progress\":\r\n                case \"uploadMethod\":\r\n                case \"uploadHeaders\":\r\n                case \"extendSelection\":\r\n                    break;\r\n                case \"allowCanceling\":\r\n                case \"uploadMode\":\r\n                    this.reset();\r\n                    this._invalidate();\r\n                    break;\r\n                case \"onUploadStarted\":\r\n                    this._createUploadStartedAction();\r\n                    break;\r\n                case \"onUploaded\":\r\n                    this._createUploadedAction();\r\n                    break;\r\n                case \"onProgress\":\r\n                    this._createProgressAction();\r\n                    break;\r\n                case \"onUploadError\":\r\n                    this._createUploadErrorAction();\r\n                    break;\r\n                case \"onUploadAborted\":\r\n                    this._createUploadAbortedAction();\r\n                    break;\r\n                case \"useNativeInputClick\":\r\n                    this._renderInput();\r\n                    break;\r\n                case \"useDragOver\":\r\n                    this._renderDragEvents();\r\n                    break;\r\n                case \"nativeDropSupported\":\r\n                    this._invalidate();\r\n                    break;\r\n                default:\r\n                    _get(_getPrototypeOf(FileUploader.prototype), \"_optionChanged\", this).call(this, args)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"reset\",\r\n        value: function() {\r\n            this.option(\"value\", [])\r\n        }\r\n    }]);\r\n    return FileUploader\r\n}(_editor2.default);\r\nvar FileBlobReader = function() {\r\n    function FileBlobReader(file, chunkSize) {\r\n        _classCallCheck(this, FileBlobReader);\r\n        this.file = file;\r\n        this.chunkSize = chunkSize;\r\n        this.index = 0\r\n    }\r\n    _createClass(FileBlobReader, [{\r\n        key: \"read\",\r\n        value: function() {\r\n            if (!this.file) {\r\n                return null\r\n            }\r\n            var result = this.createBlobResult(this.file, this.index, this.chunkSize);\r\n            if (result.isCompleted) {\r\n                this.file = null\r\n            }\r\n            this.index++;\r\n            return result\r\n        }\r\n    }, {\r\n        key: \"createBlobResult\",\r\n        value: function(file, index, chunkSize) {\r\n            var currentPosition = index * chunkSize;\r\n            return {\r\n                blob: this.sliceFile(file, currentPosition, chunkSize),\r\n                index: index,\r\n                isCompleted: currentPosition + chunkSize >= file.size\r\n            }\r\n        }\r\n    }, {\r\n        key: \"sliceFile\",\r\n        value: function(file, startPos, length) {\r\n            if (file.slice) {\r\n                return file.slice(startPos, startPos + length)\r\n            }\r\n            if (file.webkitSlice) {\r\n                return file.webkitSlice(startPos, startPos + length)\r\n            }\r\n            return null\r\n        }\r\n    }]);\r\n    return FileBlobReader\r\n}();\r\nvar FileUploadStrategyBase = function() {\r\n    function FileUploadStrategyBase(fileUploader) {\r\n        _classCallCheck(this, FileUploadStrategyBase);\r\n        this.fileUploader = fileUploader\r\n    }\r\n    _createClass(FileUploadStrategyBase, [{\r\n        key: \"upload\",\r\n        value: function(file) {\r\n            if (file.isValid() && !file.uploadStarted) {\r\n                this._prepareFileBeforeUpload(file);\r\n                this._uploadCore(file)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"abortUpload\",\r\n        value: function abortUpload(file) {\r\n            var _this14 = this;\r\n            if (file._isError || file._isLoaded || file.isAborted) {\r\n                return\r\n            }\r\n            file.request && file.request.abort();\r\n            file.isAborted = true;\r\n            if (this._isCustomAbortUpload()) {\r\n                var abortUpload = this.fileUploader.option(\"abortUpload\");\r\n                var arg = this._createAbortUploadArgument(file);\r\n                var deferred = null;\r\n                try {\r\n                    var result = abortUpload(file.value, arg);\r\n                    deferred = (0, _deferred.when)(result)\r\n                } catch (error) {\r\n                    deferred = (new _deferred.Deferred).reject(error).promise()\r\n                }\r\n                deferred.done(function() {\r\n                    return file.onAbort.fire()\r\n                }).fail(function(error) {\r\n                    return _this14._handleFileError(file, error)\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createAbortUploadArgument\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_uploadCore\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_isCustomAbortUpload\",\r\n        value: function() {\r\n            var callback = this.fileUploader.option(\"abortUpload\");\r\n            return callback && (0, _type.isFunction)(callback)\r\n        }\r\n    }, {\r\n        key: \"_handleFileError\",\r\n        value: function(file, error) {\r\n            file._isError = true;\r\n            file.onError.fire(error)\r\n        }\r\n    }, {\r\n        key: \"_prepareFileBeforeUpload\",\r\n        value: function(file) {\r\n            if (file.$file) {\r\n                this.fileUploader._createFileProgressBar(file)\r\n            }\r\n            file.onLoadStart.add(this._onUploadStarted.bind(this, file));\r\n            file.onLoad.add(this._onLoadedHandler.bind(this, file));\r\n            file.onError.add(this._onErrorHandler.bind(this, file));\r\n            file.onAbort.add(this._onAbortHandler.bind(this, file));\r\n            file.onProgress.add(this._onProgressHandler.bind(this, file))\r\n        }\r\n    }, {\r\n        key: \"_isStatusError\",\r\n        value: function(status) {\r\n            return 400 <= status && status < 500 || 500 <= status && status < 600\r\n        }\r\n    }, {\r\n        key: \"_onUploadStarted\",\r\n        value: function(file, e) {\r\n            file.uploadStarted = true;\r\n            this.fileUploader._uploadStartedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onAbortHandler\",\r\n        value: function(file, e) {\r\n            this.fileUploader._uploadAbortedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onErrorHandler\",\r\n        value: function(file, error) {\r\n            this.fileUploader._setStatusMessage(file, \"uploadFailedMessage\");\r\n            this.fileUploader._uploadErrorAction({\r\n                file: file.value,\r\n                event: void 0,\r\n                request: file.request,\r\n                error: error\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onLoadedHandler\",\r\n        value: function(file, e) {\r\n            file._isLoaded = true;\r\n            this.fileUploader._setStatusMessage(file, \"uploadedMessage\");\r\n            this.fileUploader._uploadedAction({\r\n                file: file.value,\r\n                event: e,\r\n                request: file.request\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_onProgressHandler\",\r\n        value: function(file, e) {\r\n            if (file) {\r\n                var totalFilesSize = this.fileUploader._getTotalFilesSize();\r\n                var totalLoadedFilesSize = this.fileUploader._getTotalLoadedFilesSize();\r\n                var loadedSize = Math.min(e.loaded, file.value.size);\r\n                var segmentSize = loadedSize - file.loadedSize;\r\n                file.loadedSize = loadedSize;\r\n                this.fileUploader._updateTotalProgress(totalFilesSize, totalLoadedFilesSize + segmentSize);\r\n                this.fileUploader._updateProgressBar(file, this._getLoadedData(loadedSize, e.total, segmentSize, e))\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, currentSegmentSize, event) {\r\n            return {\r\n                loaded: loaded,\r\n                total: total,\r\n                currentSegmentSize: currentSegmentSize\r\n            }\r\n        }\r\n    }]);\r\n    return FileUploadStrategyBase\r\n}();\r\nvar ChunksFileUploadStrategyBase = function(_FileUploadStrategyBa) {\r\n    _inherits(ChunksFileUploadStrategyBase, _FileUploadStrategyBa);\r\n    var _super2 = _createSuper(ChunksFileUploadStrategyBase);\r\n\r\n    function ChunksFileUploadStrategyBase(fileUploader) {\r\n        var _this15;\r\n        _classCallCheck(this, ChunksFileUploadStrategyBase);\r\n        _this15 = _super2.call(this, fileUploader);\r\n        _this15.chunkSize = _this15.fileUploader.option(\"chunkSize\");\r\n        return _this15\r\n    }\r\n    _createClass(ChunksFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var realFile = file.value;\r\n            var chunksData = {\r\n                name: realFile.name,\r\n                loadedBytes: 0,\r\n                type: realFile.type,\r\n                blobReader: new FileBlobReader(realFile, this.chunkSize),\r\n                guid: new _guid2.default,\r\n                fileSize: realFile.size,\r\n                count: Math.ceil(realFile.size / this.chunkSize),\r\n                customData: {}\r\n            };\r\n            file.chunksData = chunksData;\r\n            this._sendChunk(file, chunksData)\r\n        }\r\n    }, {\r\n        key: \"_sendChunk\",\r\n        value: function(file, chunksData) {\r\n            var _this16 = this;\r\n            var chunk = chunksData.blobReader.read();\r\n            chunksData.currentChunk = chunk;\r\n            if (chunk) {\r\n                this._sendChunkCore(file, chunksData, chunk).done(function() {\r\n                    if (file.isAborted) {\r\n                        return\r\n                    }\r\n                    chunksData.loadedBytes += chunk.blob.size;\r\n                    file.onProgress.fire({\r\n                        loaded: chunksData.loadedBytes,\r\n                        total: file.value.size\r\n                    });\r\n                    if (chunk.isCompleted) {\r\n                        file.onLoad.fire()\r\n                    }\r\n                    _this16._sendChunk(file, chunksData)\r\n                }).fail(function(error) {\r\n                    if (_this16._shouldHandleError(error)) {\r\n                        _this16._handleFileError(file, error)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(error) {}\r\n    }, {\r\n        key: \"_tryRaiseStartLoad\",\r\n        value: function(file) {\r\n            if (!file.isStartLoad) {\r\n                file.isStartLoad = true;\r\n                file.onLoadStart.fire()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_getEvent\",\r\n        value: function(e) {\r\n            return null\r\n        }\r\n    }]);\r\n    return ChunksFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultChunksFileUploadStrategy = function(_ChunksFileUploadStra) {\r\n    _inherits(DefaultChunksFileUploadStrategy, _ChunksFileUploadStra);\r\n    var _super3 = _createSuper(DefaultChunksFileUploadStrategy);\r\n\r\n    function DefaultChunksFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultChunksFileUploadStrategy);\r\n        return _super3.apply(this, arguments)\r\n    }\r\n    _createClass(DefaultChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData, chunk) {\r\n            var _this17 = this;\r\n            return _ajax2.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    file.request = xhr\r\n                },\r\n                upload: {\r\n                    onloadstart: function() {\r\n                        return _this17._tryRaiseStartLoad(file)\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData({\r\n                    fileName: chunksData.name,\r\n                    blobName: this.fileUploader.option(\"name\"),\r\n                    blob: chunk.blob,\r\n                    index: chunk.index,\r\n                    count: chunksData.count,\r\n                    type: chunksData.type,\r\n                    guid: chunksData.guid,\r\n                    size: chunksData.fileSize\r\n                })\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return this._isStatusError(e.status)\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(options) {\r\n            var formData = new window.FormData;\r\n            formData.append(options.blobName, options.blob);\r\n            formData.append(FILEUPLOADER_CHUNK_META_DATA_NAME, JSON.stringify({\r\n                FileName: options.fileName,\r\n                Index: options.index,\r\n                TotalCount: options.count,\r\n                FileSize: options.size,\r\n                FileType: options.type,\r\n                FileGuid: options.guid\r\n            }));\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar CustomChunksFileUploadStrategy = function(_ChunksFileUploadStra2) {\r\n    _inherits(CustomChunksFileUploadStrategy, _ChunksFileUploadStra2);\r\n    var _super4 = _createSuper(CustomChunksFileUploadStrategy);\r\n\r\n    function CustomChunksFileUploadStrategy() {\r\n        _classCallCheck(this, CustomChunksFileUploadStrategy);\r\n        return _super4.apply(this, arguments)\r\n    }\r\n    _createClass(CustomChunksFileUploadStrategy, [{\r\n        key: \"_sendChunkCore\",\r\n        value: function(file, chunksData) {\r\n            this._tryRaiseStartLoad(file);\r\n            var chunksInfo = this._createChunksInfo(chunksData);\r\n            var uploadChunk = this.fileUploader.option(\"uploadChunk\");\r\n            try {\r\n                var result = uploadChunk(file.value, chunksInfo);\r\n                return (0, _deferred.when)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_createAbortUploadArgument\",\r\n        value: function(file) {\r\n            return this._createChunksInfo(file.chunksData)\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(e) {\r\n            return true\r\n        }\r\n    }, {\r\n        key: \"_createChunksInfo\",\r\n        value: function(chunksData) {\r\n            return {\r\n                bytesUploaded: chunksData.loadedBytes,\r\n                chunkCount: chunksData.count,\r\n                customData: chunksData.customData,\r\n                chunkBlob: chunksData.currentChunk.blob,\r\n                chunkIndex: chunksData.currentChunk.index\r\n            }\r\n        }\r\n    }]);\r\n    return CustomChunksFileUploadStrategy\r\n}(ChunksFileUploadStrategyBase);\r\nvar WholeFileUploadStrategyBase = function(_FileUploadStrategyBa2) {\r\n    _inherits(WholeFileUploadStrategyBase, _FileUploadStrategyBa2);\r\n    var _super5 = _createSuper(WholeFileUploadStrategyBase);\r\n\r\n    function WholeFileUploadStrategyBase() {\r\n        _classCallCheck(this, WholeFileUploadStrategyBase);\r\n        return _super5.apply(this, arguments)\r\n    }\r\n    _createClass(WholeFileUploadStrategyBase, [{\r\n        key: \"_uploadCore\",\r\n        value: function(file) {\r\n            var _this18 = this;\r\n            file.loadedSize = 0;\r\n            this._uploadFile(file).done(function() {\r\n                if (!file.isAborted) {\r\n                    file.onLoad.fire()\r\n                }\r\n            }).fail(function(error) {\r\n                if (_this18._shouldHandleError(file, error)) {\r\n                    _this18._handleFileError(file, error)\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_uploadFile\",\r\n        value: function(file) {}\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {}\r\n    }, {\r\n        key: \"_handleProgress\",\r\n        value: function(file, e) {\r\n            if (file._isError) {\r\n                return\r\n            }\r\n            file._isProgressStarted = true;\r\n            file.onProgress.fire(e)\r\n        }\r\n    }, {\r\n        key: \"_getLoadedData\",\r\n        value: function(loaded, total, segmentSize, event) {\r\n            var result = _get(_getPrototypeOf(WholeFileUploadStrategyBase.prototype), \"_getLoadedData\", this).call(this, loaded, total, segmentSize, event);\r\n            result.event = event;\r\n            return result\r\n        }\r\n    }]);\r\n    return WholeFileUploadStrategyBase\r\n}(FileUploadStrategyBase);\r\nvar DefaultWholeFileUploadStrategy = function(_WholeFileUploadStrat) {\r\n    _inherits(DefaultWholeFileUploadStrategy, _WholeFileUploadStrat);\r\n    var _super6 = _createSuper(DefaultWholeFileUploadStrategy);\r\n\r\n    function DefaultWholeFileUploadStrategy() {\r\n        _classCallCheck(this, DefaultWholeFileUploadStrategy);\r\n        return _super6.apply(this, arguments)\r\n    }\r\n    _createClass(DefaultWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this19 = this;\r\n            return _ajax2.default.sendRequest({\r\n                url: this.fileUploader.option(\"uploadUrl\"),\r\n                method: this.fileUploader.option(\"uploadMethod\"),\r\n                headers: this.fileUploader.option(\"uploadHeaders\"),\r\n                beforeSend: function(xhr) {\r\n                    file.request = xhr\r\n                },\r\n                upload: {\r\n                    onprogress: function(e) {\r\n                        return _this19._handleProgress(file, e)\r\n                    },\r\n                    onloadstart: function() {\r\n                        return file.onLoadStart.fire()\r\n                    },\r\n                    onabort: function() {\r\n                        return file.onAbort.fire()\r\n                    }\r\n                },\r\n                data: this._createFormData(this.fileUploader.option(\"name\"), file.value)\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return this._isStatusError(e.status) || !file._isProgressStarted\r\n        }\r\n    }, {\r\n        key: \"_createFormData\",\r\n        value: function(fieldName, fieldValue) {\r\n            var formData = new window.FormData;\r\n            formData.append(fieldName, fieldValue, fieldValue.name);\r\n            return formData\r\n        }\r\n    }]);\r\n    return DefaultWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\nvar CustomWholeFileUploadStrategy = function(_WholeFileUploadStrat2) {\r\n    _inherits(CustomWholeFileUploadStrategy, _WholeFileUploadStrat2);\r\n    var _super7 = _createSuper(CustomWholeFileUploadStrategy);\r\n\r\n    function CustomWholeFileUploadStrategy() {\r\n        _classCallCheck(this, CustomWholeFileUploadStrategy);\r\n        return _super7.apply(this, arguments)\r\n    }\r\n    _createClass(CustomWholeFileUploadStrategy, [{\r\n        key: \"_uploadFile\",\r\n        value: function(file) {\r\n            var _this20 = this;\r\n            file.onLoadStart.fire();\r\n            var progressCallback = function(loadedBytes) {\r\n                var arg = {\r\n                    loaded: loadedBytes,\r\n                    total: file.size\r\n                };\r\n                _this20._handleProgress(file, arg)\r\n            };\r\n            var uploadFile = this.fileUploader.option(\"uploadFile\");\r\n            try {\r\n                var result = uploadFile(file, progressCallback);\r\n                return (0, _deferred.when)(result)\r\n            } catch (error) {\r\n                return (new _deferred.Deferred).reject(error).promise()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_shouldHandleError\",\r\n        value: function(file, e) {\r\n            return true\r\n        }\r\n    }]);\r\n    return CustomWholeFileUploadStrategy\r\n}(WholeFileUploadStrategyBase);\r\n(0, _component_registrator2.default)(\"dxFileUploader\", FileUploader);\r\nmodule.exports = FileUploader;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}