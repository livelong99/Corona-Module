{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar eventsEngine = require(\"../../events/core/events_engine\");\n\nvar noop = require(\"../../core/utils/common\").noop;\n\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\n\nvar abstract = EditDecorator.abstract;\n\nvar eventUtils = require(\"../../events/utils\");\n\nvar pointerEvents = require(\"../../events/pointer\");\n\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\n\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\nvar POINTER_DOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, LIST_EDIT_DECORATOR);\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\nvar LIST_ITEM_CONTENT_CLASS = \"dx-list-item-content\";\nvar SWITCHABLE_DELETE_READY_CLASS = \"dx-list-switchable-delete-ready\";\nvar SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-shield-positioning\";\nvar SWITCHABLE_DELETE_TOP_SHIELD_CLASS = \"dx-list-switchable-delete-top-shield\";\nvar SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS = \"dx-list-switchable-delete-bottom-shield\";\nvar SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-item-shield-positioning\";\nvar SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS = \"dx-list-switchable-delete-item-content-shield\";\nvar SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS = \"dx-list-switchable-delete-button-container\";\nvar SwitchableEditDecorator = EditDecorator.inherit({\n  _init: function _init() {\n    this._$topShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_TOP_SHIELD_CLASS);\n    this._$bottomShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS);\n    this._$itemContentShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS);\n    eventsEngine.on(this._$topShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\n    eventsEngine.on(this._$bottomShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\n\n    this._list.$element().append(this._$topShield.toggle(false)).append(this._$bottomShield.toggle(false));\n  },\n  handleClick: function handleClick() {\n    return this._cancelDeleteReadyItem();\n  },\n  _cancelDeleteReadyItem: function _cancelDeleteReadyItem() {\n    if (!this._$readyToDeleteItem) {\n      return false;\n    }\n\n    this._cancelDelete(this._$readyToDeleteItem);\n\n    return true;\n  },\n  _cancelDelete: function _cancelDelete($itemElement) {\n    this._toggleDeleteReady($itemElement, false);\n  },\n  _toggleDeleteReady: function _toggleDeleteReady($itemElement, readyToDelete) {\n    if (void 0 === readyToDelete) {\n      readyToDelete = !this._isReadyToDelete($itemElement);\n    }\n\n    this._toggleShields($itemElement, readyToDelete);\n\n    this._toggleScrolling(readyToDelete);\n\n    this._cacheReadyToDeleteItem($itemElement, readyToDelete);\n\n    this._animateToggleDelete($itemElement, readyToDelete);\n  },\n  _isReadyToDelete: function _isReadyToDelete($itemElement) {\n    return $itemElement.hasClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _toggleShields: function _toggleShields($itemElement, enabled) {\n    this._list.$element().toggleClass(SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS, enabled);\n\n    this._$topShield.toggle(enabled);\n\n    this._$bottomShield.toggle(enabled);\n\n    if (enabled) {\n      this._updateShieldsHeight($itemElement);\n    }\n\n    this._toggleContentShield($itemElement, enabled);\n  },\n  _updateShieldsHeight: function _updateShieldsHeight($itemElement) {\n    var $list = this._list.$element();\n\n    var listTopOffset = $list.offset().top;\n    var listHeight = $list.outerHeight();\n    var itemTopOffset = $itemElement.offset().top;\n    var itemHeight = $itemElement.outerHeight();\n    var dirtyTopShieldHeight = itemTopOffset - listTopOffset;\n    var dirtyBottomShieldHeight = listHeight - itemHeight - dirtyTopShieldHeight;\n\n    this._$topShield.height(Math.max(dirtyTopShieldHeight, 0));\n\n    this._$bottomShield.height(Math.max(dirtyBottomShieldHeight, 0));\n  },\n  _toggleContentShield: function _toggleContentShield($itemElement, enabled) {\n    if (enabled) {\n      $itemElement.find(\".\" + LIST_ITEM_CONTENT_CLASS).first().append(this._$itemContentShield);\n    } else {\n      this._$itemContentShield.detach();\n    }\n  },\n  _toggleScrolling: function _toggleScrolling(readyToDelete) {\n    var scrollView = this._list.$element().dxScrollView(\"instance\");\n\n    if (readyToDelete) {\n      scrollView.on(\"start\", this._cancelScrolling);\n    } else {\n      scrollView.off(\"start\", this._cancelScrolling);\n    }\n  },\n  _cancelScrolling: function _cancelScrolling(args) {\n    args.event.cancel = true;\n  },\n  _cacheReadyToDeleteItem: function _cacheReadyToDeleteItem($itemElement, cache) {\n    if (cache) {\n      this._$readyToDeleteItem = $itemElement;\n    } else {\n      delete this._$readyToDeleteItem;\n    }\n  },\n  _animateToggleDelete: function _animateToggleDelete($itemElement, readyToDelete) {\n    if (readyToDelete) {\n      this._enablePositioning($itemElement);\n\n      this._prepareDeleteReady($itemElement);\n\n      this._animatePrepareDeleteReady($itemElement);\n\n      eventsEngine.off($itemElement, pointerEvents.up);\n    } else {\n      this._forgetDeleteReady($itemElement);\n\n      this._animateForgetDeleteReady($itemElement).done(this._disablePositioning.bind(this, $itemElement));\n    }\n  },\n  _enablePositioning: function _enablePositioning($itemElement) {\n    $itemElement.addClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\n    eventsEngine.on($itemElement, ACTIVE_EVENT_NAME, noop);\n    eventsEngine.one($itemElement, pointerEvents.up, this._disablePositioning.bind(this, $itemElement));\n  },\n  _disablePositioning: function _disablePositioning($itemElement) {\n    $itemElement.removeClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\n    eventsEngine.off($itemElement, ACTIVE_EVENT_NAME);\n  },\n  _prepareDeleteReady: function _prepareDeleteReady($itemElement) {\n    $itemElement.addClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _forgetDeleteReady: function _forgetDeleteReady($itemElement) {\n    $itemElement.removeClass(SWITCHABLE_DELETE_READY_CLASS);\n  },\n  _animatePrepareDeleteReady: abstract,\n  _animateForgetDeleteReady: abstract,\n  _getDeleteButtonContainer: function _getDeleteButtonContainer($itemElement) {\n    $itemElement = $itemElement || this._$readyToDeleteItem;\n    return $itemElement.children(\".\" + SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS);\n  },\n  _deleteItem: function _deleteItem($itemElement) {\n    $itemElement = $itemElement || this._$readyToDeleteItem;\n\n    this._getDeleteButtonContainer($itemElement).detach();\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    this._list.deleteItem($itemElement).always(this._cancelDelete.bind(this, $itemElement));\n  },\n  _isRtlEnabled: function _isRtlEnabled() {\n    return this._list.option(\"rtlEnabled\");\n  },\n  dispose: function dispose() {\n    if (this._$topShield) {\n      this._$topShield.remove();\n    }\n\n    if (this._$bottomShield) {\n      this._$bottomShield.remove();\n    }\n\n    this.callBase.apply(this, arguments);\n  }\n});\nmodule.exports = SwitchableEditDecorator;","map":{"version":3,"sources":["C:/Users/va112/Documents/Webdev/React/Corona/node_modules/devextreme/ui/list/ui.list.edit.decorator.switchable.js"],"names":["$","require","eventsEngine","noop","EditDecorator","abstract","eventUtils","pointerEvents","feedbackEvents","LIST_EDIT_DECORATOR","POINTER_DOWN_EVENT_NAME","addNamespace","down","ACTIVE_EVENT_NAME","active","LIST_ITEM_CONTENT_CLASS","SWITCHABLE_DELETE_READY_CLASS","SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS","SWITCHABLE_DELETE_TOP_SHIELD_CLASS","SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS","SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS","SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS","SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS","SwitchableEditDecorator","inherit","_init","_$topShield","addClass","_$bottomShield","_$itemContentShield","on","_cancelDeleteReadyItem","bind","_list","$element","append","toggle","handleClick","_$readyToDeleteItem","_cancelDelete","$itemElement","_toggleDeleteReady","readyToDelete","_isReadyToDelete","_toggleShields","_toggleScrolling","_cacheReadyToDeleteItem","_animateToggleDelete","hasClass","enabled","toggleClass","_updateShieldsHeight","_toggleContentShield","$list","listTopOffset","offset","top","listHeight","outerHeight","itemTopOffset","itemHeight","dirtyTopShieldHeight","dirtyBottomShieldHeight","height","Math","max","find","first","detach","scrollView","dxScrollView","_cancelScrolling","off","args","event","cancel","cache","_enablePositioning","_prepareDeleteReady","_animatePrepareDeleteReady","up","_forgetDeleteReady","_animateForgetDeleteReady","done","_disablePositioning","one","removeClass","_getDeleteButtonContainer","children","_deleteItem","is","deleteItem","always","_isRtlEnabled","option","dispose","remove","callBase","apply","arguments","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.decorator.switchable.js)\r\n * Version: 19.2.7\r\n * Build date: Thu Mar 26 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar $ = require(\"../../core/renderer\");\r\nvar eventsEngine = require(\"../../events/core/events_engine\");\r\nvar noop = require(\"../../core/utils/common\").noop;\r\nvar EditDecorator = require(\"./ui.list.edit.decorator\");\r\nvar abstract = EditDecorator.abstract;\r\nvar eventUtils = require(\"../../events/utils\");\r\nvar pointerEvents = require(\"../../events/pointer\");\r\nvar feedbackEvents = require(\"../../events/core/emitter.feedback\");\r\nvar LIST_EDIT_DECORATOR = \"dxListEditDecorator\";\r\nvar POINTER_DOWN_EVENT_NAME = eventUtils.addNamespace(pointerEvents.down, LIST_EDIT_DECORATOR);\r\nvar ACTIVE_EVENT_NAME = eventUtils.addNamespace(feedbackEvents.active, LIST_EDIT_DECORATOR);\r\nvar LIST_ITEM_CONTENT_CLASS = \"dx-list-item-content\";\r\nvar SWITCHABLE_DELETE_READY_CLASS = \"dx-list-switchable-delete-ready\";\r\nvar SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-shield-positioning\";\r\nvar SWITCHABLE_DELETE_TOP_SHIELD_CLASS = \"dx-list-switchable-delete-top-shield\";\r\nvar SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS = \"dx-list-switchable-delete-bottom-shield\";\r\nvar SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS = \"dx-list-switchable-menu-item-shield-positioning\";\r\nvar SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS = \"dx-list-switchable-delete-item-content-shield\";\r\nvar SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS = \"dx-list-switchable-delete-button-container\";\r\nvar SwitchableEditDecorator = EditDecorator.inherit({\r\n    _init: function() {\r\n        this._$topShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_TOP_SHIELD_CLASS);\r\n        this._$bottomShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_BOTTOM_SHIELD_CLASS);\r\n        this._$itemContentShield = $(\"<div>\").addClass(SWITCHABLE_DELETE_ITEM_CONTENT_SHIELD_CLASS);\r\n        eventsEngine.on(this._$topShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\r\n        eventsEngine.on(this._$bottomShield, POINTER_DOWN_EVENT_NAME, this._cancelDeleteReadyItem.bind(this));\r\n        this._list.$element().append(this._$topShield.toggle(false)).append(this._$bottomShield.toggle(false))\r\n    },\r\n    handleClick: function() {\r\n        return this._cancelDeleteReadyItem()\r\n    },\r\n    _cancelDeleteReadyItem: function() {\r\n        if (!this._$readyToDeleteItem) {\r\n            return false\r\n        }\r\n        this._cancelDelete(this._$readyToDeleteItem);\r\n        return true\r\n    },\r\n    _cancelDelete: function($itemElement) {\r\n        this._toggleDeleteReady($itemElement, false)\r\n    },\r\n    _toggleDeleteReady: function($itemElement, readyToDelete) {\r\n        if (void 0 === readyToDelete) {\r\n            readyToDelete = !this._isReadyToDelete($itemElement)\r\n        }\r\n        this._toggleShields($itemElement, readyToDelete);\r\n        this._toggleScrolling(readyToDelete);\r\n        this._cacheReadyToDeleteItem($itemElement, readyToDelete);\r\n        this._animateToggleDelete($itemElement, readyToDelete)\r\n    },\r\n    _isReadyToDelete: function($itemElement) {\r\n        return $itemElement.hasClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _toggleShields: function($itemElement, enabled) {\r\n        this._list.$element().toggleClass(SWITCHABLE_MENU_SHIELD_POSITIONING_CLASS, enabled);\r\n        this._$topShield.toggle(enabled);\r\n        this._$bottomShield.toggle(enabled);\r\n        if (enabled) {\r\n            this._updateShieldsHeight($itemElement)\r\n        }\r\n        this._toggleContentShield($itemElement, enabled)\r\n    },\r\n    _updateShieldsHeight: function($itemElement) {\r\n        var $list = this._list.$element();\r\n        var listTopOffset = $list.offset().top;\r\n        var listHeight = $list.outerHeight();\r\n        var itemTopOffset = $itemElement.offset().top;\r\n        var itemHeight = $itemElement.outerHeight();\r\n        var dirtyTopShieldHeight = itemTopOffset - listTopOffset;\r\n        var dirtyBottomShieldHeight = listHeight - itemHeight - dirtyTopShieldHeight;\r\n        this._$topShield.height(Math.max(dirtyTopShieldHeight, 0));\r\n        this._$bottomShield.height(Math.max(dirtyBottomShieldHeight, 0))\r\n    },\r\n    _toggleContentShield: function($itemElement, enabled) {\r\n        if (enabled) {\r\n            $itemElement.find(\".\" + LIST_ITEM_CONTENT_CLASS).first().append(this._$itemContentShield)\r\n        } else {\r\n            this._$itemContentShield.detach()\r\n        }\r\n    },\r\n    _toggleScrolling: function(readyToDelete) {\r\n        var scrollView = this._list.$element().dxScrollView(\"instance\");\r\n        if (readyToDelete) {\r\n            scrollView.on(\"start\", this._cancelScrolling)\r\n        } else {\r\n            scrollView.off(\"start\", this._cancelScrolling)\r\n        }\r\n    },\r\n    _cancelScrolling: function(args) {\r\n        args.event.cancel = true\r\n    },\r\n    _cacheReadyToDeleteItem: function($itemElement, cache) {\r\n        if (cache) {\r\n            this._$readyToDeleteItem = $itemElement\r\n        } else {\r\n            delete this._$readyToDeleteItem\r\n        }\r\n    },\r\n    _animateToggleDelete: function($itemElement, readyToDelete) {\r\n        if (readyToDelete) {\r\n            this._enablePositioning($itemElement);\r\n            this._prepareDeleteReady($itemElement);\r\n            this._animatePrepareDeleteReady($itemElement);\r\n            eventsEngine.off($itemElement, pointerEvents.up)\r\n        } else {\r\n            this._forgetDeleteReady($itemElement);\r\n            this._animateForgetDeleteReady($itemElement).done(this._disablePositioning.bind(this, $itemElement))\r\n        }\r\n    },\r\n    _enablePositioning: function($itemElement) {\r\n        $itemElement.addClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\r\n        eventsEngine.on($itemElement, ACTIVE_EVENT_NAME, noop);\r\n        eventsEngine.one($itemElement, pointerEvents.up, this._disablePositioning.bind(this, $itemElement))\r\n    },\r\n    _disablePositioning: function($itemElement) {\r\n        $itemElement.removeClass(SWITCHABLE_MENU_ITEM_SHIELD_POSITIONING_CLASS);\r\n        eventsEngine.off($itemElement, ACTIVE_EVENT_NAME)\r\n    },\r\n    _prepareDeleteReady: function($itemElement) {\r\n        $itemElement.addClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _forgetDeleteReady: function($itemElement) {\r\n        $itemElement.removeClass(SWITCHABLE_DELETE_READY_CLASS)\r\n    },\r\n    _animatePrepareDeleteReady: abstract,\r\n    _animateForgetDeleteReady: abstract,\r\n    _getDeleteButtonContainer: function($itemElement) {\r\n        $itemElement = $itemElement || this._$readyToDeleteItem;\r\n        return $itemElement.children(\".\" + SWITCHABLE_DELETE_BUTTON_CONTAINER_CLASS)\r\n    },\r\n    _deleteItem: function($itemElement) {\r\n        $itemElement = $itemElement || this._$readyToDeleteItem;\r\n        this._getDeleteButtonContainer($itemElement).detach();\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        this._list.deleteItem($itemElement).always(this._cancelDelete.bind(this, $itemElement))\r\n    },\r\n    _isRtlEnabled: function() {\r\n        return this._list.option(\"rtlEnabled\")\r\n    },\r\n    dispose: function() {\r\n        if (this._$topShield) {\r\n            this._$topShield.remove()\r\n        }\r\n        if (this._$bottomShield) {\r\n            this._$bottomShield.remove()\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n});\r\nmodule.exports = SwitchableEditDecorator;\r\n"]},"metadata":{},"sourceType":"script"}